var Xg=h=>{throw TypeError(h)};var Gu=(h,t,i)=>t.has(h)||Xg("Cannot "+i);var $t=(h,t,i)=>(Gu(h,t,"read from private field"),i?i.call(h):t.get(h)),Ei=(h,t,i)=>t.has(h)?Xg("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(h):t.set(h,i),Fe=(h,t,i,s)=>(Gu(h,t,"write to private field"),s?s.call(h,i):t.set(h,i),i),Ti=(h,t,i)=>(Gu(h,t,"access private method"),i);var Yg=(h,t,i,s)=>({set _(r){Fe(h,t,r,i)},get _(){return $t(h,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function i(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=i(r);fetch(r.href,o)}})();var Vu={exports:{}},tr={};var qg;function lv(){if(qg)return tr;qg=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(s,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var u in r)u!=="key"&&(o[u]=r[u])}else o=r;return r=o.ref,{$$typeof:h,type:s,key:l,ref:r!==void 0?r:null,props:o}}return tr.Fragment=t,tr.jsx=i,tr.jsxs=i,tr}var $g;function cv(){return $g||($g=1,Vu.exports=lv()),Vu.exports}var G=cv(),Xu={exports:{}},gt={};var Kg;function uv(){if(Kg)return gt;Kg=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function A(D){return D===null||typeof D!="object"?null:(D=b&&D[b]||D["@@iterator"],typeof D=="function"?D:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,T={};function E(D,H,W){this.props=D,this.context=H,this.refs=T,this.updater=W||w}E.prototype.isReactComponent={},E.prototype.setState=function(D,H){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,H,"setState")},E.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function x(){}x.prototype=E.prototype;function C(D,H,W){this.props=D,this.context=H,this.refs=T,this.updater=W||w}var O=C.prototype=new x;O.constructor=C,S(O,E.prototype),O.isPureReactComponent=!0;var L=Array.isArray;function N(){}var z={H:null,A:null,T:null,S:null},$=Object.prototype.hasOwnProperty;function K(D,H,W){var tt=W.ref;return{$$typeof:h,type:D,key:H,ref:tt!==void 0?tt:null,props:W}}function J(D,H){return K(D.type,H,D.props)}function Q(D){return typeof D=="object"&&D!==null&&D.$$typeof===h}function ht(D){var H={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(W){return H[W]})}var xt=/\/+/g;function dt(D,H){return typeof D=="object"&&D!==null&&D.key!=null?ht(""+D.key):H.toString(36)}function Mt(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(N,N):(D.status="pending",D.then(function(H){D.status==="pending"&&(D.status="fulfilled",D.value=H)},function(H){D.status==="pending"&&(D.status="rejected",D.reason=H)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function k(D,H,W,tt,ot){var ut=typeof D;(ut==="undefined"||ut==="boolean")&&(D=null);var lt=!1;if(D===null)lt=!0;else switch(ut){case"bigint":case"string":case"number":lt=!0;break;case"object":switch(D.$$typeof){case h:case t:lt=!0;break;case g:return lt=D._init,k(lt(D._payload),H,W,tt,ot)}}if(lt)return ot=ot(D),lt=tt===""?"."+dt(D,0):tt,L(ot)?(W="",lt!=null&&(W=lt.replace(xt,"$&/")+"/"),k(ot,H,W,"",function(Nn){return Nn})):ot!=null&&(Q(ot)&&(ot=J(ot,W+(ot.key==null||D&&D.key===ot.key?"":(""+ot.key).replace(xt,"$&/")+"/")+lt)),H.push(ot)),1;lt=0;var ie=tt===""?".":tt+":";if(L(D))for(var Gt=0;Gt<D.length;Gt++)tt=D[Gt],ut=ie+dt(tt,Gt),lt+=k(tt,H,W,ut,ot);else if(Gt=A(D),typeof Gt=="function")for(D=Gt.call(D),Gt=0;!(tt=D.next()).done;)tt=tt.value,ut=ie+dt(tt,Gt++),lt+=k(tt,H,W,ut,ot);else if(ut==="object"){if(typeof D.then=="function")return k(Mt(D),H,W,tt,ot);throw H=String(D),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return lt}function V(D,H,W){if(D==null)return D;var tt=[],ot=0;return k(D,tt,"","",function(ut){return H.call(W,ut,ot++)}),tt}function Z(D){if(D._status===-1){var H=D._result;H=H(),H.then(function(W){(D._status===0||D._status===-1)&&(D._status=1,D._result=W)},function(W){(D._status===0||D._status===-1)&&(D._status=2,D._result=W)}),D._status===-1&&(D._status=0,D._result=H)}if(D._status===1)return D._result.default;throw D._result}var yt=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},At={map:V,forEach:function(D,H,W){V(D,function(){H.apply(this,arguments)},W)},count:function(D){var H=0;return V(D,function(){H++}),H},toArray:function(D){return V(D,function(H){return H})||[]},only:function(D){if(!Q(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return gt.Activity=y,gt.Children=At,gt.Component=E,gt.Fragment=i,gt.Profiler=r,gt.PureComponent=C,gt.StrictMode=s,gt.Suspense=d,gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,gt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return z.H.useMemoCache(D)}},gt.cache=function(D){return function(){return D.apply(null,arguments)}},gt.cacheSignal=function(){return null},gt.cloneElement=function(D,H,W){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var tt=S({},D.props),ot=D.key;if(H!=null)for(ut in H.key!==void 0&&(ot=""+H.key),H)!$.call(H,ut)||ut==="key"||ut==="__self"||ut==="__source"||ut==="ref"&&H.ref===void 0||(tt[ut]=H[ut]);var ut=arguments.length-2;if(ut===1)tt.children=W;else if(1<ut){for(var lt=Array(ut),ie=0;ie<ut;ie++)lt[ie]=arguments[ie+2];tt.children=lt}return K(D.type,ot,tt)},gt.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:o,_context:D},D},gt.createElement=function(D,H,W){var tt,ot={},ut=null;if(H!=null)for(tt in H.key!==void 0&&(ut=""+H.key),H)$.call(H,tt)&&tt!=="key"&&tt!=="__self"&&tt!=="__source"&&(ot[tt]=H[tt]);var lt=arguments.length-2;if(lt===1)ot.children=W;else if(1<lt){for(var ie=Array(lt),Gt=0;Gt<lt;Gt++)ie[Gt]=arguments[Gt+2];ot.children=ie}if(D&&D.defaultProps)for(tt in lt=D.defaultProps,lt)ot[tt]===void 0&&(ot[tt]=lt[tt]);return K(D,ut,ot)},gt.createRef=function(){return{current:null}},gt.forwardRef=function(D){return{$$typeof:u,render:D}},gt.isValidElement=Q,gt.lazy=function(D){return{$$typeof:g,_payload:{_status:-1,_result:D},_init:Z}},gt.memo=function(D,H){return{$$typeof:f,type:D,compare:H===void 0?null:H}},gt.startTransition=function(D){var H=z.T,W={};z.T=W;try{var tt=D(),ot=z.S;ot!==null&&ot(W,tt),typeof tt=="object"&&tt!==null&&typeof tt.then=="function"&&tt.then(N,yt)}catch(ut){yt(ut)}finally{H!==null&&W.types!==null&&(H.types=W.types),z.T=H}},gt.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},gt.use=function(D){return z.H.use(D)},gt.useActionState=function(D,H,W){return z.H.useActionState(D,H,W)},gt.useCallback=function(D,H){return z.H.useCallback(D,H)},gt.useContext=function(D){return z.H.useContext(D)},gt.useDebugValue=function(){},gt.useDeferredValue=function(D,H){return z.H.useDeferredValue(D,H)},gt.useEffect=function(D,H){return z.H.useEffect(D,H)},gt.useEffectEvent=function(D){return z.H.useEffectEvent(D)},gt.useId=function(){return z.H.useId()},gt.useImperativeHandle=function(D,H,W){return z.H.useImperativeHandle(D,H,W)},gt.useInsertionEffect=function(D,H){return z.H.useInsertionEffect(D,H)},gt.useLayoutEffect=function(D,H){return z.H.useLayoutEffect(D,H)},gt.useMemo=function(D,H){return z.H.useMemo(D,H)},gt.useOptimistic=function(D,H){return z.H.useOptimistic(D,H)},gt.useReducer=function(D,H,W){return z.H.useReducer(D,H,W)},gt.useRef=function(D){return z.H.useRef(D)},gt.useState=function(D){return z.H.useState(D)},gt.useSyncExternalStore=function(D,H,W){return z.H.useSyncExternalStore(D,H,W)},gt.useTransition=function(){return z.H.useTransition()},gt.version="19.2.4",gt}var Wg;function Eh(){return Wg||(Wg=1,Xu.exports=uv()),Xu.exports}var j=Eh(),Yu={exports:{}},er={},qu={exports:{}},$u={};var Qg;function hv(){return Qg||(Qg=1,(function(h){function t(k,V){var Z=k.length;k.push(V);t:for(;0<Z;){var yt=Z-1>>>1,At=k[yt];if(0<r(At,V))k[yt]=V,k[Z]=At,Z=yt;else break t}}function i(k){return k.length===0?null:k[0]}function s(k){if(k.length===0)return null;var V=k[0],Z=k.pop();if(Z!==V){k[0]=Z;t:for(var yt=0,At=k.length,D=At>>>1;yt<D;){var H=2*(yt+1)-1,W=k[H],tt=H+1,ot=k[tt];if(0>r(W,Z))tt<At&&0>r(ot,W)?(k[yt]=ot,k[tt]=Z,yt=tt):(k[yt]=W,k[H]=Z,yt=H);else if(tt<At&&0>r(ot,Z))k[yt]=ot,k[tt]=Z,yt=tt;else break t}}return V}function r(k,V){var Z=k.sortIndex-V.sortIndex;return Z!==0?Z:k.id-V.id}if(h.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;h.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();h.unstable_now=function(){return l.now()-u}}var d=[],f=[],g=1,y=null,b=3,A=!1,w=!1,S=!1,T=!1,E=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function O(k){for(var V=i(f);V!==null;){if(V.callback===null)s(f);else if(V.startTime<=k)s(f),V.sortIndex=V.expirationTime,t(d,V);else break;V=i(f)}}function L(k){if(S=!1,O(k),!w)if(i(d)!==null)w=!0,N||(N=!0,ht());else{var V=i(f);V!==null&&Mt(L,V.startTime-k)}}var N=!1,z=-1,$=5,K=-1;function J(){return T?!0:!(h.unstable_now()-K<$)}function Q(){if(T=!1,N){var k=h.unstable_now();K=k;var V=!0;try{t:{w=!1,S&&(S=!1,x(z),z=-1),A=!0;var Z=b;try{e:{for(O(k),y=i(d);y!==null&&!(y.expirationTime>k&&J());){var yt=y.callback;if(typeof yt=="function"){y.callback=null,b=y.priorityLevel;var At=yt(y.expirationTime<=k);if(k=h.unstable_now(),typeof At=="function"){y.callback=At,O(k),V=!0;break e}y===i(d)&&s(d),O(k)}else s(d);y=i(d)}if(y!==null)V=!0;else{var D=i(f);D!==null&&Mt(L,D.startTime-k),V=!1}}break t}finally{y=null,b=Z,A=!1}V=void 0}}finally{V?ht():N=!1}}}var ht;if(typeof C=="function")ht=function(){C(Q)};else if(typeof MessageChannel<"u"){var xt=new MessageChannel,dt=xt.port2;xt.port1.onmessage=Q,ht=function(){dt.postMessage(null)}}else ht=function(){E(Q,0)};function Mt(k,V){z=E(function(){k(h.unstable_now())},V)}h.unstable_IdlePriority=5,h.unstable_ImmediatePriority=1,h.unstable_LowPriority=4,h.unstable_NormalPriority=3,h.unstable_Profiling=null,h.unstable_UserBlockingPriority=2,h.unstable_cancelCallback=function(k){k.callback=null},h.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<k?Math.floor(1e3/k):5},h.unstable_getCurrentPriorityLevel=function(){return b},h.unstable_next=function(k){switch(b){case 1:case 2:case 3:var V=3;break;default:V=b}var Z=b;b=V;try{return k()}finally{b=Z}},h.unstable_requestPaint=function(){T=!0},h.unstable_runWithPriority=function(k,V){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var Z=b;b=k;try{return V()}finally{b=Z}},h.unstable_scheduleCallback=function(k,V,Z){var yt=h.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?yt+Z:yt):Z=yt,k){case 1:var At=-1;break;case 2:At=250;break;case 5:At=1073741823;break;case 4:At=1e4;break;default:At=5e3}return At=Z+At,k={id:g++,callback:V,priorityLevel:k,startTime:Z,expirationTime:At,sortIndex:-1},Z>yt?(k.sortIndex=Z,t(f,k),i(d)===null&&k===i(f)&&(S?(x(z),z=-1):S=!0,Mt(L,Z-yt))):(k.sortIndex=At,t(d,k),w||A||(w=!0,N||(N=!0,ht()))),k},h.unstable_shouldYield=J,h.unstable_wrapCallback=function(k){var V=b;return function(){var Z=b;b=V;try{return k.apply(this,arguments)}finally{b=Z}}}})($u)),$u}var Zg;function dv(){return Zg||(Zg=1,qu.exports=hv()),qu.exports}var Ku={exports:{}},xe={};var Jg;function fv(){if(Jg)return xe;Jg=1;var h=Eh();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(d,f,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:d,containerInfo:f,implementation:g}}var l=h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return xe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,xe.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,g)},xe.flushSync=function(d){var f=l.T,g=s.p;try{if(l.T=null,s.p=2,d)return d()}finally{l.T=f,s.p=g,s.d.f()}},xe.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(d,f))},xe.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},xe.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?s.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:A}):g==="script"&&s.d.X(d,{crossOrigin:y,integrity:b,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},xe.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);s.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(d)},xe.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin);s.d.L(d,g,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},xe.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=u(f.as,f.crossOrigin);s.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(d)},xe.requestFormReset=function(d){s.d.r(d)},xe.unstable_batchedUpdates=function(d,f){return d(f)},xe.useFormState=function(d,f,g){return l.H.useFormState(d,f,g)},xe.useFormStatus=function(){return l.H.useHostTransitionStatus()},xe.version="19.2.4",xe}var tm;function pv(){if(tm)return Ku.exports;tm=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),Ku.exports=fv(),Ku.exports}var em;function gv(){if(em)return er;em=1;var h=dv(),t=Eh(),i=pv();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function l(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function u(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function d(e){if(o(e)!==e)throw Error(s(188))}function f(e){var n=e.alternate;if(!n){if(n=o(e),n===null)throw Error(s(188));return n!==e?null:e}for(var a=e,c=n;;){var p=a.return;if(p===null)break;var m=p.alternate;if(m===null){if(c=p.return,c!==null){a=c;continue}break}if(p.child===m.child){for(m=p.child;m;){if(m===a)return d(p),e;if(m===c)return d(p),n;m=m.sibling}throw Error(s(188))}if(a.return!==c.return)a=p,c=m;else{for(var v=!1,_=p.child;_;){if(_===a){v=!0,a=p,c=m;break}if(_===c){v=!0,c=p,a=m;break}_=_.sibling}if(!v){for(_=m.child;_;){if(_===a){v=!0,a=m,c=p;break}if(_===c){v=!0,c=m,a=p;break}_=_.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==c)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:n}function g(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=g(e),n!==null)return n;e=e.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),x=Symbol.for("react.consumer"),C=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function ht(e){return e===null||typeof e!="object"?null:(e=Q&&e[Q]||e["@@iterator"],typeof e=="function"?e:null)}var xt=Symbol.for("react.client.reference");function dt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===xt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case E:return"Profiler";case T:return"StrictMode";case L:return"Suspense";case N:return"SuspenseList";case K:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case C:return e.displayName||"Context";case x:return(e._context.displayName||"Context")+".Consumer";case O:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case z:return n=e.displayName||null,n!==null?n:dt(e.type)||"Memo";case $:n=e._payload,e=e._init;try{return dt(e(n))}catch{}}return null}var Mt=Array.isArray,k=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},yt=[],At=-1;function D(e){return{current:e}}function H(e){0>At||(e.current=yt[At],yt[At]=null,At--)}function W(e,n){At++,yt[At]=e.current,e.current=n}var tt=D(null),ot=D(null),ut=D(null),lt=D(null);function ie(e,n){switch(W(ut,n),W(ot,e),W(tt,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?pg(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=pg(n),e=gg(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(tt),W(tt,e)}function Gt(){H(tt),H(ot),H(ut)}function Nn(e){e.memoizedState!==null&&W(lt,e);var n=tt.current,a=gg(n,e.type);n!==a&&(W(ot,e),W(tt,a))}function nn(e){ot.current===e&&(H(tt),H(ot)),lt.current===e&&(H(lt),Wa._currentValue=Z)}var kn,oa;function Li(e){if(kn===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);kn=n&&n[1]||"",oa=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+kn+e+oa}var Cl=!1;function xl(e,n){if(!e||Cl)return"";Cl=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(n){var q=function(){throw Error()};if(Object.defineProperty(q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(q,[])}catch(I){var U=I}Reflect.construct(e,[],q)}else{try{q.call()}catch(I){U=I}e.call(q.prototype)}}else{try{throw Error()}catch(I){U=I}(q=e())&&typeof q.catch=="function"&&q.catch(function(){})}}catch(I){if(I&&U&&typeof I.stack=="string")return[I.stack,U.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),v=m[0],_=m[1];if(v&&_){var M=v.split(`
`),F=_.split(`
`);for(p=c=0;c<M.length&&!M[c].includes("DetermineComponentFrameRoot");)c++;for(;p<F.length&&!F[p].includes("DetermineComponentFrameRoot");)p++;if(c===M.length||p===F.length)for(c=M.length-1,p=F.length-1;1<=c&&0<=p&&M[c]!==F[p];)p--;for(;1<=c&&0<=p;c--,p--)if(M[c]!==F[p]){if(c!==1||p!==1)do if(c--,p--,0>p||M[c]!==F[p]){var X=`
`+M[c].replace(" at new "," at ");return e.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",e.displayName)),X}while(1<=c&&0<=p);break}}}finally{Cl=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Li(a):""}function Uy(e,n){switch(e.tag){case 26:case 27:case 5:return Li(e.type);case 16:return Li("Lazy");case 13:return e.child!==n&&n!==null?Li("Suspense Fallback"):Li("Suspense");case 19:return Li("SuspenseList");case 0:case 15:return xl(e.type,!1);case 11:return xl(e.type.render,!1);case 1:return xl(e.type,!0);case 31:return Li("Activity");default:return""}}function Vh(e){try{var n="",a=null;do n+=Uy(e,a),a=e,e=e.return;while(e);return n}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ml=Object.prototype.hasOwnProperty,Dl=h.unstable_scheduleCallback,Rl=h.unstable_cancelCallback,Iy=h.unstable_shouldYield,Hy=h.unstable_requestPaint,He=h.unstable_now,jy=h.unstable_getCurrentPriorityLevel,Xh=h.unstable_ImmediatePriority,Yh=h.unstable_UserBlockingPriority,Mr=h.unstable_NormalPriority,Gy=h.unstable_LowPriority,qh=h.unstable_IdlePriority,Vy=h.log,Xy=h.unstable_setDisableYieldValue,la=null,je=null;function sn(e){if(typeof Vy=="function"&&Xy(e),je&&typeof je.setStrictMode=="function")try{je.setStrictMode(la,e)}catch{}}var Ge=Math.clz32?Math.clz32:$y,Yy=Math.log,qy=Math.LN2;function $y(e){return e>>>=0,e===0?32:31-(Yy(e)/qy|0)|0}var Dr=256,Rr=262144,Lr=4194304;function Bn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Or(e,n,a){var c=e.pendingLanes;if(c===0)return 0;var p=0,m=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var _=c&134217727;return _!==0?(c=_&~m,c!==0?p=Bn(c):(v&=_,v!==0?p=Bn(v):a||(a=_&~e,a!==0&&(p=Bn(a))))):(_=c&~m,_!==0?p=Bn(_):v!==0?p=Bn(v):a||(a=c&~e,a!==0&&(p=Bn(a)))),p===0?0:n!==0&&n!==p&&(n&m)===0&&(m=p&-p,a=n&-n,m>=a||m===32&&(a&4194048)!==0)?n:p}function ca(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Ky(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $h(){var e=Lr;return Lr<<=1,(Lr&62914560)===0&&(Lr=4194304),e}function Ll(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function ua(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Wy(e,n,a,c,p,m){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var _=e.entanglements,M=e.expirationTimes,F=e.hiddenUpdates;for(a=v&~a;0<a;){var X=31-Ge(a),q=1<<X;_[X]=0,M[X]=-1;var U=F[X];if(U!==null)for(F[X]=null,X=0;X<U.length;X++){var I=U[X];I!==null&&(I.lane&=-536870913)}a&=~q}c!==0&&Kh(e,c,0),m!==0&&p===0&&e.tag!==0&&(e.suspendedLanes|=m&~(v&~n))}function Kh(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var c=31-Ge(n);e.entangledLanes|=n,e.entanglements[c]=e.entanglements[c]|1073741824|a&261930}function Wh(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var c=31-Ge(a),p=1<<c;p&n|e[c]&n&&(e[c]|=n),a&=~p}}function Qh(e,n){var a=n&-n;return a=(a&42)!==0?1:Ol(a),(a&(e.suspendedLanes|n))!==0?0:a}function Ol(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Nl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Zh(){var e=V.p;return e!==0?e:(e=window.event,e===void 0?32:Fg(e.type))}function Jh(e,n){var a=V.p;try{return V.p=e,n()}finally{V.p=a}}var an=Math.random().toString(36).slice(2),ve="__reactFiber$"+an,Le="__reactProps$"+an,ls="__reactContainer$"+an,kl="__reactEvents$"+an,Qy="__reactListeners$"+an,Zy="__reactHandles$"+an,td="__reactResources$"+an,ha="__reactMarker$"+an;function Bl(e){delete e[ve],delete e[Le],delete e[kl],delete e[Qy],delete e[Zy]}function cs(e){var n=e[ve];if(n)return n;for(var a=e.parentNode;a;){if(n=a[ls]||a[ve]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=wg(e);e!==null;){if(a=e[ve])return a;e=wg(e)}return n}e=a,a=e.parentNode}return null}function us(e){if(e=e[ve]||e[ls]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function da(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function hs(e){var n=e[td];return n||(n=e[td]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function ge(e){e[ha]=!0}var ed=new Set,id={};function zn(e,n){ds(e,n),ds(e+"Capture",n)}function ds(e,n){for(id[e]=n,e=0;e<n.length;e++)ed.add(n[e])}var Jy=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nd={},sd={};function tb(e){return Ml.call(sd,e)?!0:Ml.call(nd,e)?!1:Jy.test(e)?sd[e]=!0:(nd[e]=!0,!1)}function Nr(e,n,a){if(tb(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var c=n.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function kr(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function Oi(e,n,a,c){if(c===null)e.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+c)}}function ti(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ad(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function eb(e,n,a){var c=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,m=c.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return p.call(this)},set:function(v){a=""+v,m.call(this,v)}}),Object.defineProperty(e,n,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function zl(e){if(!e._valueTracker){var n=ad(e)?"checked":"value";e._valueTracker=eb(e,n,""+e[n])}}function rd(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),c="";return e&&(c=ad(e)?e.checked?"true":"false":e.value),e=c,e!==a?(n.setValue(e),!0):!1}function Br(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ib=/[\n"\\]/g;function ei(e){return e.replace(ib,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Pl(e,n,a,c,p,m,v,_){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+ti(n)):e.value!==""+ti(n)&&(e.value=""+ti(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?Fl(e,v,ti(n)):a!=null?Fl(e,v,ti(a)):c!=null&&e.removeAttribute("value"),p==null&&m!=null&&(e.defaultChecked=!!m),p!=null&&(e.checked=p&&typeof p!="function"&&typeof p!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+ti(_):e.removeAttribute("name")}function od(e,n,a,c,p,m,v,_){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),n!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){zl(e);return}a=a!=null?""+ti(a):"",n=n!=null?""+ti(n):a,_||n===e.value||(e.value=n),e.defaultValue=n}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=_?e.checked:!!c,e.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),zl(e)}function Fl(e,n,a){n==="number"&&Br(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function fs(e,n,a,c){if(e=e.options,n){n={};for(var p=0;p<a.length;p++)n["$"+a[p]]=!0;for(a=0;a<e.length;a++)p=n.hasOwnProperty("$"+e[a].value),e[a].selected!==p&&(e[a].selected=p),p&&c&&(e[a].defaultSelected=!0)}else{for(a=""+ti(a),n=null,p=0;p<e.length;p++){if(e[p].value===a){e[p].selected=!0,c&&(e[p].defaultSelected=!0);return}n!==null||e[p].disabled||(n=e[p])}n!==null&&(n.selected=!0)}}function ld(e,n,a){if(n!=null&&(n=""+ti(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+ti(a):""}function cd(e,n,a,c){if(n==null){if(c!=null){if(a!=null)throw Error(s(92));if(Mt(c)){if(1<c.length)throw Error(s(93));c=c[0]}a=c}a==null&&(a=""),n=a}a=ti(n),e.defaultValue=a,c=e.textContent,c===a&&c!==""&&c!==null&&(e.value=c),zl(e)}function ps(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var nb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ud(e,n,a){var c=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":c?e.setProperty(n,a):typeof a!="number"||a===0||nb.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function hd(e,n,a){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||n!=null&&n.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var p in n)c=n[p],n.hasOwnProperty(p)&&a[p]!==c&&ud(e,p,c)}else for(var m in n)n.hasOwnProperty(m)&&ud(e,m,n[m])}function Ul(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ab=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zr(e){return ab.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ni(){}var Il=null;function Hl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gs=null,ms=null;function dd(e){var n=us(e);if(n&&(e=n.stateNode)){var a=e[Le]||null;t:switch(e=n.stateNode,n.type){case"input":if(Pl(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ei(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var c=a[n];if(c!==e&&c.form===e.form){var p=c[Le]||null;if(!p)throw Error(s(90));Pl(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(n=0;n<a.length;n++)c=a[n],c.form===e.form&&rd(c)}break t;case"textarea":ld(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&fs(e,!!a.multiple,n,!1)}}}var jl=!1;function fd(e,n,a){if(jl)return e(n,a);jl=!0;try{var c=e(n);return c}finally{if(jl=!1,(gs!==null||ms!==null)&&(To(),gs&&(n=gs,e=ms,ms=gs=null,dd(n),e)))for(n=0;n<e.length;n++)dd(e[n])}}function fa(e,n){var a=e.stateNode;if(a===null)return null;var c=a[Le]||null;if(c===null)return null;a=c[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gl=!1;if(ki)try{var pa={};Object.defineProperty(pa,"passive",{get:function(){Gl=!0}}),window.addEventListener("test",pa,pa),window.removeEventListener("test",pa,pa)}catch{Gl=!1}var rn=null,Vl=null,Pr=null;function pd(){if(Pr)return Pr;var e,n=Vl,a=n.length,c,p="value"in rn?rn.value:rn.textContent,m=p.length;for(e=0;e<a&&n[e]===p[e];e++);var v=a-e;for(c=1;c<=v&&n[a-c]===p[m-c];c++);return Pr=p.slice(e,1<c?1-c:void 0)}function Fr(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ur(){return!0}function gd(){return!1}function Oe(e){function n(a,c,p,m,v){this._reactName=a,this._targetInst=p,this.type=c,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(a=e[_],this[_]=a?a(m):m[_]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ur:gd,this.isPropagationStopped=gd,this}return y(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ur)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ur)},persist:function(){},isPersistent:Ur}),n}var Pn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ir=Oe(Pn),ga=y({},Pn,{view:0,detail:0}),rb=Oe(ga),Xl,Yl,ma,Hr=y({},ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$l,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ma&&(ma&&e.type==="mousemove"?(Xl=e.screenX-ma.screenX,Yl=e.screenY-ma.screenY):Yl=Xl=0,ma=e),Xl)},movementY:function(e){return"movementY"in e?e.movementY:Yl}}),md=Oe(Hr),ob=y({},Hr,{dataTransfer:0}),lb=Oe(ob),cb=y({},ga,{relatedTarget:0}),ql=Oe(cb),ub=y({},Pn,{animationName:0,elapsedTime:0,pseudoElement:0}),hb=Oe(ub),db=y({},Pn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fb=Oe(db),pb=y({},Pn,{data:0}),yd=Oe(pb),gb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bb(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=yb[e])?!!n[e]:!1}function $l(){return bb}var vb=y({},ga,{key:function(e){if(e.key){var n=gb[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Fr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$l,charCode:function(e){return e.type==="keypress"?Fr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Fr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ab=Oe(vb),Sb=y({},Hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bd=Oe(Sb),wb=y({},ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$l}),Eb=Oe(wb),Tb=y({},Pn,{propertyName:0,elapsedTime:0,pseudoElement:0}),_b=Oe(Tb),Cb=y({},Hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xb=Oe(Cb),Mb=y({},Pn,{newState:0,oldState:0}),Db=Oe(Mb),Rb=[9,13,27,32],Kl=ki&&"CompositionEvent"in window,ya=null;ki&&"documentMode"in document&&(ya=document.documentMode);var Lb=ki&&"TextEvent"in window&&!ya,vd=ki&&(!Kl||ya&&8<ya&&11>=ya),Ad=" ",Sd=!1;function wd(e,n){switch(e){case"keyup":return Rb.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ed(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ys=!1;function Ob(e,n){switch(e){case"compositionend":return Ed(n);case"keypress":return n.which!==32?null:(Sd=!0,Ad);case"textInput":return e=n.data,e===Ad&&Sd?null:e;default:return null}}function Nb(e,n){if(ys)return e==="compositionend"||!Kl&&wd(e,n)?(e=pd(),Pr=Vl=rn=null,ys=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return vd&&n.locale!=="ko"?null:n.data;default:return null}}var kb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Td(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!kb[e.type]:n==="textarea"}function _d(e,n,a,c){gs?ms?ms.push(c):ms=[c]:gs=c,n=Lo(n,"onChange"),0<n.length&&(a=new Ir("onChange","change",null,a,c),e.push({event:a,listeners:n}))}var ba=null,va=null;function Bb(e){lg(e,0)}function jr(e){var n=da(e);if(rd(n))return e}function Cd(e,n){if(e==="change")return n}var xd=!1;if(ki){var Wl;if(ki){var Ql="oninput"in document;if(!Ql){var Md=document.createElement("div");Md.setAttribute("oninput","return;"),Ql=typeof Md.oninput=="function"}Wl=Ql}else Wl=!1;xd=Wl&&(!document.documentMode||9<document.documentMode)}function Dd(){ba&&(ba.detachEvent("onpropertychange",Rd),va=ba=null)}function Rd(e){if(e.propertyName==="value"&&jr(va)){var n=[];_d(n,va,e,Hl(e)),fd(Bb,n)}}function zb(e,n,a){e==="focusin"?(Dd(),ba=n,va=a,ba.attachEvent("onpropertychange",Rd)):e==="focusout"&&Dd()}function Pb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return jr(va)}function Fb(e,n){if(e==="click")return jr(n)}function Ub(e,n){if(e==="input"||e==="change")return jr(n)}function Ib(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Ve=typeof Object.is=="function"?Object.is:Ib;function Aa(e,n){if(Ve(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),c=Object.keys(n);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var p=a[c];if(!Ml.call(n,p)||!Ve(e[p],n[p]))return!1}return!0}function Ld(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Od(e,n){var a=Ld(e);e=0;for(var c;a;){if(a.nodeType===3){if(c=e+a.textContent.length,e<=n&&c>=n)return{node:a,offset:n-e};e=c}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Ld(a)}}function Nd(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Nd(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function kd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Br(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=Br(e.document)}return n}function Zl(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var Hb=ki&&"documentMode"in document&&11>=document.documentMode,bs=null,Jl=null,Sa=null,tc=!1;function Bd(e,n,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;tc||bs==null||bs!==Br(c)||(c=bs,"selectionStart"in c&&Zl(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Sa&&Aa(Sa,c)||(Sa=c,c=Lo(Jl,"onSelect"),0<c.length&&(n=new Ir("onSelect","select",null,n,a),e.push({event:n,listeners:c}),n.target=bs)))}function Fn(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var vs={animationend:Fn("Animation","AnimationEnd"),animationiteration:Fn("Animation","AnimationIteration"),animationstart:Fn("Animation","AnimationStart"),transitionrun:Fn("Transition","TransitionRun"),transitionstart:Fn("Transition","TransitionStart"),transitioncancel:Fn("Transition","TransitionCancel"),transitionend:Fn("Transition","TransitionEnd")},ec={},zd={};ki&&(zd=document.createElement("div").style,"AnimationEvent"in window||(delete vs.animationend.animation,delete vs.animationiteration.animation,delete vs.animationstart.animation),"TransitionEvent"in window||delete vs.transitionend.transition);function Un(e){if(ec[e])return ec[e];if(!vs[e])return e;var n=vs[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in zd)return ec[e]=n[a];return e}var Pd=Un("animationend"),Fd=Un("animationiteration"),Ud=Un("animationstart"),jb=Un("transitionrun"),Gb=Un("transitionstart"),Vb=Un("transitioncancel"),Id=Un("transitionend"),Hd=new Map,ic="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ic.push("scrollEnd");function gi(e,n){Hd.set(e,n),zn(n,[e])}var Gr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ii=[],As=0,nc=0;function Vr(){for(var e=As,n=nc=As=0;n<e;){var a=ii[n];ii[n++]=null;var c=ii[n];ii[n++]=null;var p=ii[n];ii[n++]=null;var m=ii[n];if(ii[n++]=null,c!==null&&p!==null){var v=c.pending;v===null?p.next=p:(p.next=v.next,v.next=p),c.pending=p}m!==0&&jd(a,p,m)}}function Xr(e,n,a,c){ii[As++]=e,ii[As++]=n,ii[As++]=a,ii[As++]=c,nc|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function sc(e,n,a,c){return Xr(e,n,a,c),Yr(e)}function In(e,n){return Xr(e,null,null,n),Yr(e)}function jd(e,n,a){e.lanes|=a;var c=e.alternate;c!==null&&(c.lanes|=a);for(var p=!1,m=e.return;m!==null;)m.childLanes|=a,c=m.alternate,c!==null&&(c.childLanes|=a),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(p=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,p&&n!==null&&(p=31-Ge(a),e=m.hiddenUpdates,c=e[p],c===null?e[p]=[n]:c.push(n),n.lane=a|536870912),m):null}function Yr(e){if(50<Ga)throw Ga=0,fu=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Ss={};function Xb(e,n,a,c){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xe(e,n,a,c){return new Xb(e,n,a,c)}function ac(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Bi(e,n){var a=e.alternate;return a===null?(a=Xe(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Gd(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function qr(e,n,a,c,p,m){var v=0;if(c=e,typeof e=="function")ac(e)&&(v=1);else if(typeof e=="string")v=W0(e,a,tt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case K:return e=Xe(31,a,n,p),e.elementType=K,e.lanes=m,e;case S:return Hn(a.children,p,m,n);case T:v=8,p|=24;break;case E:return e=Xe(12,a,n,p|2),e.elementType=E,e.lanes=m,e;case L:return e=Xe(13,a,n,p),e.elementType=L,e.lanes=m,e;case N:return e=Xe(19,a,n,p),e.elementType=N,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case C:v=10;break t;case x:v=9;break t;case O:v=11;break t;case z:v=14;break t;case $:v=16,c=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),c=null}return n=Xe(v,a,n,p),n.elementType=e,n.type=c,n.lanes=m,n}function Hn(e,n,a,c){return e=Xe(7,e,c,n),e.lanes=a,e}function rc(e,n,a){return e=Xe(6,e,null,n),e.lanes=a,e}function Vd(e){var n=Xe(18,null,null,0);return n.stateNode=e,n}function oc(e,n,a){return n=Xe(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Xd=new WeakMap;function ni(e,n){if(typeof e=="object"&&e!==null){var a=Xd.get(e);return a!==void 0?a:(n={value:e,source:n,stack:Vh(n)},Xd.set(e,n),n)}return{value:e,source:n,stack:Vh(n)}}var ws=[],Es=0,$r=null,wa=0,si=[],ai=0,on=null,vi=1,Ai="";function zi(e,n){ws[Es++]=wa,ws[Es++]=$r,$r=e,wa=n}function Yd(e,n,a){si[ai++]=vi,si[ai++]=Ai,si[ai++]=on,on=e;var c=vi;e=Ai;var p=32-Ge(c)-1;c&=~(1<<p),a+=1;var m=32-Ge(n)+p;if(30<m){var v=p-p%5;m=(c&(1<<v)-1).toString(32),c>>=v,p-=v,vi=1<<32-Ge(n)+p|a<<p|c,Ai=m+e}else vi=1<<m|a<<p|c,Ai=e}function lc(e){e.return!==null&&(zi(e,1),Yd(e,1,0))}function cc(e){for(;e===$r;)$r=ws[--Es],ws[Es]=null,wa=ws[--Es],ws[Es]=null;for(;e===on;)on=si[--ai],si[ai]=null,Ai=si[--ai],si[ai]=null,vi=si[--ai],si[ai]=null}function qd(e,n){si[ai++]=vi,si[ai++]=Ai,si[ai++]=on,vi=n.id,Ai=n.overflow,on=e}var Ae=null,Xt=null,_t=!1,ln=null,ri=!1,uc=Error(s(519));function cn(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ea(ni(n,e)),uc}function $d(e){var n=e.stateNode,a=e.type,c=e.memoizedProps;switch(n[ve]=e,n[Le]=c,a){case"dialog":wt("cancel",n),wt("close",n);break;case"iframe":case"object":case"embed":wt("load",n);break;case"video":case"audio":for(a=0;a<Xa.length;a++)wt(Xa[a],n);break;case"source":wt("error",n);break;case"img":case"image":case"link":wt("error",n),wt("load",n);break;case"details":wt("toggle",n);break;case"input":wt("invalid",n),od(n,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":wt("invalid",n);break;case"textarea":wt("invalid",n),cd(n,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||c.suppressHydrationWarning===!0||dg(n.textContent,a)?(c.popover!=null&&(wt("beforetoggle",n),wt("toggle",n)),c.onScroll!=null&&wt("scroll",n),c.onScrollEnd!=null&&wt("scrollend",n),c.onClick!=null&&(n.onclick=Ni),n=!0):n=!1,n||cn(e,!0)}function Kd(e){for(Ae=e.return;Ae;)switch(Ae.tag){case 5:case 31:case 13:ri=!1;return;case 27:case 3:ri=!0;return;default:Ae=Ae.return}}function Ts(e){if(e!==Ae)return!1;if(!_t)return Kd(e),_t=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Mu(e.type,e.memoizedProps)),a=!a),a&&Xt&&cn(e),Kd(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Xt=Sg(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Xt=Sg(e)}else n===27?(n=Xt,En(e.type)?(e=Nu,Nu=null,Xt=e):Xt=n):Xt=Ae?li(e.stateNode.nextSibling):null;return!0}function jn(){Xt=Ae=null,_t=!1}function hc(){var e=ln;return e!==null&&(ze===null?ze=e:ze.push.apply(ze,e),ln=null),e}function Ea(e){ln===null?ln=[e]:ln.push(e)}var dc=D(null),Gn=null,Pi=null;function un(e,n,a){W(dc,n._currentValue),n._currentValue=a}function Fi(e){e._currentValue=dc.current,H(dc)}function fc(e,n,a){for(;e!==null;){var c=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),e===a)break;e=e.return}}function pc(e,n,a,c){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var m=p.dependencies;if(m!==null){var v=p.child;m=m.firstContext;t:for(;m!==null;){var _=m;m=p;for(var M=0;M<n.length;M++)if(_.context===n[M]){m.lanes|=a,_=m.alternate,_!==null&&(_.lanes|=a),fc(m.return,a,e),c||(v=null);break t}m=_.next}}else if(p.tag===18){if(v=p.return,v===null)throw Error(s(341));v.lanes|=a,m=v.alternate,m!==null&&(m.lanes|=a),fc(v,a,e),v=null}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===e){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}}function _s(e,n,a,c){e=null;for(var p=n,m=!1;p!==null;){if(!m){if((p.flags&524288)!==0)m=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var v=p.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var _=p.type;Ve(p.pendingProps.value,v.value)||(e!==null?e.push(_):e=[_])}}else if(p===lt.current){if(v=p.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(e!==null?e.push(Wa):e=[Wa])}p=p.return}e!==null&&pc(n,e,a,c),n.flags|=262144}function Kr(e){for(e=e.firstContext;e!==null;){if(!Ve(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Vn(e){Gn=e,Pi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Se(e){return Wd(Gn,e)}function Wr(e,n){return Gn===null&&Vn(e),Wd(e,n)}function Wd(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Pi===null){if(e===null)throw Error(s(308));Pi=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Pi=Pi.next=n;return a}var Yb=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,c){e.push(c)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},qb=h.unstable_scheduleCallback,$b=h.unstable_NormalPriority,re={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gc(){return{controller:new Yb,data:new Map,refCount:0}}function Ta(e){e.refCount--,e.refCount===0&&qb($b,function(){e.controller.abort()})}var _a=null,mc=0,Cs=0,xs=null;function Kb(e,n){if(_a===null){var a=_a=[];mc=0,Cs=vu(),xs={status:"pending",value:void 0,then:function(c){a.push(c)}}}return mc++,n.then(Qd,Qd),n}function Qd(){if(--mc===0&&_a!==null){xs!==null&&(xs.status="fulfilled");var e=_a;_a=null,Cs=0,xs=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Wb(e,n){var a=[],c={status:"pending",value:null,reason:null,then:function(p){a.push(p)}};return e.then(function(){c.status="fulfilled",c.value=n;for(var p=0;p<a.length;p++)(0,a[p])(n)},function(p){for(c.status="rejected",c.reason=p,p=0;p<a.length;p++)(0,a[p])(void 0)}),c}var Zd=k.S;k.S=function(e,n){zp=He(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Kb(e,n),Zd!==null&&Zd(e,n)};var Xn=D(null);function yc(){var e=Xn.current;return e!==null?e:Vt.pooledCache}function Qr(e,n){n===null?W(Xn,Xn.current):W(Xn,n.pool)}function Jd(){var e=yc();return e===null?null:{parent:re._currentValue,pool:e}}var Ms=Error(s(460)),bc=Error(s(474)),Zr=Error(s(542)),Jr={then:function(){}};function tf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ef(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(Ni,Ni),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,sf(e),e;default:if(typeof n.status=="string")n.then(Ni,Ni);else{if(e=Vt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(c){if(n.status==="pending"){var p=n;p.status="fulfilled",p.value=c}},function(c){if(n.status==="pending"){var p=n;p.status="rejected",p.reason=c}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,sf(e),e}throw qn=n,Ms}}function Yn(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(qn=a,Ms):a}}var qn=null;function nf(){if(qn===null)throw Error(s(459));var e=qn;return qn=null,e}function sf(e){if(e===Ms||e===Zr)throw Error(s(483))}var Ds=null,Ca=0;function to(e){var n=Ca;return Ca+=1,Ds===null&&(Ds=[]),ef(Ds,e,n)}function xa(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function eo(e,n){throw n.$$typeof===b?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function af(e){function n(B,R){if(e){var P=B.deletions;P===null?(B.deletions=[R],B.flags|=16):P.push(R)}}function a(B,R){if(!e)return null;for(;R!==null;)n(B,R),R=R.sibling;return null}function c(B){for(var R=new Map;B!==null;)B.key!==null?R.set(B.key,B):R.set(B.index,B),B=B.sibling;return R}function p(B,R){return B=Bi(B,R),B.index=0,B.sibling=null,B}function m(B,R,P){return B.index=P,e?(P=B.alternate,P!==null?(P=P.index,P<R?(B.flags|=67108866,R):P):(B.flags|=67108866,R)):(B.flags|=1048576,R)}function v(B){return e&&B.alternate===null&&(B.flags|=67108866),B}function _(B,R,P,Y){return R===null||R.tag!==6?(R=rc(P,B.mode,Y),R.return=B,R):(R=p(R,P),R.return=B,R)}function M(B,R,P,Y){var at=P.type;return at===S?X(B,R,P.props.children,Y,P.key):R!==null&&(R.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===$&&Yn(at)===R.type)?(R=p(R,P.props),xa(R,P),R.return=B,R):(R=qr(P.type,P.key,P.props,null,B.mode,Y),xa(R,P),R.return=B,R)}function F(B,R,P,Y){return R===null||R.tag!==4||R.stateNode.containerInfo!==P.containerInfo||R.stateNode.implementation!==P.implementation?(R=oc(P,B.mode,Y),R.return=B,R):(R=p(R,P.children||[]),R.return=B,R)}function X(B,R,P,Y,at){return R===null||R.tag!==7?(R=Hn(P,B.mode,Y,at),R.return=B,R):(R=p(R,P),R.return=B,R)}function q(B,R,P){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=rc(""+R,B.mode,P),R.return=B,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case A:return P=qr(R.type,R.key,R.props,null,B.mode,P),xa(P,R),P.return=B,P;case w:return R=oc(R,B.mode,P),R.return=B,R;case $:return R=Yn(R),q(B,R,P)}if(Mt(R)||ht(R))return R=Hn(R,B.mode,P,null),R.return=B,R;if(typeof R.then=="function")return q(B,to(R),P);if(R.$$typeof===C)return q(B,Wr(B,R),P);eo(B,R)}return null}function U(B,R,P,Y){var at=R!==null?R.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return at!==null?null:_(B,R,""+P,Y);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case A:return P.key===at?M(B,R,P,Y):null;case w:return P.key===at?F(B,R,P,Y):null;case $:return P=Yn(P),U(B,R,P,Y)}if(Mt(P)||ht(P))return at!==null?null:X(B,R,P,Y,null);if(typeof P.then=="function")return U(B,R,to(P),Y);if(P.$$typeof===C)return U(B,R,Wr(B,P),Y);eo(B,P)}return null}function I(B,R,P,Y,at){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return B=B.get(P)||null,_(R,B,""+Y,at);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case A:return B=B.get(Y.key===null?P:Y.key)||null,M(R,B,Y,at);case w:return B=B.get(Y.key===null?P:Y.key)||null,F(R,B,Y,at);case $:return Y=Yn(Y),I(B,R,P,Y,at)}if(Mt(Y)||ht(Y))return B=B.get(P)||null,X(R,B,Y,at,null);if(typeof Y.then=="function")return I(B,R,P,to(Y),at);if(Y.$$typeof===C)return I(B,R,P,Wr(R,Y),at);eo(R,Y)}return null}function nt(B,R,P,Y){for(var at=null,Dt=null,st=R,vt=R=0,Tt=null;st!==null&&vt<P.length;vt++){st.index>vt?(Tt=st,st=null):Tt=st.sibling;var Rt=U(B,st,P[vt],Y);if(Rt===null){st===null&&(st=Tt);break}e&&st&&Rt.alternate===null&&n(B,st),R=m(Rt,R,vt),Dt===null?at=Rt:Dt.sibling=Rt,Dt=Rt,st=Tt}if(vt===P.length)return a(B,st),_t&&zi(B,vt),at;if(st===null){for(;vt<P.length;vt++)st=q(B,P[vt],Y),st!==null&&(R=m(st,R,vt),Dt===null?at=st:Dt.sibling=st,Dt=st);return _t&&zi(B,vt),at}for(st=c(st);vt<P.length;vt++)Tt=I(st,B,vt,P[vt],Y),Tt!==null&&(e&&Tt.alternate!==null&&st.delete(Tt.key===null?vt:Tt.key),R=m(Tt,R,vt),Dt===null?at=Tt:Dt.sibling=Tt,Dt=Tt);return e&&st.forEach(function(Mn){return n(B,Mn)}),_t&&zi(B,vt),at}function ct(B,R,P,Y){if(P==null)throw Error(s(151));for(var at=null,Dt=null,st=R,vt=R=0,Tt=null,Rt=P.next();st!==null&&!Rt.done;vt++,Rt=P.next()){st.index>vt?(Tt=st,st=null):Tt=st.sibling;var Mn=U(B,st,Rt.value,Y);if(Mn===null){st===null&&(st=Tt);break}e&&st&&Mn.alternate===null&&n(B,st),R=m(Mn,R,vt),Dt===null?at=Mn:Dt.sibling=Mn,Dt=Mn,st=Tt}if(Rt.done)return a(B,st),_t&&zi(B,vt),at;if(st===null){for(;!Rt.done;vt++,Rt=P.next())Rt=q(B,Rt.value,Y),Rt!==null&&(R=m(Rt,R,vt),Dt===null?at=Rt:Dt.sibling=Rt,Dt=Rt);return _t&&zi(B,vt),at}for(st=c(st);!Rt.done;vt++,Rt=P.next())Rt=I(st,B,vt,Rt.value,Y),Rt!==null&&(e&&Rt.alternate!==null&&st.delete(Rt.key===null?vt:Rt.key),R=m(Rt,R,vt),Dt===null?at=Rt:Dt.sibling=Rt,Dt=Rt);return e&&st.forEach(function(ov){return n(B,ov)}),_t&&zi(B,vt),at}function Ht(B,R,P,Y){if(typeof P=="object"&&P!==null&&P.type===S&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case A:t:{for(var at=P.key;R!==null;){if(R.key===at){if(at=P.type,at===S){if(R.tag===7){a(B,R.sibling),Y=p(R,P.props.children),Y.return=B,B=Y;break t}}else if(R.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===$&&Yn(at)===R.type){a(B,R.sibling),Y=p(R,P.props),xa(Y,P),Y.return=B,B=Y;break t}a(B,R);break}else n(B,R);R=R.sibling}P.type===S?(Y=Hn(P.props.children,B.mode,Y,P.key),Y.return=B,B=Y):(Y=qr(P.type,P.key,P.props,null,B.mode,Y),xa(Y,P),Y.return=B,B=Y)}return v(B);case w:t:{for(at=P.key;R!==null;){if(R.key===at)if(R.tag===4&&R.stateNode.containerInfo===P.containerInfo&&R.stateNode.implementation===P.implementation){a(B,R.sibling),Y=p(R,P.children||[]),Y.return=B,B=Y;break t}else{a(B,R);break}else n(B,R);R=R.sibling}Y=oc(P,B.mode,Y),Y.return=B,B=Y}return v(B);case $:return P=Yn(P),Ht(B,R,P,Y)}if(Mt(P))return nt(B,R,P,Y);if(ht(P)){if(at=ht(P),typeof at!="function")throw Error(s(150));return P=at.call(P),ct(B,R,P,Y)}if(typeof P.then=="function")return Ht(B,R,to(P),Y);if(P.$$typeof===C)return Ht(B,R,Wr(B,P),Y);eo(B,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,R!==null&&R.tag===6?(a(B,R.sibling),Y=p(R,P),Y.return=B,B=Y):(a(B,R),Y=rc(P,B.mode,Y),Y.return=B,B=Y),v(B)):a(B,R)}return function(B,R,P,Y){try{Ca=0;var at=Ht(B,R,P,Y);return Ds=null,at}catch(st){if(st===Ms||st===Zr)throw st;var Dt=Xe(29,st,null,B.mode);return Dt.lanes=Y,Dt.return=B,Dt}}}var $n=af(!0),rf=af(!1),hn=!1;function vc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ac(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function dn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function fn(e,n,a){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(Lt&2)!==0){var p=c.pending;return p===null?n.next=n:(n.next=p.next,p.next=n),c.pending=n,n=Yr(e),jd(e,null,a),n}return Xr(e,c,n,a),Yr(e)}function Ma(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var c=n.lanes;c&=e.pendingLanes,a|=c,n.lanes=a,Wh(e,a)}}function Sc(e,n){var a=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var p=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?p=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?p=m=n:m=m.next=n}else p=m=n;a={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var wc=!1;function Da(){if(wc){var e=xs;if(e!==null)throw e}}function Ra(e,n,a,c){wc=!1;var p=e.updateQueue;hn=!1;var m=p.firstBaseUpdate,v=p.lastBaseUpdate,_=p.shared.pending;if(_!==null){p.shared.pending=null;var M=_,F=M.next;M.next=null,v===null?m=F:v.next=F,v=M;var X=e.alternate;X!==null&&(X=X.updateQueue,_=X.lastBaseUpdate,_!==v&&(_===null?X.firstBaseUpdate=F:_.next=F,X.lastBaseUpdate=M))}if(m!==null){var q=p.baseState;v=0,X=F=M=null,_=m;do{var U=_.lane&-536870913,I=U!==_.lane;if(I?(Et&U)===U:(c&U)===U){U!==0&&U===Cs&&(wc=!0),X!==null&&(X=X.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});t:{var nt=e,ct=_;U=n;var Ht=a;switch(ct.tag){case 1:if(nt=ct.payload,typeof nt=="function"){q=nt.call(Ht,q,U);break t}q=nt;break t;case 3:nt.flags=nt.flags&-65537|128;case 0:if(nt=ct.payload,U=typeof nt=="function"?nt.call(Ht,q,U):nt,U==null)break t;q=y({},q,U);break t;case 2:hn=!0}}U=_.callback,U!==null&&(e.flags|=64,I&&(e.flags|=8192),I=p.callbacks,I===null?p.callbacks=[U]:I.push(U))}else I={lane:U,tag:_.tag,payload:_.payload,callback:_.callback,next:null},X===null?(F=X=I,M=q):X=X.next=I,v|=U;if(_=_.next,_===null){if(_=p.shared.pending,_===null)break;I=_,_=I.next,I.next=null,p.lastBaseUpdate=I,p.shared.pending=null}}while(!0);X===null&&(M=q),p.baseState=M,p.firstBaseUpdate=F,p.lastBaseUpdate=X,m===null&&(p.shared.lanes=0),bn|=v,e.lanes=v,e.memoizedState=q}}function of(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function lf(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)of(a[e],n)}var Rs=D(null),io=D(0);function cf(e,n){e=qi,W(io,e),W(Rs,n),qi=e|n.baseLanes}function Ec(){W(io,qi),W(Rs,Rs.current)}function Tc(){qi=io.current,H(Rs),H(io)}var Ye=D(null),oi=null;function pn(e){var n=e.alternate;W(ne,ne.current&1),W(Ye,e),oi===null&&(n===null||Rs.current!==null||n.memoizedState!==null)&&(oi=e)}function _c(e){W(ne,ne.current),W(Ye,e),oi===null&&(oi=e)}function uf(e){e.tag===22?(W(ne,ne.current),W(Ye,e),oi===null&&(oi=e)):gn()}function gn(){W(ne,ne.current),W(Ye,Ye.current)}function qe(e){H(Ye),oi===e&&(oi=null),H(ne)}var ne=D(0);function no(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Lu(a)||Ou(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Ui=0,bt=null,Ut=null,oe=null,so=!1,Ls=!1,Kn=!1,ao=0,La=0,Os=null,Qb=0;function Jt(){throw Error(s(321))}function Cc(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!Ve(e[a],n[a]))return!1;return!0}function xc(e,n,a,c,p,m){return Ui=m,bt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,k.H=e===null||e.memoizedState===null?qf:jc,Kn=!1,m=a(c,p),Kn=!1,Ls&&(m=df(n,a,c,p)),hf(e),m}function hf(e){k.H=ka;var n=Ut!==null&&Ut.next!==null;if(Ui=0,oe=Ut=bt=null,so=!1,La=0,Os=null,n)throw Error(s(300));e===null||le||(e=e.dependencies,e!==null&&Kr(e)&&(le=!0))}function df(e,n,a,c){bt=e;var p=0;do{if(Ls&&(Os=null),La=0,Ls=!1,25<=p)throw Error(s(301));if(p+=1,oe=Ut=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}k.H=$f,m=n(a,c)}while(Ls);return m}function Zb(){var e=k.H,n=e.useState()[0];return n=typeof n.then=="function"?Oa(n):n,e=e.useState()[0],(Ut!==null?Ut.memoizedState:null)!==e&&(bt.flags|=1024),n}function Mc(){var e=ao!==0;return ao=0,e}function Dc(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function Rc(e){if(so){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}so=!1}Ui=0,oe=Ut=bt=null,Ls=!1,La=ao=0,Os=null}function Me(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oe===null?bt.memoizedState=oe=e:oe=oe.next=e,oe}function se(){if(Ut===null){var e=bt.alternate;e=e!==null?e.memoizedState:null}else e=Ut.next;var n=oe===null?bt.memoizedState:oe.next;if(n!==null)oe=n,Ut=e;else{if(e===null)throw bt.alternate===null?Error(s(467)):Error(s(310));Ut=e,e={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},oe===null?bt.memoizedState=oe=e:oe=oe.next=e}return oe}function ro(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Oa(e){var n=La;return La+=1,Os===null&&(Os=[]),e=ef(Os,e,n),n=bt,(oe===null?n.memoizedState:oe.next)===null&&(n=n.alternate,k.H=n===null||n.memoizedState===null?qf:jc),e}function oo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Oa(e);if(e.$$typeof===C)return Se(e)}throw Error(s(438,String(e)))}function Lc(e){var n=null,a=bt.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var c=bt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(n={data:c.data.map(function(p){return p.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=ro(),bt.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),c=0;c<e;c++)a[c]=J;return n.index++,a}function Ii(e,n){return typeof n=="function"?n(e):n}function lo(e){var n=se();return Oc(n,Ut,e)}function Oc(e,n,a){var c=e.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=a;var p=e.baseQueue,m=c.pending;if(m!==null){if(p!==null){var v=p.next;p.next=m.next,m.next=v}n.baseQueue=p=m,c.pending=null}if(m=e.baseState,p===null)e.memoizedState=m;else{n=p.next;var _=v=null,M=null,F=n,X=!1;do{var q=F.lane&-536870913;if(q!==F.lane?(Et&q)===q:(Ui&q)===q){var U=F.revertLane;if(U===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),q===Cs&&(X=!0);else if((Ui&U)===U){F=F.next,U===Cs&&(X=!0);continue}else q={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},M===null?(_=M=q,v=m):M=M.next=q,bt.lanes|=U,bn|=U;q=F.action,Kn&&a(m,q),m=F.hasEagerState?F.eagerState:a(m,q)}else U={lane:q,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},M===null?(_=M=U,v=m):M=M.next=U,bt.lanes|=q,bn|=q;F=F.next}while(F!==null&&F!==n);if(M===null?v=m:M.next=_,!Ve(m,e.memoizedState)&&(le=!0,X&&(a=xs,a!==null)))throw a;e.memoizedState=m,e.baseState=v,e.baseQueue=M,c.lastRenderedState=m}return p===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function Nc(e){var n=se(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var c=a.dispatch,p=a.pending,m=n.memoizedState;if(p!==null){a.pending=null;var v=p=p.next;do m=e(m,v.action),v=v.next;while(v!==p);Ve(m,n.memoizedState)||(le=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),a.lastRenderedState=m}return[m,c]}function ff(e,n,a){var c=bt,p=se(),m=_t;if(m){if(a===void 0)throw Error(s(407));a=a()}else a=n();var v=!Ve((Ut||p).memoizedState,a);if(v&&(p.memoizedState=a,le=!0),p=p.queue,zc(mf.bind(null,c,p,e),[e]),p.getSnapshot!==n||v||oe!==null&&oe.memoizedState.tag&1){if(c.flags|=2048,Ns(9,{destroy:void 0},gf.bind(null,c,p,a,n),null),Vt===null)throw Error(s(349));m||(Ui&127)!==0||pf(c,n,a)}return a}function pf(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=bt.updateQueue,n===null?(n=ro(),bt.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function gf(e,n,a,c){n.value=a,n.getSnapshot=c,yf(n)&&bf(e)}function mf(e,n,a){return a(function(){yf(n)&&bf(e)})}function yf(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!Ve(e,a)}catch{return!0}}function bf(e){var n=In(e,2);n!==null&&Pe(n,e,2)}function kc(e){var n=Me();if(typeof e=="function"){var a=e;if(e=a(),Kn){sn(!0);try{a()}finally{sn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:e},n}function vf(e,n,a,c){return e.baseState=a,Oc(e,Ut,typeof c=="function"?c:Ii)}function Jb(e,n,a,c,p){if(ho(e))throw Error(s(485));if(e=n.action,e!==null){var m={payload:p,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};k.T!==null?a(!0):m.isTransition=!1,c(m),a=n.pending,a===null?(m.next=n.pending=m,Af(n,m)):(m.next=a.next,n.pending=a.next=m)}}function Af(e,n){var a=n.action,c=n.payload,p=e.state;if(n.isTransition){var m=k.T,v={};k.T=v;try{var _=a(p,c),M=k.S;M!==null&&M(v,_),Sf(e,n,_)}catch(F){Bc(e,n,F)}finally{m!==null&&v.types!==null&&(m.types=v.types),k.T=m}}else try{m=a(p,c),Sf(e,n,m)}catch(F){Bc(e,n,F)}}function Sf(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){wf(e,n,c)},function(c){return Bc(e,n,c)}):wf(e,n,a)}function wf(e,n,a){n.status="fulfilled",n.value=a,Ef(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,Af(e,a)))}function Bc(e,n,a){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do n.status="rejected",n.reason=a,Ef(n),n=n.next;while(n!==c)}e.action=null}function Ef(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Tf(e,n){return n}function _f(e,n){if(_t){var a=Vt.formState;if(a!==null){t:{var c=bt;if(_t){if(Xt){e:{for(var p=Xt,m=ri;p.nodeType!==8;){if(!m){p=null;break e}if(p=li(p.nextSibling),p===null){p=null;break e}}m=p.data,p=m==="F!"||m==="F"?p:null}if(p){Xt=li(p.nextSibling),c=p.data==="F!";break t}}cn(c)}c=!1}c&&(n=a[0])}}return a=Me(),a.memoizedState=a.baseState=n,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tf,lastRenderedState:n},a.queue=c,a=Vf.bind(null,bt,c),c.dispatch=a,c=kc(!1),m=Hc.bind(null,bt,!1,c.queue),c=Me(),p={state:n,dispatch:null,action:e,pending:null},c.queue=p,a=Jb.bind(null,bt,p,m,a),p.dispatch=a,c.memoizedState=e,[n,a,!1]}function Cf(e){var n=se();return xf(n,Ut,e)}function xf(e,n,a){if(n=Oc(e,n,Tf)[0],e=lo(Ii)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var c=Oa(n)}catch(v){throw v===Ms?Zr:v}else c=n;n=se();var p=n.queue,m=p.dispatch;return a!==n.memoizedState&&(bt.flags|=2048,Ns(9,{destroy:void 0},t0.bind(null,p,a),null)),[c,m,e]}function t0(e,n){e.action=n}function Mf(e){var n=se(),a=Ut;if(a!==null)return xf(n,a,e);se(),n=n.memoizedState,a=se();var c=a.queue.dispatch;return a.memoizedState=e,[n,c,!1]}function Ns(e,n,a,c){return e={tag:e,create:a,deps:c,inst:n,next:null},n=bt.updateQueue,n===null&&(n=ro(),bt.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(c=a.next,a.next=e,e.next=c,n.lastEffect=e),e}function Df(){return se().memoizedState}function co(e,n,a,c){var p=Me();bt.flags|=e,p.memoizedState=Ns(1|n,{destroy:void 0},a,c===void 0?null:c)}function uo(e,n,a,c){var p=se();c=c===void 0?null:c;var m=p.memoizedState.inst;Ut!==null&&c!==null&&Cc(c,Ut.memoizedState.deps)?p.memoizedState=Ns(n,m,a,c):(bt.flags|=e,p.memoizedState=Ns(1|n,m,a,c))}function Rf(e,n){co(8390656,8,e,n)}function zc(e,n){uo(2048,8,e,n)}function e0(e){bt.flags|=4;var n=bt.updateQueue;if(n===null)n=ro(),bt.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function Lf(e){var n=se().memoizedState;return e0({ref:n,nextImpl:e}),function(){if((Lt&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function Of(e,n){return uo(4,2,e,n)}function Nf(e,n){return uo(4,4,e,n)}function kf(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Bf(e,n,a){a=a!=null?a.concat([e]):null,uo(4,4,kf.bind(null,n,e),a)}function Pc(){}function zf(e,n){var a=se();n=n===void 0?null:n;var c=a.memoizedState;return n!==null&&Cc(n,c[1])?c[0]:(a.memoizedState=[e,n],e)}function Pf(e,n){var a=se();n=n===void 0?null:n;var c=a.memoizedState;if(n!==null&&Cc(n,c[1]))return c[0];if(c=e(),Kn){sn(!0);try{e()}finally{sn(!1)}}return a.memoizedState=[c,n],c}function Fc(e,n,a){return a===void 0||(Ui&1073741824)!==0&&(Et&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=Fp(),bt.lanes|=e,bn|=e,a)}function Ff(e,n,a,c){return Ve(a,n)?a:Rs.current!==null?(e=Fc(e,a,c),Ve(e,n)||(le=!0),e):(Ui&42)===0||(Ui&1073741824)!==0&&(Et&261930)===0?(le=!0,e.memoizedState=a):(e=Fp(),bt.lanes|=e,bn|=e,n)}function Uf(e,n,a,c,p){var m=V.p;V.p=m!==0&&8>m?m:8;var v=k.T,_={};k.T=_,Hc(e,!1,n,a);try{var M=p(),F=k.S;if(F!==null&&F(_,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var X=Wb(M,c);Na(e,n,X,We(e))}else Na(e,n,c,We(e))}catch(q){Na(e,n,{then:function(){},status:"rejected",reason:q},We())}finally{V.p=m,v!==null&&_.types!==null&&(v.types=_.types),k.T=v}}function i0(){}function Uc(e,n,a,c){if(e.tag!==5)throw Error(s(476));var p=If(e).queue;Uf(e,p,n,Z,a===null?i0:function(){return Hf(e),a(c)})}function If(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:Z},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Hf(e){var n=If(e);n.next===null&&(n=e.alternate.memoizedState),Na(e,n.next.queue,{},We())}function Ic(){return Se(Wa)}function jf(){return se().memoizedState}function Gf(){return se().memoizedState}function n0(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=We();e=dn(a);var c=fn(n,e,a);c!==null&&(Pe(c,n,a),Ma(c,n,a)),n={cache:gc()},e.payload=n;return}n=n.return}}function s0(e,n,a){var c=We();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ho(e)?Xf(n,a):(a=sc(e,n,a,c),a!==null&&(Pe(a,e,c),Yf(a,n,c)))}function Vf(e,n,a){var c=We();Na(e,n,a,c)}function Na(e,n,a,c){var p={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ho(e))Xf(n,p);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var v=n.lastRenderedState,_=m(v,a);if(p.hasEagerState=!0,p.eagerState=_,Ve(_,v))return Xr(e,n,p,0),Vt===null&&Vr(),!1}catch{}if(a=sc(e,n,p,c),a!==null)return Pe(a,e,c),Yf(a,n,c),!0}return!1}function Hc(e,n,a,c){if(c={lane:2,revertLane:vu(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},ho(e)){if(n)throw Error(s(479))}else n=sc(e,a,c,2),n!==null&&Pe(n,e,2)}function ho(e){var n=e.alternate;return e===bt||n!==null&&n===bt}function Xf(e,n){Ls=so=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function Yf(e,n,a){if((a&4194048)!==0){var c=n.lanes;c&=e.pendingLanes,a|=c,n.lanes=a,Wh(e,a)}}var ka={readContext:Se,use:oo,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useLayoutEffect:Jt,useInsertionEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useSyncExternalStore:Jt,useId:Jt,useHostTransitionStatus:Jt,useFormState:Jt,useActionState:Jt,useOptimistic:Jt,useMemoCache:Jt,useCacheRefresh:Jt};ka.useEffectEvent=Jt;var qf={readContext:Se,use:oo,useCallback:function(e,n){return Me().memoizedState=[e,n===void 0?null:n],e},useContext:Se,useEffect:Rf,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,co(4194308,4,kf.bind(null,n,e),a)},useLayoutEffect:function(e,n){return co(4194308,4,e,n)},useInsertionEffect:function(e,n){co(4,2,e,n)},useMemo:function(e,n){var a=Me();n=n===void 0?null:n;var c=e();if(Kn){sn(!0);try{e()}finally{sn(!1)}}return a.memoizedState=[c,n],c},useReducer:function(e,n,a){var c=Me();if(a!==void 0){var p=a(n);if(Kn){sn(!0);try{a(n)}finally{sn(!1)}}}else p=n;return c.memoizedState=c.baseState=p,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:p},c.queue=e,e=e.dispatch=s0.bind(null,bt,e),[c.memoizedState,e]},useRef:function(e){var n=Me();return e={current:e},n.memoizedState=e},useState:function(e){e=kc(e);var n=e.queue,a=Vf.bind(null,bt,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:Pc,useDeferredValue:function(e,n){var a=Me();return Fc(a,e,n)},useTransition:function(){var e=kc(!1);return e=Uf.bind(null,bt,e.queue,!0,!1),Me().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var c=bt,p=Me();if(_t){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),Vt===null)throw Error(s(349));(Et&127)!==0||pf(c,n,a)}p.memoizedState=a;var m={value:a,getSnapshot:n};return p.queue=m,Rf(mf.bind(null,c,m,e),[e]),c.flags|=2048,Ns(9,{destroy:void 0},gf.bind(null,c,m,a,n),null),a},useId:function(){var e=Me(),n=Vt.identifierPrefix;if(_t){var a=Ai,c=vi;a=(c&~(1<<32-Ge(c)-1)).toString(32)+a,n="_"+n+"R_"+a,a=ao++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=Qb++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Ic,useFormState:_f,useActionState:_f,useOptimistic:function(e){var n=Me();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Hc.bind(null,bt,!0,a),a.dispatch=n,[e,n]},useMemoCache:Lc,useCacheRefresh:function(){return Me().memoizedState=n0.bind(null,bt)},useEffectEvent:function(e){var n=Me(),a={impl:e};return n.memoizedState=a,function(){if((Lt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},jc={readContext:Se,use:oo,useCallback:zf,useContext:Se,useEffect:zc,useImperativeHandle:Bf,useInsertionEffect:Of,useLayoutEffect:Nf,useMemo:Pf,useReducer:lo,useRef:Df,useState:function(){return lo(Ii)},useDebugValue:Pc,useDeferredValue:function(e,n){var a=se();return Ff(a,Ut.memoizedState,e,n)},useTransition:function(){var e=lo(Ii)[0],n=se().memoizedState;return[typeof e=="boolean"?e:Oa(e),n]},useSyncExternalStore:ff,useId:jf,useHostTransitionStatus:Ic,useFormState:Cf,useActionState:Cf,useOptimistic:function(e,n){var a=se();return vf(a,Ut,e,n)},useMemoCache:Lc,useCacheRefresh:Gf};jc.useEffectEvent=Lf;var $f={readContext:Se,use:oo,useCallback:zf,useContext:Se,useEffect:zc,useImperativeHandle:Bf,useInsertionEffect:Of,useLayoutEffect:Nf,useMemo:Pf,useReducer:Nc,useRef:Df,useState:function(){return Nc(Ii)},useDebugValue:Pc,useDeferredValue:function(e,n){var a=se();return Ut===null?Fc(a,e,n):Ff(a,Ut.memoizedState,e,n)},useTransition:function(){var e=Nc(Ii)[0],n=se().memoizedState;return[typeof e=="boolean"?e:Oa(e),n]},useSyncExternalStore:ff,useId:jf,useHostTransitionStatus:Ic,useFormState:Mf,useActionState:Mf,useOptimistic:function(e,n){var a=se();return Ut!==null?vf(a,Ut,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Lc,useCacheRefresh:Gf};$f.useEffectEvent=Lf;function Gc(e,n,a,c){n=e.memoizedState,a=a(c,n),a=a==null?n:y({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Vc={enqueueSetState:function(e,n,a){e=e._reactInternals;var c=We(),p=dn(c);p.payload=n,a!=null&&(p.callback=a),n=fn(e,p,c),n!==null&&(Pe(n,e,c),Ma(n,e,c))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var c=We(),p=dn(c);p.tag=1,p.payload=n,a!=null&&(p.callback=a),n=fn(e,p,c),n!==null&&(Pe(n,e,c),Ma(n,e,c))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=We(),c=dn(a);c.tag=2,n!=null&&(c.callback=n),n=fn(e,c,a),n!==null&&(Pe(n,e,a),Ma(n,e,a))}};function Kf(e,n,a,c,p,m,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,m,v):n.prototype&&n.prototype.isPureReactComponent?!Aa(a,c)||!Aa(p,m):!0}function Wf(e,n,a,c){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,c),n.state!==e&&Vc.enqueueReplaceState(n,n.state,null)}function Wn(e,n){var a=n;if("ref"in n){a={};for(var c in n)c!=="ref"&&(a[c]=n[c])}if(e=e.defaultProps){a===n&&(a=y({},a));for(var p in e)a[p]===void 0&&(a[p]=e[p])}return a}function Qf(e){Gr(e)}function Zf(e){console.error(e)}function Jf(e){Gr(e)}function fo(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(c){setTimeout(function(){throw c})}}function tp(e,n,a){try{var c=e.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Xc(e,n,a){return a=dn(a),a.tag=3,a.payload={element:null},a.callback=function(){fo(e,n)},a}function ep(e){return e=dn(e),e.tag=3,e}function ip(e,n,a,c){var p=a.type.getDerivedStateFromError;if(typeof p=="function"){var m=c.value;e.payload=function(){return p(m)},e.callback=function(){tp(n,a,c)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){tp(n,a,c),typeof p!="function"&&(vn===null?vn=new Set([this]):vn.add(this));var _=c.stack;this.componentDidCatch(c.value,{componentStack:_!==null?_:""})})}function a0(e,n,a,c,p){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(n=a.alternate,n!==null&&_s(n,a,p,!0),a=Ye.current,a!==null){switch(a.tag){case 31:case 13:return oi===null?_o():a.alternate===null&&te===0&&(te=3),a.flags&=-257,a.flags|=65536,a.lanes=p,c===Jr?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([c]):n.add(c),mu(e,c,p)),!1;case 22:return a.flags|=65536,c===Jr?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([c]):a.add(c)),mu(e,c,p)),!1}throw Error(s(435,a.tag))}return mu(e,c,p),_o(),!1}if(_t)return n=Ye.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=p,c!==uc&&(e=Error(s(422),{cause:c}),Ea(ni(e,a)))):(c!==uc&&(n=Error(s(423),{cause:c}),Ea(ni(n,a))),e=e.current.alternate,e.flags|=65536,p&=-p,e.lanes|=p,c=ni(c,a),p=Xc(e.stateNode,c,p),Sc(e,p),te!==4&&(te=2)),!1;var m=Error(s(520),{cause:c});if(m=ni(m,a),ja===null?ja=[m]:ja.push(m),te!==4&&(te=2),n===null)return!0;c=ni(c,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=p&-p,a.lanes|=e,e=Xc(a.stateNode,c,e),Sc(a,e),!1;case 1:if(n=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(vn===null||!vn.has(m))))return a.flags|=65536,p&=-p,a.lanes|=p,p=ep(p),ip(p,e,a,c),Sc(a,p),!1}a=a.return}while(a!==null);return!1}var Yc=Error(s(461)),le=!1;function we(e,n,a,c){n.child=e===null?rf(n,null,a,c):$n(n,e.child,a,c)}function np(e,n,a,c,p){a=a.render;var m=n.ref;if("ref"in c){var v={};for(var _ in c)_!=="ref"&&(v[_]=c[_])}else v=c;return Vn(n),c=xc(e,n,a,v,m,p),_=Mc(),e!==null&&!le?(Dc(e,n,p),Hi(e,n,p)):(_t&&_&&lc(n),n.flags|=1,we(e,n,c,p),n.child)}function sp(e,n,a,c,p){if(e===null){var m=a.type;return typeof m=="function"&&!ac(m)&&m.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=m,ap(e,n,m,c,p)):(e=qr(a.type,null,c,n,n.mode,p),e.ref=n.ref,e.return=n,n.child=e)}if(m=e.child,!tu(e,p)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:Aa,a(v,c)&&e.ref===n.ref)return Hi(e,n,p)}return n.flags|=1,e=Bi(m,c),e.ref=n.ref,e.return=n,n.child=e}function ap(e,n,a,c,p){if(e!==null){var m=e.memoizedProps;if(Aa(m,c)&&e.ref===n.ref)if(le=!1,n.pendingProps=c=m,tu(e,p))(e.flags&131072)!==0&&(le=!0);else return n.lanes=e.lanes,Hi(e,n,p)}return qc(e,n,a,c,p)}function rp(e,n,a,c){var p=c.children,m=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,e!==null){for(c=n.child=e.child,p=0;c!==null;)p=p|c.lanes|c.childLanes,c=c.sibling;c=p&~m}else c=0,n.child=null;return op(e,n,m,a,c)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Qr(n,m!==null?m.cachePool:null),m!==null?cf(n,m):Ec(),uf(n);else return c=n.lanes=536870912,op(e,n,m!==null?m.baseLanes|a:a,a,c)}else m!==null?(Qr(n,m.cachePool),cf(n,m),gn(),n.memoizedState=null):(e!==null&&Qr(n,null),Ec(),gn());return we(e,n,p,a),n.child}function Ba(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function op(e,n,a,c,p){var m=yc();return m=m===null?null:{parent:re._currentValue,pool:m},n.memoizedState={baseLanes:a,cachePool:m},e!==null&&Qr(n,null),Ec(),uf(n),e!==null&&_s(e,n,c,!0),n.childLanes=p,null}function po(e,n){return n=mo({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function lp(e,n,a){return $n(n,e.child,null,a),e=po(n,n.pendingProps),e.flags|=2,qe(n),n.memoizedState=null,e}function r0(e,n,a){var c=n.pendingProps,p=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(_t){if(c.mode==="hidden")return e=po(n,c),n.lanes=536870912,Ba(null,e);if(_c(n),(e=Xt)?(e=Ag(e,ri),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:on!==null?{id:vi,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},a=Vd(e),a.return=n,n.child=a,Ae=n,Xt=null)):e=null,e===null)throw cn(n);return n.lanes=536870912,null}return po(n,c)}var m=e.memoizedState;if(m!==null){var v=m.dehydrated;if(_c(n),p)if(n.flags&256)n.flags&=-257,n=lp(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(le||_s(e,n,a,!1),p=(a&e.childLanes)!==0,le||p){if(c=Vt,c!==null&&(v=Qh(c,a),v!==0&&v!==m.retryLane))throw m.retryLane=v,In(e,v),Pe(c,e,v),Yc;_o(),n=lp(e,n,a)}else e=m.treeContext,Xt=li(v.nextSibling),Ae=n,_t=!0,ln=null,ri=!1,e!==null&&qd(n,e),n=po(n,c),n.flags|=4096;return n}return e=Bi(e.child,{mode:c.mode,children:c.children}),e.ref=n.ref,n.child=e,e.return=n,e}function go(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function qc(e,n,a,c,p){return Vn(n),a=xc(e,n,a,c,void 0,p),c=Mc(),e!==null&&!le?(Dc(e,n,p),Hi(e,n,p)):(_t&&c&&lc(n),n.flags|=1,we(e,n,a,p),n.child)}function cp(e,n,a,c,p,m){return Vn(n),n.updateQueue=null,a=df(n,c,a,p),hf(e),c=Mc(),e!==null&&!le?(Dc(e,n,m),Hi(e,n,m)):(_t&&c&&lc(n),n.flags|=1,we(e,n,a,m),n.child)}function up(e,n,a,c,p){if(Vn(n),n.stateNode===null){var m=Ss,v=a.contextType;typeof v=="object"&&v!==null&&(m=Se(v)),m=new a(c,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Vc,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=c,m.state=n.memoizedState,m.refs={},vc(n),v=a.contextType,m.context=typeof v=="object"&&v!==null?Se(v):Ss,m.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Gc(n,a,v,c),m.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&Vc.enqueueReplaceState(m,m.state,null),Ra(n,c,m,p),Da(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),c=!0}else if(e===null){m=n.stateNode;var _=n.memoizedProps,M=Wn(a,_);m.props=M;var F=m.context,X=a.contextType;v=Ss,typeof X=="object"&&X!==null&&(v=Se(X));var q=a.getDerivedStateFromProps;X=typeof q=="function"||typeof m.getSnapshotBeforeUpdate=="function",_=n.pendingProps!==_,X||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_||F!==v)&&Wf(n,m,c,v),hn=!1;var U=n.memoizedState;m.state=U,Ra(n,c,m,p),Da(),F=n.memoizedState,_||U!==F||hn?(typeof q=="function"&&(Gc(n,a,q,c),F=n.memoizedState),(M=hn||Kf(n,a,M,c,U,F,v))?(X||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=F),m.props=c,m.state=F,m.context=v,c=M):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{m=n.stateNode,Ac(e,n),v=n.memoizedProps,X=Wn(a,v),m.props=X,q=n.pendingProps,U=m.context,F=a.contextType,M=Ss,typeof F=="object"&&F!==null&&(M=Se(F)),_=a.getDerivedStateFromProps,(F=typeof _=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==q||U!==M)&&Wf(n,m,c,M),hn=!1,U=n.memoizedState,m.state=U,Ra(n,c,m,p),Da();var I=n.memoizedState;v!==q||U!==I||hn||e!==null&&e.dependencies!==null&&Kr(e.dependencies)?(typeof _=="function"&&(Gc(n,a,_,c),I=n.memoizedState),(X=hn||Kf(n,a,X,c,U,I,M)||e!==null&&e.dependencies!==null&&Kr(e.dependencies))?(F||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,I,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,I,M)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=I),m.props=c,m.state=I,m.context=M,c=X):(typeof m.componentDidUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(n.flags|=1024),c=!1)}return m=c,go(e,n),c=(n.flags&128)!==0,m||c?(m=n.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,e!==null&&c?(n.child=$n(n,e.child,null,p),n.child=$n(n,null,a,p)):we(e,n,a,p),n.memoizedState=m.state,e=n.child):e=Hi(e,n,p),e}function hp(e,n,a,c){return jn(),n.flags|=256,we(e,n,a,c),n.child}var $c={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kc(e){return{baseLanes:e,cachePool:Jd()}}function Wc(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=Ke),e}function dp(e,n,a){var c=n.pendingProps,p=!1,m=(n.flags&128)!==0,v;if((v=m)||(v=e!==null&&e.memoizedState===null?!1:(ne.current&2)!==0),v&&(p=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(_t){if(p?pn(n):gn(),(e=Xt)?(e=Ag(e,ri),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:on!==null?{id:vi,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},a=Vd(e),a.return=n,n.child=a,Ae=n,Xt=null)):e=null,e===null)throw cn(n);return Ou(e)?n.lanes=32:n.lanes=536870912,null}var _=c.children;return c=c.fallback,p?(gn(),p=n.mode,_=mo({mode:"hidden",children:_},p),c=Hn(c,p,a,null),_.return=n,c.return=n,_.sibling=c,n.child=_,c=n.child,c.memoizedState=Kc(a),c.childLanes=Wc(e,v,a),n.memoizedState=$c,Ba(null,c)):(pn(n),Qc(n,_))}var M=e.memoizedState;if(M!==null&&(_=M.dehydrated,_!==null)){if(m)n.flags&256?(pn(n),n.flags&=-257,n=Zc(e,n,a)):n.memoizedState!==null?(gn(),n.child=e.child,n.flags|=128,n=null):(gn(),_=c.fallback,p=n.mode,c=mo({mode:"visible",children:c.children},p),_=Hn(_,p,a,null),_.flags|=2,c.return=n,_.return=n,c.sibling=_,n.child=c,$n(n,e.child,null,a),c=n.child,c.memoizedState=Kc(a),c.childLanes=Wc(e,v,a),n.memoizedState=$c,n=Ba(null,c));else if(pn(n),Ou(_)){if(v=_.nextSibling&&_.nextSibling.dataset,v)var F=v.dgst;v=F,c=Error(s(419)),c.stack="",c.digest=v,Ea({value:c,source:null,stack:null}),n=Zc(e,n,a)}else if(le||_s(e,n,a,!1),v=(a&e.childLanes)!==0,le||v){if(v=Vt,v!==null&&(c=Qh(v,a),c!==0&&c!==M.retryLane))throw M.retryLane=c,In(e,c),Pe(v,e,c),Yc;Lu(_)||_o(),n=Zc(e,n,a)}else Lu(_)?(n.flags|=192,n.child=e.child,n=null):(e=M.treeContext,Xt=li(_.nextSibling),Ae=n,_t=!0,ln=null,ri=!1,e!==null&&qd(n,e),n=Qc(n,c.children),n.flags|=4096);return n}return p?(gn(),_=c.fallback,p=n.mode,M=e.child,F=M.sibling,c=Bi(M,{mode:"hidden",children:c.children}),c.subtreeFlags=M.subtreeFlags&65011712,F!==null?_=Bi(F,_):(_=Hn(_,p,a,null),_.flags|=2),_.return=n,c.return=n,c.sibling=_,n.child=c,Ba(null,c),c=n.child,_=e.child.memoizedState,_===null?_=Kc(a):(p=_.cachePool,p!==null?(M=re._currentValue,p=p.parent!==M?{parent:M,pool:M}:p):p=Jd(),_={baseLanes:_.baseLanes|a,cachePool:p}),c.memoizedState=_,c.childLanes=Wc(e,v,a),n.memoizedState=$c,Ba(e.child,c)):(pn(n),a=e.child,e=a.sibling,a=Bi(a,{mode:"visible",children:c.children}),a.return=n,a.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=a,n.memoizedState=null,a)}function Qc(e,n){return n=mo({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function mo(e,n){return e=Xe(22,e,null,n),e.lanes=0,e}function Zc(e,n,a){return $n(n,e.child,null,a),e=Qc(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function fp(e,n,a){e.lanes|=n;var c=e.alternate;c!==null&&(c.lanes|=n),fc(e.return,n,a)}function Jc(e,n,a,c,p,m){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:p,treeForkCount:m}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=a,v.tailMode=p,v.treeForkCount=m)}function pp(e,n,a){var c=n.pendingProps,p=c.revealOrder,m=c.tail;c=c.children;var v=ne.current,_=(v&2)!==0;if(_?(v=v&1|2,n.flags|=128):v&=1,W(ne,v),we(e,n,c,a),c=_t?wa:0,!_&&e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&fp(e,a,n);else if(e.tag===19)fp(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(p){case"forwards":for(a=n.child,p=null;a!==null;)e=a.alternate,e!==null&&no(e)===null&&(p=a),a=a.sibling;a=p,a===null?(p=n.child,n.child=null):(p=a.sibling,a.sibling=null),Jc(n,!1,p,a,m,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,p=n.child,n.child=null;p!==null;){if(e=p.alternate,e!==null&&no(e)===null){n.child=p;break}e=p.sibling,p.sibling=a,a=p,p=e}Jc(n,!0,a,null,m,c);break;case"together":Jc(n,!1,null,null,void 0,c);break;default:n.memoizedState=null}return n.child}function Hi(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),bn|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(_s(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,a=Bi(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=Bi(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function tu(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Kr(e)))}function o0(e,n,a){switch(n.tag){case 3:ie(n,n.stateNode.containerInfo),un(n,re,e.memoizedState.cache),jn();break;case 27:case 5:Nn(n);break;case 4:ie(n,n.stateNode.containerInfo);break;case 10:un(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,_c(n),null;break;case 13:var c=n.memoizedState;if(c!==null)return c.dehydrated!==null?(pn(n),n.flags|=128,null):(a&n.child.childLanes)!==0?dp(e,n,a):(pn(n),e=Hi(e,n,a),e!==null?e.sibling:null);pn(n);break;case 19:var p=(e.flags&128)!==0;if(c=(a&n.childLanes)!==0,c||(_s(e,n,a,!1),c=(a&n.childLanes)!==0),p){if(c)return pp(e,n,a);n.flags|=128}if(p=n.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),W(ne,ne.current),c)break;return null;case 22:return n.lanes=0,rp(e,n,a,n.pendingProps);case 24:un(n,re,e.memoizedState.cache)}return Hi(e,n,a)}function gp(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)le=!0;else{if(!tu(e,a)&&(n.flags&128)===0)return le=!1,o0(e,n,a);le=(e.flags&131072)!==0}else le=!1,_t&&(n.flags&1048576)!==0&&Yd(n,wa,n.index);switch(n.lanes=0,n.tag){case 16:t:{var c=n.pendingProps;if(e=Yn(n.elementType),n.type=e,typeof e=="function")ac(e)?(c=Wn(e,c),n.tag=1,n=up(null,n,e,c,a)):(n.tag=0,n=qc(null,n,e,c,a));else{if(e!=null){var p=e.$$typeof;if(p===O){n.tag=11,n=np(null,n,e,c,a);break t}else if(p===z){n.tag=14,n=sp(null,n,e,c,a);break t}}throw n=dt(e)||e,Error(s(306,n,""))}}return n;case 0:return qc(e,n,n.type,n.pendingProps,a);case 1:return c=n.type,p=Wn(c,n.pendingProps),up(e,n,c,p,a);case 3:t:{if(ie(n,n.stateNode.containerInfo),e===null)throw Error(s(387));c=n.pendingProps;var m=n.memoizedState;p=m.element,Ac(e,n),Ra(n,c,null,a);var v=n.memoizedState;if(c=v.cache,un(n,re,c),c!==m.cache&&pc(n,[re],a,!0),Da(),c=v.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=hp(e,n,c,a);break t}else if(c!==p){p=ni(Error(s(424)),n),Ea(p),n=hp(e,n,c,a);break t}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Xt=li(e.firstChild),Ae=n,_t=!0,ln=null,ri=!0,a=rf(n,null,c,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(jn(),c===p){n=Hi(e,n,a);break t}we(e,n,c,a)}n=n.child}return n;case 26:return go(e,n),e===null?(a=Cg(n.type,null,n.pendingProps,null))?n.memoizedState=a:_t||(a=n.type,e=n.pendingProps,c=Oo(ut.current).createElement(a),c[ve]=n,c[Le]=e,Ee(c,a,e),ge(c),n.stateNode=c):n.memoizedState=Cg(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Nn(n),e===null&&_t&&(c=n.stateNode=Eg(n.type,n.pendingProps,ut.current),Ae=n,ri=!0,p=Xt,En(n.type)?(Nu=p,Xt=li(c.firstChild)):Xt=p),we(e,n,n.pendingProps.children,a),go(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&_t&&((p=c=Xt)&&(c=P0(c,n.type,n.pendingProps,ri),c!==null?(n.stateNode=c,Ae=n,Xt=li(c.firstChild),ri=!1,p=!0):p=!1),p||cn(n)),Nn(n),p=n.type,m=n.pendingProps,v=e!==null?e.memoizedProps:null,c=m.children,Mu(p,m)?c=null:v!==null&&Mu(p,v)&&(n.flags|=32),n.memoizedState!==null&&(p=xc(e,n,Zb,null,null,a),Wa._currentValue=p),go(e,n),we(e,n,c,a),n.child;case 6:return e===null&&_t&&((e=a=Xt)&&(a=F0(a,n.pendingProps,ri),a!==null?(n.stateNode=a,Ae=n,Xt=null,e=!0):e=!1),e||cn(n)),null;case 13:return dp(e,n,a);case 4:return ie(n,n.stateNode.containerInfo),c=n.pendingProps,e===null?n.child=$n(n,null,c,a):we(e,n,c,a),n.child;case 11:return np(e,n,n.type,n.pendingProps,a);case 7:return we(e,n,n.pendingProps,a),n.child;case 8:return we(e,n,n.pendingProps.children,a),n.child;case 12:return we(e,n,n.pendingProps.children,a),n.child;case 10:return c=n.pendingProps,un(n,n.type,c.value),we(e,n,c.children,a),n.child;case 9:return p=n.type._context,c=n.pendingProps.children,Vn(n),p=Se(p),c=c(p),n.flags|=1,we(e,n,c,a),n.child;case 14:return sp(e,n,n.type,n.pendingProps,a);case 15:return ap(e,n,n.type,n.pendingProps,a);case 19:return pp(e,n,a);case 31:return r0(e,n,a);case 22:return rp(e,n,a,n.pendingProps);case 24:return Vn(n),c=Se(re),e===null?(p=yc(),p===null&&(p=Vt,m=gc(),p.pooledCache=m,m.refCount++,m!==null&&(p.pooledCacheLanes|=a),p=m),n.memoizedState={parent:c,cache:p},vc(n),un(n,re,p)):((e.lanes&a)!==0&&(Ac(e,n),Ra(n,null,null,a),Da()),p=e.memoizedState,m=n.memoizedState,p.parent!==c?(p={parent:c,cache:c},n.memoizedState=p,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=p),un(n,re,c)):(c=m.cache,un(n,re,c),c!==p.cache&&pc(n,[re],a,!0))),we(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function ji(e){e.flags|=4}function eu(e,n,a,c,p){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(p&335544128)===p)if(e.stateNode.complete)e.flags|=8192;else if(jp())e.flags|=8192;else throw qn=Jr,bc}else e.flags&=-16777217}function mp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Lg(n))if(jp())e.flags|=8192;else throw qn=Jr,bc}function yo(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?$h():536870912,e.lanes|=n,Ps|=n)}function za(e,n){if(!_t)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function Yt(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,c=0;if(n)for(var p=e.child;p!==null;)a|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)a|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=c,e.childLanes=a,n}function l0(e,n,a){var c=n.pendingProps;switch(cc(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(n),null;case 1:return Yt(n),null;case 3:return a=n.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),n.memoizedState.cache!==c&&(n.flags|=2048),Fi(re),Gt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ts(n)?ji(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,hc())),Yt(n),null;case 26:var p=n.type,m=n.memoizedState;return e===null?(ji(n),m!==null?(Yt(n),mp(n,m)):(Yt(n),eu(n,p,null,c,a))):m?m!==e.memoizedState?(ji(n),Yt(n),mp(n,m)):(Yt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==c&&ji(n),Yt(n),eu(n,p,e,c,a)),null;case 27:if(nn(n),a=ut.current,p=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==c&&ji(n);else{if(!c){if(n.stateNode===null)throw Error(s(166));return Yt(n),null}e=tt.current,Ts(n)?$d(n):(e=Eg(p,c,a),n.stateNode=e,ji(n))}return Yt(n),null;case 5:if(nn(n),p=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==c&&ji(n);else{if(!c){if(n.stateNode===null)throw Error(s(166));return Yt(n),null}if(m=tt.current,Ts(n))$d(n);else{var v=Oo(ut.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?v.createElement(p,{is:c.is}):v.createElement(p)}}m[ve]=n,m[Le]=c;t:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break t;for(;v.sibling===null;){if(v.return===null||v.return===n)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=m;t:switch(Ee(m,p,c),p){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&ji(n)}}return Yt(n),eu(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==c&&ji(n);else{if(typeof c!="string"&&n.stateNode===null)throw Error(s(166));if(e=ut.current,Ts(n)){if(e=n.stateNode,a=n.memoizedProps,c=null,p=Ae,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}e[ve]=n,e=!!(e.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||dg(e.nodeValue,a)),e||cn(n,!0)}else e=Oo(e).createTextNode(c),e[ve]=n,n.stateNode=e}return Yt(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(c=Ts(n),a!==null){if(e===null){if(!c)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[ve]=n}else jn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Yt(n),e=!1}else a=hc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(qe(n),n):(qe(n),null);if((n.flags&128)!==0)throw Error(s(558))}return Yt(n),null;case 13:if(c=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(p=Ts(n),c!==null&&c.dehydrated!==null){if(e===null){if(!p)throw Error(s(318));if(p=n.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[ve]=n}else jn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Yt(n),p=!1}else p=hc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=p),p=!0;if(!p)return n.flags&256?(qe(n),n):(qe(n),null)}return qe(n),(n.flags&128)!==0?(n.lanes=a,n):(a=c!==null,e=e!==null&&e.memoizedState!==null,a&&(c=n.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==p&&(c.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),yo(n,n.updateQueue),Yt(n),null);case 4:return Gt(),e===null&&Eu(n.stateNode.containerInfo),Yt(n),null;case 10:return Fi(n.type),Yt(n),null;case 19:if(H(ne),c=n.memoizedState,c===null)return Yt(n),null;if(p=(n.flags&128)!==0,m=c.rendering,m===null)if(p)za(c,!1);else{if(te!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(m=no(e),m!==null){for(n.flags|=128,za(c,!1),e=m.updateQueue,n.updateQueue=e,yo(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)Gd(a,e),a=a.sibling;return W(ne,ne.current&1|2),_t&&zi(n,c.treeForkCount),n.child}e=e.sibling}c.tail!==null&&He()>wo&&(n.flags|=128,p=!0,za(c,!1),n.lanes=4194304)}else{if(!p)if(e=no(m),e!==null){if(n.flags|=128,p=!0,e=e.updateQueue,n.updateQueue=e,yo(n,e),za(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!_t)return Yt(n),null}else 2*He()-c.renderingStartTime>wo&&a!==536870912&&(n.flags|=128,p=!0,za(c,!1),n.lanes=4194304);c.isBackwards?(m.sibling=n.child,n.child=m):(e=c.last,e!==null?e.sibling=m:n.child=m,c.last=m)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=He(),e.sibling=null,a=ne.current,W(ne,p?a&1|2:a&1),_t&&zi(n,c.treeForkCount),e):(Yt(n),null);case 22:case 23:return qe(n),Tc(),c=n.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(n.flags|=8192):c&&(n.flags|=8192),c?(a&536870912)!==0&&(n.flags&128)===0&&(Yt(n),n.subtreeFlags&6&&(n.flags|=8192)):Yt(n),a=n.updateQueue,a!==null&&yo(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==a&&(n.flags|=2048),e!==null&&H(Xn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Fi(re),Yt(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function c0(e,n){switch(cc(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Fi(re),Gt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return nn(n),null;case 31:if(n.memoizedState!==null){if(qe(n),n.alternate===null)throw Error(s(340));jn()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(qe(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));jn()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return H(ne),null;case 4:return Gt(),null;case 10:return Fi(n.type),null;case 22:case 23:return qe(n),Tc(),e!==null&&H(Xn),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Fi(re),null;case 25:return null;default:return null}}function yp(e,n){switch(cc(n),n.tag){case 3:Fi(re),Gt();break;case 26:case 27:case 5:nn(n);break;case 4:Gt();break;case 31:n.memoizedState!==null&&qe(n);break;case 13:qe(n);break;case 19:H(ne);break;case 10:Fi(n.type);break;case 22:case 23:qe(n),Tc(),e!==null&&H(Xn);break;case 24:Fi(re)}}function Pa(e,n){try{var a=n.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var p=c.next;a=p;do{if((a.tag&e)===e){c=void 0;var m=a.create,v=a.inst;c=m(),v.destroy=c}a=a.next}while(a!==p)}}catch(_){Ft(n,n.return,_)}}function mn(e,n,a){try{var c=n.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var m=p.next;c=m;do{if((c.tag&e)===e){var v=c.inst,_=v.destroy;if(_!==void 0){v.destroy=void 0,p=n;var M=a,F=_;try{F()}catch(X){Ft(p,M,X)}}}c=c.next}while(c!==m)}}catch(X){Ft(n,n.return,X)}}function bp(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{lf(n,a)}catch(c){Ft(e,e.return,c)}}}function vp(e,n,a){a.props=Wn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(c){Ft(e,n,c)}}function Fa(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof a=="function"?e.refCleanup=a(c):a.current=c}}catch(p){Ft(e,n,p)}}function Si(e,n){var a=e.ref,c=e.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(p){Ft(e,n,p)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(p){Ft(e,n,p)}else a.current=null}function Ap(e){var n=e.type,a=e.memoizedProps,c=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break t;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(p){Ft(e,e.return,p)}}function iu(e,n,a){try{var c=e.stateNode;L0(c,e.type,a,n),c[Le]=n}catch(p){Ft(e,e.return,p)}}function Sp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&En(e.type)||e.tag===4}function nu(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Sp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&En(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function su(e,n,a){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Ni));else if(c!==4&&(c===27&&En(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(su(e,n,a),e=e.sibling;e!==null;)su(e,n,a),e=e.sibling}function bo(e,n,a){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(c!==4&&(c===27&&En(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(bo(e,n,a),e=e.sibling;e!==null;)bo(e,n,a),e=e.sibling}function wp(e){var n=e.stateNode,a=e.memoizedProps;try{for(var c=e.type,p=n.attributes;p.length;)n.removeAttributeNode(p[0]);Ee(n,c,a),n[ve]=e,n[Le]=a}catch(m){Ft(e,e.return,m)}}var Gi=!1,ce=!1,au=!1,Ep=typeof WeakSet=="function"?WeakSet:Set,me=null;function u0(e,n){if(e=e.containerInfo,Cu=Uo,e=kd(e),Zl(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var p=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break t}var v=0,_=-1,M=-1,F=0,X=0,q=e,U=null;e:for(;;){for(var I;q!==a||p!==0&&q.nodeType!==3||(_=v+p),q!==m||c!==0&&q.nodeType!==3||(M=v+c),q.nodeType===3&&(v+=q.nodeValue.length),(I=q.firstChild)!==null;)U=q,q=I;for(;;){if(q===e)break e;if(U===a&&++F===p&&(_=v),U===m&&++X===c&&(M=v),(I=q.nextSibling)!==null)break;q=U,U=q.parentNode}q=I}a=_===-1||M===-1?null:{start:_,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(xu={focusedElem:e,selectionRange:a},Uo=!1,me=n;me!==null;)if(n=me,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,me=e;else for(;me!==null;){switch(n=me,m=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)p=e[a],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,a=n,p=m.memoizedProps,m=m.memoizedState,c=a.stateNode;try{var nt=Wn(a.type,p);e=c.getSnapshotBeforeUpdate(nt,m),c.__reactInternalSnapshotBeforeUpdate=e}catch(ct){Ft(a,a.return,ct)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)Ru(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ru(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,me=e;break}me=n.return}}function Tp(e,n,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Xi(e,a),c&4&&Pa(5,a);break;case 1:if(Xi(e,a),c&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(v){Ft(a,a.return,v)}else{var p=Wn(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(p,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Ft(a,a.return,v)}}c&64&&bp(a),c&512&&Fa(a,a.return);break;case 3:if(Xi(e,a),c&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{lf(e,n)}catch(v){Ft(a,a.return,v)}}break;case 27:n===null&&c&4&&wp(a);case 26:case 5:Xi(e,a),n===null&&c&4&&Ap(a),c&512&&Fa(a,a.return);break;case 12:Xi(e,a);break;case 31:Xi(e,a),c&4&&xp(e,a);break;case 13:Xi(e,a),c&4&&Mp(e,a),c&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=v0.bind(null,a),U0(e,a))));break;case 22:if(c=a.memoizedState!==null||Gi,!c){n=n!==null&&n.memoizedState!==null||ce,p=Gi;var m=ce;Gi=c,(ce=n)&&!m?Yi(e,a,(a.subtreeFlags&8772)!==0):Xi(e,a),Gi=p,ce=m}break;case 30:break;default:Xi(e,a)}}function _p(e){var n=e.alternate;n!==null&&(e.alternate=null,_p(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Bl(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var qt=null,Ne=!1;function Vi(e,n,a){for(a=a.child;a!==null;)Cp(e,n,a),a=a.sibling}function Cp(e,n,a){if(je&&typeof je.onCommitFiberUnmount=="function")try{je.onCommitFiberUnmount(la,a)}catch{}switch(a.tag){case 26:ce||Si(a,n),Vi(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ce||Si(a,n);var c=qt,p=Ne;En(a.type)&&(qt=a.stateNode,Ne=!1),Vi(e,n,a),qa(a.stateNode),qt=c,Ne=p;break;case 5:ce||Si(a,n);case 6:if(c=qt,p=Ne,qt=null,Vi(e,n,a),qt=c,Ne=p,qt!==null)if(Ne)try{(qt.nodeType===9?qt.body:qt.nodeName==="HTML"?qt.ownerDocument.body:qt).removeChild(a.stateNode)}catch(m){Ft(a,n,m)}else try{qt.removeChild(a.stateNode)}catch(m){Ft(a,n,m)}break;case 18:qt!==null&&(Ne?(e=qt,bg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Xs(e)):bg(qt,a.stateNode));break;case 4:c=qt,p=Ne,qt=a.stateNode.containerInfo,Ne=!0,Vi(e,n,a),qt=c,Ne=p;break;case 0:case 11:case 14:case 15:mn(2,a,n),ce||mn(4,a,n),Vi(e,n,a);break;case 1:ce||(Si(a,n),c=a.stateNode,typeof c.componentWillUnmount=="function"&&vp(a,n,c)),Vi(e,n,a);break;case 21:Vi(e,n,a);break;case 22:ce=(c=ce)||a.memoizedState!==null,Vi(e,n,a),ce=c;break;default:Vi(e,n,a)}}function xp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Xs(e)}catch(a){Ft(n,n.return,a)}}}function Mp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Xs(e)}catch(a){Ft(n,n.return,a)}}function h0(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Ep),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Ep),n;default:throw Error(s(435,e.tag))}}function vo(e,n){var a=h0(e);n.forEach(function(c){if(!a.has(c)){a.add(c);var p=A0.bind(null,e,c);c.then(p,p)}})}function ke(e,n){var a=n.deletions;if(a!==null)for(var c=0;c<a.length;c++){var p=a[c],m=e,v=n,_=v;t:for(;_!==null;){switch(_.tag){case 27:if(En(_.type)){qt=_.stateNode,Ne=!1;break t}break;case 5:qt=_.stateNode,Ne=!1;break t;case 3:case 4:qt=_.stateNode.containerInfo,Ne=!0;break t}_=_.return}if(qt===null)throw Error(s(160));Cp(m,v,p),qt=null,Ne=!1,m=p.alternate,m!==null&&(m.return=null),p.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Dp(n,e),n=n.sibling}var mi=null;function Dp(e,n){var a=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ke(n,e),Be(e),c&4&&(mn(3,e,e.return),Pa(3,e),mn(5,e,e.return));break;case 1:ke(n,e),Be(e),c&512&&(ce||a===null||Si(a,a.return)),c&64&&Gi&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var p=mi;if(ke(n,e),Be(e),c&512&&(ce||a===null||Si(a,a.return)),c&4){var m=a!==null?a.memoizedState:null;if(c=e.memoizedState,a===null)if(c===null)if(e.stateNode===null){t:{c=e.type,a=e.memoizedProps,p=p.ownerDocument||p;e:switch(c){case"title":m=p.getElementsByTagName("title")[0],(!m||m[ha]||m[ve]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=p.createElement(c),p.head.insertBefore(m,p.querySelector("head > title"))),Ee(m,c,a),m[ve]=e,ge(m),c=m;break t;case"link":var v=Dg("link","href",p).get(c+(a.href||""));if(v){for(var _=0;_<v.length;_++)if(m=v[_],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(_,1);break e}}m=p.createElement(c),Ee(m,c,a),p.head.appendChild(m);break;case"meta":if(v=Dg("meta","content",p).get(c+(a.content||""))){for(_=0;_<v.length;_++)if(m=v[_],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(_,1);break e}}m=p.createElement(c),Ee(m,c,a),p.head.appendChild(m);break;default:throw Error(s(468,c))}m[ve]=e,ge(m),c=m}e.stateNode=c}else Rg(p,e.type,e.stateNode);else e.stateNode=Mg(p,c,e.memoizedProps);else m!==c?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,c===null?Rg(p,e.type,e.stateNode):Mg(p,c,e.memoizedProps)):c===null&&e.stateNode!==null&&iu(e,e.memoizedProps,a.memoizedProps)}break;case 27:ke(n,e),Be(e),c&512&&(ce||a===null||Si(a,a.return)),a!==null&&c&4&&iu(e,e.memoizedProps,a.memoizedProps);break;case 5:if(ke(n,e),Be(e),c&512&&(ce||a===null||Si(a,a.return)),e.flags&32){p=e.stateNode;try{ps(p,"")}catch(nt){Ft(e,e.return,nt)}}c&4&&e.stateNode!=null&&(p=e.memoizedProps,iu(e,p,a!==null?a.memoizedProps:p)),c&1024&&(au=!0);break;case 6:if(ke(n,e),Be(e),c&4){if(e.stateNode===null)throw Error(s(162));c=e.memoizedProps,a=e.stateNode;try{a.nodeValue=c}catch(nt){Ft(e,e.return,nt)}}break;case 3:if(Bo=null,p=mi,mi=No(n.containerInfo),ke(n,e),mi=p,Be(e),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Xs(n.containerInfo)}catch(nt){Ft(e,e.return,nt)}au&&(au=!1,Rp(e));break;case 4:c=mi,mi=No(e.stateNode.containerInfo),ke(n,e),Be(e),mi=c;break;case 12:ke(n,e),Be(e);break;case 31:ke(n,e),Be(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,vo(e,c)));break;case 13:ke(n,e),Be(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(So=He()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,vo(e,c)));break;case 22:p=e.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,F=Gi,X=ce;if(Gi=F||p,ce=X||M,ke(n,e),ce=X,Gi=F,Be(e),c&8192)t:for(n=e.stateNode,n._visibility=p?n._visibility&-2:n._visibility|1,p&&(a===null||M||Gi||ce||Qn(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){M=a=n;try{if(m=M.stateNode,p)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{_=M.stateNode;var q=M.memoizedProps.style,U=q!=null&&q.hasOwnProperty("display")?q.display:null;_.style.display=U==null||typeof U=="boolean"?"":(""+U).trim()}}catch(nt){Ft(M,M.return,nt)}}}else if(n.tag===6){if(a===null){M=n;try{M.stateNode.nodeValue=p?"":M.memoizedProps}catch(nt){Ft(M,M.return,nt)}}}else if(n.tag===18){if(a===null){M=n;try{var I=M.stateNode;p?vg(I,!0):vg(M.stateNode,!1)}catch(nt){Ft(M,M.return,nt)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}c&4&&(c=e.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,vo(e,a))));break;case 19:ke(n,e),Be(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,vo(e,c)));break;case 30:break;case 21:break;default:ke(n,e),Be(e)}}function Be(e){var n=e.flags;if(n&2){try{for(var a,c=e.return;c!==null;){if(Sp(c)){a=c;break}c=c.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var p=a.stateNode,m=nu(e);bo(e,m,p);break;case 5:var v=a.stateNode;a.flags&32&&(ps(v,""),a.flags&=-33);var _=nu(e);bo(e,_,v);break;case 3:case 4:var M=a.stateNode.containerInfo,F=nu(e);su(e,F,M);break;default:throw Error(s(161))}}catch(X){Ft(e,e.return,X)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Rp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Rp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Xi(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Tp(e,n.alternate,n),n=n.sibling}function Qn(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:mn(4,n,n.return),Qn(n);break;case 1:Si(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&vp(n,n.return,a),Qn(n);break;case 27:qa(n.stateNode);case 26:case 5:Si(n,n.return),Qn(n);break;case 22:n.memoizedState===null&&Qn(n);break;case 30:Qn(n);break;default:Qn(n)}e=e.sibling}}function Yi(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var c=n.alternate,p=e,m=n,v=m.flags;switch(m.tag){case 0:case 11:case 15:Yi(p,m,a),Pa(4,m);break;case 1:if(Yi(p,m,a),c=m,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(F){Ft(c,c.return,F)}if(c=m,p=c.updateQueue,p!==null){var _=c.stateNode;try{var M=p.shared.hiddenCallbacks;if(M!==null)for(p.shared.hiddenCallbacks=null,p=0;p<M.length;p++)of(M[p],_)}catch(F){Ft(c,c.return,F)}}a&&v&64&&bp(m),Fa(m,m.return);break;case 27:wp(m);case 26:case 5:Yi(p,m,a),a&&c===null&&v&4&&Ap(m),Fa(m,m.return);break;case 12:Yi(p,m,a);break;case 31:Yi(p,m,a),a&&v&4&&xp(p,m);break;case 13:Yi(p,m,a),a&&v&4&&Mp(p,m);break;case 22:m.memoizedState===null&&Yi(p,m,a),Fa(m,m.return);break;case 30:break;default:Yi(p,m,a)}n=n.sibling}}function ru(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Ta(a))}function ou(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ta(e))}function yi(e,n,a,c){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Lp(e,n,a,c),n=n.sibling}function Lp(e,n,a,c){var p=n.flags;switch(n.tag){case 0:case 11:case 15:yi(e,n,a,c),p&2048&&Pa(9,n);break;case 1:yi(e,n,a,c);break;case 3:yi(e,n,a,c),p&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ta(e)));break;case 12:if(p&2048){yi(e,n,a,c),e=n.stateNode;try{var m=n.memoizedProps,v=m.id,_=m.onPostCommit;typeof _=="function"&&_(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(M){Ft(n,n.return,M)}}else yi(e,n,a,c);break;case 31:yi(e,n,a,c);break;case 13:yi(e,n,a,c);break;case 23:break;case 22:m=n.stateNode,v=n.alternate,n.memoizedState!==null?m._visibility&2?yi(e,n,a,c):Ua(e,n):m._visibility&2?yi(e,n,a,c):(m._visibility|=2,ks(e,n,a,c,(n.subtreeFlags&10256)!==0||!1)),p&2048&&ru(v,n);break;case 24:yi(e,n,a,c),p&2048&&ou(n.alternate,n);break;default:yi(e,n,a,c)}}function ks(e,n,a,c,p){for(p=p&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=e,v=n,_=a,M=c,F=v.flags;switch(v.tag){case 0:case 11:case 15:ks(m,v,_,M,p),Pa(8,v);break;case 23:break;case 22:var X=v.stateNode;v.memoizedState!==null?X._visibility&2?ks(m,v,_,M,p):Ua(m,v):(X._visibility|=2,ks(m,v,_,M,p)),p&&F&2048&&ru(v.alternate,v);break;case 24:ks(m,v,_,M,p),p&&F&2048&&ou(v.alternate,v);break;default:ks(m,v,_,M,p)}n=n.sibling}}function Ua(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,c=n,p=c.flags;switch(c.tag){case 22:Ua(a,c),p&2048&&ru(c.alternate,c);break;case 24:Ua(a,c),p&2048&&ou(c.alternate,c);break;default:Ua(a,c)}n=n.sibling}}var Ia=8192;function Bs(e,n,a){if(e.subtreeFlags&Ia)for(e=e.child;e!==null;)Op(e,n,a),e=e.sibling}function Op(e,n,a){switch(e.tag){case 26:Bs(e,n,a),e.flags&Ia&&e.memoizedState!==null&&Q0(a,mi,e.memoizedState,e.memoizedProps);break;case 5:Bs(e,n,a);break;case 3:case 4:var c=mi;mi=No(e.stateNode.containerInfo),Bs(e,n,a),mi=c;break;case 22:e.memoizedState===null&&(c=e.alternate,c!==null&&c.memoizedState!==null?(c=Ia,Ia=16777216,Bs(e,n,a),Ia=c):Bs(e,n,a));break;default:Bs(e,n,a)}}function Np(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Ha(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var c=n[a];me=c,Bp(c,e)}Np(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)kp(e),e=e.sibling}function kp(e){switch(e.tag){case 0:case 11:case 15:Ha(e),e.flags&2048&&mn(9,e,e.return);break;case 3:Ha(e);break;case 12:Ha(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Ao(e)):Ha(e);break;default:Ha(e)}}function Ao(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var c=n[a];me=c,Bp(c,e)}Np(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:mn(8,n,n.return),Ao(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Ao(n));break;default:Ao(n)}e=e.sibling}}function Bp(e,n){for(;me!==null;){var a=me;switch(a.tag){case 0:case 11:case 15:mn(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ta(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,me=c;else t:for(a=e;me!==null;){c=me;var p=c.sibling,m=c.return;if(_p(c),c===a){me=null;break t}if(p!==null){p.return=m,me=p;break t}me=m}}}var d0={getCacheForType:function(e){var n=Se(re),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return Se(re).controller.signal}},f0=typeof WeakMap=="function"?WeakMap:Map,Lt=0,Vt=null,St=null,Et=0,Pt=0,$e=null,yn=!1,zs=!1,lu=!1,qi=0,te=0,bn=0,Zn=0,cu=0,Ke=0,Ps=0,ja=null,ze=null,uu=!1,So=0,zp=0,wo=1/0,Eo=null,vn=null,de=0,An=null,Fs=null,$i=0,hu=0,du=null,Pp=null,Ga=0,fu=null;function We(){return(Lt&2)!==0&&Et!==0?Et&-Et:k.T!==null?vu():Zh()}function Fp(){if(Ke===0)if((Et&536870912)===0||_t){var e=Rr;Rr<<=1,(Rr&3932160)===0&&(Rr=262144),Ke=e}else Ke=536870912;return e=Ye.current,e!==null&&(e.flags|=32),Ke}function Pe(e,n,a){(e===Vt&&(Pt===2||Pt===9)||e.cancelPendingCommit!==null)&&(Us(e,0),Sn(e,Et,Ke,!1)),ua(e,a),((Lt&2)===0||e!==Vt)&&(e===Vt&&((Lt&2)===0&&(Zn|=a),te===4&&Sn(e,Et,Ke,!1)),wi(e))}function Up(e,n,a){if((Lt&6)!==0)throw Error(s(327));var c=!a&&(n&127)===0&&(n&e.expiredLanes)===0||ca(e,n),p=c?m0(e,n):gu(e,n,!0),m=c;do{if(p===0){zs&&!c&&Sn(e,n,0,!1);break}else{if(a=e.current.alternate,m&&!p0(a)){p=gu(e,n,!1),m=!1;continue}if(p===2){if(m=n,e.errorRecoveryDisabledLanes&m)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;t:{var _=e;p=ja;var M=_.current.memoizedState.isDehydrated;if(M&&(Us(_,v).flags|=256),v=gu(_,v,!1),v!==2){if(lu&&!M){_.errorRecoveryDisabledLanes|=m,Zn|=m,p=4;break t}m=ze,ze=p,m!==null&&(ze===null?ze=m:ze.push.apply(ze,m))}p=v}if(m=!1,p!==2)continue}}if(p===1){Us(e,0),Sn(e,n,0,!0);break}t:{switch(c=e,m=p,m){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Sn(c,n,Ke,!yn);break t;case 2:ze=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(p=So+300-He(),10<p)){if(Sn(c,n,Ke,!yn),Or(c,0,!0)!==0)break t;$i=n,c.timeoutHandle=mg(Ip.bind(null,c,a,ze,Eo,uu,n,Ke,Zn,Ps,yn,m,"Throttled",-0,0),p);break t}Ip(c,a,ze,Eo,uu,n,Ke,Zn,Ps,yn,m,null,-0,0)}}break}while(!0);wi(e)}function Ip(e,n,a,c,p,m,v,_,M,F,X,q,U,I){if(e.timeoutHandle=-1,q=n.subtreeFlags,q&8192||(q&16785408)===16785408){q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ni},Op(n,m,q);var nt=(m&62914560)===m?So-He():(m&4194048)===m?zp-He():0;if(nt=Z0(q,nt),nt!==null){$i=m,e.cancelPendingCommit=nt($p.bind(null,e,n,m,a,c,p,v,_,M,X,q,null,U,I)),Sn(e,m,v,!F);return}}$p(e,n,m,a,c,p,v,_,M)}function p0(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var p=a[c],m=p.getSnapshot;p=p.value;try{if(!Ve(m(),p))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Sn(e,n,a,c){n&=~cu,n&=~Zn,e.suspendedLanes|=n,e.pingedLanes&=~n,c&&(e.warmLanes|=n),c=e.expirationTimes;for(var p=n;0<p;){var m=31-Ge(p),v=1<<m;c[m]=-1,p&=~v}a!==0&&Kh(e,a,n)}function To(){return(Lt&6)===0?(Va(0),!1):!0}function pu(){if(St!==null){if(Pt===0)var e=St.return;else e=St,Pi=Gn=null,Rc(e),Ds=null,Ca=0,e=St;for(;e!==null;)yp(e.alternate,e),e=e.return;St=null}}function Us(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,k0(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),$i=0,pu(),Vt=e,St=a=Bi(e.current,null),Et=n,Pt=0,$e=null,yn=!1,zs=ca(e,n),lu=!1,Ps=Ke=cu=Zn=bn=te=0,ze=ja=null,uu=!1,(n&8)!==0&&(n|=n&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=n;0<c;){var p=31-Ge(c),m=1<<p;n|=e[p],c&=~m}return qi=n,Vr(),a}function Hp(e,n){bt=null,k.H=ka,n===Ms||n===Zr?(n=nf(),Pt=3):n===bc?(n=nf(),Pt=4):Pt=n===Yc?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,$e=n,St===null&&(te=1,fo(e,ni(n,e.current)))}function jp(){var e=Ye.current;return e===null?!0:(Et&4194048)===Et?oi===null:(Et&62914560)===Et||(Et&536870912)!==0?e===oi:!1}function Gp(){var e=k.H;return k.H=ka,e===null?ka:e}function Vp(){var e=k.A;return k.A=d0,e}function _o(){te=4,yn||(Et&4194048)!==Et&&Ye.current!==null||(zs=!0),(bn&134217727)===0&&(Zn&134217727)===0||Vt===null||Sn(Vt,Et,Ke,!1)}function gu(e,n,a){var c=Lt;Lt|=2;var p=Gp(),m=Vp();(Vt!==e||Et!==n)&&(Eo=null,Us(e,n)),n=!1;var v=te;t:do try{if(Pt!==0&&St!==null){var _=St,M=$e;switch(Pt){case 8:pu(),v=6;break t;case 3:case 2:case 9:case 6:Ye.current===null&&(n=!0);var F=Pt;if(Pt=0,$e=null,Is(e,_,M,F),a&&zs){v=0;break t}break;default:F=Pt,Pt=0,$e=null,Is(e,_,M,F)}}g0(),v=te;break}catch(X){Hp(e,X)}while(!0);return n&&e.shellSuspendCounter++,Pi=Gn=null,Lt=c,k.H=p,k.A=m,St===null&&(Vt=null,Et=0,Vr()),v}function g0(){for(;St!==null;)Xp(St)}function m0(e,n){var a=Lt;Lt|=2;var c=Gp(),p=Vp();Vt!==e||Et!==n?(Eo=null,wo=He()+500,Us(e,n)):zs=ca(e,n);t:do try{if(Pt!==0&&St!==null){n=St;var m=$e;e:switch(Pt){case 1:Pt=0,$e=null,Is(e,n,m,1);break;case 2:case 9:if(tf(m)){Pt=0,$e=null,Yp(n);break}n=function(){Pt!==2&&Pt!==9||Vt!==e||(Pt=7),wi(e)},m.then(n,n);break t;case 3:Pt=7;break t;case 4:Pt=5;break t;case 7:tf(m)?(Pt=0,$e=null,Yp(n)):(Pt=0,$e=null,Is(e,n,m,7));break;case 5:var v=null;switch(St.tag){case 26:v=St.memoizedState;case 5:case 27:var _=St;if(v?Lg(v):_.stateNode.complete){Pt=0,$e=null;var M=_.sibling;if(M!==null)St=M;else{var F=_.return;F!==null?(St=F,Co(F)):St=null}break e}}Pt=0,$e=null,Is(e,n,m,5);break;case 6:Pt=0,$e=null,Is(e,n,m,6);break;case 8:pu(),te=6;break t;default:throw Error(s(462))}}y0();break}catch(X){Hp(e,X)}while(!0);return Pi=Gn=null,k.H=c,k.A=p,Lt=a,St!==null?0:(Vt=null,Et=0,Vr(),te)}function y0(){for(;St!==null&&!Iy();)Xp(St)}function Xp(e){var n=gp(e.alternate,e,qi);e.memoizedProps=e.pendingProps,n===null?Co(e):St=n}function Yp(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=cp(a,n,n.pendingProps,n.type,void 0,Et);break;case 11:n=cp(a,n,n.pendingProps,n.type.render,n.ref,Et);break;case 5:Rc(n);default:yp(a,n),n=St=Gd(n,qi),n=gp(a,n,qi)}e.memoizedProps=e.pendingProps,n===null?Co(e):St=n}function Is(e,n,a,c){Pi=Gn=null,Rc(n),Ds=null,Ca=0;var p=n.return;try{if(a0(e,p,n,a,Et)){te=1,fo(e,ni(a,e.current)),St=null;return}}catch(m){if(p!==null)throw St=p,m;te=1,fo(e,ni(a,e.current)),St=null;return}n.flags&32768?(_t||c===1?e=!0:zs||(Et&536870912)!==0?e=!1:(yn=e=!0,(c===2||c===9||c===3||c===6)&&(c=Ye.current,c!==null&&c.tag===13&&(c.flags|=16384))),qp(n,e)):Co(n)}function Co(e){var n=e;do{if((n.flags&32768)!==0){qp(n,yn);return}e=n.return;var a=l0(n.alternate,n,qi);if(a!==null){St=a;return}if(n=n.sibling,n!==null){St=n;return}St=n=e}while(n!==null);te===0&&(te=5)}function qp(e,n){do{var a=c0(e.alternate,e);if(a!==null){a.flags&=32767,St=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){St=e;return}St=e=a}while(e!==null);te=6,St=null}function $p(e,n,a,c,p,m,v,_,M){e.cancelPendingCommit=null;do xo();while(de!==0);if((Lt&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(m=n.lanes|n.childLanes,m|=nc,Wy(e,a,m,v,_,M),e===Vt&&(St=Vt=null,Et=0),Fs=n,An=e,$i=a,hu=m,du=p,Pp=c,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,S0(Mr,function(){return Jp(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||c){c=k.T,k.T=null,p=V.p,V.p=2,v=Lt,Lt|=4;try{u0(e,n,a)}finally{Lt=v,V.p=p,k.T=c}}de=1,Kp(),Wp(),Qp()}}function Kp(){if(de===1){de=0;var e=An,n=Fs,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=k.T,k.T=null;var c=V.p;V.p=2;var p=Lt;Lt|=4;try{Dp(n,e);var m=xu,v=kd(e.containerInfo),_=m.focusedElem,M=m.selectionRange;if(v!==_&&_&&_.ownerDocument&&Nd(_.ownerDocument.documentElement,_)){if(M!==null&&Zl(_)){var F=M.start,X=M.end;if(X===void 0&&(X=F),"selectionStart"in _)_.selectionStart=F,_.selectionEnd=Math.min(X,_.value.length);else{var q=_.ownerDocument||document,U=q&&q.defaultView||window;if(U.getSelection){var I=U.getSelection(),nt=_.textContent.length,ct=Math.min(M.start,nt),Ht=M.end===void 0?ct:Math.min(M.end,nt);!I.extend&&ct>Ht&&(v=Ht,Ht=ct,ct=v);var B=Od(_,ct),R=Od(_,Ht);if(B&&R&&(I.rangeCount!==1||I.anchorNode!==B.node||I.anchorOffset!==B.offset||I.focusNode!==R.node||I.focusOffset!==R.offset)){var P=q.createRange();P.setStart(B.node,B.offset),I.removeAllRanges(),ct>Ht?(I.addRange(P),I.extend(R.node,R.offset)):(P.setEnd(R.node,R.offset),I.addRange(P))}}}}for(q=[],I=_;I=I.parentNode;)I.nodeType===1&&q.push({element:I,left:I.scrollLeft,top:I.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<q.length;_++){var Y=q[_];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Uo=!!Cu,xu=Cu=null}finally{Lt=p,V.p=c,k.T=a}}e.current=n,de=2}}function Wp(){if(de===2){de=0;var e=An,n=Fs,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=k.T,k.T=null;var c=V.p;V.p=2;var p=Lt;Lt|=4;try{Tp(e,n.alternate,n)}finally{Lt=p,V.p=c,k.T=a}}de=3}}function Qp(){if(de===4||de===3){de=0,Hy();var e=An,n=Fs,a=$i,c=Pp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?de=5:(de=0,Fs=An=null,Zp(e,e.pendingLanes));var p=e.pendingLanes;if(p===0&&(vn=null),Nl(a),n=n.stateNode,je&&typeof je.onCommitFiberRoot=="function")try{je.onCommitFiberRoot(la,n,void 0,(n.current.flags&128)===128)}catch{}if(c!==null){n=k.T,p=V.p,V.p=2,k.T=null;try{for(var m=e.onRecoverableError,v=0;v<c.length;v++){var _=c[v];m(_.value,{componentStack:_.stack})}}finally{k.T=n,V.p=p}}($i&3)!==0&&xo(),wi(e),p=e.pendingLanes,(a&261930)!==0&&(p&42)!==0?e===fu?Ga++:(Ga=0,fu=e):Ga=0,Va(0)}}function Zp(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Ta(n)))}function xo(){return Kp(),Wp(),Qp(),Jp()}function Jp(){if(de!==5)return!1;var e=An,n=hu;hu=0;var a=Nl($i),c=k.T,p=V.p;try{V.p=32>a?32:a,k.T=null,a=du,du=null;var m=An,v=$i;if(de=0,Fs=An=null,$i=0,(Lt&6)!==0)throw Error(s(331));var _=Lt;if(Lt|=4,kp(m.current),Lp(m,m.current,v,a),Lt=_,Va(0,!1),je&&typeof je.onPostCommitFiberRoot=="function")try{je.onPostCommitFiberRoot(la,m)}catch{}return!0}finally{V.p=p,k.T=c,Zp(e,n)}}function tg(e,n,a){n=ni(a,n),n=Xc(e.stateNode,n,2),e=fn(e,n,2),e!==null&&(ua(e,2),wi(e))}function Ft(e,n,a){if(e.tag===3)tg(e,e,a);else for(;n!==null;){if(n.tag===3){tg(n,e,a);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(vn===null||!vn.has(c))){e=ni(a,e),a=ep(2),c=fn(n,a,2),c!==null&&(ip(a,c,n,e),ua(c,2),wi(c));break}}n=n.return}}function mu(e,n,a){var c=e.pingCache;if(c===null){c=e.pingCache=new f0;var p=new Set;c.set(n,p)}else p=c.get(n),p===void 0&&(p=new Set,c.set(n,p));p.has(a)||(lu=!0,p.add(a),e=b0.bind(null,e,n,a),n.then(e,e))}function b0(e,n,a){var c=e.pingCache;c!==null&&c.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Vt===e&&(Et&a)===a&&(te===4||te===3&&(Et&62914560)===Et&&300>He()-So?(Lt&2)===0&&Us(e,0):cu|=a,Ps===Et&&(Ps=0)),wi(e)}function eg(e,n){n===0&&(n=$h()),e=In(e,n),e!==null&&(ua(e,n),wi(e))}function v0(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),eg(e,a)}function A0(e,n){var a=0;switch(e.tag){case 31:case 13:var c=e.stateNode,p=e.memoizedState;p!==null&&(a=p.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(n),eg(e,a)}function S0(e,n){return Dl(e,n)}var Mo=null,Hs=null,yu=!1,Do=!1,bu=!1,wn=0;function wi(e){e!==Hs&&e.next===null&&(Hs===null?Mo=Hs=e:Hs=Hs.next=e),Do=!0,yu||(yu=!0,E0())}function Va(e,n){if(!bu&&Do){bu=!0;do for(var a=!1,c=Mo;c!==null;){if(e!==0){var p=c.pendingLanes;if(p===0)var m=0;else{var v=c.suspendedLanes,_=c.pingedLanes;m=(1<<31-Ge(42|e)+1)-1,m&=p&~(v&~_),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,ag(c,m))}else m=Et,m=Or(c,c===Vt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||ca(c,m)||(a=!0,ag(c,m));c=c.next}while(a);bu=!1}}function w0(){ig()}function ig(){Do=yu=!1;var e=0;wn!==0&&N0()&&(e=wn);for(var n=He(),a=null,c=Mo;c!==null;){var p=c.next,m=ng(c,n);m===0?(c.next=null,a===null?Mo=p:a.next=p,p===null&&(Hs=a)):(a=c,(e!==0||(m&3)!==0)&&(Do=!0)),c=p}de!==0&&de!==5||Va(e),wn!==0&&(wn=0)}function ng(e,n){for(var a=e.suspendedLanes,c=e.pingedLanes,p=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var v=31-Ge(m),_=1<<v,M=p[v];M===-1?((_&a)===0||(_&c)!==0)&&(p[v]=Ky(_,n)):M<=n&&(e.expiredLanes|=_),m&=~_}if(n=Vt,a=Et,a=Or(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,a===0||e===n&&(Pt===2||Pt===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&Rl(c),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ca(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(c!==null&&Rl(c),Nl(a)){case 2:case 8:a=Yh;break;case 32:a=Mr;break;case 268435456:a=qh;break;default:a=Mr}return c=sg.bind(null,e),a=Dl(a,c),e.callbackPriority=n,e.callbackNode=a,n}return c!==null&&c!==null&&Rl(c),e.callbackPriority=2,e.callbackNode=null,2}function sg(e,n){if(de!==0&&de!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(xo()&&e.callbackNode!==a)return null;var c=Et;return c=Or(e,e===Vt?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(Up(e,c,n),ng(e,He()),e.callbackNode!=null&&e.callbackNode===a?sg.bind(null,e):null)}function ag(e,n){if(xo())return null;Up(e,n,!0)}function E0(){B0(function(){(Lt&6)!==0?Dl(Xh,w0):ig()})}function vu(){if(wn===0){var e=Cs;e===0&&(e=Dr,Dr<<=1,(Dr&261888)===0&&(Dr=256)),wn=e}return wn}function rg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:zr(""+e)}function og(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function T0(e,n,a,c,p){if(n==="submit"&&a&&a.stateNode===p){var m=rg((p[Le]||null).action),v=c.submitter;v&&(n=(n=v[Le]||null)?rg(n.formAction):v.getAttribute("formAction"),n!==null&&(m=n,v=null));var _=new Ir("action","action",null,c,p);e.push({event:_,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(wn!==0){var M=v?og(p,v):new FormData(p);Uc(a,{pending:!0,data:M,method:p.method,action:m},null,M)}}else typeof m=="function"&&(_.preventDefault(),M=v?og(p,v):new FormData(p),Uc(a,{pending:!0,data:M,method:p.method,action:m},m,M))},currentTarget:p}]})}}for(var Au=0;Au<ic.length;Au++){var Su=ic[Au],_0=Su.toLowerCase(),C0=Su[0].toUpperCase()+Su.slice(1);gi(_0,"on"+C0)}gi(Pd,"onAnimationEnd"),gi(Fd,"onAnimationIteration"),gi(Ud,"onAnimationStart"),gi("dblclick","onDoubleClick"),gi("focusin","onFocus"),gi("focusout","onBlur"),gi(jb,"onTransitionRun"),gi(Gb,"onTransitionStart"),gi(Vb,"onTransitionCancel"),gi(Id,"onTransitionEnd"),ds("onMouseEnter",["mouseout","mouseover"]),ds("onMouseLeave",["mouseout","mouseover"]),ds("onPointerEnter",["pointerout","pointerover"]),ds("onPointerLeave",["pointerout","pointerover"]),zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zn("onBeforeInput",["compositionend","keypress","textInput","paste"]),zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),x0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xa));function lg(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var c=e[a],p=c.event;c=c.listeners;t:{var m=void 0;if(n)for(var v=c.length-1;0<=v;v--){var _=c[v],M=_.instance,F=_.currentTarget;if(_=_.listener,M!==m&&p.isPropagationStopped())break t;m=_,p.currentTarget=F;try{m(p)}catch(X){Gr(X)}p.currentTarget=null,m=M}else for(v=0;v<c.length;v++){if(_=c[v],M=_.instance,F=_.currentTarget,_=_.listener,M!==m&&p.isPropagationStopped())break t;m=_,p.currentTarget=F;try{m(p)}catch(X){Gr(X)}p.currentTarget=null,m=M}}}}function wt(e,n){var a=n[kl];a===void 0&&(a=n[kl]=new Set);var c=e+"__bubble";a.has(c)||(cg(n,e,2,!1),a.add(c))}function wu(e,n,a){var c=0;n&&(c|=4),cg(a,e,c,n)}var Ro="_reactListening"+Math.random().toString(36).slice(2);function Eu(e){if(!e[Ro]){e[Ro]=!0,ed.forEach(function(a){a!=="selectionchange"&&(x0.has(a)||wu(a,!1,e),wu(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Ro]||(n[Ro]=!0,wu("selectionchange",!1,n))}}function cg(e,n,a,c){switch(Fg(n)){case 2:var p=ev;break;case 8:p=iv;break;default:p=Fu}a=p.bind(null,n,a,e),p=void 0,!Gl||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(p=!0),c?p!==void 0?e.addEventListener(n,a,{capture:!0,passive:p}):e.addEventListener(n,a,!0):p!==void 0?e.addEventListener(n,a,{passive:p}):e.addEventListener(n,a,!1)}function Tu(e,n,a,c,p){var m=c;if((n&1)===0&&(n&2)===0&&c!==null)t:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var _=c.stateNode.containerInfo;if(_===p)break;if(v===4)for(v=c.return;v!==null;){var M=v.tag;if((M===3||M===4)&&v.stateNode.containerInfo===p)return;v=v.return}for(;_!==null;){if(v=cs(_),v===null)return;if(M=v.tag,M===5||M===6||M===26||M===27){c=m=v;continue t}_=_.parentNode}}c=c.return}fd(function(){var F=m,X=Hl(a),q=[];t:{var U=Hd.get(e);if(U!==void 0){var I=Ir,nt=e;switch(e){case"keypress":if(Fr(a)===0)break t;case"keydown":case"keyup":I=Ab;break;case"focusin":nt="focus",I=ql;break;case"focusout":nt="blur",I=ql;break;case"beforeblur":case"afterblur":I=ql;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=md;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=lb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=Eb;break;case Pd:case Fd:case Ud:I=hb;break;case Id:I=_b;break;case"scroll":case"scrollend":I=rb;break;case"wheel":I=xb;break;case"copy":case"cut":case"paste":I=fb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=bd;break;case"toggle":case"beforetoggle":I=Db}var ct=(n&4)!==0,Ht=!ct&&(e==="scroll"||e==="scrollend"),B=ct?U!==null?U+"Capture":null:U;ct=[];for(var R=F,P;R!==null;){var Y=R;if(P=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||P===null||B===null||(Y=fa(R,B),Y!=null&&ct.push(Ya(R,Y,P))),Ht)break;R=R.return}0<ct.length&&(U=new I(U,nt,null,a,X),q.push({event:U,listeners:ct}))}}if((n&7)===0){t:{if(U=e==="mouseover"||e==="pointerover",I=e==="mouseout"||e==="pointerout",U&&a!==Il&&(nt=a.relatedTarget||a.fromElement)&&(cs(nt)||nt[ls]))break t;if((I||U)&&(U=X.window===X?X:(U=X.ownerDocument)?U.defaultView||U.parentWindow:window,I?(nt=a.relatedTarget||a.toElement,I=F,nt=nt?cs(nt):null,nt!==null&&(Ht=o(nt),ct=nt.tag,nt!==Ht||ct!==5&&ct!==27&&ct!==6)&&(nt=null)):(I=null,nt=F),I!==nt)){if(ct=md,Y="onMouseLeave",B="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(ct=bd,Y="onPointerLeave",B="onPointerEnter",R="pointer"),Ht=I==null?U:da(I),P=nt==null?U:da(nt),U=new ct(Y,R+"leave",I,a,X),U.target=Ht,U.relatedTarget=P,Y=null,cs(X)===F&&(ct=new ct(B,R+"enter",nt,a,X),ct.target=P,ct.relatedTarget=Ht,Y=ct),Ht=Y,I&&nt)e:{for(ct=M0,B=I,R=nt,P=0,Y=B;Y;Y=ct(Y))P++;Y=0;for(var at=R;at;at=ct(at))Y++;for(;0<P-Y;)B=ct(B),P--;for(;0<Y-P;)R=ct(R),Y--;for(;P--;){if(B===R||R!==null&&B===R.alternate){ct=B;break e}B=ct(B),R=ct(R)}ct=null}else ct=null;I!==null&&ug(q,U,I,ct,!1),nt!==null&&Ht!==null&&ug(q,Ht,nt,ct,!0)}}t:{if(U=F?da(F):window,I=U.nodeName&&U.nodeName.toLowerCase(),I==="select"||I==="input"&&U.type==="file")var Dt=Cd;else if(Td(U))if(xd)Dt=Ub;else{Dt=Pb;var st=zb}else I=U.nodeName,!I||I.toLowerCase()!=="input"||U.type!=="checkbox"&&U.type!=="radio"?F&&Ul(F.elementType)&&(Dt=Cd):Dt=Fb;if(Dt&&(Dt=Dt(e,F))){_d(q,Dt,a,X);break t}st&&st(e,U,F),e==="focusout"&&F&&U.type==="number"&&F.memoizedProps.value!=null&&Fl(U,"number",U.value)}switch(st=F?da(F):window,e){case"focusin":(Td(st)||st.contentEditable==="true")&&(bs=st,Jl=F,Sa=null);break;case"focusout":Sa=Jl=bs=null;break;case"mousedown":tc=!0;break;case"contextmenu":case"mouseup":case"dragend":tc=!1,Bd(q,a,X);break;case"selectionchange":if(Hb)break;case"keydown":case"keyup":Bd(q,a,X)}var vt;if(Kl)t:{switch(e){case"compositionstart":var Tt="onCompositionStart";break t;case"compositionend":Tt="onCompositionEnd";break t;case"compositionupdate":Tt="onCompositionUpdate";break t}Tt=void 0}else ys?wd(e,a)&&(Tt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Tt="onCompositionStart");Tt&&(vd&&a.locale!=="ko"&&(ys||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&ys&&(vt=pd()):(rn=X,Vl="value"in rn?rn.value:rn.textContent,ys=!0)),st=Lo(F,Tt),0<st.length&&(Tt=new yd(Tt,e,null,a,X),q.push({event:Tt,listeners:st}),vt?Tt.data=vt:(vt=Ed(a),vt!==null&&(Tt.data=vt)))),(vt=Lb?Ob(e,a):Nb(e,a))&&(Tt=Lo(F,"onBeforeInput"),0<Tt.length&&(st=new yd("onBeforeInput","beforeinput",null,a,X),q.push({event:st,listeners:Tt}),st.data=vt)),T0(q,e,F,a,X)}lg(q,n)})}function Ya(e,n,a){return{instance:e,listener:n,currentTarget:a}}function Lo(e,n){for(var a=n+"Capture",c=[];e!==null;){var p=e,m=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||m===null||(p=fa(e,a),p!=null&&c.unshift(Ya(e,p,m)),p=fa(e,n),p!=null&&c.push(Ya(e,p,m))),e.tag===3)return c;e=e.return}return[]}function M0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ug(e,n,a,c,p){for(var m=n._reactName,v=[];a!==null&&a!==c;){var _=a,M=_.alternate,F=_.stateNode;if(_=_.tag,M!==null&&M===c)break;_!==5&&_!==26&&_!==27||F===null||(M=F,p?(F=fa(a,m),F!=null&&v.unshift(Ya(a,F,M))):p||(F=fa(a,m),F!=null&&v.push(Ya(a,F,M)))),a=a.return}v.length!==0&&e.push({event:n,listeners:v})}var D0=/\r\n?/g,R0=/\u0000|\uFFFD/g;function hg(e){return(typeof e=="string"?e:""+e).replace(D0,`
`).replace(R0,"")}function dg(e,n){return n=hg(n),hg(e)===n}function It(e,n,a,c,p,m){switch(a){case"children":typeof c=="string"?n==="body"||n==="textarea"&&c===""||ps(e,c):(typeof c=="number"||typeof c=="bigint")&&n!=="body"&&ps(e,""+c);break;case"className":kr(e,"class",c);break;case"tabIndex":kr(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":kr(e,a,c);break;case"style":hd(e,c,m);break;case"data":if(n!=="object"){kr(e,"data",c);break}case"src":case"href":if(c===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(a);break}c=zr(""+c),e.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(n!=="input"&&It(e,n,"name",p.name,p,null),It(e,n,"formEncType",p.formEncType,p,null),It(e,n,"formMethod",p.formMethod,p,null),It(e,n,"formTarget",p.formTarget,p,null)):(It(e,n,"encType",p.encType,p,null),It(e,n,"method",p.method,p,null),It(e,n,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(a);break}c=zr(""+c),e.setAttribute(a,c);break;case"onClick":c!=null&&(e.onclick=Ni);break;case"onScroll":c!=null&&wt("scroll",e);break;case"onScrollEnd":c!=null&&wt("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}a=zr(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,""+c):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":c===!0?e.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,c):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(a,c):e.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(a):e.setAttribute(a,c);break;case"popover":wt("beforetoggle",e),wt("toggle",e),Nr(e,"popover",c);break;case"xlinkActuate":Oi(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Oi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Oi(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Oi(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Oi(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Oi(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Oi(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Oi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Oi(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Nr(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=sb.get(a)||a,Nr(e,a,c))}}function _u(e,n,a,c,p,m){switch(a){case"style":hd(e,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof c=="string"?ps(e,c):(typeof c=="number"||typeof c=="bigint")&&ps(e,""+c);break;case"onScroll":c!=null&&wt("scroll",e);break;case"onScrollEnd":c!=null&&wt("scrollend",e);break;case"onClick":c!=null&&(e.onclick=Ni);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!id.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(p=a.endsWith("Capture"),n=a.slice(2,p?a.length-7:void 0),m=e[Le]||null,m=m!=null?m[a]:null,typeof m=="function"&&e.removeEventListener(n,m,p),typeof c=="function")){typeof m!="function"&&m!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,c,p);break t}a in e?e[a]=c:c===!0?e.setAttribute(a,""):Nr(e,a,c)}}}function Ee(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wt("error",e),wt("load",e);var c=!1,p=!1,m;for(m in a)if(a.hasOwnProperty(m)){var v=a[m];if(v!=null)switch(m){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:It(e,n,m,v,a,null)}}p&&It(e,n,"srcSet",a.srcSet,a,null),c&&It(e,n,"src",a.src,a,null);return;case"input":wt("invalid",e);var _=m=v=p=null,M=null,F=null;for(c in a)if(a.hasOwnProperty(c)){var X=a[c];if(X!=null)switch(c){case"name":p=X;break;case"type":v=X;break;case"checked":M=X;break;case"defaultChecked":F=X;break;case"value":m=X;break;case"defaultValue":_=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,n));break;default:It(e,n,c,X,a,null)}}od(e,m,_,M,F,v,p,!1);return;case"select":wt("invalid",e),c=v=m=null;for(p in a)if(a.hasOwnProperty(p)&&(_=a[p],_!=null))switch(p){case"value":m=_;break;case"defaultValue":v=_;break;case"multiple":c=_;default:It(e,n,p,_,a,null)}n=m,a=v,e.multiple=!!c,n!=null?fs(e,!!c,n,!1):a!=null&&fs(e,!!c,a,!0);return;case"textarea":wt("invalid",e),m=p=c=null;for(v in a)if(a.hasOwnProperty(v)&&(_=a[v],_!=null))switch(v){case"value":c=_;break;case"defaultValue":p=_;break;case"children":m=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:It(e,n,v,_,a,null)}cd(e,c,p,m);return;case"option":for(M in a)a.hasOwnProperty(M)&&(c=a[M],c!=null)&&(M==="selected"?e.selected=c&&typeof c!="function"&&typeof c!="symbol":It(e,n,M,c,a,null));return;case"dialog":wt("beforetoggle",e),wt("toggle",e),wt("cancel",e),wt("close",e);break;case"iframe":case"object":wt("load",e);break;case"video":case"audio":for(c=0;c<Xa.length;c++)wt(Xa[c],e);break;case"image":wt("error",e),wt("load",e);break;case"details":wt("toggle",e);break;case"embed":case"source":case"link":wt("error",e),wt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(c=a[F],c!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:It(e,n,F,c,a,null)}return;default:if(Ul(n)){for(X in a)a.hasOwnProperty(X)&&(c=a[X],c!==void 0&&_u(e,n,X,c,a,void 0));return}}for(_ in a)a.hasOwnProperty(_)&&(c=a[_],c!=null&&It(e,n,_,c,a,null))}function L0(e,n,a,c){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,m=null,v=null,_=null,M=null,F=null,X=null;for(I in a){var q=a[I];if(a.hasOwnProperty(I)&&q!=null)switch(I){case"checked":break;case"value":break;case"defaultValue":M=q;default:c.hasOwnProperty(I)||It(e,n,I,null,c,q)}}for(var U in c){var I=c[U];if(q=a[U],c.hasOwnProperty(U)&&(I!=null||q!=null))switch(U){case"type":m=I;break;case"name":p=I;break;case"checked":F=I;break;case"defaultChecked":X=I;break;case"value":v=I;break;case"defaultValue":_=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(137,n));break;default:I!==q&&It(e,n,U,I,c,q)}}Pl(e,v,_,M,F,X,m,p);return;case"select":I=v=_=U=null;for(m in a)if(M=a[m],a.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":I=M;default:c.hasOwnProperty(m)||It(e,n,m,null,c,M)}for(p in c)if(m=c[p],M=a[p],c.hasOwnProperty(p)&&(m!=null||M!=null))switch(p){case"value":U=m;break;case"defaultValue":_=m;break;case"multiple":v=m;default:m!==M&&It(e,n,p,m,c,M)}n=_,a=v,c=I,U!=null?fs(e,!!a,U,!1):!!c!=!!a&&(n!=null?fs(e,!!a,n,!0):fs(e,!!a,a?[]:"",!1));return;case"textarea":I=U=null;for(_ in a)if(p=a[_],a.hasOwnProperty(_)&&p!=null&&!c.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:It(e,n,_,null,c,p)}for(v in c)if(p=c[v],m=a[v],c.hasOwnProperty(v)&&(p!=null||m!=null))switch(v){case"value":U=p;break;case"defaultValue":I=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==m&&It(e,n,v,p,c,m)}ld(e,U,I);return;case"option":for(var nt in a)U=a[nt],a.hasOwnProperty(nt)&&U!=null&&!c.hasOwnProperty(nt)&&(nt==="selected"?e.selected=!1:It(e,n,nt,null,c,U));for(M in c)U=c[M],I=a[M],c.hasOwnProperty(M)&&U!==I&&(U!=null||I!=null)&&(M==="selected"?e.selected=U&&typeof U!="function"&&typeof U!="symbol":It(e,n,M,U,c,I));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ct in a)U=a[ct],a.hasOwnProperty(ct)&&U!=null&&!c.hasOwnProperty(ct)&&It(e,n,ct,null,c,U);for(F in c)if(U=c[F],I=a[F],c.hasOwnProperty(F)&&U!==I&&(U!=null||I!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(s(137,n));break;default:It(e,n,F,U,c,I)}return;default:if(Ul(n)){for(var Ht in a)U=a[Ht],a.hasOwnProperty(Ht)&&U!==void 0&&!c.hasOwnProperty(Ht)&&_u(e,n,Ht,void 0,c,U);for(X in c)U=c[X],I=a[X],!c.hasOwnProperty(X)||U===I||U===void 0&&I===void 0||_u(e,n,X,U,c,I);return}}for(var B in a)U=a[B],a.hasOwnProperty(B)&&U!=null&&!c.hasOwnProperty(B)&&It(e,n,B,null,c,U);for(q in c)U=c[q],I=a[q],!c.hasOwnProperty(q)||U===I||U==null&&I==null||It(e,n,q,U,c,I)}function fg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function O0(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var p=a[c],m=p.transferSize,v=p.initiatorType,_=p.duration;if(m&&_&&fg(v)){for(v=0,_=p.responseEnd,c+=1;c<a.length;c++){var M=a[c],F=M.startTime;if(F>_)break;var X=M.transferSize,q=M.initiatorType;X&&fg(q)&&(M=M.responseEnd,v+=X*(M<_?1:(_-F)/(M-F)))}if(--c,n+=8*(m+v)/(p.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Cu=null,xu=null;function Oo(e){return e.nodeType===9?e:e.ownerDocument}function pg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gg(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Mu(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Du=null;function N0(){var e=window.event;return e&&e.type==="popstate"?e===Du?!1:(Du=e,!0):(Du=null,!1)}var mg=typeof setTimeout=="function"?setTimeout:void 0,k0=typeof clearTimeout=="function"?clearTimeout:void 0,yg=typeof Promise=="function"?Promise:void 0,B0=typeof queueMicrotask=="function"?queueMicrotask:typeof yg<"u"?function(e){return yg.resolve(null).then(e).catch(z0)}:mg;function z0(e){setTimeout(function(){throw e})}function En(e){return e==="head"}function bg(e,n){var a=n,c=0;do{var p=a.nextSibling;if(e.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"||a==="/&"){if(c===0){e.removeChild(p),Xs(n);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")qa(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,qa(a);for(var m=a.firstChild;m;){var v=m.nextSibling,_=m.nodeName;m[ha]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=v}}else a==="body"&&qa(e.ownerDocument.body);a=p}while(a);Xs(n)}function vg(e,n){var a=e;e=0;do{var c=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=c}while(a)}function Ru(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ru(a),Bl(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function P0(e,n,a,c){for(;e.nodeType===1;){var p=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[ha])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==p.rel||e.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||e.getAttribute("title")!==(p.title==null?null:p.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(p.src==null?null:p.src)||e.getAttribute("type")!==(p.type==null?null:p.type)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var m=p.name==null?null:""+p.name;if(p.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=li(e.nextSibling),e===null)break}return null}function F0(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=li(e.nextSibling),e===null))return null;return e}function Ag(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=li(e.nextSibling),e===null))return null;return e}function Lu(e){return e.data==="$?"||e.data==="$~"}function Ou(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function U0(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var c=function(){n(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function li(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Nu=null;function Sg(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return li(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function wg(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function Eg(e,n,a){switch(n=Oo(a),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function qa(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Bl(e)}var ci=new Map,Tg=new Set;function No(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ki=V.d;V.d={f:I0,r:H0,D:j0,C:G0,L:V0,m:X0,X:q0,S:Y0,M:$0};function I0(){var e=Ki.f(),n=To();return e||n}function H0(e){var n=us(e);n!==null&&n.tag===5&&n.type==="form"?Hf(n):Ki.r(e)}var js=typeof document>"u"?null:document;function _g(e,n,a){var c=js;if(c&&typeof n=="string"&&n){var p=ei(n);p='link[rel="'+e+'"][href="'+p+'"]',typeof a=="string"&&(p+='[crossorigin="'+a+'"]'),Tg.has(p)||(Tg.add(p),e={rel:e,crossOrigin:a,href:n},c.querySelector(p)===null&&(n=c.createElement("link"),Ee(n,"link",e),ge(n),c.head.appendChild(n)))}}function j0(e){Ki.D(e),_g("dns-prefetch",e,null)}function G0(e,n){Ki.C(e,n),_g("preconnect",e,n)}function V0(e,n,a){Ki.L(e,n,a);var c=js;if(c&&e&&n){var p='link[rel="preload"][as="'+ei(n)+'"]';n==="image"&&a&&a.imageSrcSet?(p+='[imagesrcset="'+ei(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(p+='[imagesizes="'+ei(a.imageSizes)+'"]')):p+='[href="'+ei(e)+'"]';var m=p;switch(n){case"style":m=Gs(e);break;case"script":m=Vs(e)}ci.has(m)||(e=y({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),ci.set(m,e),c.querySelector(p)!==null||n==="style"&&c.querySelector($a(m))||n==="script"&&c.querySelector(Ka(m))||(n=c.createElement("link"),Ee(n,"link",e),ge(n),c.head.appendChild(n)))}}function X0(e,n){Ki.m(e,n);var a=js;if(a&&e){var c=n&&typeof n.as=="string"?n.as:"script",p='link[rel="modulepreload"][as="'+ei(c)+'"][href="'+ei(e)+'"]',m=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Vs(e)}if(!ci.has(m)&&(e=y({rel:"modulepreload",href:e},n),ci.set(m,e),a.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ka(m)))return}c=a.createElement("link"),Ee(c,"link",e),ge(c),a.head.appendChild(c)}}}function Y0(e,n,a){Ki.S(e,n,a);var c=js;if(c&&e){var p=hs(c).hoistableStyles,m=Gs(e);n=n||"default";var v=p.get(m);if(!v){var _={loading:0,preload:null};if(v=c.querySelector($a(m)))_.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":n},a),(a=ci.get(m))&&ku(e,a);var M=v=c.createElement("link");ge(M),Ee(M,"link",e),M._p=new Promise(function(F,X){M.onload=F,M.onerror=X}),M.addEventListener("load",function(){_.loading|=1}),M.addEventListener("error",function(){_.loading|=2}),_.loading|=4,ko(v,n,c)}v={type:"stylesheet",instance:v,count:1,state:_},p.set(m,v)}}}function q0(e,n){Ki.X(e,n);var a=js;if(a&&e){var c=hs(a).hoistableScripts,p=Vs(e),m=c.get(p);m||(m=a.querySelector(Ka(p)),m||(e=y({src:e,async:!0},n),(n=ci.get(p))&&Bu(e,n),m=a.createElement("script"),ge(m),Ee(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(p,m))}}function $0(e,n){Ki.M(e,n);var a=js;if(a&&e){var c=hs(a).hoistableScripts,p=Vs(e),m=c.get(p);m||(m=a.querySelector(Ka(p)),m||(e=y({src:e,async:!0,type:"module"},n),(n=ci.get(p))&&Bu(e,n),m=a.createElement("script"),ge(m),Ee(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(p,m))}}function Cg(e,n,a,c){var p=(p=ut.current)?No(p):null;if(!p)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=Gs(a.href),a=hs(p).hoistableStyles,c=a.get(n),c||(c={type:"style",instance:null,count:0,state:null},a.set(n,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Gs(a.href);var m=hs(p).hoistableStyles,v=m.get(e);if(v||(p=p.ownerDocument||p,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,v),(m=p.querySelector($a(e)))&&!m._p&&(v.instance=m,v.state.loading=5),ci.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ci.set(e,a),m||K0(p,e,a,v.state))),n&&c===null)throw Error(s(528,""));return v}if(n&&c!==null)throw Error(s(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Vs(a),a=hs(p).hoistableScripts,c=a.get(n),c||(c={type:"script",instance:null,count:0,state:null},a.set(n,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Gs(e){return'href="'+ei(e)+'"'}function $a(e){return'link[rel="stylesheet"]['+e+"]"}function xg(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function K0(e,n,a,c){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?c.loading=1:(n=e.createElement("link"),c.preload=n,n.addEventListener("load",function(){return c.loading|=1}),n.addEventListener("error",function(){return c.loading|=2}),Ee(n,"link",a),ge(n),e.head.appendChild(n))}function Vs(e){return'[src="'+ei(e)+'"]'}function Ka(e){return"script[async]"+e}function Mg(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var c=e.querySelector('style[data-href~="'+ei(a.href)+'"]');if(c)return n.instance=c,ge(c),c;var p=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),ge(c),Ee(c,"style",p),ko(c,a.precedence,e),n.instance=c;case"stylesheet":p=Gs(a.href);var m=e.querySelector($a(p));if(m)return n.state.loading|=4,n.instance=m,ge(m),m;c=xg(a),(p=ci.get(p))&&ku(c,p),m=(e.ownerDocument||e).createElement("link"),ge(m);var v=m;return v._p=new Promise(function(_,M){v.onload=_,v.onerror=M}),Ee(m,"link",c),n.state.loading|=4,ko(m,a.precedence,e),n.instance=m;case"script":return m=Vs(a.src),(p=e.querySelector(Ka(m)))?(n.instance=p,ge(p),p):(c=a,(p=ci.get(m))&&(c=y({},a),Bu(c,p)),e=e.ownerDocument||e,p=e.createElement("script"),ge(p),Ee(p,"link",c),e.head.appendChild(p),n.instance=p);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(c=n.instance,n.state.loading|=4,ko(c,a.precedence,e));return n.instance}function ko(e,n,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,m=p,v=0;v<c.length;v++){var _=c[v];if(_.dataset.precedence===n)m=_;else if(m!==p)break}m?m.parentNode.insertBefore(e,m.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function ku(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Bu(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Bo=null;function Dg(e,n,a){if(Bo===null){var c=new Map,p=Bo=new Map;p.set(a,c)}else p=Bo,c=p.get(a),c||(c=new Map,p.set(a,c));if(c.has(e))return c;for(c.set(e,null),a=a.getElementsByTagName(e),p=0;p<a.length;p++){var m=a[p];if(!(m[ha]||m[ve]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(n)||"";v=e+v;var _=c.get(v);_?_.push(m):c.set(v,[m])}}return c}function Rg(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function W0(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Lg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Q0(e,n,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var p=Gs(c.href),m=n.querySelector($a(p));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=zo.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=m,ge(m);return}m=n.ownerDocument||n,c=xg(c),(p=ci.get(p))&&ku(c,p),m=m.createElement("link"),ge(m);var v=m;v._p=new Promise(function(_,M){v.onload=_,v.onerror=M}),Ee(m,"link",c),a.instance=m}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=zo.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var zu=0;function Z0(e,n){return e.stylesheets&&e.count===0&&Fo(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var c=setTimeout(function(){if(e.stylesheets&&Fo(e,e.stylesheets),e.unsuspend){var m=e.unsuspend;e.unsuspend=null,m()}},6e4+n);0<e.imgBytes&&zu===0&&(zu=62500*O0());var p=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Fo(e,e.stylesheets),e.unsuspend)){var m=e.unsuspend;e.unsuspend=null,m()}},(e.imgBytes>zu?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(c),clearTimeout(p)}}:null}function zo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Po=null;function Fo(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Po=new Map,n.forEach(J0,e),Po=null,zo.call(e))}function J0(e,n){if(!(n.state.loading&4)){var a=Po.get(e);if(a)var c=a.get(null);else{a=new Map,Po.set(e,a);for(var p=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<p.length;m++){var v=p[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),c=v)}c&&a.set(null,c)}p=n.instance,v=p.getAttribute("data-precedence"),m=a.get(v)||c,m===c&&a.set(null,p),a.set(v,p),this.count++,c=zo.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),m?m.parentNode.insertBefore(p,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(p,e.firstChild)),n.state.loading|=4}}var Wa={$$typeof:C,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function tv(e,n,a,c,p,m,v,_,M){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ll(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ll(0),this.hiddenUpdates=Ll(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function Og(e,n,a,c,p,m,v,_,M,F,X,q){return e=new tv(e,n,a,v,M,F,X,q,_),n=1,m===!0&&(n|=24),m=Xe(3,null,null,n),e.current=m,m.stateNode=e,n=gc(),n.refCount++,e.pooledCache=n,n.refCount++,m.memoizedState={element:c,isDehydrated:a,cache:n},vc(m),e}function Ng(e){return e?(e=Ss,e):Ss}function kg(e,n,a,c,p,m){p=Ng(p),c.context===null?c.context=p:c.pendingContext=p,c=dn(n),c.payload={element:a},m=m===void 0?null:m,m!==null&&(c.callback=m),a=fn(e,c,n),a!==null&&(Pe(a,e,n),Ma(a,e,n))}function Bg(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function Pu(e,n){Bg(e,n),(e=e.alternate)&&Bg(e,n)}function zg(e){if(e.tag===13||e.tag===31){var n=In(e,67108864);n!==null&&Pe(n,e,67108864),Pu(e,67108864)}}function Pg(e){if(e.tag===13||e.tag===31){var n=We();n=Ol(n);var a=In(e,n);a!==null&&Pe(a,e,n),Pu(e,n)}}var Uo=!0;function ev(e,n,a,c){var p=k.T;k.T=null;var m=V.p;try{V.p=2,Fu(e,n,a,c)}finally{V.p=m,k.T=p}}function iv(e,n,a,c){var p=k.T;k.T=null;var m=V.p;try{V.p=8,Fu(e,n,a,c)}finally{V.p=m,k.T=p}}function Fu(e,n,a,c){if(Uo){var p=Uu(c);if(p===null)Tu(e,n,c,Io,a),Ug(e,c);else if(sv(p,e,n,a,c))c.stopPropagation();else if(Ug(e,c),n&4&&-1<nv.indexOf(e)){for(;p!==null;){var m=us(p);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Bn(m.pendingLanes);if(v!==0){var _=m;for(_.pendingLanes|=2,_.entangledLanes|=2;v;){var M=1<<31-Ge(v);_.entanglements[1]|=M,v&=~M}wi(m),(Lt&6)===0&&(wo=He()+500,Va(0))}}break;case 31:case 13:_=In(m,2),_!==null&&Pe(_,m,2),To(),Pu(m,2)}if(m=Uu(c),m===null&&Tu(e,n,c,Io,a),m===p)break;p=m}p!==null&&c.stopPropagation()}else Tu(e,n,c,null,a)}}function Uu(e){return e=Hl(e),Iu(e)}var Io=null;function Iu(e){if(Io=null,e=cs(e),e!==null){var n=o(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=l(n),e!==null)return e;e=null}else if(a===31){if(e=u(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Io=e,null}function Fg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jy()){case Xh:return 2;case Yh:return 8;case Mr:case Gy:return 32;case qh:return 268435456;default:return 32}default:return 32}}var Hu=!1,Tn=null,_n=null,Cn=null,Qa=new Map,Za=new Map,xn=[],nv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ug(e,n){switch(e){case"focusin":case"focusout":Tn=null;break;case"dragenter":case"dragleave":_n=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":Qa.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Za.delete(n.pointerId)}}function Ja(e,n,a,c,p,m){return e===null||e.nativeEvent!==m?(e={blockedOn:n,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[p]},n!==null&&(n=us(n),n!==null&&zg(n)),e):(e.eventSystemFlags|=c,n=e.targetContainers,p!==null&&n.indexOf(p)===-1&&n.push(p),e)}function sv(e,n,a,c,p){switch(n){case"focusin":return Tn=Ja(Tn,e,n,a,c,p),!0;case"dragenter":return _n=Ja(_n,e,n,a,c,p),!0;case"mouseover":return Cn=Ja(Cn,e,n,a,c,p),!0;case"pointerover":var m=p.pointerId;return Qa.set(m,Ja(Qa.get(m)||null,e,n,a,c,p)),!0;case"gotpointercapture":return m=p.pointerId,Za.set(m,Ja(Za.get(m)||null,e,n,a,c,p)),!0}return!1}function Ig(e){var n=cs(e.target);if(n!==null){var a=o(n);if(a!==null){if(n=a.tag,n===13){if(n=l(a),n!==null){e.blockedOn=n,Jh(e.priority,function(){Pg(a)});return}}else if(n===31){if(n=u(a),n!==null){e.blockedOn=n,Jh(e.priority,function(){Pg(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ho(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=Uu(e.nativeEvent);if(a===null){a=e.nativeEvent;var c=new a.constructor(a.type,a);Il=c,a.target.dispatchEvent(c),Il=null}else return n=us(a),n!==null&&zg(n),e.blockedOn=a,!1;n.shift()}return!0}function Hg(e,n,a){Ho(e)&&a.delete(n)}function av(){Hu=!1,Tn!==null&&Ho(Tn)&&(Tn=null),_n!==null&&Ho(_n)&&(_n=null),Cn!==null&&Ho(Cn)&&(Cn=null),Qa.forEach(Hg),Za.forEach(Hg)}function jo(e,n){e.blockedOn===n&&(e.blockedOn=null,Hu||(Hu=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,av)))}var Go=null;function jg(e){Go!==e&&(Go=e,h.unstable_scheduleCallback(h.unstable_NormalPriority,function(){Go===e&&(Go=null);for(var n=0;n<e.length;n+=3){var a=e[n],c=e[n+1],p=e[n+2];if(typeof c!="function"){if(Iu(c||a)===null)continue;break}var m=us(a);m!==null&&(e.splice(n,3),n-=3,Uc(m,{pending:!0,data:p,method:a.method,action:c},c,p))}}))}function Xs(e){function n(M){return jo(M,e)}Tn!==null&&jo(Tn,e),_n!==null&&jo(_n,e),Cn!==null&&jo(Cn,e),Qa.forEach(n),Za.forEach(n);for(var a=0;a<xn.length;a++){var c=xn[a];c.blockedOn===e&&(c.blockedOn=null)}for(;0<xn.length&&(a=xn[0],a.blockedOn===null);)Ig(a),a.blockedOn===null&&xn.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var p=a[c],m=a[c+1],v=p[Le]||null;if(typeof m=="function")v||jg(a);else if(v){var _=null;if(m&&m.hasAttribute("formAction")){if(p=m,v=m[Le]||null)_=v.formAction;else if(Iu(p)!==null)continue}else _=v.action;typeof _=="function"?a[c+1]=_:(a.splice(c,3),c-=3),jg(a)}}}function Gg(){function e(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return p=v})},focusReset:"manual",scroll:"manual"})}function n(){p!==null&&(p(),p=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,p=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),p!==null&&(p(),p=null)}}}function ju(e){this._internalRoot=e}Vo.prototype.render=ju.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var a=n.current,c=We();kg(a,c,e,n,null,null)},Vo.prototype.unmount=ju.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;kg(e.current,2,null,e,null,null),To(),n[ls]=null}};function Vo(e){this._internalRoot=e}Vo.prototype.unstable_scheduleHydration=function(e){if(e){var n=Zh();e={blockedOn:null,target:e,priority:n};for(var a=0;a<xn.length&&n!==0&&n<xn[a].priority;a++);xn.splice(a,0,e),a===0&&Ig(e)}};var Vg=t.version;if(Vg!=="19.2.4")throw Error(s(527,Vg,"19.2.4"));V.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=f(n),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var rv={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xo.isDisabled&&Xo.supportsFiber)try{la=Xo.inject(rv),je=Xo}catch{}}return er.createRoot=function(e,n){if(!r(e))throw Error(s(299));var a=!1,c="",p=Qf,m=Zf,v=Jf;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(p=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=Og(e,1,!1,null,null,a,c,null,p,m,v,Gg),e[ls]=n.current,Eu(e),new ju(n)},er.hydrateRoot=function(e,n,a){if(!r(e))throw Error(s(299));var c=!1,p="",m=Qf,v=Zf,_=Jf,M=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError),a.formState!==void 0&&(M=a.formState)),n=Og(e,1,!0,n,a??null,c,p,M,m,v,_,Gg),n.context=Ng(null),a=n.current,c=We(),c=Ol(c),p=dn(c),p.callback=null,fn(a,p,c),a=c,n.current.lanes=a,ua(n,a),wi(n),e[ls]=n.current,Eu(e),new Vo(n)},er.version="19.2.4",er}var im;function mv(){if(im)return Yu.exports;im=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),Yu.exports=gv(),Yu.exports}var yv=mv();var nm="popstate";function bv(h={}){function t(s,r){let{pathname:o,search:l,hash:u}=s.location;return oh("",{pathname:o,search:l,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function i(s,r){return typeof r=="string"?r:pr(r)}return Av(t,i,null,h)}function Qt(h,t){if(h===!1||h===null||typeof h>"u")throw new Error(t)}function Di(h,t){if(!h){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function vv(){return Math.random().toString(36).substring(2,10)}function sm(h,t){return{usr:h.state,key:h.key,idx:t}}function oh(h,t,i=null,s){return{pathname:typeof h=="string"?h:h.pathname,search:"",hash:"",...typeof t=="string"?aa(t):t,state:i,key:t&&t.key||s||vv()}}function pr({pathname:h="/",search:t="",hash:i=""}){return t&&t!=="?"&&(h+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(h+=i.charAt(0)==="#"?i:"#"+i),h}function aa(h){let t={};if(h){let i=h.indexOf("#");i>=0&&(t.hash=h.substring(i),h=h.substring(0,i));let s=h.indexOf("?");s>=0&&(t.search=h.substring(s),h=h.substring(0,s)),h&&(t.pathname=h)}return t}function Av(h,t,i,s={}){let{window:r=document.defaultView,v5Compat:o=!1}=s,l=r.history,u="POP",d=null,f=g();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function g(){return(l.state||{idx:null}).idx}function y(){u="POP";let T=g(),E=T==null?null:T-f;f=T,d&&d({action:u,location:S.location,delta:E})}function b(T,E){u="PUSH";let x=oh(S.location,T,E);f=g()+1;let C=sm(x,f),O=S.createHref(x);try{l.pushState(C,"",O)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;r.location.assign(O)}o&&d&&d({action:u,location:S.location,delta:1})}function A(T,E){u="REPLACE";let x=oh(S.location,T,E);f=g();let C=sm(x,f),O=S.createHref(x);l.replaceState(C,"",O),o&&d&&d({action:u,location:S.location,delta:0})}function w(T){return Sv(T)}let S={get action(){return u},get location(){return h(r,l)},listen(T){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(nm,y),d=T,()=>{r.removeEventListener(nm,y),d=null}},createHref(T){return t(r,T)},createURL:w,encodeLocation(T){let E=w(T);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:b,replace:A,go(T){return l.go(T)}};return S}function Sv(h,t=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Qt(i,"No window.location.(origin|href) available to create URL");let s=typeof h=="string"?h:pr(h);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=i+s),new URL(s,i)}function Pm(h,t,i="/"){return wv(h,t,i,!1)}function wv(h,t,i,s){let r=typeof t=="string"?aa(t):t,o=tn(r.pathname||"/",i);if(o==null)return null;let l=Fm(h);Ev(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let f=kv(o);u=Ov(l[d],f,s)}return u}function Fm(h,t=[],i=[],s="",r=!1){let o=(l,u,d=r,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(s)&&d)return;Qt(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length)}let y=Ji([s,g.relativePath]),b=i.concat(g);l.children&&l.children.length>0&&(Qt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Fm(l.children,t,b,y,d)),!(l.path==null&&!l.index)&&t.push({path:y,score:Rv(y,l.index),routesMeta:b})};return h.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let d of Um(l.path))o(l,u,!0,d)}),t}function Um(h){let t=h.split("/");if(t.length===0)return[];let[i,...s]=t,r=i.endsWith("?"),o=i.replace(/\?$/,"");if(s.length===0)return r?[o,""]:[o];let l=Um(s.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),r&&u.push(...l),u.map(d=>h.startsWith("/")&&d===""?"/":d)}function Ev(h){h.sort((t,i)=>t.score!==i.score?i.score-t.score:Lv(t.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}var Tv=/^:[\w-]+$/,_v=3,Cv=2,xv=1,Mv=10,Dv=-2,am=h=>h==="*";function Rv(h,t){let i=h.split("/"),s=i.length;return i.some(am)&&(s+=Dv),t&&(s+=Cv),i.filter(r=>!am(r)).reduce((r,o)=>r+(Tv.test(o)?_v:o===""?xv:Mv),s)}function Lv(h,t){return h.length===t.length&&h.slice(0,-1).every((s,r)=>s===t[r])?h[h.length-1]-t[t.length-1]:0}function Ov(h,t,i=!1){let{routesMeta:s}=h,r={},o="/",l=[];for(let u=0;u<s.length;++u){let d=s[u],f=u===s.length-1,g=o==="/"?t:t.slice(o.length)||"/",y=ol({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),b=d.route;if(!y&&f&&i&&!s[s.length-1].route.index&&(y=ol({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(r,y.params),l.push({params:r,pathname:Ji([o,y.pathname]),pathnameBase:Fv(Ji([o,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(o=Ji([o,y.pathnameBase]))}return l}function ol(h,t){typeof h=="string"&&(h={path:h,caseSensitive:!1,end:!0});let[i,s]=Nv(h.path,h.caseSensitive,h.end),r=t.match(i);if(!r)return null;let o=r[0],l=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:s.reduce((f,{paramName:g,isOptional:y},b)=>{if(g==="*"){let w=u[b]||"";l=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const A=u[b];return y&&!A?f[g]=void 0:f[g]=(A||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:h}}function Nv(h,t=!1,i=!0){Di(h==="*"||!h.endsWith("*")||h.endsWith("/*"),`Route path "${h}" will be treated as if it were "${h.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${h.replace(/\*$/,"/*")}".`);let s=[],r="^"+h.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(s.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return h.endsWith("*")?(s.push({paramName:"*"}),r+=h==="*"||h==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?r+="\\/*$":h!==""&&h!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function kv(h){try{return h.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Di(!1,`The URL path "${h}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),h}}function tn(h,t){if(t==="/")return h;if(!h.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,s=h.charAt(i);return s&&s!=="/"?null:h.slice(i)||"/"}var Bv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function zv(h,t="/"){let{pathname:i,search:s="",hash:r=""}=typeof h=="string"?aa(h):h,o;return i?(i=i.replace(/\/\/+/g,"/"),i.startsWith("/")?o=rm(i.substring(1),"/"):o=rm(i,t)):o=t,{pathname:o,search:Uv(s),hash:Iv(r)}}function rm(h,t){let i=t.replace(/\/+$/,"").split("/");return h.split("/").forEach(r=>{r===".."?i.length>1&&i.pop():r!=="."&&i.push(r)}),i.length>1?i.join("/"):"/"}function Wu(h,t,i,s){return`Cannot include a '${h}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Pv(h){return h.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function Im(h){let t=Pv(h);return t.map((i,s)=>s===t.length-1?i.pathname:i.pathnameBase)}function Hm(h,t,i,s=!1){let r;typeof h=="string"?r=aa(h):(r={...h},Qt(!r.pathname||!r.pathname.includes("?"),Wu("?","pathname","search",r)),Qt(!r.pathname||!r.pathname.includes("#"),Wu("#","pathname","hash",r)),Qt(!r.search||!r.search.includes("#"),Wu("#","search","hash",r)));let o=h===""||r.pathname==="",l=o?"/":r.pathname,u;if(l==null)u=i;else{let y=t.length-1;if(!s&&l.startsWith("..")){let b=l.split("/");for(;b[0]==="..";)b.shift(),y-=1;r.pathname=b.join("/")}u=y>=0?t[y]:"/"}let d=zv(r,u),f=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&i.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var Ji=h=>h.join("/").replace(/\/\/+/g,"/"),Fv=h=>h.replace(/\/+$/,"").replace(/^\/*/,"/"),Uv=h=>!h||h==="?"?"":h.startsWith("?")?h:"?"+h,Iv=h=>!h||h==="#"?"":h.startsWith("#")?h:"#"+h,Hv=class{constructor(h,t,i,s=!1){this.status=h,this.statusText=t||"",this.internal=s,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function jv(h){return h!=null&&typeof h.status=="number"&&typeof h.statusText=="string"&&typeof h.internal=="boolean"&&"data"in h}function Gv(h){return h.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var jm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Gm(h,t){let i=h;if(typeof i!="string"||!Bv.test(i))return{absoluteURL:void 0,isExternal:!1,to:i};let s=i,r=!1;if(jm)try{let o=new URL(window.location.href),l=i.startsWith("//")?new URL(o.protocol+i):new URL(i),u=tn(l.pathname,t);l.origin===o.origin&&u!=null?i=u+l.search+l.hash:r=!0}catch{Di(!1,`<Link to="${i}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:r,to:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Vm=["POST","PUT","PATCH","DELETE"];new Set(Vm);var Vv=["GET",...Vm];new Set(Vv);var ra=j.createContext(null);ra.displayName="DataRouter";var dl=j.createContext(null);dl.displayName="DataRouterState";var Xv=j.createContext(!1),Xm=j.createContext({isTransitioning:!1});Xm.displayName="ViewTransition";var Yv=j.createContext(new Map);Yv.displayName="Fetchers";var qv=j.createContext(null);qv.displayName="Await";var pi=j.createContext(null);pi.displayName="Navigation";var Ar=j.createContext(null);Ar.displayName="Location";var en=j.createContext({outlet:null,matches:[],isDataRoute:!1});en.displayName="Route";var Th=j.createContext(null);Th.displayName="RouteError";var Ym="REACT_ROUTER_ERROR",$v="REDIRECT",Kv="ROUTE_ERROR_RESPONSE";function Wv(h){if(h.startsWith(`${Ym}:${$v}:{`))try{let t=JSON.parse(h.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function Qv(h){if(h.startsWith(`${Ym}:${Kv}:{`))try{let t=JSON.parse(h.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new Hv(t.status,t.statusText,t.data)}catch{}}function Zv(h,{relative:t}={}){Qt(Sr(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:s}=j.useContext(pi),{hash:r,pathname:o,search:l}=wr(h,{relative:t}),u=o;return i!=="/"&&(u=o==="/"?i:Ji([i,o])),s.createHref({pathname:u,search:l,hash:r})}function Sr(){return j.useContext(Ar)!=null}function as(){return Qt(Sr(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Ar).location}var qm="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function $m(h){j.useContext(pi).static||j.useLayoutEffect(h)}function Km(){let{isDataRoute:h}=j.useContext(en);return h?hA():Jv()}function Jv(){Qt(Sr(),"useNavigate() may be used only in the context of a <Router> component.");let h=j.useContext(ra),{basename:t,navigator:i}=j.useContext(pi),{matches:s}=j.useContext(en),{pathname:r}=as(),o=JSON.stringify(Im(s)),l=j.useRef(!1);return $m(()=>{l.current=!0}),j.useCallback((d,f={})=>{if(Di(l.current,qm),!l.current)return;if(typeof d=="number"){i.go(d);return}let g=Hm(d,JSON.parse(o),r,f.relative==="path");h==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:Ji([t,g.pathname])),(f.replace?i.replace:i.push)(g,f.state,f)},[t,i,o,r,h])}j.createContext(null);function wr(h,{relative:t}={}){let{matches:i}=j.useContext(en),{pathname:s}=as(),r=JSON.stringify(Im(i));return j.useMemo(()=>Hm(h,JSON.parse(r),s,t==="path"),[h,r,s,t])}function tA(h,t){return Wm(h,t)}function Wm(h,t,i,s,r){Qt(Sr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=j.useContext(pi),{matches:l}=j.useContext(en),u=l[l.length-1],d=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let x=y&&y.path||"";Zm(f,!y||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let b=as(),A;if(t){let x=typeof t=="string"?aa(t):t;Qt(g==="/"||x.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${x.pathname}" was given in the \`location\` prop.`),A=x}else A=b;let w=A.pathname||"/",S=w;if(g!=="/"){let x=g.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(x.length).join("/")}let T=Pm(h,{pathname:S});Di(y||T!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Di(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=aA(T&&T.map(x=>Object.assign({},x,{params:Object.assign({},d,x.params),pathname:Ji([g,o.encodeLocation?o.encodeLocation(x.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?g:Ji([g,o.encodeLocation?o.encodeLocation(x.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathnameBase])})),l,i,s,r);return t&&E?j.createElement(Ar.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},E):E}function eA(){let h=uA(),t=jv(h)?`${h.status} ${h.statusText}`:h instanceof Error?h.message:JSON.stringify(h),i=h instanceof Error?h.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",h),l=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:o},"ErrorBoundary")," or"," ",j.createElement("code",{style:o},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),i?j.createElement("pre",{style:r},i):null,l)}var iA=j.createElement(eA,null),Qm=class extends j.Component{constructor(h){super(h),this.state={location:h.location,revalidation:h.revalidation,error:h.error}}static getDerivedStateFromError(h){return{error:h}}static getDerivedStateFromProps(h,t){return t.location!==h.location||t.revalidation!=="idle"&&h.revalidation==="idle"?{error:h.error,location:h.location,revalidation:h.revalidation}:{error:h.error!==void 0?h.error:t.error,location:t.location,revalidation:h.revalidation||t.revalidation}}componentDidCatch(h,t){this.props.onError?this.props.onError(h,t):console.error("React Router caught the following error during render",h)}render(){let h=this.state.error;if(this.context&&typeof h=="object"&&h&&"digest"in h&&typeof h.digest=="string"){const i=Qv(h.digest);i&&(h=i)}let t=h!==void 0?j.createElement(en.Provider,{value:this.props.routeContext},j.createElement(Th.Provider,{value:h,children:this.props.component})):this.props.children;return this.context?j.createElement(nA,{error:h},t):t}};Qm.contextType=Xv;var Qu=new WeakMap;function nA({children:h,error:t}){let{basename:i}=j.useContext(pi);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let s=Wv(t.digest);if(s){let r=Qu.get(t);if(r)throw r;let o=Gm(s.location,i);if(jm&&!Qu.get(t))if(o.isExternal||s.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:s.replace}));throw Qu.set(t,l),l}return j.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return h}function sA({routeContext:h,match:t,children:i}){let s=j.useContext(ra);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(en.Provider,{value:h},i)}function aA(h,t=[],i=null,s=null,r=null){if(h==null){if(!i)return null;if(i.errors)h=i.matches;else if(t.length===0&&!i.initialized&&i.matches.length>0)h=i.matches;else return null}let o=h,l=i?.errors;if(l!=null){let g=o.findIndex(y=>y.route.id&&l?.[y.route.id]!==void 0);Qt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let u=!1,d=-1;if(i)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=g),y.route.id){let{loaderData:b,errors:A}=i,w=y.route.loader&&!b.hasOwnProperty(y.route.id)&&(!A||A[y.route.id]===void 0);if(y.route.lazy||w){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let f=i&&s?(g,y)=>{s(g,{location:i.location,params:i.matches?.[0]?.params??{},unstable_pattern:Gv(i.matches),errorInfo:y})}:void 0;return o.reduceRight((g,y,b)=>{let A,w=!1,S=null,T=null;i&&(A=l&&y.route.id?l[y.route.id]:void 0,S=y.route.errorElement||iA,u&&(d<0&&b===0?(Zm("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,T=null):d===b&&(w=!0,T=y.route.hydrateFallbackElement||null)));let E=t.concat(o.slice(0,b+1)),x=()=>{let C;return A?C=S:w?C=T:y.route.Component?C=j.createElement(y.route.Component,null):y.route.element?C=y.route.element:C=g,j.createElement(sA,{match:y,routeContext:{outlet:g,matches:E,isDataRoute:i!=null},children:C})};return i&&(y.route.ErrorBoundary||y.route.errorElement||b===0)?j.createElement(Qm,{location:i.location,revalidation:i.revalidation,component:S,error:A,children:x(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:f}):x()},null)}function _h(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rA(h){let t=j.useContext(ra);return Qt(t,_h(h)),t}function oA(h){let t=j.useContext(dl);return Qt(t,_h(h)),t}function lA(h){let t=j.useContext(en);return Qt(t,_h(h)),t}function Ch(h){let t=lA(h),i=t.matches[t.matches.length-1];return Qt(i.route.id,`${h} can only be used on routes that contain a unique "id"`),i.route.id}function cA(){return Ch("useRouteId")}function uA(){let h=j.useContext(Th),t=oA("useRouteError"),i=Ch("useRouteError");return h!==void 0?h:t.errors?.[i]}function hA(){let{router:h}=rA("useNavigate"),t=Ch("useNavigate"),i=j.useRef(!1);return $m(()=>{i.current=!0}),j.useCallback(async(r,o={})=>{Di(i.current,qm),i.current&&(typeof r=="number"?await h.navigate(r):await h.navigate(r,{fromRouteId:t,...o}))},[h,t])}var om={};function Zm(h,t,i){!t&&!om[h]&&(om[h]=!0,Di(!1,i))}j.memo(dA);function dA({routes:h,future:t,state:i,onError:s}){return Wm(h,void 0,i,s,t)}function cr(h){Qt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function fA({basename:h="/",children:t=null,location:i,navigationType:s="POP",navigator:r,static:o=!1,unstable_useTransitions:l}){Qt(!Sr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=h.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:u,navigator:r,static:o,unstable_useTransitions:l,future:{}}),[u,r,o,l]);typeof i=="string"&&(i=aa(i));let{pathname:f="/",search:g="",hash:y="",state:b=null,key:A="default"}=i,w=j.useMemo(()=>{let S=tn(f,u);return S==null?null:{location:{pathname:S,search:g,hash:y,state:b,key:A},navigationType:s}},[u,f,g,y,b,A,s]);return Di(w!=null,`<Router basename="${u}"> is not able to match the URL "${f}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:j.createElement(pi.Provider,{value:d},j.createElement(Ar.Provider,{children:t,value:w}))}function pA({children:h,location:t}){return tA(lh(h),t)}function lh(h,t=[]){let i=[];return j.Children.forEach(h,(s,r)=>{if(!j.isValidElement(s))return;let o=[...t,r];if(s.type===j.Fragment){i.push.apply(i,lh(s.props.children,o));return}Qt(s.type===cr,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let l={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=lh(s.props.children,o)),i.push(l)}),i}var il="get",nl="application/x-www-form-urlencoded";function fl(h){return typeof HTMLElement<"u"&&h instanceof HTMLElement}function gA(h){return fl(h)&&h.tagName.toLowerCase()==="button"}function mA(h){return fl(h)&&h.tagName.toLowerCase()==="form"}function yA(h){return fl(h)&&h.tagName.toLowerCase()==="input"}function bA(h){return!!(h.metaKey||h.altKey||h.ctrlKey||h.shiftKey)}function vA(h,t){return h.button===0&&(!t||t==="_self")&&!bA(h)}var Yo=null;function AA(){if(Yo===null)try{new FormData(document.createElement("form"),0),Yo=!1}catch{Yo=!0}return Yo}var SA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Zu(h){return h!=null&&!SA.has(h)?(Di(!1,`"${h}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${nl}"`),null):h}function wA(h,t){let i,s,r,o,l;if(mA(h)){let u=h.getAttribute("action");s=u?tn(u,t):null,i=h.getAttribute("method")||il,r=Zu(h.getAttribute("enctype"))||nl,o=new FormData(h)}else if(gA(h)||yA(h)&&(h.type==="submit"||h.type==="image")){let u=h.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=h.getAttribute("formaction")||u.getAttribute("action");if(s=d?tn(d,t):null,i=h.getAttribute("formmethod")||u.getAttribute("method")||il,r=Zu(h.getAttribute("formenctype"))||Zu(u.getAttribute("enctype"))||nl,o=new FormData(u,h),!AA()){let{name:f,type:g,value:y}=h;if(g==="image"){let b=f?`${f}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else f&&o.append(f,y)}}else{if(fl(h))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=il,s=null,r=nl,l=h}return o&&r==="text/plain"&&(l=o,o=void 0),{action:s,method:i.toLowerCase(),encType:r,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function xh(h,t){if(h===!1||h===null||typeof h>"u")throw new Error(t)}function EA(h,t,i,s){let r=typeof h=="string"?new URL(h,typeof window>"u"?"server://singlefetch/":window.location.origin):h;return i?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${s}`:r.pathname=`${r.pathname}.${s}`:r.pathname==="/"?r.pathname=`_root.${s}`:t&&tn(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${s}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${s}`,r}async function TA(h,t){if(h.id in t)return t[h.id];try{let i=await import(h.module);return t[h.id]=i,i}catch(i){return console.error(`Error loading route module \`${h.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function _A(h){return h==null?!1:h.href==null?h.rel==="preload"&&typeof h.imageSrcSet=="string"&&typeof h.imageSizes=="string":typeof h.rel=="string"&&typeof h.href=="string"}async function CA(h,t,i){let s=await Promise.all(h.map(async r=>{let o=t.routes[r.route.id];if(o){let l=await TA(o,i);return l.links?l.links():[]}return[]}));return RA(s.flat(1).filter(_A).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function lm(h,t,i,s,r,o){let l=(d,f)=>i[f]?d.route.id!==i[f].route.id:!0,u=(d,f)=>i[f].pathname!==d.pathname||i[f].route.path?.endsWith("*")&&i[f].params["*"]!==d.params["*"];return o==="assets"?t.filter((d,f)=>l(d,f)||u(d,f)):o==="data"?t.filter((d,f)=>{let g=s.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(h,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function xA(h,t,{includeHydrateFallback:i}={}){return MA(h.map(s=>{let r=t.routes[s.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),i&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function MA(h){return[...new Set(h)]}function DA(h){let t={},i=Object.keys(h).sort();for(let s of i)t[s]=h[s];return t}function RA(h,t){let i=new Set;return new Set(t),h.reduce((s,r)=>{let o=JSON.stringify(DA(r));return i.has(o)||(i.add(o),s.push({key:o,link:r})),s},[])}function Jm(){let h=j.useContext(ra);return xh(h,"You must render this element inside a <DataRouterContext.Provider> element"),h}function LA(){let h=j.useContext(dl);return xh(h,"You must render this element inside a <DataRouterStateContext.Provider> element"),h}var Mh=j.createContext(void 0);Mh.displayName="FrameworkContext";function ty(){let h=j.useContext(Mh);return xh(h,"You must render this element inside a <HydratedRouter> element"),h}function OA(h,t){let i=j.useContext(Mh),[s,r]=j.useState(!1),[o,l]=j.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=t,b=j.useRef(null);j.useEffect(()=>{if(h==="render"&&l(!0),h==="viewport"){let S=E=>{E.forEach(x=>{l(x.isIntersecting)})},T=new IntersectionObserver(S,{threshold:.5});return b.current&&T.observe(b.current),()=>{T.disconnect()}}},[h]),j.useEffect(()=>{if(s){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[s]);let A=()=>{r(!0)},w=()=>{r(!1),l(!1)};return i?h!=="intent"?[o,b,{}]:[o,b,{onFocus:ir(u,A),onBlur:ir(d,w),onMouseEnter:ir(f,A),onMouseLeave:ir(g,w),onTouchStart:ir(y,A)}]:[!1,b,{}]}function ir(h,t){return i=>{h&&h(i),i.defaultPrevented||t(i)}}function NA({page:h,...t}){let{router:i}=Jm(),s=j.useMemo(()=>Pm(i.routes,h,i.basename),[i.routes,h,i.basename]);return s?j.createElement(BA,{page:h,matches:s,...t}):null}function kA(h){let{manifest:t,routeModules:i}=ty(),[s,r]=j.useState([]);return j.useEffect(()=>{let o=!1;return CA(h,t,i).then(l=>{o||r(l)}),()=>{o=!0}},[h,t,i]),s}function BA({page:h,matches:t,...i}){let s=as(),{future:r,manifest:o,routeModules:l}=ty(),{basename:u}=Jm(),{loaderData:d,matches:f}=LA(),g=j.useMemo(()=>lm(h,t,f,o,s,"data"),[h,t,f,o,s]),y=j.useMemo(()=>lm(h,t,f,o,s,"assets"),[h,t,f,o,s]),b=j.useMemo(()=>{if(h===s.pathname+s.search+s.hash)return[];let S=new Set,T=!1;if(t.forEach(x=>{let C=o.routes[x.route.id];!C||!C.hasLoader||(!g.some(O=>O.route.id===x.route.id)&&x.route.id in d&&l[x.route.id]?.shouldRevalidate||C.hasClientLoader?T=!0:S.add(x.route.id))}),S.size===0)return[];let E=EA(h,u,r.unstable_trailingSlashAwareDataRequests,"data");return T&&S.size>0&&E.searchParams.set("_routes",t.filter(x=>S.has(x.route.id)).map(x=>x.route.id).join(",")),[E.pathname+E.search]},[u,r.unstable_trailingSlashAwareDataRequests,d,s,o,g,t,h,l]),A=j.useMemo(()=>xA(y,o),[y,o]),w=kA(y);return j.createElement(j.Fragment,null,b.map(S=>j.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...i})),A.map(S=>j.createElement("link",{key:S,rel:"modulepreload",href:S,...i})),w.map(({key:S,link:T})=>j.createElement("link",{key:S,nonce:i.nonce,...T,crossOrigin:T.crossOrigin??i.crossOrigin})))}function zA(...h){return t=>{h.forEach(i=>{typeof i=="function"?i(t):i!=null&&(i.current=t)})}}var PA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{PA&&(window.__reactRouterVersion="7.13.0")}catch{}function FA({basename:h,children:t,unstable_useTransitions:i,window:s}){let r=j.useRef();r.current==null&&(r.current=bv({window:s,v5Compat:!0}));let o=r.current,[l,u]=j.useState({action:o.action,location:o.location}),d=j.useCallback(f=>{i===!1?u(f):j.startTransition(()=>u(f))},[i]);return j.useLayoutEffect(()=>o.listen(d),[o,d]),j.createElement(fA,{basename:h,children:t,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:i})}var ey=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,iy=j.forwardRef(function({onClick:t,discover:i="render",prefetch:s="none",relative:r,reloadDocument:o,replace:l,state:u,target:d,to:f,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:b,...A},w){let{basename:S,unstable_useTransitions:T}=j.useContext(pi),E=typeof f=="string"&&ey.test(f),x=Gm(f,S);f=x.to;let C=Zv(f,{relative:r}),[O,L,N]=OA(s,A),z=jA(f,{replace:l,state:u,target:d,preventScrollReset:g,relative:r,viewTransition:y,unstable_defaultShouldRevalidate:b,unstable_useTransitions:T});function $(J){t&&t(J),J.defaultPrevented||z(J)}let K=j.createElement("a",{...A,...N,href:x.absoluteURL||C,onClick:x.isExternal||o?t:$,ref:zA(w,L),target:d,"data-discover":!E&&i==="render"?"true":void 0});return O&&!E?j.createElement(j.Fragment,null,K,j.createElement(NA,{page:C})):K});iy.displayName="Link";var UA=j.forwardRef(function({"aria-current":t="page",caseSensitive:i=!1,className:s="",end:r=!1,style:o,to:l,viewTransition:u,children:d,...f},g){let y=wr(l,{relative:f.relative}),b=as(),A=j.useContext(dl),{navigator:w,basename:S}=j.useContext(pi),T=A!=null&&qA(y)&&u===!0,E=w.encodeLocation?w.encodeLocation(y).pathname:y.pathname,x=b.pathname,C=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;i||(x=x.toLowerCase(),C=C?C.toLowerCase():null,E=E.toLowerCase()),C&&S&&(C=tn(C,S)||C);const O=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let L=x===E||!r&&x.startsWith(E)&&x.charAt(O)==="/",N=C!=null&&(C===E||!r&&C.startsWith(E)&&C.charAt(E.length)==="/"),z={isActive:L,isPending:N,isTransitioning:T},$=L?t:void 0,K;typeof s=="function"?K=s(z):K=[s,L?"active":null,N?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let J=typeof o=="function"?o(z):o;return j.createElement(iy,{...f,"aria-current":$,className:K,ref:g,style:J,to:l,viewTransition:u},typeof d=="function"?d(z):d)});UA.displayName="NavLink";var IA=j.forwardRef(({discover:h="render",fetcherKey:t,navigate:i,reloadDocument:s,replace:r,state:o,method:l=il,action:u,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:b,...A},w)=>{let{unstable_useTransitions:S}=j.useContext(pi),T=XA(),E=YA(u,{relative:f}),x=l.toLowerCase()==="get"?"get":"post",C=typeof u=="string"&&ey.test(u),O=L=>{if(d&&d(L),L.defaultPrevented)return;L.preventDefault();let N=L.nativeEvent.submitter,z=N?.getAttribute("formmethod")||l,$=()=>T(N||L.currentTarget,{fetcherKey:t,method:z,navigate:i,replace:r,state:o,relative:f,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:b});S&&i!==!1?j.startTransition(()=>$()):$()};return j.createElement("form",{ref:w,method:x,action:E,onSubmit:s?d:O,...A,"data-discover":!C&&h==="render"?"true":void 0})});IA.displayName="Form";function HA(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ny(h){let t=j.useContext(ra);return Qt(t,HA(h)),t}function jA(h,{target:t,replace:i,state:s,preventScrollReset:r,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:u,unstable_useTransitions:d}={}){let f=Km(),g=as(),y=wr(h,{relative:o});return j.useCallback(b=>{if(vA(b,t)){b.preventDefault();let A=i!==void 0?i:pr(g)===pr(y),w=()=>f(h,{replace:A,state:s,preventScrollReset:r,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:u});d?j.startTransition(()=>w()):w()}},[g,f,y,i,s,t,h,r,o,l,u,d])}var GA=0,VA=()=>`__${String(++GA)}__`;function XA(){let{router:h}=ny("useSubmit"),{basename:t}=j.useContext(pi),i=cA(),s=h.fetch,r=h.navigate;return j.useCallback(async(o,l={})=>{let{action:u,method:d,encType:f,formData:g,body:y}=wA(o,t);if(l.navigate===!1){let b=l.fetcherKey||VA();await s(b,i,l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:g,body:y,formMethod:l.method||d,formEncType:l.encType||f,flushSync:l.flushSync})}else await r(l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:g,body:y,formMethod:l.method||d,formEncType:l.encType||f,replace:l.replace,state:l.state,fromRouteId:i,flushSync:l.flushSync,viewTransition:l.viewTransition})},[s,r,t,i])}function YA(h,{relative:t}={}){let{basename:i}=j.useContext(pi),s=j.useContext(en);Qt(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),o={...wr(h||".",{relative:t})},l=as();if(h==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();o.search=g?`?${g}`:""}}return(!h||h===".")&&r.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(o.pathname=o.pathname==="/"?i:Ji([i,o.pathname])),pr(o)}function qA(h,{relative:t}={}){let i=j.useContext(Xm);Qt(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=ny("useViewTransitionState"),r=wr(h,{relative:t});if(!i.isTransitioning)return!1;let o=tn(i.currentLocation.pathname,s)||i.currentLocation.pathname,l=tn(i.nextLocation.pathname,s)||i.nextLocation.pathname;return ol(r.pathname,l)!=null||ol(r.pathname,o)!=null}const $A=[{label:"About Me",href:"/about"},{label:"Writing",dropdown:[{label:"Academic",href:"/writing/academic"},{label:"Fiction",href:"/writing/fiction"}]},{label:"Design",dropdown:[{label:"Commissioned",href:"/design/commissioned"},{label:"Personal",href:"/design/personal"}]},{label:"Programming",href:"/programming"}];function KA({label:h,items:t}){const[i,s]=j.useState(!1);return G.jsxs("li",{className:"relative",onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[G.jsx("span",{className:"nav-link dropdown-toggle",children:h}),G.jsx("ul",{className:`dropdown-menu ${i?"opacity-100 visible translate-y-0":"opacity-0 invisible -translate-y-2.5"}`,children:t.map(r=>G.jsx("li",{children:G.jsx("a",{href:r.href,className:"dropdown-item",children:r.label})},r.href))})]})}function WA(){return G.jsx("nav",{className:"navbar",children:G.jsxs("div",{className:"navbar-container",children:[G.jsx("a",{href:"/",className:"navbar-title",children:"Luna Maltseva"}),G.jsx("ul",{className:"navbar-nav",children:$A.map(h=>h.dropdown?G.jsx(KA,{label:h.label,items:h.dropdown},h.label):G.jsx("li",{className:"nav-item",children:G.jsx("a",{href:h.href,className:"nav-link",children:h.label})},h.href))})]})})}function QA(){return G.jsx("footer",{className:"footer",children:G.jsxs("div",{className:"footer-container",children:[G.jsx("span",{className:"footer-name",children:"Luna Maltseva"}),G.jsx("a",{href:"mailto:luna@lunamaltseva.dev",className:"footer-email",children:"Email Me"})]})})}function ZA(){const h=["PROGRAMMER","DESIGNER","WRITER"],[t,i]=j.useState(0),[s,r]=j.useState(!1);return j.useEffect(()=>{const o=setInterval(()=>{r(!0),setTimeout(()=>{i(l=>(l+1)%h.length),r(!1)},250)},2e3);return()=>clearInterval(o)},[]),G.jsxs("section",{className:"hero",children:[G.jsxs("h1",{className:"hero-title",children:["Hi, I'm ",G.jsx("span",{className:"hero-name",children:"Luna"})]}),G.jsx("p",{className:"hero-subtitle",children:G.jsx("span",{className:`flip-word ${s?"slide-out":"slide-in"}`,children:h[t]})})]})}function JA({title:h,subtitle:t,buttons:i}){return G.jsxs("div",{className:"category-card",children:[G.jsx("div",{className:"card-header",children:G.jsx("h3",{className:"card-title",children:h})}),G.jsxs("div",{className:"card-body",children:[G.jsx("p",{className:"card-subtitle",children:t}),G.jsx("div",{className:"card-buttons",children:i.map(s=>G.jsx("a",{href:s.href,className:"card-button",children:s.label},s.href))})]})]})}function tS(){const[h,t]=j.useState(!1);return G.jsxs("div",{style:{position:"relative",backgroundColor:"#000000",minHeight:"calc(100vh - 150px)",display:"flex",alignItems:"flex-end",padding:"3rem",overflow:"hidden"},children:[G.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",zIndex:0},children:G.jsx("source",{src:"/Thezeraine.mp4",type:"video/mp4"})}),G.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",height:"50%",background:"linear-gradient(to top, rgba(0, 0, 0, 0.9) 0%, transparent 100%)",zIndex:1,pointerEvents:"none"}}),G.jsxs("div",{style:{maxWidth:"600px",position:"relative",zIndex:2},children:[G.jsx("h1",{style:{fontFamily:"Thezeraine, serif",fontSize:"4rem",color:"#ffffff",marginBottom:"1.5rem",lineHeight:"1.2"},children:"Thezeraine"}),G.jsxs("div",{style:{display:"flex",gap:"1.5rem",marginBottom:"1.5rem",alignItems:"center"},children:[G.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#d3d3d3",fontSize:"1rem"},children:[G.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#d3d3d3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[G.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),G.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),G.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),G.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),G.jsx("span",{children:"2025-20XX"})]}),G.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#d3d3d3",fontSize:"1rem"},children:[G.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#d3d3d3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[G.jsx("circle",{cx:"12",cy:"12",r:"10"}),G.jsx("polyline",{points:"12 6 12 12 16 14"})]}),G.jsx("span",{children:"~44m"})]})]}),G.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginBottom:"1.5rem"},children:[G.jsx("span",{style:{backgroundColor:"#888888",color:"#ffffff",padding:"0.5rem 1rem",fontSize:"0.9rem",borderRadius:"0.375rem"},children:"Sci-fi"}),G.jsx("span",{style:{backgroundColor:"#888888",color:"#ffffff",padding:"0.5rem 1rem",fontSize:"0.9rem",borderRadius:"0.375rem"},children:"Drama"})]}),G.jsx("p",{onClick:()=>t(!h),style:{color:"#ffffff",fontSize:"1rem",lineHeight:"1.6",marginBottom:"1.5rem",maxWidth:"600px",cursor:"pointer",display:"-webkit-box",WebkitLineClamp:h?"unset":2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:"A bereft young woman agrees to venture into an emerging civil war for the promise of a resurrection device."}),G.jsxs("a",{href:"/Thezeraine.pdf",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",backgroundColor:"#ffffff",color:"#000000",padding:"0.75rem 1.5rem",fontSize:"1rem",textDecoration:"none",border:"none",borderRadius:"0.375rem",transition:"opacity 0.2s ease"},onMouseEnter:s=>s.currentTarget.style.opacity="0.9",onMouseLeave:s=>s.currentTarget.style.opacity="1",children:[G.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#000000",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[G.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),G.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),"Read"]})]})]})}const De=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),ch=[.001,0,0,.001,0,0],Ju=1.35,Qe={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Dn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},gr="pdfjs_internal_editor_",mt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Ct={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},eS={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},uh={TRIANGLES:1,LATTICE:2},fe={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},sl={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},he={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},qs={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},pl={ERRORS:0,WARNINGS:1,INFOS:5},mr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},nr={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},iS={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let gl=pl.WARNINGS;function nS(h){Number.isInteger(h)&&(gl=h)}function sS(){return gl}function ml(h){gl>=pl.INFOS&&console.info(`Info: ${h}`)}function ft(h){gl>=pl.WARNINGS&&console.warn(`Warning: ${h}`)}function zt(h){throw new Error(h)}function Bt(h,t){h||zt(t)}function aS(h){switch(h?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function sy(h,t=null,i=null){if(!h)return null;if(i&&typeof h=="string"&&(i.addDefaultProtocol&&h.startsWith("www.")&&h.match(/\./g)?.length>=2&&(h=`http://${h}`),i.tryConvertEncoding))try{h=hS(h)}catch{}const s=t?URL.parse(h,t):URL.parse(h);return aS(s)?s:null}function ay(h,t,i=!1){const s=URL.parse(h);return s?(s.hash=t,s.href):i&&sy(h,"http://example.com")?h.split("#",1)[0]+`${t?`#${t}`:""}`:""}function pt(h,t,i,s=!1){return Object.defineProperty(h,t,{value:i,enumerable:!s,configurable:!0,writable:!1}),i}const rs=(function(){function t(i,s){this.message=i,this.name=s}return t.prototype=new Error,t.constructor=t,t})();class cm extends rs{constructor(t,i){super(t,"PasswordException"),this.code=i}}class th extends rs{constructor(t,i){super(t,"UnknownErrorException"),this.details=i}}class hh extends rs{constructor(t){super(t,"InvalidPDFException")}}class ll extends rs{constructor(t,i,s){super(t,"ResponseException"),this.status=i,this.missing=s}}class rS extends rs{constructor(t){super(t,"FormatError")}}class Ln extends rs{constructor(t){super(t,"AbortException")}}function oS(h){(typeof h!="object"||h?.length===void 0)&&zt("Invalid argument for bytesToString");const t=h.length,i=8192;if(t<i)return String.fromCharCode.apply(null,h);const s=[];for(let r=0;r<t;r+=i){const o=Math.min(r+i,t),l=h.subarray(r,o);s.push(String.fromCharCode.apply(null,l))}return s.join("")}function yl(h){typeof h!="string"&&zt("Invalid argument for stringToBytes");const t=h.length,i=new Uint8Array(t);for(let s=0;s<t;++s)i[s]=h.charCodeAt(s)&255;return i}function lS(h){return String.fromCharCode(h>>24&255,h>>16&255,h>>8&255,h&255)}function cS(){const h=new Uint8Array(4);return h[0]=1,new Uint32Array(h.buffer,0,1)[0]===1}function uS(){try{return new Function(""),!0}catch{return!1}}class pe{static get isLittleEndian(){return pt(this,"isLittleEndian",cS())}static get isEvalSupported(){return pt(this,"isEvalSupported",uS())}static get isOffscreenCanvasSupported(){return pt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return pt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return pt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return pt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:i}=navigator;return pt(this,"platform",{isAndroid:i.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:i.includes("Firefox")})}static get isCSSRoundSupported(){return pt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const eh=Array.from(Array(256).keys(),h=>h.toString(16).padStart(2,"0"));class et{static makeHexColor(t,i,s){return`#${eh[t]}${eh[i]}${eh[s]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,i){let s;t[0]?(t[0]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[0],i[2]*=t[0],t[3]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[3],i[3]*=t[3]):(s=i[0],i[0]=i[1],i[1]=s,s=i[2],i[2]=i[3],i[3]=s,t[1]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[1],i[3]*=t[1],t[2]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[2],i[2]*=t[2]),i[0]+=t[4],i[1]+=t[5],i[2]+=t[4],i[3]+=t[5]}static transform(t,i){return[t[0]*i[0]+t[2]*i[1],t[1]*i[0]+t[3]*i[1],t[0]*i[2]+t[2]*i[3],t[1]*i[2]+t[3]*i[3],t[0]*i[4]+t[2]*i[5]+t[4],t[1]*i[4]+t[3]*i[5]+t[5]]}static multiplyByDOMMatrix(t,i){return[t[0]*i.a+t[2]*i.b,t[1]*i.a+t[3]*i.b,t[0]*i.c+t[2]*i.d,t[1]*i.c+t[3]*i.d,t[0]*i.e+t[2]*i.f+t[4],t[1]*i.e+t[3]*i.f+t[5]]}static applyTransform(t,i,s=0){const r=t[s],o=t[s+1];t[s]=r*i[0]+o*i[2]+i[4],t[s+1]=r*i[1]+o*i[3]+i[5]}static applyTransformToBezier(t,i,s=0){const r=i[0],o=i[1],l=i[2],u=i[3],d=i[4],f=i[5];for(let g=0;g<6;g+=2){const y=t[s+g],b=t[s+g+1];t[s+g]=y*r+b*l+d,t[s+g+1]=y*o+b*u+f}}static applyInverseTransform(t,i){const s=t[0],r=t[1],o=i[0]*i[3]-i[1]*i[2];t[0]=(s*i[3]-r*i[2]+i[2]*i[5]-i[4]*i[3])/o,t[1]=(-s*i[1]+r*i[0]+i[4]*i[1]-i[5]*i[0])/o}static axialAlignedBoundingBox(t,i,s){const r=i[0],o=i[1],l=i[2],u=i[3],d=i[4],f=i[5],g=t[0],y=t[1],b=t[2],A=t[3];let w=r*g+d,S=w,T=r*b+d,E=T,x=u*y+f,C=x,O=u*A+f,L=O;if(o!==0||l!==0){const N=o*g,z=o*b,$=l*y,K=l*A;w+=$,E+=$,T+=K,S+=K,x+=N,L+=N,O+=z,C+=z}s[0]=Math.min(s[0],w,T,S,E),s[1]=Math.min(s[1],x,O,C,L),s[2]=Math.max(s[2],w,T,S,E),s[3]=Math.max(s[3],x,O,C,L)}static inverseTransform(t){const i=t[0]*t[3]-t[1]*t[2];return[t[3]/i,-t[1]/i,-t[2]/i,t[0]/i,(t[2]*t[5]-t[4]*t[3])/i,(t[4]*t[1]-t[5]*t[0])/i]}static singularValueDecompose2dScale(t,i){const s=t[0],r=t[1],o=t[2],l=t[3],u=s**2+r**2,d=s*o+r*l,f=o**2+l**2,g=(u+f)/2,y=Math.sqrt(g**2-(u*f-d**2));i[0]=Math.sqrt(g+y||1),i[1]=Math.sqrt(g-y||1)}static normalizeRect(t){const i=t.slice(0);return t[0]>t[2]&&(i[0]=t[2],i[2]=t[0]),t[1]>t[3]&&(i[1]=t[3],i[3]=t[1]),i}static intersect(t,i){const s=Math.max(Math.min(t[0],t[2]),Math.min(i[0],i[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(i[0],i[2]));if(s>r)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(i[1],i[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(i[1],i[3]));return o>l?null:[s,o,r,l]}static pointBoundingBox(t,i,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],i),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],i)}static rectBoundingBox(t,i,s,r,o){o[0]=Math.min(o[0],t,s),o[1]=Math.min(o[1],i,r),o[2]=Math.max(o[2],t,s),o[3]=Math.max(o[3],i,r)}static#t(t,i,s,r,o,l,u,d,f,g){if(f<=0||f>=1)return;const y=1-f,b=f*f,A=b*f,w=y*(y*(y*t+3*f*i)+3*b*s)+A*r,S=y*(y*(y*o+3*f*l)+3*b*u)+A*d;g[0]=Math.min(g[0],w),g[1]=Math.min(g[1],S),g[2]=Math.max(g[2],w),g[3]=Math.max(g[3],S)}static#e(t,i,s,r,o,l,u,d,f,g,y,b){if(Math.abs(f)<1e-12){Math.abs(g)>=1e-12&&this.#t(t,i,s,r,o,l,u,d,-y/g,b);return}const A=g**2-4*y*f;if(A<0)return;const w=Math.sqrt(A),S=2*f;this.#t(t,i,s,r,o,l,u,d,(-g+w)/S,b),this.#t(t,i,s,r,o,l,u,d,(-g-w)/S,b)}static bezierBoundingBox(t,i,s,r,o,l,u,d,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],i,d),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],i,d),this.#e(t,s,o,u,i,r,l,d,3*(-t+3*(s-o)+u),6*(t-2*s+o),3*(s-t),f),this.#e(t,s,o,u,i,r,l,d,3*(-i+3*(r-l)+d),6*(i-2*r+l),3*(r-i),f)}}function hS(h){return decodeURIComponent(escape(h))}let ih=null,um=null;function dS(h){return ih||(ih=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,um=new Map([["","t"]])),h.replaceAll(ih,(t,i,s)=>i?i.normalize("NFKC"):um.get(s))}function ry(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const h=new Uint8Array(32);return crypto.getRandomValues(h),oS(h)}const Ws="pdfjs_internal_id_";function fS(h,t,i){if(!Array.isArray(i)||i.length<2)return!1;const[s,r,...o]=i;if(!h(s)&&!Number.isInteger(s)||!t(r))return!1;const l=o.length;let u=!0;switch(r.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;u=!1;break;default:return!1}for(const d of o)if(!(typeof d=="number"||u&&d===null))return!1;return!0}function _e(h,t,i){return Math.min(Math.max(h,t),i)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(h){return h.reduce((t,i)=>t+i,0)});class yr{static textContent(t){const i=[],s={items:i,styles:Object.create(null)};function r(o){if(!o)return;let l=null;const u=o.name;if(u==="#text")l=o.value;else if(yr.shouldBuildText(u))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&i.push({str:l}),!!o.children)for(const d of o.children)r(d)}return r(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class oy{static setupStorage(t,i,s,r,o){const l=r.getValue(i,{value:null});switch(s.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(i,{value:u.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(l.value===s.attributes.xfaOn?t.setAttribute("checked",!0):l.value===s.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{r.setValue(i,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(i,{value:u.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const u of s.children)u.attributes.value===l.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(i,{value:f})});break}}static setAttributes({html:t,element:i,storage:s=null,intent:r,linkService:o}){const{attributes:l}=i,u=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${r}`);for(const[d,f]of Object.entries(l))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}u&&o.addLinkAttributes(t,l.href,l.newWindow),s&&l.dataId&&this.setupStorage(t,l.dataId,i,s)}static render(t){const i=t.annotationStorage,s=t.linkService,r=t.xfaHtml,o=t.intent||"display",l=document.createElement(r.name);r.attributes&&this.setAttributes({html:l,element:r,intent:o,linkService:s});const u=o!=="richText",d=t.div;if(d.append(l),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=y}u&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(r.children.length===0){if(r.value){const y=document.createTextNode(r.value);l.append(y),u&&yr.shouldBuildText(r.name)&&f.push(y)}return{textDivs:f}}const g=[[r,-1,l]];for(;g.length>0;){const[y,b,A]=g.at(-1);if(b+1===y.children.length){g.pop();continue}const w=y.children[++g.at(-1)[1]];if(w===null)continue;const{name:S}=w;if(S==="#text"){const E=document.createTextNode(w.value);f.push(E),A.append(E);continue}const T=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,S):document.createElement(S);if(A.append(T),w.attributes&&this.setAttributes({html:T,element:w,storage:i,intent:o,linkService:s}),w.children?.length>0)g.push([w,-1,T]);else if(w.value){const E=document.createTextNode(w.value);u&&yr.shouldBuildText(S)&&f.push(E),T.append(E)}}for(const y of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const i=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=i,t.div.hidden=!1}}const Wi="http://www.w3.org/2000/svg";class sa{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Er(h,t="text"){if(ur(h,document.baseURI)){const i=await fetch(h);if(!i.ok)throw new Error(i.statusText);switch(t){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise((i,s)=>{const r=new XMLHttpRequest;r.open("GET",h,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":i(r.response);return}i(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class Tr{constructor({viewBox:t,userUnit:i,scale:s,rotation:r,offsetX:o=0,offsetY:l=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=i,this.scale=s,this.rotation=r,this.offsetX=o,this.offsetY=l,s*=i;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let g,y,b,A;switch(r%=360,r<0&&(r+=360),r){case 180:g=-1,y=0,b=0,A=1;break;case 90:g=0,y=1,b=1,A=0;break;case 270:g=0,y=-1,b=-1,A=0;break;case 0:g=1,y=0,b=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(b=-b,A=-A);let w,S,T,E;g===0?(w=Math.abs(f-t[1])*s+o,S=Math.abs(d-t[0])*s+l,T=(t[3]-t[1])*s,E=(t[2]-t[0])*s):(w=Math.abs(d-t[0])*s+o,S=Math.abs(f-t[1])*s+l,T=(t[2]-t[0])*s,E=(t[3]-t[1])*s),this.transform=[g*s,y*s,b*s,A*s,w-g*s*d-b*s*f,S-y*s*d-A*s*f],this.width=T,this.height=E}get rawDims(){const t=this.viewBox;return pt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:i=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new Tr({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:i,offsetX:s,offsetY:r,dontFlip:o})}convertToViewportPoint(t,i){const s=[t,i];return et.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const i=[t[0],t[1]];et.applyTransform(i,this.transform);const s=[t[2],t[3]];return et.applyTransform(s,this.transform),[i[0],i[1],s[0],s[1]]}convertToPdfPoint(t,i){const s=[t,i];return et.applyInverseTransform(s,this.transform),s}}class Dh extends rs{constructor(t,i=0){super(t,"RenderingCancelledException"),this.extraDelay=i}}function bl(h){const t=h.length;let i=0;for(;i<t&&h[i].trim()==="";)i++;return h.substring(i,i+5).toLowerCase()==="data:"}function Rh(h){return typeof h=="string"&&/\.pdf$/i.test(h)}function pS(h){return[h]=h.split(/[#?]/,1),h.substring(h.lastIndexOf("/")+1)}function gS(h,t="document.pdf"){if(typeof h!="string")return t;if(bl(h))return ft('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(h);if(!s)return t;const r=u=>{try{let d=decodeURIComponent(u);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:u):d}catch{return u}},o=/\.pdf$/i,l=s.pathname.split("/").at(-1);if(o.test(l))return r(l);if(s.searchParams.size>0){const u=Array.from(s.searchParams.values()).reverse();for(const f of u)if(o.test(f))return r(f);const d=Array.from(s.searchParams.keys()).reverse();for(const f of d)if(o.test(f))return r(f)}if(s.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(d)return r(d[0])}return t}class hm{started=Object.create(null);times=[];time(t){t in this.started&&ft(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||ft(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let i=0;for(const{name:s}of this.times)i=Math.max(s.length,i);for(const{name:s,start:r,end:o}of this.times)t.push(`${s.padEnd(i)} ${o-r}ms
`);return t.join("")}}function ur(h,t){const i=t?URL.parse(h,t):URL.parse(h);return i?.protocol==="http:"||i?.protocol==="https:"}function fi(h){h.preventDefault()}function ee(h){h.preventDefault(),h.stopPropagation()}function mS(h){console.log("Deprecated API usage: "+h)}class dh{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const i=this.#t.exec(t);if(!i)return null;const s=parseInt(i[1],10);let r=parseInt(i[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(i[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(i[4],10);l=l>=0&&l<=23?l:0;let u=parseInt(i[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(i[6],10);d=d>=0&&d<=59?d:0;const f=i[7]||"Z";let g=parseInt(i[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(i[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(l+=g,u+=y):f==="+"&&(l-=g,u-=y),new Date(Date.UTC(s,r,o,l,u,d))}}function yS(h,{scale:t=1,rotation:i=0}){const{width:s,height:r}=h.attributes.style,o=[0,0,parseInt(s),parseInt(r)];return new Tr({viewBox:o,userUnit:1,scale:t,rotation:i})}function _r(h){if(h.startsWith("#")){const t=parseInt(h.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return h.startsWith("rgb(")?h.slice(4,-1).split(",").map(t=>parseInt(t)):h.startsWith("rgba(")?h.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(ft(`Not a valid color format: "${h}"`),[0,0,0])}function bS(h){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const i of h.keys()){t.style.color=i;const s=window.getComputedStyle(t).color;h.set(i,_r(s))}t.remove()}function Wt(h){const{a:t,b:i,c:s,d:r,e:o,f:l}=h.getTransform();return[t,i,s,r,o,l]}function _i(h){const{a:t,b:i,c:s,d:r,e:o,f:l}=h.getTransform().invertSelf();return[t,i,s,r,o,l]}function ns(h,t,i=!1,s=!0){if(t instanceof Tr){const{pageWidth:r,pageHeight:o}=t.rawDims,{style:l}=h,u=pe.isCSSRoundSupported,d=`var(--total-scale-factor) * ${r}px`,f=`var(--total-scale-factor) * ${o}px`,g=u?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,y=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!i||t.rotation%180===0?(l.width=g,l.height=y):(l.width=y,l.height=g)}s&&h.setAttribute("data-main-rotation",t.rotation)}class Ri{constructor(){const{pixelRatio:t}=Ri;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,i,s,r,o=-1){let l=1/0,u=1/0,d=1/0;s=Ri.capPixels(s,o),s>0&&(l=Math.sqrt(s/(t*i))),r!==-1&&(u=r/t,d=r/i);const f=Math.min(l,u,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,i){if(i>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+i/100));return t>0?Math.min(t,s):s}return t}}const fh=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class vS{static get isDarkMode(){return pt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class AS{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:i}=t;i.width=i.height="0",i.display="none",i.color="var(--comment-fg-color)",document.body.append(t);const{color:s}=window.getComputedStyle(t);return t.remove(),pt(this,"commentForegroundColor",_r(s))}}function SS(h,t,i,s){s=Math.min(Math.max(s??1,0),1);const r=255*(1-s);return h=Math.round(h*s+r),t=Math.round(t*s+r),i=Math.round(i*s+r),[h,t,i]}function dm(h,t){const i=h[0]/255,s=h[1]/255,r=h[2]/255,o=Math.max(i,s,r),l=Math.min(i,s,r),u=(o+l)/2;if(o===l)t[0]=t[1]=0;else{const d=o-l;switch(t[1]=u<.5?d/(o+l):d/(2-o-l),o){case i:t[0]=((s-r)/d+(s<r?6:0))*60;break;case s:t[0]=((r-i)/d+2)*60;break;case r:t[0]=((i-s)/d+4)*60;break}}t[2]=u}function ph(h,t){const i=h[0],s=h[1],r=h[2],o=(1-Math.abs(2*r-1))*s,l=o*(1-Math.abs(i/60%2-1)),u=r-o/2;switch(Math.floor(i/60)){case 0:t[0]=o+u,t[1]=l+u,t[2]=u;break;case 1:t[0]=l+u,t[1]=o+u,t[2]=u;break;case 2:t[0]=u,t[1]=o+u,t[2]=l+u;break;case 3:t[0]=u,t[1]=l+u,t[2]=o+u;break;case 4:t[0]=l+u,t[1]=u,t[2]=o+u;break;case 5:case 6:t[0]=o+u,t[1]=u,t[2]=l+u;break}}function fm(h){return h<=.03928?h/12.92:((h+.055)/1.055)**2.4}function pm(h,t,i){ph(h,i),i.map(fm);const s=.2126*i[0]+.7152*i[1]+.0722*i[2];ph(t,i),i.map(fm);const r=.2126*i[0]+.7152*i[1]+.0722*i[2];return s>r?(s+.05)/(r+.05):(r+.05)/(s+.05)}const gm=new Map;function wS(h,t){const i=h[0]+h[1]*256+h[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let s=gm.get(i);if(s)return s;const r=new Float32Array(9),o=r.subarray(0,3),l=r.subarray(3,6);dm(h,l);const u=r.subarray(6,9);dm(t,u);const d=u[2]<.5,f=d?12:4.5;if(l[2]=d?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),pm(l,u,o)<f){let g,y;d?(g=l[2],y=1):(g=0,y=l[2]);const b=.005;for(;y-g>b;){const A=l[2]=(g+y)/2;d===pm(l,u,o)<f?g=A:y=A}l[2]=d?y:g}return ph(l,o),s=et.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),gm.set(i,s),s}function ly({html:h,dir:t,className:i},s){const r=document.createDocumentFragment();if(typeof h=="string"){const o=document.createElement("p");o.dir=t||"auto";const l=h.split(/(?:\r\n?|\n)/);for(let u=0,d=l.length;u<d;++u){const f=l[u];o.append(document.createTextNode(f)),u<d-1&&o.append(document.createElement("br"))}r.append(o)}else oy.render({xfaHtml:h,div:r,intent:"richText"});r.firstElementChild.classList.add("richText",i),s.append(r)}function cy(h){const t=new Path2D;if(!h)return t;for(let i=0,s=h.length;i<s;)switch(h[i++]){case nr.moveTo:t.moveTo(h[i++],h[i++]);break;case nr.lineTo:t.lineTo(h[i++],h[i++]);break;case nr.curveTo:t.bezierCurveTo(h[i++],h[i++],h[i++],h[i++],h[i++],h[i++]);break;case nr.quadraticCurveTo:t.quadraticCurveTo(h[i++],h[i++],h[i++],h[i++]);break;case nr.closePath:t.closePath();break;default:ft(`Unrecognized drawing path operator: ${h[i-1]}`);break}return t}class Nt{static#t=null;static#e=null;static#n=null;static#i=0;static#a=[];get pagesNumber(){return Nt.#i}set pagesNumber(t){Nt.#i!==t&&(Nt.#i=t,t===0&&(Nt.#e=null,Nt.#t=null))}addListener(t){Nt.#a.push(t)}removeListener(t){const i=Nt.#a.indexOf(t);i>=0&&Nt.#a.splice(i,1)}#r(){for(const t of Nt.#a)t()}#s(t){if(Nt.#e)return;const i=Nt.#i,s=new Uint32Array(3*i),r=Nt.#e=s.subarray(0,i),o=Nt.#t=s.subarray(i,2*i);if(t)for(let l=0;l<i;l++)r[l]=o[l]=l+1;Nt.#n=s.subarray(2*i)}movePages(t,i,s){this.#s(!0);const r=Nt.#e,o=Nt.#t;Nt.#n.set(o);const l=i.length,u=new Uint32Array(l);let d=0;for(let A=0;A<l;A++){const w=i[A]-1;u[A]=r[w],w<s&&(d+=1)}const f=Nt.#i;let g=s-d;const y=f-l;g=_e(g,0,y);for(let A=0,w=0;A<f;A++)t.has(A+1)||(r[w++]=r[A]);r.copyWithin(g+l,g,y),r.set(u,g);let b=!1;for(let A=0,w=f;A<w;A++){const S=r[A];b||=S!==A+1,o[S-1]=A+1}this.#r(),b||(this.pagesNumber=0)}hasBeenAltered(){return Nt.#e!==null}getPageMappingForSaving(){return{pageIndices:Nt.#t?Nt.#t.map(t=>t-1):null}}getPrevPageNumber(t){return Nt.#n[Nt.#e[t-1]-1]}getPageNumber(t){return Nt.#t?.[t-1]??t}getPageId(t){return Nt.#e?.[t-1]??t}static get instance(){return pt(this,"instance",new Nt)}getMapping(){return Nt.#e.subarray(0,this.pagesNumber)}}class fr{#t=null;#e=null;#n;#i=null;#a=null;#r=null;#s=null;#o=null;static#c=null;constructor(t){this.#n=t,fr.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const i=this.#n._uiManager._signal;i instanceof AbortSignal&&!i.aborted&&(t.addEventListener("contextmenu",fi,{signal:i}),t.addEventListener("pointerdown",fr.#l,{signal:i}));const s=this.#i=document.createElement("div");s.className="buttons",t.append(s);const r=this.#n.toolbarPosition;if(r){const{style:o}=t,l=this.#n._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#n._focusEventsAllowed=!1,ee(t)}#h(t){this.#n._focusEventsAllowed=!0,ee(t)}#f(t){const i=this.#n._uiManager._signal;return!(i instanceof AbortSignal)||i.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:i}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:i}),t.addEventListener("contextmenu",fi,{signal:i}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown(),this.#r?.shown()}addDeleteButton(){const{editorType:t,_uiManager:i}=this.#n,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",fr.#c[t]),this.#f(s)&&s.addEventListener("click",r=>{i.delete()},{signal:i._signal}),this.#i.append(s)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const i=await t.render();this.#f(i),this.#i.append(i,this.#m),this.#a=t}addComment(t,i=null){if(this.#r)return;const s=t.renderForToolbar();if(!s)return;this.#f(s);const r=this.#s=this.#m;i?(this.#i.insertBefore(s,i),this.#i.insertBefore(r,i)):this.#i.append(s,r),this.#r=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const i=t.renderButton();this.#f(i),this.#i.append(i,this.#m)}async addEditSignatureButton(t){const i=this.#o=await t.renderEditButton(this.#n);this.#f(i),this.#i.append(i,this.#m)}removeButton(t){t==="comment"&&(this.#r?.removeToolbarCommentButton(),this.#r=null,this.#s?.remove(),this.#s=null)}async addButton(t,i){switch(t){case"colorPicker":i&&this.addColorPicker(i);break;case"altText":i&&await this.addAltText(i);break;case"editSignature":i&&await this.addEditSignatureButton(i);break;case"delete":this.addDeleteButton();break;case"comment":i&&this.addComment(i);break}}async addButtonBefore(t,i,s){if(!i&&t==="comment")return;const r=this.#i.querySelector(s);r&&t==="comment"&&this.addComment(i,r)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class ES{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const i=this.#n._signal;i instanceof AbortSignal&&!i.aborted&&t.addEventListener("contextmenu",fi,{signal:i});const s=this.#t=document.createElement("div");return s.className="buttons",t.append(s),this.#n.hasCommentManager()&&this.#r("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#n.commentSelection("floating_button")}),this.#r("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#n.highlightSelection("floating_button")}),t}#a(t,i){let s=0,r=0;for(const o of t){const l=o.y+o.height;if(l<s)continue;const u=o.x+(i?o.width:0);if(l>s){r=u,s=l;continue}i?u>r&&(r=u):u<r&&(r=u)}return[i?1-r:r,s]}show(t,i,s){const[r,o]=this.#a(i,s),{style:l}=this.#e||=this.#i();t.append(this.#e),l.insetInlineEnd=`${100*r}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#r(t,i,s,r){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",i);const l=document.createElement("span");o.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",s);const u=this.#n._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",fi,{signal:u}),o.addEventListener("click",r,{signal:u})),this.#t.append(o)}}function uy(h,t,i){for(const s of i)t.addEventListener(s,h[s].bind(h))}class kt{static#t=NaN;static#e=null;static#n=NaN;static#i=null;static initializeAndAddPointerId(t){(kt.#e||=new Set).add(t)}static setPointer(t,i){kt.#t||=i,kt.#i??=t}static setTimeStamp(t){kt.#n=t}static isSamePointerId(t){return kt.#t===t}static isSamePointerIdOrRemove(t){return kt.#t===t?!0:(kt.#e?.delete(t),!1)}static isSamePointerType(t){return kt.#i===t}static isInitializedAndDifferentPointerType(t){return kt.#i!==null&&!kt.isSamePointerType(t)}static isSameTimeStamp(t){return kt.#n===t}static isUsingMultiplePointers(){return kt.#e?.size>=1}static clearPointerType(){kt.#i=null}static clearPointerIds(){kt.#t=NaN,kt.#e=null}static clearTimeStamp(){kt.#n=NaN}}class TS{#t=0;get id(){return`${gr}${this.#t++}`}}class Lh{#t=ry();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const o=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return pt(this,"_isSVGFittingCanvas",o)}async#i(t,i){this.#n||=new Map;let s=this.#n.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof i=="string"?(s.url=i,r=await Er(i,"blob")):i instanceof File?r=s.file=i:i instanceof Blob&&(r=i),r.type==="image/svg+xml"){const o=Lh._isSVGFittingCanvas,l=new FileReader,u=new Image,d=new Promise((f,g)=>{u.onload=()=>{s.bitmap=u,s.isSvg=!0,f()},l.onload=async()=>{const y=s.svgUrl=l.result;u.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=l.onerror=g});l.readAsDataURL(r),await d}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){ft(r),s=null}return this.#n.set(t,s),s&&this.#n.set(s.id,s),s}async getFromFile(t){const{lastModified:i,name:s,size:r,type:o}=t;return this.#i(`${i}_${s}_${r}_${o}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,i){const s=await i;return this.#i(t,s)}async getFromId(t){this.#n||=new Map;const i=this.#n.get(t);if(!i)return null;if(i.bitmap)return i.refCounter+=1,i;if(i.file)return this.getFromFile(i.file);if(i.blobPromise){const{blobPromise:s}=i;return delete i.blobPromise,this.getFromBlob(i.id,s)}return this.getFromUrl(i.url)}getFromCanvas(t,i){this.#n||=new Map;let s=this.#n.get(t);if(s?.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(i.width,i.height);return r.getContext("2d").drawImage(i,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,s),this.#n.set(s.id,s),s}getSvgUrl(t){const i=this.#n.get(t);return i?.isSvg?i.svgUrl:null}deleteId(t){this.#n||=new Map;const i=this.#n.get(t);if(!i||(i.refCounter-=1,i.refCounter!==0))return;const{bitmap:s}=i;if(!i.url&&!i.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),i.blobPromise=r.convertToBlob()}s.close?.(),i.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class _S{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:i,post:s,mustExec:r,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:u=!1}){if(r&&t(),this.#e)return;const d={cmd:t,undo:i,post:s,type:o};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(d);return}if(l&&this.#t[this.#i].type===o){u&&(d.undo=this.#t[this.#i].undo),this.#t[this.#i]=d;return}const f=this.#i+1;f===this.#n?this.#t.splice(0,1):(this.#i=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(d)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:i}=this.#t[this.#i];t(),i?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:i}=this.#t[this.#i];t(),i?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let i=this.#i;i>=0;i--)if(this.#t[i].type!==t){this.#t.splice(i+1,this.#i-i),this.#i=i;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class Cr{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:i}=pe.platform;for(const[s,r,o={}]of t)for(const l of s){const u=l.startsWith("mac+");i&&u?(this.callbacks.set(l.slice(4),{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1))):!i&&!u&&(this.callbacks.set(l,{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const i=this.buffer.join("+");return this.buffer.length=0,i}exec(t,i){if(!this.allKeys.has(i.key))return;const s=this.callbacks.get(this.#t(i));if(!s)return;const{callback:r,options:{bubbles:o=!1,args:l=[],checker:u=null}}=s;u&&!u(t,i)||(r.bind(t,...l,i)(),o||ee(i))}}class Oh{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return bS(t),pt(this,"_colors",t)}convert(t){const i=_r(t);if(!window.matchMedia("(forced-colors: active)").matches)return i;for(const[s,r]of this._colors)if(r.every((o,l)=>o===i[l]))return Oh._colorsMapping.get(s);return i}getHexCode(t){const i=this._colors.get(t);return i?et.makeHexColor(...i):t}}class On{#t=new AbortController;#e=null;#n=null;#i=new Map;#a=new Map;#r=null;#s=null;#o=null;#c=new _S;#l=null;#d=null;#h=null;#f=0;#m=new Set;#g=null;#u=null;#p=new Set;_editorUndoBar=null;#y=!1;#v=!1;#b=!1;#_=null;#E=null;#S=null;#x=null;#A=!1;#T=null;#R=new TS;#M=!1;#D=!1;#P=!1;#O=null;#k=null;#F=null;#B=null;#V=null;#C=mt.NONE;#w=new Set;#N=null;#U=null;#H=null;#q=null;#Y=null;#$={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#j=[0,0];#z=null;#X=null;#Z=null;#J=null;#I=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=On.prototype,i=l=>l.#X.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),s=(l,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return pt(this,"_keyboardManager",new Cr([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#X.contains(u)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#X.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:i}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:i}]]))}constructor(t,i,s,r,o,l,u,d,f,g,y,b,A,w,S,T){const E=this._signal=this.#t.signal;this.#X=t,this.#Z=i,this.#J=s,this.#r=r,this.#l=o,this.#U=l,this.#Y=d,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:E}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),u._on("setpreference",this.onSetPreference.bind(this),{signal:E}),u._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:E}),u._on("pagesedited",this.onPagesEdited.bind(this),{signal:E}),window.addEventListener("pointerdown",()=>{this.#D=!0},{capture:!0,signal:E}),window.addEventListener("pointerup",()=>{this.#D=!1},{capture:!0,signal:E}),this.#rt(),this.#dt(),this.#et(),this.#s=d.annotationStorage,this.#_=d.filterFactory,this.#H=f,this.#x=g||null,this.#y=y,this.#v=b,this.#b=A,this.#V=w||null,this.viewParameters={realScale:sa.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=T!==!1,o?.setSidebarUiManager(this)}destroy(){this.#I?.resolve(),this.#I=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#a.values())t.destroy();this.#a.clear(),this.#i.clear(),this.#p.clear(),this.#B?.clear(),this.#e=null,this.#w.clear(),this.#c.destroy(),this.#r?.destroy(),this.#l?.destroy(),this.#U?.destroy(),this.#T?.hide(),this.#T=null,this.#F?.destroy(),this.#F=null,this.#n=null,this.#E&&(clearTimeout(this.#E),this.#E=null),this.#z&&(clearTimeout(this.#z),this.#z=null),this._editorUndoBar?.destroy(),this.#Y=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#V}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return pt(this,"hcmFilter",this.#H?this.#_.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return pt(this,"direction",getComputedStyle(this.#X).direction)}get _highlightColors(){return pt(this,"_highlightColors",this.#x?new Map(this.#x.split(",").map(t=>(t=t.split("=").map(i=>i.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return pt(this,"highlightColors",null);const i=new Map,s=!!this.#H;for(const[r,o]of t){const l=r.endsWith("_HCM");if(s&&l){i.set(r.replace("_HCM",""),o);continue}!s&&!l&&i.set(r,o)}return pt(this,"highlightColors",i)}get highlightColorNames(){return pt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const i=this.highlightColorNames.get(t);return this._highlightColors.get(i)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#F=t}editAltText(t,i=!1){this.#r?.editAltText(this,t,i)}hasCommentManager(){return!!this.#l}editComment(t,i,s,r){this.#l?.showDialog(this,t,i,s,r)}selectComment(t,i){this.#a.get(t)?.getEditorByUID(i)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}deleteComment(t,i){const s=()=>{t.comment=i},r=()=>{this._editorUndoBar?.show(s,"comment"),this.toggleComment(null),t.comment=null};this.addCommands({cmd:r,undo:s,mustExec:!0})}toggleComment(t,i,s=void 0){this.#l?.toggleCommentPopup(t,i,s)}makeCommentColor(t,i){return t&&this.#l?.makeCommentColor(t,i)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#a.has(t-1))return;const{resolve:i,promise:s}=Promise.withResolvers(),r=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",r),i())};this._eventBus.on("editorsrendered",r),await s}getSignature(t){this.#U?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#U}switchToMode(t,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,i){this._eventBus.dispatch("setpreference",{source:this,name:t,value:i})}onSetPreference({name:t,value:i}){t==="enableNewAltTextWhenAddingImage"&&(this.#b=i)}onPagesEdited({pagesMapper:t}){for(const r of this.#i.values())r.updatePageIndex(t.getPrevPageNumber(r.pageIndex+1)-1);const i=this.#a,s=this.#a=new Map;for(const[r,o]of i){const l=t.getPrevPageNumber(r+1)-1;if(l===-1){o.destroy();continue}s.set(l,o),o.updatePageIndex(l)}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#X.focus()}findParent(t,i){for(const s of this.#a.values()){const{x:r,y:o,width:l,height:u}=s.div.getBoundingClientRect();if(t>=r&&t<=r+l&&i>=o&&i<=o+u)return s}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*sa.PDF_TO_CSS_UNITS;for(const i of this.#p)i.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:i}=this;if(i.hasTextLayer(t))return i;for(const s of this.#a.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t="",i=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:r,anchorOffset:o,focusNode:l,focusOffset:u}=s,d=s.toString(),g=this.#Q(s).closest(".textLayer"),y=this.getSelectionBoxes(g);if(!y)return;s.empty();const b=this.#tt(g),A=this.#C===mt.NONE,w=()=>{const S=b?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:r,anchorOffset:o,focusNode:l,focusOffset:u,text:d});A&&this.showAllEditors("highlight",!0,!0),i&&S?.editComment()};if(A){this.switchToMode(mt.HIGHLIGHT,w);return}w()}commentSelection(t=""){this.highlightSelection(t,!0)}#st(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#Q(t).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(this.#T||=new ES(this),this.#T.show(s,r,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#s)return null;const i=`${gr}${t}`,s=this.#s.getRawValue(i);return s&&this.#s.remove(i),s}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,i=null){const s=this.#J;s&&(s.setAttribute("data-l10n-id",t),i?s.setAttribute("data-l10n-args",JSON.stringify(i)):s.removeAttribute("data-l10n-args"))}#at(){const t=document.getSelection();if(!t||t.isCollapsed){this.#N&&(this.#T?.hide(),this.#N=null,this.#L({hasSelectedText:!1}));return}const{anchorNode:i}=t;if(i===this.#N)return;const r=this.#Q(t).closest(".textLayer");if(!r){this.#N&&(this.#T?.hide(),this.#N=null,this.#L({hasSelectedText:!1}));return}if(this.#T?.hide(),this.#N=i,this.#L({hasSelectedText:!0}),!(this.#C!==mt.HIGHLIGHT&&this.#C!==mt.NONE)&&(this.#C===mt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#A=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#C===mt.HIGHLIGHT?this.#tt(r):null;if(o?.toggleDrawing(),this.#D){const l=new AbortController,u=this.combinedSignal(l),d=f=>{f.type==="pointerup"&&f.button!==0||(l.abort(),o?.toggleDrawing(!0),f.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}else o?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(t=""){this.#C===mt.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#st()}#rt(){document.addEventListener("selectionchange",this.#at.bind(this),{signal:this._signal})}#ot(){if(this.#S)return;this.#S=new AbortController;const t=this.combinedSignal(this.#S);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#lt(){this.#S?.abort(),this.#S=null}blur(){if(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const i of this.#w)if(i.div.contains(t)){this.#k=[i,t],i._focusEventsAllowed=!1;break}}focus(){if(!this.#k)return;const[t,i]=this.#k;this.#k=null,i.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}#et(){if(this.#O)return;this.#O=new AbortController;const t=this.combinedSignal(this.#O);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ct(){this.#O?.abort(),this.#O=null}#ut(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#ht(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.setEditingState(!0)}removeEditListeners(){this.#ct(),this.setEditingState(!1)}dragOver(t){for(const{type:i}of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(i)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const i of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(i.type)){s.paste(i,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const i=[];for(const s of this.#w){const r=s.serialize(!0);r&&i.push(r)}i.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:i}=t;for(const o of i.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let s=i.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){ft(`paste: "${o.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const d of s){const f=await r.deserialize(d);if(!f)return;o.push(f)}const l=()=>{for(const d of o)this.#it(d);this.#nt(o)},u=()=>{for(const d of o)d.remove()};this.addCommands({cmd:l,undo:u,mustExec:!0})}catch(o){ft(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#C!==mt.NONE&&!this.isEditorHandlingKeyboard&&On._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#L(t){Object.entries(t).some(([s,r])=>this.#$[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#$,t)}),this.#C===mt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[Ct.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ot(),this.#ut(),this.#L({isEditing:this.#C!==mt.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#lt(),this.#ht(),this.#L({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const i of this.#u)this.#G(i.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#a.get(this.#f)}getLayer(t){return this.#a.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#a.set(t.pageIndex,t),this.#M?t.enable():t.disable()}removeLayer(t){this.#a.delete(t.pageIndex)}async updateMode(t,i=null,s=!1,r=!1,o=!1,l=!1){if(this.#C!==t&&!(this.#I&&(await this.#I.promise,!this.#I))){if(this.#I=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#C===mt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#C=t,t===mt.NONE){this.setEditingState(!1),this.#pt();for(const u of this.#i.values())u.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#I.resolve();return}for(const u of this.#i.values())u.addStandaloneCommentButton();t===mt.SIGNATURE&&await this.#U?.loadSignatures(),s&&kt.clearPointerType(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const u of this.#a.values())u.updateMode(t);if(t===mt.POPUP){this.#n||=await this.#Y.getAnnotationsByType(new Set(this.#u.map(f=>f._editorType)));const u=new Set,d=[];for(const f of this.#i.values()){const{annotationElementId:g,hasComment:y,deleted:b}=f;g&&u.add(g),y&&!b&&d.push(f.getData())}for(const f of this.#n){const{id:g,popupRef:y,contentsObj:b}=f;y&&b?.str&&!u.has(g)&&!this.#m.has(g)&&d.push(f)}this.#l?.showSidebar(d)}if(!i){r&&this.addNewEditorFromKeyboard(),this.#I.resolve();return}for(const u of this.#i.values())u.uid===i?(this.setSelected(u),l?u.editComment():o?u.enterInEditMode():u.focus()):u.unselect();this.#I.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#C&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,i){if(this.#u){switch(t){case Ct.CREATE:this.currentLayer.addNewEditor(i);return;case Ct.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#q||=new Map).set(t,i),this.showAllEditors("highlight",i);break}if(this.hasSelection)for(const s of this.#w)s.updateParams(t,i);else for(const s of this.#u)s.updateDefaultParams(t,i)}}showAllEditors(t,i,s=!1){for(const o of this.#i.values())o.editorType===t&&o.show(i);(this.#q?.get(Ct.HIGHLIGHT_SHOW_ALL)??!0)!==i&&this.#G([[Ct.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(t=!1){if(this.#P!==t){this.#P=t;for(const i of this.#a.values())t?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#M){this.#M=!0;const t=[];for(const i of this.#a.values())t.push(i.enable());await Promise.all(t);for(const i of this.#i.values())i.enable()}}#pt(){if(this.unselectAll(),this.#M){this.#M=!1;for(const t of this.#a.values())t.disable();for(const t of this.#i.values())t.disable()}}*getEditors(t){for(const i of this.#i.values())i.pageIndex===t&&(yield i)}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#E&&clearTimeout(this.#E),this.#E=setTimeout(()=>{this.focusMainContainer(),this.#E=null},0)),this.#i.delete(t.id),t.annotationElementId&&this.#B?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#it(t){const i=this.#a.get(t.pageIndex);i?i.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#gt(){let t=null;for(t of this.#w);return t}updateUI(t){this.#gt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#w.has(t)){this.#w.delete(t),t.unselect(),this.#L({hasSelectedEditor:this.hasSelection});return}this.#w.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),this.#h?.commitOrRemove();for(const i of this.#w)i!==t&&i.unselect();this.#w.clear(),this.#w.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}isSelected(t){return this.#w.has(t)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(t){t.unselect(),this.#w.delete(t),this.#L({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#L({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(t){this.#c.add(t),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}cleanUndoStack(t){this.#c.cleanType(t)}#W(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const i=t?[t]:[...this.#w],s=()=>{this._editorUndoBar?.show(r,i.length===1?i[0].editorType:i.length);for(const o of i)o.remove()},r=()=>{for(const o of i)this.#it(o)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#nt(t){for(const i of this.#w)i.unselect();this.#w.clear();for(const i of t)i.isEmpty()||(this.#w.add(i),i.select());this.#L({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#w)t.commit();this.#nt(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#C!==mt.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#w)t.unselect();this.#w.clear(),this.#L({hasSelectedEditor:!1})}}translateSelectedEditors(t,i,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#j[0]+=t,this.#j[1]+=i;const[r,o]=this.#j,l=[...this.#w],u=1e3;this.#z&&clearTimeout(this.#z),this.#z=setTimeout(()=>{this.#z=null,this.#j[0]=this.#j[1]=0,this.addCommands({cmd:()=>{for(const d of l)this.#i.has(d.id)&&(d.translateInPage(r,o),d.translationDone())},undo:()=>{for(const d of l)this.#i.has(d.id)&&(d.translateInPage(-r,-o),d.translationDone())},mustExec:!1})},u);for(const d of l)d.translateInPage(t,i),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#g=new Map;for(const t of this.#w)this.#g.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#g)return!1;this.disableUserSelect(!1);const t=this.#g;this.#g=null;let i=!1;for(const[{x:r,y:o,pageIndex:l},u]of t)u.newX=r,u.newY=o,u.newPageIndex=l,i||=r!==u.savedX||o!==u.savedY||l!==u.savedPageIndex;if(!i)return!1;const s=(r,o,l,u)=>{if(this.#i.has(r.id)){const d=this.#a.get(u);d?r._setParentAndPosition(d,o,l):(r.pageIndex=u,r.x=o,r.y=l)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:l,newPageIndex:u}]of t)s(r,o,l,u)},undo:()=>{for(const[r,{savedX:o,savedY:l,savedPageIndex:u}]of t)s(r,o,l,u)},mustExec:!0}),!0}dragSelectedEditors(t,i){if(this.#g)for(const s of this.#g.keys())s.drag(t,i)}rebuild(t){if(t.parent===null){const i=this.getLayer(t.pageIndex);i?(i.changeParent(t),i.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#C}isEditingMode(){return this.#C!==mt.NONE}get imageManager(){return pt(this,"imageManager",new Lh)}getSelectionBoxes(t){if(!t)return null;const i=document.getSelection();for(let f=0,g=i.rangeCount;f<g;f++)if(!t.contains(i.getRangeAt(f).commonAncestorContainer))return null;const{x:s,y:r,width:o,height:l}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,g,y,b)=>({x:(g-r)/l,y:1-(f+y-s)/o,width:b/l,height:y/o});break;case"180":u=(f,g,y,b)=>({x:1-(f+y-s)/o,y:1-(g+b-r)/l,width:y/o,height:b/l});break;case"270":u=(f,g,y,b)=>({x:1-(g+b-r)/l,y:(f-s)/o,width:b/l,height:y/o});break;default:u=(f,g,y,b)=>({x:(f-s)/o,y:(g-r)/l,width:y/o,height:b/l});break}const d=[];for(let f=0,g=i.rangeCount;f<g;f++){const y=i.getRangeAt(f);if(!y.collapsed)for(const{x:b,y:A,width:w,height:S}of y.getClientRects())w===0||S===0||d.push(u(b,A,w,S))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:i}){(this.#o||=new Map).set(t,i)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const i=this.#o?.get(t.data.id);if(!i)return;const s=this.#s.getRawValue(i);s&&(this.#C===mt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,i,s){const r=this.#B?.get(t);r&&(r.setCanvas(i,s),this.#B.delete(t))}addMissingCanvas(t,i){(this.#B||=new Map).set(t,i)}}class Mi{#t=null;#e=!1;#n=null;#i=null;#a=null;#r=null;#s=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,Mi.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Mi._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const i=this.#i=document.createElement("span");t.append(i),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",Mi.#f.missing),i.setAttribute("data-l10n-id",Mi.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;t.addEventListener("contextmenu",fi,{signal:s}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const r=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#s=!0,r(o))},{signal:s}),await this.#g(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await Mi._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#g())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const i=this.#o=document.createElement("div");i.className="noAltTextBadge",this.#c.div.append(i)}this.#o.classList.toggle("hidden",!t)}serialize(t){let i=this.#t;return!t&&this.#l===i&&(i=this.#d),{altText:i,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:i,guessedText:s,textWithDisclaimer:r,cancel:o=!1}){s&&(this.#l=s,this.#d=r),!(this.#t===t&&this.#e===i)&&(o||(this.#t=t,this.#e=i),this.#g())}toggle(t=!1){this.#n&&(!t&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#n.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#a=null,this.#o?.remove(),this.#o=null}async#g(){const t=this.#n;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Mi.#f[this.#m]),this.#i?.setAttribute("data-l10n-id",Mi.#f[`${this.#m}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=this.#a;if(!i){this.#a=i=document.createElement("span"),i.className="tooltip",i.setAttribute("role","tooltip"),i.id=`alt-text-tooltip-${this.#c.id}`;const r=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#a.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#a?.classList.remove("show")},{signal:o})}this.#e?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=this.#t),i.parentNode||t.append(i),this.#c.getElementForAltText()?.setAttribute("aria-describedby",i.id)}}class qo{#t=null;#e=null;#n=!1;#i=null;#a=null;#r=null;#s=null;#o=null;#c=!1;#l=null;constructor(t){this.#i=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const i=this.#i.commentButtonPosition;if(i){const{style:s}=t;s.insetInlineEnd=`calc(${100*(this.#i._uiManager.direction==="ltr"?1-i[0]:i[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*i[1]}% - var(--comment-button-dim))`;const r=this.#i.commentButtonColor;r&&(s.backgroundColor=r)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#i.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#i._uiManager.updatePopupColor(this.#i)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#i.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:i,height:s}=this.#t.getBoundingClientRect(),{x:r,y:o,width:l,height:u}=this.#i.parent.boundingClientRect;return[(t-r)/l,(i+s-o)/u]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:i}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=i)}#d(t,i){if(!this.#i._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",i?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#i._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const s=this.#i._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return t;t.addEventListener("contextmenu",fi,{signal:s}),i&&(t.addEventListener("focusin",o=>{this.#i._focusEventsAllowed=!1,ee(o)},{capture:!0,signal:s}),t.addEventListener("focusout",o=>{this.#i._focusEventsAllowed=!0,ee(o)},{capture:!0,signal:s})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const r=o=>{o.preventDefault(),t===this.#e?this.edit():this.#i.toggleComment(!0)};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#n=!0,r(o))},{signal:s}),t.addEventListener("pointerenter",()=>{this.#i.toggleComment(!1,!0)},{signal:s}),t.addEventListener("pointerleave",()=>{this.#i.toggleComment(!1,!1)},{signal:s}),t}edit(t){const i=this.commentPopupPositionInLayer;let s,r;if(i)[s,r]=i;else{[s,r]=this.#i.commentButtonPosition;const{width:g,height:y,x:b,y:A}=this.#i;s=b+s*g,r=A+r*y}const o=this.#i.parent.boundingClientRect,{x:l,y:u,width:d,height:f}=o;this.#i._uiManager.editComment(this.#i,l+s*d,u+r*f,{...t,parentDimensions:o})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#n}),this.#n=!1)}isDeleted(){return this.#c||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#a}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#r,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#s&&(this.#r=null),t===null){this.#s="",this.#c=!0;return}this.#s=t,this.#o=new Date,this.#c=!1}restoreData({text:t,richText:i,date:s}){this.#s=t,this.#r=i,this.#o=s,this.#c=!1}setInitialText(t,i=null){this.#a=t,this.data=t,this.#o=null,this.#r=i}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#s="",this.#r=null,this.#o=null,this.#i=null,this.#n=!1,this.#c=!1}}class vl{#t;#e=!1;#n=null;#i;#a;#r;#s;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:i=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:o=null,onPinchEnd:l=null,signal:u}){this.#t=t,this.#n=s,this.#i=i,this.#a=r,this.#r=o,this.#s=l,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ri.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#o)return;const r=this.#o=new AbortController,o=AbortSignal.any([this.#c,r.signal]),l=this.#t,u={capture:!0,signal:o,passive:!1},d=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ee(f),d(f))},u),l.addEventListener("pointerup",d,u),l.addEventListener("pointercancel",d,u);return}if(!this.#h){this.#h=new AbortController;const r=AbortSignal.any([this.#c,this.#h.signal]),o=this.#t,l={signal:r,capture:!1,passive:!1};o.addEventListener("touchmove",this.#m.bind(this),l);const u=this.#g.bind(this);o.addEventListener("touchend",u,l),o.addEventListener("touchcancel",u,l),l.capture=!0,o.addEventListener("pointerdown",ee,l),o.addEventListener("pointermove",ee,l),o.addEventListener("pointercancel",ee,l),o.addEventListener("pointerup",ee,l),this.#a?.()}if(ee(t),t.touches.length!==2||this.#n?.()){this.#l=null;return}let[i,s]=t.touches;i.identifier>s.identifier&&([i,s]=[s,i]),this.#l={touch0X:i.screenX,touch0Y:i.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#m(t){if(!this.#l||t.touches.length!==2)return;ee(t);let[i,s]=t.touches;i.identifier>s.identifier&&([i,s]=[s,i]);const{screenX:r,screenY:o}=i,{screenX:l,screenY:u}=s,d=this.#l,{touch0X:f,touch0Y:g,touch1X:y,touch1Y:b}=d,A=y-f,w=b-g,S=l-r,T=u-o,E=Math.hypot(S,T)||1,x=Math.hypot(A,w)||1;if(!this.#e&&Math.abs(x-E)<=vl.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=r,d.touch0Y=o,d.touch1X=l,d.touch1Y=u,!this.#e){this.#e=!0;return}const C=[(r+l)/2,(o+u)/2];this.#r?.(C,x,E)}#g(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#s?.()),this.#l&&(ee(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class rt{#t=null;#e=null;#n=null;#i=null;#a=null;#r=!1;#s=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#m="";#g=!1;#u=null;#p=!1;#y=!1;#v=!1;#b=null;#_=0;#E=0;#S=null;#x=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#A=!1;#T=rt._zIndex++;static _borderLineWidth=-1;static _colorManager=new Oh;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=rt.prototype._resizeWithKeyboard,i=On.TRANSLATE_SMALL,s=On.TRANSLATE_BIG;return pt(this,"_resizerKeyboardManager",new Cr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-i,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[i,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-i]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,i]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],rt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:i,rawDims:{pageWidth:s,pageHeight:r,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=i,this.pageRotation=(360+i-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[o,l];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}updatePageIndex(t){this.pageIndex=t}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return pt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const i=new CS({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});i.annotationElementId=t.annotationElementId,i.deleted=!0,i._uiManager.addToAnnotationStorage(i)}static initialize(t,i){if(rt._l10n??=t,rt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),rt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);rt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,i){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,i){zt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#A}set _isDraggable(t){this.#A=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,i]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*i/(t*2),this.y+=this.width*t/(i*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*i/(t*2),this.y-=this.width*t/(i*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#T}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#z(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#g?this.#g=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,i,s,r){const[o,l]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(t+s)/o,this.y=(i+r)/l,this.fixAndSetPosition()}_moveAfterPaste(t,i){const[s,r]=this.parentDimensions;this.setAt(t*s,i*r,this.width*s,this.height*r),this._onTranslated()}#R([t,i],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/t,this.y+=r/i,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,i){this.#R(this.parentDimensions,t,i)}translateInPage(t,i){this.#u||=[this.x,this.y,this.width,this.height],this.#R(this.pageDimensions,t,i),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,i){this.#u||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[r,o]}=this;if(this.x+=t/r,this.y+=i/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:u}=this;const[d,f]=this.getBaseTranslation();l+=d,u+=f;const{style:g}=s;g.left=`${(100*l).toFixed(2)}%`,g.top=`${(100*u).toFixed(2)}%`,this._onTranslating(l,u),s.scrollIntoView({block:"nearest"})}_onTranslating(t,i){}_onTranslated(t,i){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,i]=this.parentDimensions,{_borderLineWidth:s}=rt,r=s/t,o=s/i;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:i},pageDimensions:[s,r]}=this;let{x:o,y:l,width:u,height:d}=this;if(u*=s,d*=r,o*=s,l*=r,this._mustFixPosition)switch(t){case 0:o=_e(o,0,s-u),l=_e(l,0,r-d);break;case 90:o=_e(o,0,s-d),l=_e(l,u,r);break;case 180:o=_e(o,u,s),l=_e(l,d,r);break;case 270:o=_e(o,d,s),l=_e(l,0,r-u);break}this.x=o/=s,this.y=l/=r;const[f,g]=this.getBaseTranslation();o+=f,l+=g,i.left=`${(100*o).toFixed(2)}%`,i.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#M(t,i,s){switch(s){case 90:return[i,-t];case 180:return[-t,-i];case 270:return[-i,t];default:return[t,i]}}screenToPageTranslation(t,i){return rt.#M(t,i,this.parentRotation)}pageTranslationToScreen(t,i){return rt.#M(t,i,360-this.parentRotation)}#D(t){switch(t){case 90:{const[i,s]=this.pageDimensions;return[0,-i/s,s/i,0]}case 180:return[-1,0,0,-1];case 270:{const[i,s]=this.pageDimensions;return[0,i/s,-s/i,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[i,s]}=this;return[i*t,s*t]}setDims(){const{div:{style:t},width:i,height:s}=this;t.width=`${(100*i).toFixed(2)}%`,t.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#P(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],i=this._uiManager._signal;for(const s of t){const r=document.createElement("div");this.#c.append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",this.#O.bind(this,s),{signal:i}),r.addEventListener("contextmenu",fi,{signal:i}),r.tabIndex=-1}this.div.prepend(this.#c)}#O(t,i){i.preventDefault();const{isMac:s}=pe.platform;if(i.button!==0||i.ctrlKey&&s)return;this.#n?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#l=[i.screenX,i.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#B.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",ee,{passive:!1,signal:l}),window.addEventListener("contextmenu",fi,{signal:l}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(i.target).cursor;const f=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=d,this.#F()};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})}#k(t,i,s,r){this.width=s,this.height=r,this.x=t,this.y=i,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#d)return;const{savedX:t,savedY:i,savedWidth:s,savedHeight:r}=this.#d;this.#d=null;const o=this.x,l=this.y,u=this.width,d=this.height;o===t&&l===i&&u===s&&d===r||this.addCommands({cmd:this.#k.bind(this,o,l,u,d),undo:this.#k.bind(this,t,i,s,r),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#B(t,i){const[s,r]=this.parentDimensions,o=this.x,l=this.y,u=this.width,d=this.height,f=rt.MIN_SIZE/s,g=rt.MIN_SIZE/r,y=this.#D(this.rotation),b=(k,V)=>[y[0]*k+y[2]*V,y[1]*k+y[3]*V],A=this.#D(360-this.rotation),w=(k,V)=>[A[0]*k+A[2]*V,A[1]*k+A[3]*V];let S,T,E=!1,x=!1;switch(t){case"topLeft":E=!0,S=(k,V)=>[0,0],T=(k,V)=>[k,V];break;case"topMiddle":S=(k,V)=>[k/2,0],T=(k,V)=>[k/2,V];break;case"topRight":E=!0,S=(k,V)=>[k,0],T=(k,V)=>[0,V];break;case"middleRight":x=!0,S=(k,V)=>[k,V/2],T=(k,V)=>[0,V/2];break;case"bottomRight":E=!0,S=(k,V)=>[k,V],T=(k,V)=>[0,0];break;case"bottomMiddle":S=(k,V)=>[k/2,V],T=(k,V)=>[k/2,0];break;case"bottomLeft":E=!0,S=(k,V)=>[0,V],T=(k,V)=>[k,0];break;case"middleLeft":x=!0,S=(k,V)=>[0,V/2],T=(k,V)=>[k,V/2];break}const C=S(u,d),O=T(u,d);let L=b(...O);const N=rt._round(o+L[0]),z=rt._round(l+L[1]);let $=1,K=1,J,Q;if(i.fromKeyboard)({deltaX:J,deltaY:Q}=i);else{const{screenX:k,screenY:V}=i,[Z,yt]=this.#l;[J,Q]=this.screenToPageTranslation(k-Z,V-yt),this.#l[0]=k,this.#l[1]=V}if([J,Q]=w(J/s,Q/r),E){const k=Math.hypot(u,d);$=K=Math.max(Math.min(Math.hypot(O[0]-C[0]-J,O[1]-C[1]-Q)/k,1/u,1/d),f/u,g/d)}else x?$=_e(Math.abs(O[0]-C[0]-J),f,1)/u:K=_e(Math.abs(O[1]-C[1]-Q),g,1)/d;const ht=rt._round(u*$),xt=rt._round(d*K);L=b(...T(ht,xt));const dt=N-L[0],Mt=z-L[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=ht,this.height=xt,this.x=dt,this.y=Mt,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new fr(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[i,s]of t)await this._editToolbar.addButton(i,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#n?.destroy()}addContainer(t){const i=this._editToolbar?.div;i?i.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(Mi.initialize(rt._l10n),this.#n=new Mi(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}focusCommentButton(){this.#i?.focusButton()}addCommentButton(){return this.canAddComment?this.#i||=new qo(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#a){this._uiManager.isEditingMode()&&this.#a.classList.remove("hidden");return}this.hasComment&&(this.#a=this.#i.renderForStandalone(),this.div.append(this.#a))}}removeStandaloneCommentButton(){this.#i.removeStandaloneCommentButton(),this.#a=null}hideStandaloneCommentButton(){this.#a?.classList.add("hidden")}get comment(){if(!this.#i)return null;const{data:{richText:t,text:i,date:s,deleted:r}}=this.#i;return{text:i,richText:t,date:s,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#i||=new qo(this),typeof t=="object"&&t!==null?this.#i.restoreData(t):this.#i.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:i,richText:s}){if(!i||(this.#i||=new qo(this),this.#i.setInitialText(t,s),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){return this.#i?.hasBeenEdited()}get hasDeletedComment(){return this.#i?.isDeleted()}get hasComment(){return!!this.#i&&!this.#i.isEmpty()&&!this.#i.isDeleted()}async editComment(t){this.#i||=new qo(this),this.#i.edit(t)}toggleComment(t,i=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,i)}setSelectedCommentButton(t){this.#i.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,r]=t.rect,[o]=this.pageDimensions,[l]=this.pageTranslation,u=l+o+1,d=r-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,d,f,r]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:i}}){this.#i.data=i?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#r?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#H();const[i,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/i).toFixed(2)}%`,t.style.maxHeight=`${(100*i/s).toFixed(2)}%`);const[r,o]=this.getInitialTranslation();return this.translate(r,o),uy(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#x||=new vl({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#V.bind(this),onPinching:this.#C.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#V(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#C(t,i,s){let o=.7*(s/i)+1-.7;if(o===1)return;const l=this.#D(this.rotation),u=(N,z)=>[l[0]*N+l[2]*z,l[1]*N+l[3]*z],[d,f]=this.parentDimensions,g=this.x,y=this.y,b=this.width,A=this.height,w=rt.MIN_SIZE/d,S=rt.MIN_SIZE/f;o=Math.max(Math.min(o,1/b,1/A),w/b,S/A);const T=rt._round(b*o),E=rt._round(A*o);if(T===b&&E===A)return;this.#u||=[g,y,b,A];const x=u(b/2,A/2),C=rt._round(g+x[0]),O=rt._round(y+x[1]),L=u(T/2,E/2);this.x=C-L[0],this.y=O-L[1],this.width=T,this.height=E,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(t){const{isMac:i}=pe.platform;if(t.button!==0||t.ctrlKey&&i){t.preventDefault();return}if(this.#g=!0,this._isDraggable){this.#U(t);return}this.#N(t)}#N(t){const{isMac:i}=pe.platform;t.ctrlKey&&!i||t.shiftKey||t.metaKey&&i?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(t){const{isSelected:i}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r),l={capture:!0,passive:!1,signal:o},u=f=>{r.abort(),this.#s=null,this.#g=!1,this._uiManager.endDragSession()||this.#N(f),s&&this._onStopDragging()};i&&(this.#_=t.clientX,this.#E=t.clientY,this.#s=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:g,clientY:y,pointerId:b}=f;if(b!==this.#s){ee(f);return}const[A,w]=this.screenToPageTranslation(g-this.#_,y-this.#E);this.#_=g,this.#E=y,this._uiManager.dragSelectedEditors(A,w)},l),window.addEventListener("touchmove",ee,l),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#x||f.isPrimary)&&u(f),ee(f)},l));const d=f=>{if(!this.#s||this.#s===f.pointerId){u(f);return}ee(f)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,i,s){t.changeParent(this),this.x=i,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,i,s=this.rotation){const r=this.parentScale,[o,l]=this.pageDimensions,[u,d]=this.pageTranslation,f=t/r,g=i/r,y=this.x*o,b=this.y*l,A=this.width*o,w=this.height*l;switch(s){case 0:return[y+f+u,l-b-g-w+d,y+f+A+u,l-b-g+d];case 90:return[y+g+u,l-b+f+d,y+g+w+u,l-b+f+A+d];case 180:return[y-f-A+u,l-b+g+d,y-f+u,l-b+g+w+d];case 270:return[y-g-w+u,l-b-f-A+d,y-g+u,l-b-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,i){const[s,r,o,l]=t,u=o-s,d=l-r;switch(this.rotation){case 0:return[s,i-l,u,d];case 90:return[s,i-r,d,u];case 180:return[o,i-r,u,d];case 270:return[o,i-l,d,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&rt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#i?.onUpdatedColor()}getData(){const{comment:{text:t,color:i,date:s,opacity:r,deleted:o,richText:l},uid:u,pageIndex:d,creationDate:f,modificationDate:g}=this;return{id:u,pageIndex:d,rect:this.getPDFRect(),richText:l,contentsObj:{str:t},creationDate:f,modificationDate:s||g,popupRef:!o,color:i,opacity:r}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:i,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return i<l&&r>0&&t<o&&s>0}#H(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#H()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,i=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,i,s){const r=new this.prototype.constructor({parent:i,id:i.getNextId(),uiManager:s,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});r.rotation=t.rotation,r.#t=t.accessibilityData,r._isCopy=t.isCopy||!1;const[o,l]=r.pageDimensions,[u,d,f,g]=r.getRectInCurrentCoords(t.rect,l);return r.x=u/o,r.y=d/l,r.width=f/o,r.height=g/l,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#z(),this.removeEditToolbar(),this.#S){for(const t of this.#S.values())clearTimeout(t);this.#S=null}this.parent=null,this.#x?.destroy(),this.#x=null,this.#h?.remove(),this.#h=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#P(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,i]}=this,[s,r,o,l]=this.getPDFRect();return[rt._round(s+(o-s)*t),rt._round(r+(l-r)*(1-i))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#i.commentPopupPositionInLayer}set commentPopupPosition(t){this.#i.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#i.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#i.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#i?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const i=this.#c.children;if(!this.#e){this.#e=Array.from(i);const l=this.#q.bind(this),u=this.#Y.bind(this),d=this._uiManager._signal;for(const f of this.#e){const g=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:d}),f.addEventListener("blur",u,{signal:d}),f.addEventListener("focus",this.#$.bind(this,g),{signal:d}),f.setAttribute("data-l10n-id",rt._l10nResizer[g])}}const s=this.#e[0];let r=0;for(const l of i){if(l===s)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==r){if(o<r)for(let u=0;u<r-o;u++)this.#c.append(this.#c.firstElementChild);else if(o>r)for(let u=0;u<o-r;u++)this.#c.firstElementChild.before(this.#c.lastElementChild);let l=0;for(const u of i){const f=this.#e[l++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",rt._l10nResizer[f])}}this.#j(0),this.#v=!0,this.#c.firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#q(t){rt._resizerKeyboardManager.exec(this,t)}#Y(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#z()}#$(t){this.#m=this.#v?t:""}#j(t){if(this.#e)for(const i of this.#e)i.tabIndex=t}_resizeWithKeyboard(t,i){this.#v&&this.#B(this.#m,{deltaX:t,deltaY:i,fromKeyboard:!0})}#z(){this.#v=!1,this.#j(-1),this.#F()}_stopResizingWithKeyboard(){this.#z(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,i){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,i=!1){if(i){this.#S||=new Map;const{action:s}=t;let r=this.#S.get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#S.delete(s),this.#S.size===0&&(this.#S=null)},rt._telemetryTimeout),this.#S.set(s,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let i=t.container.querySelector(".annotationContent");if(!i)i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),t.container.prepend(i);else if(i.nodeName==="CANVAS"){const s=i;i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),s.before(i)}return i}resetAnnotationElement(t){const{firstElementChild:i}=t.container;i?.nodeName==="DIV"&&i.classList.contains("annotationContent")&&i.remove()}}class CS extends rt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const mm=3285377520,ui=4294901760,Ci=65535;class hy{constructor(t){this.h1=t?t&4294967295:mm,this.h2=t?t&4294967295:mm}update(t){let i,s;if(typeof t=="string"){i=new Uint8Array(t.length*2),s=0;for(let S=0,T=t.length;S<T;S++){const E=t.charCodeAt(S);E<=255?i[s++]=E:(i[s++]=E>>>8,i[s++]=E&255)}}else if(ArrayBuffer.isView(t))i=t.slice(),s=i.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,o=s-r*4,l=new Uint32Array(i.buffer,0,r);let u=0,d=0,f=this.h1,g=this.h2;const y=3432918353,b=461845907,A=y&Ci,w=b&Ci;for(let S=0;S<r;S++)S&1?(u=l[S],u=u*y&ui|u*A&Ci,u=u<<15|u>>>17,u=u*b&ui|u*w&Ci,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(d=l[S],d=d*y&ui|d*A&Ci,d=d<<15|d>>>17,d=d*b&ui|d*w&Ci,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(u=0,o){case 3:u^=i[r*4+2]<<16;case 2:u^=i[r*4+1]<<8;case 1:u^=i[r*4],u=u*y&ui|u*A&Ci,u=u<<15|u>>>17,u=u*b&ui|u*w&Ci,r&1?f^=u:g^=u}this.h1=f,this.h2=g}hexdigest(){let t=this.h1,i=this.h2;return t^=i>>>1,t=t*3981806797&ui|t*36045&Ci,i=i*4283543511&ui|((i<<16|t>>>16)*2950163797&ui)>>>16,t^=i>>>1,t=t*444984403&ui|t*60499&Ci,i=i*3301882366&ui|((i<<16|t>>>16)*3120437893&ui)>>>16,t^=i>>>1,(t>>>0).toString(16).padStart(8,"0")+(i>>>0).toString(16).padStart(8,"0")}}const gh=Object.freeze({map:null,hash:"",transfer:void 0});class Nh{#t=!1;#e=null;#n=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,i){const s=this.#i.get(t);return s===void 0?i:Object.assign(i,s)}getRawValue(t){return this.#i.get(t)}remove(t){const i=this.#i.get(t);if(i!==void 0&&(i instanceof rt&&this.#n.delete(i.annotationElementId),this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#i.values())if(s instanceof rt)return;this.onAnnotationEditor(null)}}setValue(t,i){const s=this.#i.get(t);let r=!1;if(s!==void 0)for(const[o,l]of Object.entries(i))s[o]!==l&&(r=!0,s[o]=l);else r=!0,this.#i.set(t,i);r&&this.#a(),i instanceof rt&&((this.#n||=new Map).set(i.annotationElementId,i),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(i.constructor._type))}has(t){return this.#i.has(t)}get size(){return this.#i.size}#a(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new dy(this)}get serializable(){if(this.#i.size===0)return gh;const t=new Map,i=new hy,s=[],r=Object.create(null);let o=!1;for(const[l,u]of this.#i){const d=u instanceof rt?u.serialize(!1,r):u;u.page&&(u.pageIndex=u.page._pageIndex,delete u.page),d&&(t.set(l,d),i.update(`${l}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const l of t.values())l.bitmap&&s.push(l.bitmap);return t.size>0?{map:t,hash:i.hexdigest(),transfer:s}:gh}get editorStats(){let t=null;const i=new Map;let s=0,r=0;for(const o of this.#i.values()){if(!(o instanceof rt)){o.popup&&(o.popup.deleted?r+=1:s+=1);continue}o.isCommentDeleted?r+=1:o.hasEditedComment&&(s+=1);const l=o.telemetryFinalData;if(!l)continue;const{type:u}=l;i.has(u)||i.set(u,Object.getPrototypeOf(o).constructor),t||=Object.create(null);const d=t[u]||=new Map;for(const[f,g]of Object.entries(l)){if(f==="type")continue;let y=d.get(f);y||(y=new Map,d.set(f,y));const b=y.get(g)??0;y.set(g,b+1)}}if((r>0||s>0)&&(t||=Object.create(null),t.comments={deleted:r,edited:s}),!t)return null;for(const[o,l]of i)t[o]=l.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,i){const s=this.#n?.get(t);return s?(s.updateFromAnnotationLayer(i),!0):!1}getEditor(t){return this.#n?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#n)for(const i of this.#n.values())i.serialize()&&t.push(i.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#i.entries()}}class dy extends Nh{#t;constructor(t){super();const{map:i,hash:s,transfer:r}=t.serializable,o=structuredClone(i,r?{transfer:r}:null);this.#t={map:o,hash:s,transfer:r}}get print(){zt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return pt(this,"modifiedIds",{ids:new Set,hash:""})}}class xS{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:i=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const i=this.styleElement.sheet;i.insertRule(t,i.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:i,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(Bt(!i,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:o,style:l}=t,u=new FontFace(r,o,l);this.addNativeFontFace(u);try{await u.load(),this.#t.add(r),s?.(t)}catch{ft(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}zt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw ft(`Failed to load font '${s.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const i=t.createFontFaceRule();if(i){if(this.insertRule(i),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return pt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return pt(this,"isSyncFontLoadingSupported",De||pe.platform.isFirefox)}_queueLoadingCallback(t){function i(){for(Bt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const o=s.shift();setTimeout(o.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:i,callback:t};return s.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return pt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,i){function s(O,L){return O.charCodeAt(L)<<24|O.charCodeAt(L+1)<<16|O.charCodeAt(L+2)<<8|O.charCodeAt(L+3)&255}function r(O,L,N,z){const $=O.substring(0,L),K=O.substring(L+N);return $+z+K}let o,l;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let f=0;function g(O,L){if(++f>30){ft("Load test font never loaded."),L();return}if(d.font="30px "+O,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){L();return}setTimeout(g.bind(null,O,L))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=r(b,976,y.length,y);const w=16,S=1482184792;let T=s(b,w);for(o=0,l=y.length-3;o<l;o+=4)T=T-S+s(y,o)|0;o<y.length&&(T=T-S+s(y+"XXX",o)|0),b=r(b,w,4,lS(T));const E=`url(data:font/opentype;base64,${btoa(b)});`,x=`@font-face {font-family:"${y}";src:${E}}`;this.insertRule(x);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const O of[t.loadedName,y]){const L=this._document.createElement("span");L.textContent="Hi",L.style.fontFamily=O,C.append(L)}this._document.body.append(C),g(y,()=>{C.remove(),i.complete()})}}class MS{#t;constructor(t,i=null,s,r){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=i,s&&Object.assign(this,s),r&&(this.charProcOperatorList=r)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),i}getPathGenerator(t,i){if(this.compiledGlyphs[i]!==void 0)return this.compiledGlyphs[i];const s=this.loadedName+"_path_"+i;let r;try{r=t.get(s)}catch(l){ft(`getPathGenerator - ignoring character: "${l}".`)}const o=cy(r?.path);return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[i]=o}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}set disableFontFace(t){pt(this,"disableFontFace",!!t)}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}set bbox(t){pt(this,"bbox",t)}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}class Js{#t;#e;#n;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const i=new TextEncoder,s={};let r=0;for(const f of Js.strings){const g=i.encode(t[f]);s[f]=g,r+=4+g.length}const o=new ArrayBuffer(r),l=new Uint8Array(o),u=new DataView(o);let d=0;for(const f of Js.strings){const g=s[f],y=g.length;u.setUint32(d,y),l.set(g,d+4),d+=4+y}return Bt(d===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}#i(t){Bt(t<Js.strings.length,"Invalid string index");let i=0;for(let r=0;r<t;r++)i+=this.#e.getUint32(i)+4;const s=this.#e.getUint32(i);return this.#n.decode(new Uint8Array(this.#t,i+4,s))}get fontFamily(){return this.#i(0)}get fontWeight(){return this.#i(1)}get italicAngle(){return this.#i(2)}}class ta{#t;#e;#n;static strings=["css","loadedName","baseFontName","src"];static write(t){const i=new TextEncoder,s={};let r=0;for(const b of ta.strings){const A=i.encode(t[b]);s[b]=A,r+=4+A.length}r+=4;let o,l,u=1+r;t.style&&(o=i.encode(t.style.style),l=i.encode(t.style.weight),u+=4+o.length+4+l.length);const d=new ArrayBuffer(u),f=new Uint8Array(d),g=new DataView(d);let y=0;g.setUint8(y++,t.guessFallback?1:0),g.setUint32(y,0),y+=4,r=0;for(const b of ta.strings){const A=s[b],w=A.length;r+=4+w,g.setUint32(y,w),f.set(A,y+4),y+=4+w}return g.setUint32(y-r-4,r),t.style&&(g.setUint32(y,o.length),f.set(o,y+4),y+=4+o.length,g.setUint32(y,l.length),f.set(l,y+4),y+=4+l.length),Bt(y<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(y)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#i(t){Bt(t<ta.strings.length,"Invalid string index");let i=5;for(let r=0;r<t;r++)i+=this.#e.getUint32(i)+4;const s=this.#e.getUint32(i);return this.#n.decode(new Uint8Array(this.#t,i+4,s))}get css(){return this.#i(0)}get loadedName(){return this.#i(1)}get baseFontName(){return this.#i(2)}get src(){return this.#i(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const i=this.#e.getUint32(t),s=this.#n.decode(new Uint8Array(this.#t,t+4,i));t+=4+i;const r=this.#e.getUint32(t),o=this.#n.decode(new Uint8Array(this.#t,t+4,r));return{style:s,weight:o}}}class jt{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#n=this.#e+1+8;static#i=this.#n+1+48;static#a=this.#i+1+6;#r;#s;#o;constructor({data:t,extra:i}){this.#r=t,this.#s=new TextDecoder,this.#o=new DataView(this.#r),i&&Object.assign(this,i)}#c(t){Bt(t<jt.bools.length,"Invalid boolean index");const i=Math.floor(t/4),s=t*2%8,r=this.#o.getUint8(i)>>s&3;return r===0?void 0:r===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return Bt(t<jt.numbers.length,"Invalid number index"),this.#o.getFloat64(jt.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=jt.#e;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<4;r++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}get fontMatrix(){let t=jt.#n;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<6;r++)s.push(this.#o.getFloat64(t,!0)),t+=8;return s}get defaultVMetrics(){let t=jt.#i;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<3;r++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}#d(t){Bt(t<jt.strings.length,"Invalid string index");let i=jt.#a+4;for(let o=0;o<t;o++)i+=this.#o.getUint32(i)+4;const s=this.#o.getUint32(i),r=new Uint8Array(s);return r.set(new Uint8Array(this.#r,i+4,s)),this.#s.decode(r)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=jt.#a;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const r=this.#o.getUint32(t);t+=4+r;const o=this.#o.getUint32(t);if(o!==0)return new Uint8Array(this.#r,t+4,o)}clearData(){let t=jt.#a;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const r=this.#o.getUint32(t);t+=4+r;const o=this.#o.getUint32(t);new Uint8Array(this.#r,t+4,o).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=jt.#a;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const r=this.#o.getUint32(t);if(r===0)return null;const o=new Uint8Array(r);return o.set(new Uint8Array(this.#r,t+4,r)),new Js(o.buffer)}get systemFontInfo(){let t=jt.#a;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(this.#r,t+4,s)),new ta(r.buffer)}static write(t){const i=t.systemFontInfo?ta.write(t.systemFontInfo):null,s=t.cssFontInfo?Js.write(t.cssFontInfo):null,r=new TextEncoder,o={};let l=0;for(const S of jt.strings)o[S]=r.encode(t[S]),l+=4+o[S].length;const u=jt.#a+4+l+4+(i?i.byteLength:0)+4+(s?s.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(u),f=new Uint8Array(d),g=new DataView(d);let y=0;const b=jt.bools.length;let A=0,w=0;for(let S=0;S<b;S++){const T=t[jt.bools[S]];A|=(T===void 0?0:T?2:1)<<w,w+=2,(w===8||S===b-1)&&(g.setUint8(y++,A),A=0,w=0)}Bt(y===jt.#t,"FontInfo.write: Boolean properties offset mismatch");for(const S of jt.numbers)g.setFloat64(y,t[S]),y+=8;if(Bt(y===jt.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){g.setUint8(y++,4);for(const S of t.bbox)g.setInt16(y,S,!0),y+=2}else g.setUint8(y++,0),y+=8;if(Bt(y===jt.#n,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){g.setUint8(y++,6);for(const S of t.fontMatrix)g.setFloat64(y,S,!0),y+=8}else g.setUint8(y++,0),y+=48;if(Bt(y===jt.#i,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){g.setUint8(y++,1);for(const S of t.defaultVMetrics)g.setInt16(y,S,!0),y+=2}else g.setUint8(y++,0),y+=6;Bt(y===jt.#a,"FontInfo.write: DefaultVMetrics properties offset mismatch"),g.setUint32(jt.#a,0),y+=4;for(const S of jt.strings){const T=o[S],E=T.length;g.setUint32(y,E),f.set(T,y+4),y+=4+E}if(g.setUint32(jt.#a,y-jt.#a-4),!i)g.setUint32(y,0),y+=4;else{const S=i.byteLength;g.setUint32(y,S),Bt(y+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(i),y+4),y+=4+S}if(!s)g.setUint32(y,0),y+=4;else{const S=s.byteLength;g.setUint32(y,S),Bt(y+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(s),y+4),y+=4+S}return t.data===void 0?(g.setUint32(y,0),y+=4):(g.setUint32(y,t.data.length),f.set(t.data,y+4),y+=4+t.data.length),Bt(y<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(y)}}class ye{static#t=0;static#e=1;static#n=2;static#i=3;static#a=4;static#r=8;static#s=12;static#o=16;constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let i,s=null,r=[],o=[],l=[],u=[],d=null,f=null;switch(t[0]){case"RadialAxial":i=t[1]==="axial"?1:2,s=t[2],l=t[3],i===1?r.push(...t[4],...t[5]):r.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":i=3,d=t[1],r=t[2],o=t[3],u=t[4]||[],s=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const g=Math.floor(r.length/2),y=Math.floor(o.length/3),b=l.length,A=u.length;let w=0;for(const L of u)w+=1,w=Math.ceil(w/4)*4,w+=4+L.coords.length*4,w+=4+L.colors.length*4,L.verticesPerRow!==void 0&&(w+=4);const S=20+g*8+y*3+b*8+(s?16:0)+(f?3:0)+w,T=new ArrayBuffer(S),E=new DataView(T),x=new Uint8Array(T);E.setUint8(ye.#t,i),E.setUint8(ye.#e,s?1:0),E.setUint8(ye.#n,f?1:0),E.setUint8(ye.#i,d),E.setUint32(ye.#a,g,!0),E.setUint32(ye.#r,y,!0),E.setUint32(ye.#s,b,!0),E.setUint32(ye.#o,A,!0);let C=20;new Float32Array(T,C,g*2).set(r),C+=g*8,x.set(o,C),C+=y*3;for(const[L,N]of l)E.setFloat32(C,L,!0),C+=4,E.setUint32(C,parseInt(N.slice(1),16),!0),C+=4;if(s)for(const L of s)E.setFloat32(C,L,!0),C+=4;f&&(x.set(f,C),C+=3);for(let L=0;L<u.length;L++){const N=u[L];E.setUint8(C,N.type),C+=1,C=Math.ceil(C/4)*4,E.setUint32(C,N.coords.length,!0),C+=4,new Int32Array(T,C,N.coords.length).set(N.coords),C+=N.coords.length*4,E.setUint32(C,N.colors.length,!0),C+=4,new Int32Array(T,C,N.colors.length).set(N.colors),C+=N.colors.length*4,N.verticesPerRow!==void 0&&(E.setUint32(C,N.verticesPerRow,!0),C+=4)}return T}getIR(){const t=this.view,i=this.data[ye.#t],s=!!this.data[ye.#e],r=!!this.data[ye.#n],o=t.getUint32(ye.#a,!0),l=t.getUint32(ye.#r,!0),u=t.getUint32(ye.#s,!0),d=t.getUint32(ye.#o,!0);let f=20;const g=new Float32Array(this.buffer,f,o*2);f+=o*8;const y=new Uint8Array(this.buffer,f,l*3);f+=l*3;const b=[];for(let T=0;T<u;++T){const E=t.getFloat32(f,!0);f+=4;const x=t.getUint32(f,!0);f+=4,b.push([E,`#${x.toString(16).padStart(6,"0")}`])}let A=null;if(s){A=[];for(let T=0;T<4;++T)A.push(t.getFloat32(f,!0)),f+=4}let w=null;r&&(w=new Uint8Array(this.buffer,f,3),f+=3);const S=[];for(let T=0;T<d;++T){const E=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const x=t.getUint32(f,!0);f+=4;const C=new Int32Array(this.buffer,f,x);f+=x*4;const O=t.getUint32(f,!0);f+=4;const L=new Int32Array(this.buffer,f,O);f+=O*4;const N={type:E,coords:C,colors:L};E===uh.LATTICE&&(N.verticesPerRow=t.getUint32(f,!0),f+=4),S.push(N)}if(i===1)return["RadialAxial","axial",A,b,Array.from(g.slice(0,2)),Array.from(g.slice(2,4)),null,null];if(i===2)return["RadialAxial","radial",A,b,[g[0],g[1]],[g[3],g[4]],g[2],g[5]];if(i===3){const T=this.data[ye.#i];let E=null;if(g.length>0){let x=g[0],C=g[0],O=g[1],L=g[1];for(let N=0;N<g.length;N+=2){const z=g[N],$=g[N+1];x=x>z?z:x,O=O>$?$:O,C=C<z?z:C,L=L<$?$:L}E=[x,O,C,L]}return["Mesh",T,g,y,S,E,A,w]}throw new Error(`Unsupported pattern kind: ${i}`)}}class DS{static write(t){let i,s;return pe.isFloat16ArraySupported?(s=new ArrayBuffer(t.length*2),i=new Float16Array(s)):(s=new ArrayBuffer(t.length*4),i=new Float32Array(s)),i.set(t),s}#t;constructor(t){this.#t=t}get path(){return pe.isFloat16ArraySupported?new Float16Array(this.#t):new Float32Array(this.#t)}}function RS(h){if(h instanceof URL)return h.href;if(typeof h=="string"){if(De)return h;const t=URL.parse(h,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function LS(h){if(De&&typeof Buffer<"u"&&h instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength)return h;if(typeof h=="string")return yl(h);if(h instanceof ArrayBuffer||ArrayBuffer.isView(h)||typeof h=="object"&&!isNaN(h?.length))return new Uint8Array(h);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function $o(h){if(typeof h!="string")return null;if(h.endsWith("/"))return h;throw new Error(`Invalid factory url: "${h}" must include trailing slash.`)}const mh=h=>typeof h=="object"&&Number.isInteger(h?.num)&&h.num>=0&&Number.isInteger(h?.gen)&&h.gen>=0,OS=h=>typeof h=="object"&&typeof h?.name=="string",NS=fS.bind(null,mh,OS);class kS{#t=new Map;#e=Promise.resolve();postMessage(t,i){const s={data:structuredClone(t,i?{transfer:i}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,s)})}addEventListener(t,i,s=null){let r=null;if(s?.signal instanceof AbortSignal){const{signal:o}=s;if(o.aborted){ft("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,i);r=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#t.set(i,r)}removeEventListener(t,i){this.#t.get(i)?.(),this.#t.delete(i)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const Ko={DATA:1,ERROR:2},ue={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ym(){}function Ue(h){if(h instanceof Ln||h instanceof hh||h instanceof cm||h instanceof ll||h instanceof th)return h;switch(h instanceof Error||typeof h=="object"&&h!==null||zt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),h.name){case"AbortException":return new Ln(h.message);case"InvalidPDFException":return new hh(h.message);case"PasswordException":return new cm(h.message,h.code);case"ResponseException":return new ll(h.message,h.status,h.missing);case"UnknownErrorException":return new th(h.message,h.details)}return new th(h.message,h.toString())}class hr{#t=new AbortController;constructor(t,i,s){this.sourceName=t,this.targetName=i,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const s=t.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===Ko.DATA)r.resolve(t.data);else if(t.callback===Ko.ERROR)r.reject(Ue(t.reason));else throw new Error("Unexpected callback case");return}const i=this.actionHandler[t.action];if(!i)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,r=t.sourceName,o=this.comObj;Promise.try(i,t.data).then(function(l){o.postMessage({sourceName:s,targetName:r,callback:Ko.DATA,callbackId:t.callbackId,data:l})},function(l){o.postMessage({sourceName:s,targetName:r,callback:Ko.ERROR,callbackId:t.callbackId,reason:Ue(l)})});return}if(t.streamId){this.#n(t);return}i(t.data)}on(t,i){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=i}send(t,i,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:i},s)}sendWithPromise(t,i,s){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:i},s)}catch(l){o.reject(l)}return o.promise}sendWithStream(t,i,s,r){const o=this.streamId++,l=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:u,action:t,streamId:o,data:i,desiredSize:f.desiredSize},r),g.promise},pull:f=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,d.postMessage({sourceName:l,targetName:u,stream:ue.PULL,streamId:o,desiredSize:f.desiredSize}),g.promise},cancel:f=>{Bt(f instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:l,targetName:u,stream:ue.CANCEL,streamId:o,reason:Ue(f)}),g.promise}},s)}#n(t){const i=t.streamId,s=this.sourceName,r=t.sourceName,o=this.comObj,l=this,u=this.actionHandler[t.action],d={enqueue(f,g=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=g,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:s,targetName:r,stream:ue.ENQUEUE,streamId:i,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:r,stream:ue.CLOSE,streamId:i}),delete l.streamSinks[i])},error(f){Bt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:r,stream:ue.ERROR,streamId:i,reason:Ue(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[i]=d,Promise.try(u,t.data,d).then(function(){o.postMessage({sourceName:s,targetName:r,stream:ue.START_COMPLETE,streamId:i,success:!0})},function(f){o.postMessage({sourceName:s,targetName:r,stream:ue.START_COMPLETE,streamId:i,reason:Ue(f)})})}#i(t){const i=t.streamId,s=this.sourceName,r=t.sourceName,o=this.comObj,l=this.streamControllers[i],u=this.streamSinks[i];switch(t.stream){case ue.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(Ue(t.reason));break;case ue.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(Ue(t.reason));break;case ue.PULL:if(!u){o.postMessage({sourceName:s,targetName:r,stream:ue.PULL_COMPLETE,streamId:i,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||ym).then(function(){o.postMessage({sourceName:s,targetName:r,stream:ue.PULL_COMPLETE,streamId:i,success:!0})},function(f){o.postMessage({sourceName:s,targetName:r,stream:ue.PULL_COMPLETE,streamId:i,reason:Ue(f)})});break;case ue.ENQUEUE:if(Bt(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case ue.CLOSE:if(Bt(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#a(l,i);break;case ue.ERROR:Bt(l,"error should have stream controller"),l.controller.error(Ue(t.reason)),this.#a(l,i);break;case ue.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(Ue(t.reason)),this.#a(l,i);break;case ue.CANCEL:if(!u)break;const d=Ue(t.reason);Promise.try(u.onCancel||ym,d).then(function(){o.postMessage({sourceName:s,targetName:r,stream:ue.CANCEL_COMPLETE,streamId:i,success:!0})},function(f){o.postMessage({sourceName:s,targetName:r,stream:ue.CANCEL_COMPLETE,streamId:i,reason:Ue(f)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[i];break;default:throw new Error("Unexpected stream case")}}async#a(t,i){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[i]}destroy(){this.#t?.abort(),this.#t=null}}class fy{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,i){if(t<=0||i<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,i);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,i,s){if(!t.canvas)throw new Error("Canvas is not specified");if(i<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=i,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,i){zt("Abstract method `_createCanvas` called.")}}class BS extends fy{constructor({ownerDocument:t=globalThis.document,enableHWA:i=!1}){super({enableHWA:i}),this._document=t}_createCanvas(t,i){const s=this._document.createElement("canvas");return s.width=t,s.height=i,s}}class py{constructor({baseUrl:t=null,isCompressed:i=!0}){this.baseUrl=t,this.isCompressed=i}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const i=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(i).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})}async _fetch(t){zt("Abstract method `_fetch` called.")}}class bm extends py{async _fetch(t){const i=await Er(t,this.isCompressed?"arraybuffer":"text");return i instanceof ArrayBuffer?new Uint8Array(i):yl(i)}}class gy{addFilter(t){return"none"}addHCMFilter(t,i){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,i,s,r,o){return"none"}destroy(t=!1){}}class zS extends gy{#t;#e;#n;#i;#a;#r;#s=0;constructor({docId:t,ownerDocument:i=globalThis.document}){super(),this.#i=t,this.#a=i}get#o(){return this.#e||=new Map}get#c(){return this.#r||=new Map}get#l(){if(!this.#n){const t=this.#a.createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=this.#a.createElementNS(Wi,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#n=this.#a.createElementNS(Wi,"defs"),t.append(s),s.append(this.#n),this.#a.body.append(t)}return this.#n}#d(t){if(t.length===1){const d=t[0],f=new Array(256);for(let y=0;y<256;y++)f[y]=d[y]/255;const g=f.join(",");return[g,g,g]}const[i,s,r]=t,o=new Array(256),l=new Array(256),u=new Array(256);for(let d=0;d<256;d++)o[d]=i[d]/255,l[d]=s[d]/255,u[d]=r[d]/255;return[o.join(","),l.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const i=this.#a.URL;i!==this.#a.baseURI&&(bl(i)?ft('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=ay(i,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let i=this.#o.get(t);if(i)return i;const[s,r,o]=this.#d(t),l=t.length===1?s:`${s}${r}${o}`;if(i=this.#o.get(l),i)return this.#o.set(t,i),i;const u=`g_${this.#i}_transfer_map_${this.#s++}`,d=this.#h(u);this.#o.set(t,d),this.#o.set(l,d);const f=this.#g(u);return this.#p(s,r,o,f),d}addHCMFilter(t,i){const s=`${t}-${i}`,r="base";let o=this.#c.get(r);if(o?.key===s||(o?(o.filter?.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},this.#c.set(r,o)),!t||!i))return o.url;const l=this.#v(t);t=et.makeHexColor(...l);const u=this.#v(i);if(i=et.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&i==="#ffffff"||t===i)return o.url;const d=new Array(256);for(let A=0;A<=255;A++){const w=A/255;d[A]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const f=d.join(","),g=`g_${this.#i}_hcm_filter`,y=o.filter=this.#g(g);this.#p(f,f,f,y),this.#m(y);const b=(A,w)=>{const S=l[A]/255,T=u[A]/255,E=new Array(w+1);for(let x=0;x<=w;x++)E[x]=S+x/w*(T-S);return E.join(",")};return this.#p(b(0,5),b(1,5),b(2,5),y),o.url=this.#h(g),o.url}addAlphaFilter(t){let i=this.#o.get(t);if(i)return i;const[s]=this.#d([t]),r=`alpha_${s}`;if(i=this.#o.get(r),i)return this.#o.set(t,i),i;const o=`g_${this.#i}_alpha_map_${this.#s++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(r,l);const u=this.#g(o);return this.#y(s,u),l}addLuminosityFilter(t){let i=this.#o.get(t||"luminosity");if(i)return i;let s,r;if(t?([s]=this.#d([t]),r=`luminosity_${s}`):r="luminosity",i=this.#o.get(r),i)return this.#o.set(t,i),i;const o=`g_${this.#i}_luminosity_map_${this.#s++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(r,l);const u=this.#g(o);return this.#f(u),t&&this.#y(s,u),l}addHighlightHCMFilter(t,i,s,r,o){const l=`${i}-${s}-${r}-${o}`;let u=this.#c.get(t);if(u?.key===l||(u?(u.filter?.remove(),u.key=l,u.url="none",u.filter=null):(u={key:l,url:"none",filter:null},this.#c.set(t,u)),!i||!s))return u.url;const[d,f]=[i,s].map(this.#v.bind(this));let g=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[b,A]=[r,o].map(this.#v.bind(this));y<g&&([g,y,b,A]=[y,g,A,b]),this.#l.style.color="";const w=(E,x,C)=>{const O=new Array(256),L=(y-g)/C,N=E/255,z=(x-E)/(255*C);let $=0;for(let K=0;K<=C;K++){const J=Math.round(g+K*L),Q=N+K*z;for(let ht=$;ht<=J;ht++)O[ht]=Q;$=J+1}for(let K=$;K<256;K++)O[K]=O[$-1];return O.join(",")},S=`g_${this.#i}_hcm_${t}_filter`,T=u.filter=this.#g(S);return this.#m(T),this.#p(w(b[0],A[0],5),w(b[1],A[1],5),w(b[2],A[2],5),T),u.url=this.#h(S),u.url}destroy(t=!1){t&&this.#r?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#r?.clear(),this.#r=null,this.#s=0)}#f(t){const i=this.#a.createElementNS(Wi,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)}#m(t){const i=this.#a.createElementNS(Wi,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)}#g(t){const i=this.#a.createElementNS(Wi,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),this.#l.append(i),i}#u(t,i,s){const r=this.#a.createElementNS(Wi,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)}#p(t,i,s,r){const o=this.#a.createElementNS(Wi,"feComponentTransfer");r.append(o),this.#u(o,"feFuncR",t),this.#u(o,"feFuncG",i),this.#u(o,"feFuncB",s)}#y(t,i){const s=this.#a.createElementNS(Wi,"feComponentTransfer");i.append(s),this.#u(s,"feFuncA",t)}#v(t){return this.#l.style.color=t,_r(getComputedStyle(this.#l).getPropertyValue("color"))}}class my{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load font data at: ${i}`)})}async _fetch(t){zt("Abstract method `_fetch` called.")}}class vm extends my{async _fetch(t){const i=await Er(t,"arraybuffer");return new Uint8Array(i)}}class yy{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load wasm data at: ${i}`)})}async _fetch(t){zt("Abstract method `_fetch` called.")}}class Am extends yy{async _fetch(t){const i=await Er(t,"arraybuffer");return new Uint8Array(i)}}De&&ft("Please use the `legacy` build in Node.js environments.");async function kh(h){const i=await process.getBuiltinModule("fs").promises.readFile(h);return new Uint8Array(i)}class PS extends gy{}class FS extends fy{_createCanvas(t,i){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,i)}}class US extends py{async _fetch(t){return kh(t)}}class IS extends my{async _fetch(t){return kh(t)}}class HS extends yy{async _fetch(t){return kh(t)}}const Ys="__forcedDependency",{floor:Sm,ceil:wm}=Math;function Wo(h,t,i,s,r,o){h[t*4+0]=Math.min(h[t*4+0],i),h[t*4+1]=Math.min(h[t*4+1],s),h[t*4+2]=Math.max(h[t*4+2],r),h[t*4+3]=Math.max(h[t*4+3],o)}const yh=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class jS{#t;#e;constructor(t,i){this.#t=t,this.#e=i}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===yh}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const Qo=(h,t)=>{if(!h)return;let i=h.get(t);return i||(i={dependencies:new Set,isRenderingOperation:!1},h.set(t,i)),i};class GS{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[Ys]:[]};#n=new Map;#i=[];#a=[];#r=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#m;#g;#u;#p;constructor(t,i,s=!1){this.#f=t.width,this.#m=t.height,this.#y(i),s&&(this.#p=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,i){const s=new ArrayBuffer(t*4);this.#g=new Uint8ClampedArray(s),this.#u=new Uint32Array(s),i&&i.length>0?(this.#u.set(i),this.#u.fill(yh,i.length)):this.#u.fill(yh)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[Ys]:{__proto__:this.#e[Ys]}},this.#s={__proto__:this.#s},this.#i.push(t),this}restore(t){const i=Object.getPrototypeOf(this.#t);if(i===null)return this;this.#t=i,this.#e=Object.getPrototypeOf(this.#e),this.#s=Object.getPrototypeOf(this.#s);const s=this.#i.pop();return s!==void 0&&(Qo(this.#p,t)?.dependencies.add(s),this.#u[t]=this.#u[s]),this}recordOpenMarker(t){return this.#i.push(t),this}getOpenMarker(){return this.#i.length===0?null:this.#i.at(-1)}recordCloseMarker(t){const i=this.#i.pop();return i!==void 0&&(Qo(this.#p,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}beginMarkedContent(t){return this.#a.push(t),this}endMarkedContent(t){const i=this.#a.pop();return i!==void 0&&(Qo(this.#p,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}pushBaseTransform(t){return this.#r.push(et.multiplyByDOMMatrix(this.#r.at(-1),t.getTransform())),this}popBaseTransform(){return this.#r.length>1&&this.#r.pop(),this}recordSimpleData(t,i){return this.#t[t]=i,this}recordIncrementalData(t,i){return this.#e[t].push(i),this}resetIncrementalData(t,i){return this.#e[t].length=0,this}recordNamedData(t,i){return this.#n.set(t,i),this}recordSimpleDataFromNamed(t,i,s){this.#t[t]=this.#n.get(i)??s}recordFutureForcedDependency(t,i){return this.recordIncrementalData(Ys,i),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const i of t)i in this.#t&&this.recordFutureForcedDependency(i,this.#t[i]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(Ys,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,i,s,r,o,l){const u=et.multiplyByDOMMatrix(this.#r.at(-1),i.getTransform()),d=[1/0,1/0,-1/0,-1/0];et.axialAlignedBoundingBox([s,o,r,l],u,d);const f=et.intersect(this.#s,d);return f?(this.#s[0]=f[0],this.#s[1]=f[1],this.#s[2]=f[2],this.#s[3]=f[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(t,i,s,r,o,l){const u=this.#s;if(u[0]===1/0)return this;const d=et.multiplyByDOMMatrix(this.#r.at(-1),i.getTransform());if(u[0]===-1/0)return et.axialAlignedBoundingBox([s,o,r,l],d,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return et.axialAlignedBoundingBox([s,o,r,l],d,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,i,s,r=1,o=0,l=0,u){const d=s.bbox;let f,g;if(d&&(f=d[2]!==d[0]&&d[3]!==d[1]&&this.#h.get(s),f!==!1&&(g=[0,0,0,0],et.axialAlignedBoundingBox(d,s.fontMatrix,g),(r!==1||o!==0||l!==0)&&et.scaleMinMax([r,0,0,-r,o,l],g),f)))return this.recordBBox(t,i,g[0],g[2],g[1],g[3]);if(!u)return this.recordFullPageBBox(t);const y=u();return d&&g&&f===void 0&&(f=g[0]<=o-y.actualBoundingBoxLeft&&g[2]>=o+y.actualBoundingBoxRight&&g[1]<=l-y.actualBoundingBoxAscent&&g[3]>=l+y.actualBoundingBoxDescent,this.#h.set(s,f),f)?this.recordBBox(t,i,g[0],g[2],g[1],g[3]):this.recordBBox(t,i,o-y.actualBoundingBoxLeft,o+y.actualBoundingBoxRight,l-y.actualBoundingBoxAscent,l+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#s[0]),this.#o[1]=Math.max(0,this.#s[1]),this.#o[2]=Math.min(this.#f,this.#s[2]),this.#o[3]=Math.min(this.#m,this.#s[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,i){const s=this.#l,r=this.#t,o=this.#e;for(const l of i)l in this.#t?s.add(r[l]):l in o&&o[l].forEach(s.add,s);return this}recordNamedDependency(t,i){return this.#n.has(i)&&this.#l.add(this.#n.get(i)),this}recordOperation(t,i=!1){if(this.recordDependencies(t,[Ys]),this.#p){const s=Qo(this.#p,t),{dependencies:r}=s;this.#l.forEach(r.add,r),this.#i.forEach(r.add,r),this.#a.forEach(r.add,r),r.delete(t),s.isRenderingOperation=!0}if(this.#c===t){const s=Sm(this.#o[0]*256/this.#f),r=Sm(this.#o[1]*256/this.#m),o=wm(this.#o[2]*256/this.#f),l=wm(this.#o[3]*256/this.#m);Wo(this.#g,t,s,r,o,l);for(const u of this.#l)u!==t&&Wo(this.#g,u,s,r,o,l);for(const u of this.#i)u!==t&&Wo(this.#g,u,s,r,o,l);for(const u of this.#a)u!==t&&Wo(this.#g,u,s,r,o,l);i||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,i=!1){const s=Array.from(this.#l);this.recordOperation(t,i),this.recordIncrementalData("sameLineText",t);for(const r of s)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(t,i=!1){return this.#c===t&&(this.#c=-1,this.#s[0]=Math.max(this.#s[0],this.#o[0]),this.#s[1]=Math.max(this.#s[1],this.#o[1]),this.#s[2]=Math.min(this.#s[2],this.#o[2]),this.#s[3]=Math.min(this.#s[3],this.#o[3]),i||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const i=this.#d.get(t);return this.#d.delete(t),i}_pushPendingDependencies(t){for(const i of t)this.#l.add(i)}take(){return this.#h.clear(),new jS(this.#u,this.#g)}takeDebugMetadata(){return this.#p}}class cl{#t;#e;#n;#i=0;#a=0;constructor(t,i,s){if(t instanceof cl&&t.#n===!!s)return t;this.#t=t,this.#e=i,this.#n=!!s}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#a++,this.#t.save(this.#e),this}restore(t){return this.#a>0&&(this.#t.restore(this.#e),this.#a--),this}recordOpenMarker(t){return this.#i++,this}getOpenMarker(){return this.#i>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#i--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,i){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,i){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,i){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,i){return this}recordSimpleDataFromNamed(t,i,s){return this.#t.recordSimpleDataFromNamed(t,i,this.#e),this}recordFutureForcedDependency(t,i){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#n||this.#t.resetBBox(this.#e),this}recordClipBox(t,i,s,r,o,l){return this.#n||this.#t.recordClipBox(this.#e,i,s,r,o,l),this}recordBBox(t,i,s,r,o,l){return this.#n||this.#t.recordBBox(this.#e,i,s,r,o,l),this}recordCharacterBBox(t,i,s,r,o,l,u){return this.#n||this.#t.recordCharacterBBox(this.#e,i,s,r,o,l,u),this}recordFullPageBBox(t){return this.#n||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,i){return this.#t.recordDependencies(this.#e,i),this}recordNamedDependency(t,i){return this.#t.recordNamedDependency(this.#e,i),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#n||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const hi={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Ce={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function bh(h,t){if(!t)return;const i=t[2]-t[0],s=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],i,s),h.clip(r)}class Bh{isModifyingCurrentTransform(){return!1}getPattern(){zt("Abstract method `getPattern` called.")}}class VS extends Bh{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,i=null){let s,r=this._p0,o=this._p1;if(i&&(r=r.slice(),o=o.slice(),et.applyTransform(r,i),et.applyTransform(o,i)),this._type==="axial")s=t.createLinearGradient(r[0],r[1],o[0],o[1]);else if(this._type==="radial"){let l=this._r0,u=this._r1;if(i){const d=new Float32Array(2);et.singularValueDecompose2dScale(i,d),l*=d[0],u*=d[0]}s=t.createRadialGradient(r[0],r[1],l,o[0],o[1],u)}for(const l of this._colorStops)s.addColorStop(l[0],l[1]);return s}getPattern(t,i,s,r){let o;if(r===Ce.STROKE||r===Ce.FILL){if(this.isOriginBased()){let b=et.transform(s,i.baseTransform);this.matrix&&(b=et.transform(b,this.matrix));const A=.001,w=Math.hypot(b[0],b[1]),S=Math.hypot(b[2],b[3]),T=(b[0]*b[2]+b[1]*b[3])/(w*S);if(Math.abs(T)<A)if(this.isRadial()){if(Math.abs(w-S)<A)return this._createGradient(t,b)}else return this._createGradient(t,b)}const l=i.current.getClippedPathBoundingBox(r,Wt(t))||[0,0,0,0],u=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,f=i.cachedCanvases.getCanvas("pattern",u,d),g=f.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-l[0],-l[1]),s=et.transform(s,[1,0,0,1,l[0],l[1]]),g.transform(...i.baseTransform),this.matrix&&g.transform(...this.matrix),bh(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=t.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(s);o.setTransform(y)}else bh(t,this._bbox),o=this._createGradient(t);return o}}function nh(h,t,i,s,r,o,l,u){const d=t.coords,f=t.colors,g=h.data,y=h.width*4;let b;d[i+1]>d[s+1]&&(b=i,i=s,s=b,b=o,o=l,l=b),d[s+1]>d[r+1]&&(b=s,s=r,r=b,b=l,l=u,u=b),d[i+1]>d[s+1]&&(b=i,i=s,s=b,b=o,o=l,l=b);const A=(d[i]+t.offsetX)*t.scaleX,w=(d[i+1]+t.offsetY)*t.scaleY,S=(d[s]+t.offsetX)*t.scaleX,T=(d[s+1]+t.offsetY)*t.scaleY,E=(d[r]+t.offsetX)*t.scaleX,x=(d[r+1]+t.offsetY)*t.scaleY;if(w>=x)return;const C=f[o],O=f[o+1],L=f[o+2],N=f[l],z=f[l+1],$=f[l+2],K=f[u],J=f[u+1],Q=f[u+2],ht=Math.round(w),xt=Math.round(x);let dt,Mt,k,V,Z,yt,At,D;for(let H=ht;H<=xt;H++){if(H<T){const lt=H<w?0:(w-H)/(w-T);dt=A-(A-S)*lt,Mt=C-(C-N)*lt,k=O-(O-z)*lt,V=L-(L-$)*lt}else{let lt;H>x?lt=1:T===x?lt=0:lt=(T-H)/(T-x),dt=S-(S-E)*lt,Mt=N-(N-K)*lt,k=z-(z-J)*lt,V=$-($-Q)*lt}let W;H<w?W=0:H>x?W=1:W=(w-H)/(w-x),Z=A-(A-E)*W,yt=C-(C-K)*W,At=O-(O-J)*W,D=L-(L-Q)*W;const tt=Math.round(Math.min(dt,Z)),ot=Math.round(Math.max(dt,Z));let ut=y*H+tt*4;for(let lt=tt;lt<=ot;lt++)W=(dt-lt)/(dt-Z),W<0?W=0:W>1&&(W=1),g[ut++]=Mt-(Mt-yt)*W|0,g[ut++]=k-(k-At)*W|0,g[ut++]=V-(V-D)*W|0,g[ut++]=255}}function XS(h,t,i){const s=t.coords,r=t.colors;let o,l;switch(t.type){case uh.LATTICE:const u=t.verticesPerRow,d=Math.floor(s.length/u)-1,f=u-1;for(o=0;o<d;o++){let g=o*u;for(let y=0;y<f;y++,g++)nh(h,i,s[g],s[g+1],s[g+u],r[g],r[g+1],r[g+u]),nh(h,i,s[g+u+1],s[g+1],s[g+u],r[g+u+1],r[g+1],r[g+u])}break;case uh.TRIANGLES:for(o=0,l=s.length;o<l;o+=3)nh(h,i,s[o],s[o+1],s[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class YS extends Bh{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,i,s){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,g=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),A=f/y,w=g/b,S={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/A,scaleY:1/w},T=y+4,E=b+4,x=s.getCanvas("mesh",T,E),C=x.context,O=C.createImageData(y,b);if(i){const N=O.data;for(let z=0,$=N.length;z<$;z+=4)N[z]=i[0],N[z+1]=i[1],N[z+2]=i[2],N[z+3]=255}for(const N of this._figures)XS(O,N,S);return C.putImageData(O,2,2),{canvas:x.canvas,offsetX:u-2*A,offsetY:d-2*w,scaleX:A,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(t,i,s,r){bh(t,this._bbox);const o=new Float32Array(2);if(r===Ce.SHADING)et.singularValueDecompose2dScale(Wt(t),o);else if(this.matrix){et.singularValueDecompose2dScale(this.matrix,o);const[u,d]=o;et.singularValueDecompose2dScale(i.baseTransform,o),o[0]*=u,o[1]*=d}else et.singularValueDecompose2dScale(i.baseTransform,o);const l=this._createMeshCanvas(o,r===Ce.SHADING?null:this._background,i.cachedCanvases);return r!==Ce.SHADING&&(t.setTransform(...i.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class qS extends Bh{getPattern(){return"hotpink"}}function $S(h){switch(h[0]){case"RadialAxial":return new VS(h);case"Mesh":return new YS(h);case"Dummy":return new qS}throw new Error(`Unknown IR type: ${h[0]}`)}const Em={COLORED:1,UNCOLORED:2};class zh{static MAX_PATTERN_SIZE=3e3;constructor(t,i,s,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(t,i){const{bbox:s,operatorList:r,paintType:o,tilingType:l,color:u,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:g}=this;f=Math.abs(f),g=Math.abs(g),ml("TilingType: "+l);const y=s[0],b=s[1],A=s[2],w=s[3],S=A-y,T=w-b,E=new Float32Array(2);et.singularValueDecompose2dScale(this.matrix,E);const[x,C]=E;et.singularValueDecompose2dScale(this.baseTransform,E);const O=x*E[0],L=C*E[1];let N=S,z=T,$=!1,K=!1;const J=Math.ceil(f*O),Q=Math.ceil(g*L),ht=Math.ceil(S*O),xt=Math.ceil(T*L);J>=ht?N=f:$=!0,Q>=xt?z=g:K=!0;const dt=this.getSizeAndScale(N,this.ctx.canvas.width,O),Mt=this.getSizeAndScale(z,this.ctx.canvas.height,L),k=t.cachedCanvases.getCanvas("pattern",dt.size,Mt.size),V=k.context,Z=d.createCanvasGraphics(V,i);if(Z.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(Z,o,u),V.translate(-dt.scale*y,-Mt.scale*b),Z.transform(0,dt.scale,0,0,Mt.scale,0,0),V.save(),Z.dependencyTracker?.save(),this.clipBbox(Z,y,b,A,w),Z.baseTransform=Wt(Z.ctx),Z.executeOperatorList(r),Z.endDrawing(),Z.dependencyTracker?.restore(),V.restore(),$||K){const yt=k.canvas;$&&(N=f),K&&(z=g);const At=this.getSizeAndScale(N,this.ctx.canvas.width,O),D=this.getSizeAndScale(z,this.ctx.canvas.height,L),H=At.size,W=D.size,tt=t.cachedCanvases.getCanvas("pattern-workaround",H,W),ot=tt.context,ut=$?Math.floor(S/f):0,lt=K?Math.floor(T/g):0;for(let ie=0;ie<=ut;ie++)for(let Gt=0;Gt<=lt;Gt++)ot.drawImage(yt,H*ie,W*Gt,H,W,0,0,H,W);return{canvas:tt.canvas,scaleX:At.scale,scaleY:D.scale,offsetX:y,offsetY:b}}return{canvas:k.canvas,scaleX:dt.scale,scaleY:Mt.scale,offsetX:y,offsetY:b}}getSizeAndScale(t,i,s){const r=Math.max(zh.MAX_PATTERN_SIZE,i);let o=Math.ceil(t*s);return o>=r?o=r:s=o/t,{scale:s,size:o}}clipBbox(t,i,s,r,o){const l=r-i,u=o-s;t.ctx.rect(i,s,l,u),et.axialAlignedBoundingBox([i,s,r,o],Wt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,i,s){const r=t.ctx,o=t.current;switch(i){case Em.COLORED:const{fillStyle:l,strokeStyle:u}=this.ctx;r.fillStyle=o.fillColor=l,r.strokeStyle=o.strokeColor=u;break;case Em.UNCOLORED:r.fillStyle=r.strokeStyle=s,o.fillColor=o.strokeColor=s;break;default:throw new rS(`Unsupported paint type: ${i}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,i,s,r,o){let l=s;r!==Ce.SHADING&&(l=et.transform(l,i.baseTransform),this.matrix&&(l=et.transform(l,this.matrix)));const u=this.createPatternCanvas(i,o);let d=new DOMMatrix(l);d=d.translate(u.offsetX,u.offsetY),d=d.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(d),f}}function KS({src:h,srcPos:t=0,dest:i,width:s,height:r,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const u=pe.isLittleEndian?4278190080:255,[d,f]=l?[o,u]:[u,o],g=s>>3,y=s&7,b=h.length;i=new Uint32Array(i.buffer);let A=0;for(let w=0;w<r;w++){for(const T=t+g;t<T;t++){const E=t<b?h[t]:255;i[A++]=E&128?f:d,i[A++]=E&64?f:d,i[A++]=E&32?f:d,i[A++]=E&16?f:d,i[A++]=E&8?f:d,i[A++]=E&4?f:d,i[A++]=E&2?f:d,i[A++]=E&1?f:d}if(y===0)continue;const S=t<b?h[t++]:255;for(let T=0;T<y;T++)i[A++]=S&1<<7-T?f:d}return{srcPos:t,destPos:A}}const Tm=16,_m=100,WS=15,Cm=10,Ie=16,sh=new DOMMatrix,Je=new Float32Array(2),Qs=new Float32Array([1/0,1/0,-1/0,-1/0]);function QS(h,t){if(h._removeMirroring)throw new Error("Context is already forwarding operations.");h.__originalSave=h.save,h.__originalRestore=h.restore,h.__originalRotate=h.rotate,h.__originalScale=h.scale,h.__originalTranslate=h.translate,h.__originalTransform=h.transform,h.__originalSetTransform=h.setTransform,h.__originalResetTransform=h.resetTransform,h.__originalClip=h.clip,h.__originalMoveTo=h.moveTo,h.__originalLineTo=h.lineTo,h.__originalBezierCurveTo=h.bezierCurveTo,h.__originalRect=h.rect,h.__originalClosePath=h.closePath,h.__originalBeginPath=h.beginPath,h._removeMirroring=()=>{h.save=h.__originalSave,h.restore=h.__originalRestore,h.rotate=h.__originalRotate,h.scale=h.__originalScale,h.translate=h.__originalTranslate,h.transform=h.__originalTransform,h.setTransform=h.__originalSetTransform,h.resetTransform=h.__originalResetTransform,h.clip=h.__originalClip,h.moveTo=h.__originalMoveTo,h.lineTo=h.__originalLineTo,h.bezierCurveTo=h.__originalBezierCurveTo,h.rect=h.__originalRect,h.closePath=h.__originalClosePath,h.beginPath=h.__originalBeginPath,delete h._removeMirroring},h.save=function(){t.save(),this.__originalSave()},h.restore=function(){t.restore(),this.__originalRestore()},h.translate=function(i,s){t.translate(i,s),this.__originalTranslate(i,s)},h.scale=function(i,s){t.scale(i,s),this.__originalScale(i,s)},h.transform=function(i,s,r,o,l,u){t.transform(i,s,r,o,l,u),this.__originalTransform(i,s,r,o,l,u)},h.setTransform=function(i,s,r,o,l,u){t.setTransform(i,s,r,o,l,u),this.__originalSetTransform(i,s,r,o,l,u)},h.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},h.rotate=function(i){t.rotate(i),this.__originalRotate(i)},h.clip=function(i){t.clip(i),this.__originalClip(i)},h.moveTo=function(i,s){t.moveTo(i,s),this.__originalMoveTo(i,s)},h.lineTo=function(i,s){t.lineTo(i,s),this.__originalLineTo(i,s)},h.bezierCurveTo=function(i,s,r,o,l,u){t.bezierCurveTo(i,s,r,o,l,u),this.__originalBezierCurveTo(i,s,r,o,l,u)},h.rect=function(i,s,r,o){t.rect(i,s,r,o),this.__originalRect(i,s,r,o)},h.closePath=function(){t.closePath(),this.__originalClosePath()},h.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class ZS{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,i,s){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,i,s)):(r=this.canvasFactory.create(i,s),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const i=this.cache[t];this.canvasFactory.destroy(i),delete this.cache[t]}}}function Zo(h,t,i,s,r,o,l,u,d,f){const[g,y,b,A,w,S]=Wt(h);if(y===0&&b===0){const x=l*g+w,C=Math.round(x),O=u*A+S,L=Math.round(O),N=(l+d)*g+w,z=Math.abs(Math.round(N)-C)||1,$=(u+f)*A+S,K=Math.abs(Math.round($)-L)||1;return h.setTransform(Math.sign(g),0,0,Math.sign(A),C,L),h.drawImage(t,i,s,r,o,0,0,z,K),h.setTransform(g,y,b,A,w,S),[z,K]}if(g===0&&A===0){const x=u*b+w,C=Math.round(x),O=l*y+S,L=Math.round(O),N=(u+f)*b+w,z=Math.abs(Math.round(N)-C)||1,$=(l+d)*y+S,K=Math.abs(Math.round($)-L)||1;return h.setTransform(0,Math.sign(y),Math.sign(b),0,C,L),h.drawImage(t,i,s,r,o,0,0,K,z),h.setTransform(g,y,b,A,w,S),[K,z]}h.drawImage(t,i,s,r,o,l,u,d,f);const T=Math.hypot(g,y),E=Math.hypot(b,A);return[T*d,E*f]}class xm{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=ch;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=fe.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,i,s){s?.(this),this.clipBox=new Float32Array([0,0,t,i]),this.minMax=Qs.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Ce.FILL,i=null){const s=this.minMax.slice();if(t===Ce.STROKE){i||zt("Stroke bounding box must include transform."),et.singularValueDecompose2dScale(i,Je);const r=Je[0]*this.lineWidth/2,o=Je[1]*this.lineWidth/2;s[0]-=r,s[1]-=o,s[2]+=r,s[3]+=o}return s}updateClipFromPath(){const t=et.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Qs,0)}getClippedPathBoundingBox(t=Ce.FILL,i=null){return et.intersect(this.clipBox,this.getPathBoundingBox(t,i))}}function Mm(h,t){if(t instanceof ImageData){h.putImageData(t,0,0);return}const i=t.height,s=t.width,r=i%Ie,o=(i-r)/Ie,l=r===0?o:o+1,u=h.createImageData(s,Ie);let d=0,f;const g=t.data,y=u.data;let b,A,w,S;if(t.kind===sl.GRAYSCALE_1BPP){const T=g.byteLength,E=new Uint32Array(y.buffer,0,y.byteLength>>2),x=E.length,C=s+7>>3,O=4294967295,L=pe.isLittleEndian?4278190080:255;for(b=0;b<l;b++){for(w=b<o?Ie:r,f=0,A=0;A<w;A++){const N=T-d;let z=0;const $=N>C?s:N*8-7,K=$&-8;let J=0,Q=0;for(;z<K;z+=8)Q=g[d++],E[f++]=Q&128?O:L,E[f++]=Q&64?O:L,E[f++]=Q&32?O:L,E[f++]=Q&16?O:L,E[f++]=Q&8?O:L,E[f++]=Q&4?O:L,E[f++]=Q&2?O:L,E[f++]=Q&1?O:L;for(;z<$;z++)J===0&&(Q=g[d++],J=128),E[f++]=Q&J?O:L,J>>=1}for(;f<x;)E[f++]=0;h.putImageData(u,0,b*Ie)}}else if(t.kind===sl.RGBA_32BPP){for(A=0,S=s*Ie*4,b=0;b<o;b++)y.set(g.subarray(d,d+S)),d+=S,h.putImageData(u,0,A),A+=Ie;b<l&&(S=s*r*4,y.set(g.subarray(d,d+S)),h.putImageData(u,0,A))}else if(t.kind===sl.RGB_24BPP)for(w=Ie,S=s*w,b=0;b<l;b++){for(b>=o&&(w=r,S=s*w),f=0,A=S;A--;)y[f++]=g[d++],y[f++]=g[d++],y[f++]=g[d++],y[f++]=255;h.putImageData(u,0,b*Ie)}else throw new Error(`bad image kind: ${t.kind}`)}function Dm(h,t){if(t.bitmap){h.drawImage(t.bitmap,0,0);return}const i=t.height,s=t.width,r=i%Ie,o=(i-r)/Ie,l=r===0?o:o+1,u=h.createImageData(s,Ie);let d=0;const f=t.data,g=u.data;for(let y=0;y<l;y++){const b=y<o?Ie:r;({srcPos:d}=KS({src:f,srcPos:d,dest:g,width:s,height:b,nonBlackColor:0})),h.putImageData(u,0,y*Ie)}}function sr(h,t){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of i)h[s]!==void 0&&(t[s]=h[s]);h.setLineDash!==void 0&&(t.setLineDash(h.getLineDash()),t.lineDashOffset=h.lineDashOffset)}function Jo(h){h.strokeStyle=h.fillStyle="#000000",h.fillRule="nonzero",h.globalAlpha=1,h.lineWidth=1,h.lineCap="butt",h.lineJoin="miter",h.miterLimit=10,h.globalCompositeOperation="source-over",h.font="10px sans-serif",h.setLineDash!==void 0&&(h.setLineDash([]),h.lineDashOffset=0);const{filter:t}=h;t!=="none"&&t!==""&&(h.filter="none")}function Rm(h,t){if(t)return!0;et.singularValueDecompose2dScale(h,Je);const i=Math.fround(Ri.pixelRatio*sa.PDF_TO_CSS_UNITS);return Je[0]<=i&&Je[1]<=i}const JS=["butt","round","square"],t1=["miter","round","bevel"],e1={},Lm={};class ea{constructor(t,i,s,r,o,{optionalContentConfig:l,markedContentStack:u=null},d,f,g){this.ctx=t,this.current=new xm(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=i,this.objs=s,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=l,this.cachedCanvases=new ZS(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=g??null}getObject(t,i,s=null){return typeof i=="string"?(this.dependencyTracker?.recordNamedDependency(t,i),i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i)):s}beginDrawing({transform:t,viewport:i,transparency:s=!1,background:r=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=u,s){const d=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Wt(this.compositeCtx))}this.ctx.save(),Jo(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=Wt(this.ctx)}executeOperatorList(t,i,s,r,o){const l=t.argsArray,u=t.fnArray;let d=i||0;const f=l.length;if(f===d)return d;const g=f-d>Cm&&typeof s=="function",y=g?Date.now()+WS:0;let b=0;const A=this.commonObjs,w=this.objs;let S,T;for(;;){if(r!==void 0&&d===r.nextBreakPoint)return r.breakIt(d,s),d;if(!o||o(d))if(S=u[d],T=l[d]??null,S!==mr.dependency)T===null?this[S](d):this[S](d,...T);else for(const E of T){this.dependencyTracker?.recordNamedData(E,d);const x=E.startsWith("g_")?A:w;if(!x.has(E))return x.get(E,s),d}if(d++,d===f)return d;if(g&&++b>Cm){if(Date.now()>y)return s(),d;b=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const i of t.values())typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&(i.width=i.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const i=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=i}}}_scaleImage(t,i){const s=t.width??t.displayWidth,r=t.height??t.displayHeight;let o=Math.max(Math.hypot(i[0],i[1]),1),l=Math.max(Math.hypot(i[2],i[3]),1),u=s,d=r,f="prescale1",g,y;for(;o>2&&u>1||l>2&&d>1;){let b=u,A=d;o>2&&u>1&&(b=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/b),l>2&&d>1&&(A=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/A),g=this.cachedCanvases.getCanvas(f,b,A),y=g.context,y.clearRect(0,0,b,A),y.drawImage(t,0,0,u,d,0,0,b,A),t=g.canvas,u=b,d=A,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t,i){const s=this.ctx,{width:r,height:o}=i,l=this.current.fillColor,u=this.current.patternFill,d=Wt(s);let f,g,y,b;if((i.bitmap||i.data)&&i.count>1){const J=i.bitmap||i.data.buffer;g=JSON.stringify(u?d:[d.slice(0,4),l]),f=this._cachedBitmapsMap.get(J),f||(f=new Map,this._cachedBitmapsMap.set(J,f));const Q=f.get(g);if(Q&&!u){const ht=Math.round(Math.min(d[0],d[2])+d[4]),xt=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,hi.transformAndFill),{canvas:Q,offsetX:ht,offsetY:xt}}y=Q}y||(b=this.cachedCanvases.getCanvas("maskCanvas",r,o),Dm(b.context,i));let A=et.transform(d,[1/r,0,0,-1/o,0,0]);A=et.transform(A,[1,0,0,1,0,-o]);const w=Qs.slice();et.axialAlignedBoundingBox([0,0,r,o],A,w);const[S,T,E,x]=w,C=Math.round(E-S)||1,O=Math.round(x-T)||1,L=this.cachedCanvases.getCanvas("fillCanvas",C,O),N=L.context,z=S,$=T;N.translate(-z,-$),N.transform(...A),y||(y=this._scaleImage(b.canvas,_i(N)),y=y.img,f&&u&&f.set(g,y)),N.imageSmoothingEnabled=Rm(Wt(N),i.interpolate),Zo(N,y,0,0,y.width,y.height,0,0,r,o),N.globalCompositeOperation="source-in";const K=et.transform(_i(N),[1,0,0,1,-z,-$]);return N.fillStyle=u?l.getPattern(s,this,K,Ce.FILL,t):l,N.fillRect(0,0,r,o),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(g,L.canvas)),this.dependencyTracker?.recordDependencies(t,hi.transformAndFill),{canvas:L.canvas,offsetX:Math.round(z),offsetY:Math.round($)}}setLineWidth(t,i){this.dependencyTracker?.recordSimpleData("lineWidth",t),i!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=i,this.ctx.lineWidth=i}setLineCap(t,i){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=JS[i]}setLineJoin(t,i){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=t1[i]}setMiterLimit(t,i){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=i}setDash(t,i,s){this.dependencyTracker?.recordSimpleData("dash",t);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(i),r.lineDashOffset=s)}setRenderingIntent(t,i){}setFlatness(t,i){}setGState(t,i){for(const[s,r]of i)switch(s){case"LW":this.setLineWidth(t,r);break;case"LC":this.setLineCap(t,r);break;case"LJ":this.setLineJoin(t,r);break;case"ML":this.setMiterLimit(t,r);break;case"D":this.setDash(t,r[0],r[1]);break;case"RI":this.setRenderingIntent(t,r);break;case"FL":this.setFlatness(t,r);break;case"Font":this.setFont(t,r[0],r[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=r;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=r;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const i=this.ctx.canvas.width,s=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(r,i,s);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),sr(this.suspendedCtx,l),QS(l,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),sr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const i=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,i,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,i,s,r){const o=r[0],l=r[1],u=r[2]-o,d=r[3]-l;u===0||d===0||(this.genericComposeSMask(i.context,s,u,d,i.subtype,i.backdrop,i.transferMap,o,l,i.offsetX,i.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,i,s,r,o,l,u,d,f,g,y){let b=t.canvas,A=d-g,w=f-y;if(l)if(A<0||w<0||A+s>b.width||w+r>b.height){const T=this.cachedCanvases.getCanvas("maskExtension",s,r),E=T.context;E.drawImage(b,-A,-w),E.globalCompositeOperation="destination-atop",E.fillStyle=l,E.fillRect(0,0,s,r),E.globalCompositeOperation="source-over",b=T.canvas,A=w=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(A,w,s,r),t.clip(T),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(A,w,s,r),t.restore()}i.save(),i.globalAlpha=1,i.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?i.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(i.filter=this.filterFactory.addLuminosityFilter(u));const S=new Path2D;S.rect(d,f,s,r),i.clip(S),i.globalCompositeOperation="destination-in",i.drawImage(b,A,w,s,r,d,f,s,r),i.restore()}save(t){this.inSMaskMode&&sr(this.ctx,this.suspendedCtx),this.ctx.save();const i=this.current;this.stateStack.push(i),this.current=i.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&sr(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,i,s,r,o,l,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(i,s,r,o,l,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,i,s,r){let[o]=s;if(!r){o||=s[0]=new Path2D,this[i](t,o);return}if(this.dependencyTracker!==null){const l=i===mr.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,r[0]-l,r[2]+l,r[1]-l,r[3]+l).recordDependencies(t,["transform"])}o instanceof Path2D||(o=s[0]=cy(o)),et.axialAlignedBoundingBox(r,Wt(this.ctx),this.current.minMax),this[i](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,i,s=!0){const r=this.ctx,o=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const l=o.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=o.getPattern(r,this,_i(r),Ce.STROKE,t),l){const u=new Path2D;u.addPath(i,r.getTransform().invertSelf().multiplySelf(l)),i=u}this.rescaleAndStroke(i,!1),r.restore()}else this.rescaleAndStroke(i,!0);this.dependencyTracker?.recordDependencies(t,hi.stroke),s&&this.consumePath(t,i,this.current.getClippedPathBoundingBox(Ce.STROKE,Wt(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,i){this.stroke(t,i)}fill(t,i,s=!0){const r=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let u=!1;if(l){const f=o.isModifyingCurrentTransform()?r.getTransform():null;if(this.dependencyTracker?.save(t),r.save(),r.fillStyle=o.getPattern(r,this,_i(r),Ce.FILL,t),f){const g=new Path2D;g.addPath(i,r.getTransform().invertSelf().multiplySelf(f)),i=g}u=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(r.fill(i,"evenodd"),this.pendingEOFill=!1):r.fill(i)),this.dependencyTracker?.recordDependencies(t,hi.fill),u&&(r.restore(),this.dependencyTracker?.restore(t)),s&&this.consumePath(t,i,d)}eoFill(t,i){this.pendingEOFill=!0,this.fill(t,i)}fillStroke(t,i){this.fill(t,i,!1),this.stroke(t,i,!1),this.consumePath(t,i)}eoFillStroke(t,i){this.pendingEOFill=!0,this.fillStroke(t,i)}closeFillStroke(t,i){this.fillStroke(t,i)}closeEOFillStroke(t,i){this.pendingEOFill=!0,this.fillStroke(t,i)}endPath(t,i){this.consumePath(t,i)}rawFillPath(t,i){this.ctx.fill(i),this.dependencyTracker?.recordDependencies(t,hi.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=e1}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=Lm}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const i=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;i!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",t),r.recordCloseMarker(t)}if(i!==void 0){const r=new Path2D,o=s.getTransform().invertSelf();for(const{transform:l,x:u,y:d,fontSize:f,path:g}of i)g&&r.addPath(g,new DOMMatrix(l).preMultiplySelf(o).translate(u,d).scale(f,-f));s.clip(r)}delete this.pendingTextPaths}setCharSpacing(t,i){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=i}setWordSpacing(t,i){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=i}setHScale(t,i){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=i/100}setLeading(t,i){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-i}setFont(t,i,s){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",i,t);const r=this.commonObjs.get(i),o=this.current;if(!r)throw new Error(`Can't find font for ${i}`);if(o.fontMatrix=r.fontMatrix||ch,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&ft("Invalid font matrix for font "+i),s<0?(s=-s,o.fontDirection=-1):o.fontDirection=1,this.current.font=r,this.current.fontSize=s,r.isType3Font)return;const l=r.loadedName||"sans-serif",u=r.systemFontInfo?.css||`"${l}", ${r.fallbackName}`;let d="normal";r.black?d="900":r.bold&&(d="bold");const f=r.italic?"italic":"normal";let g=s;s<Tm?g=Tm:s>_m&&(g=_m),this.current.fontSizeScale=s/g,this.ctx.font=`${f} ${d} ${g}px ${u}`}setTextRenderingMode(t,i){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=i}setTextRise(t,i){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=i}moveText(t,i,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=i,this.current.y=this.current.lineY+=s}setLeadingMoveText(t,i,s){this.setLeading(t,-s),this.moveText(t,i,s)}setTextMatrix(t,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:s}=this;s.textMatrix=i,s.textMatrixScale=Math.hypot(i[0],i[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#n(t,i,s){const r=new Path2D;return r.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(i)),r}paintChar(t,i,s,r,o,l){const u=this.ctx,d=this.current,f=d.font,g=d.textRenderingMode,y=d.fontSize/d.fontSizeScale,b=g&fe.FILL_STROKE_MASK,A=!!(g&fe.ADD_TO_PATH_FLAG),w=d.patternFill&&!f.missingFile,S=d.patternStroke&&!f.missingFile;let T;if((f.disableFontFace||A||w||S)&&!f.missingFile&&(T=f.getPathGenerator(this.commonObjs,i)),T&&(f.disableFontFace||w||S)){u.save(),u.translate(s,r),u.scale(y,-y),this.dependencyTracker?.recordCharacterBBox(t,u,f);let E;if(b===fe.FILL||b===fe.FILL_STROKE)if(o){E=u.getTransform(),u.setTransform(...o);const x=this.#n(T,E,o);u.fill(x)}else u.fill(T);if(b===fe.STROKE||b===fe.FILL_STROKE)if(l){E||=u.getTransform(),u.setTransform(...l);const{a:x,b:C,c:O,d:L}=E,N=et.inverseTransform(l),z=et.transform([x,C,O,L,0,0],N);et.singularValueDecompose2dScale(z,Je),u.lineWidth*=Math.max(Je[0],Je[1])/y,u.stroke(this.#n(T,E,l))}else u.lineWidth/=y,u.stroke(T);u.restore()}else(b===fe.FILL||b===fe.FILL_STROKE)&&(u.fillText(i,s,r),this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,r,()=>u.measureText(i))),(b===fe.STROKE||b===fe.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,r,()=>u.measureText(i)).recordDependencies(t,hi.stroke),u.strokeText(i,s,r));A&&((this.pendingTextPaths||=[]).push({transform:Wt(u),x:s,y:r,fontSize:y,path:T}),this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,r))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const i=t.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<i.length;r+=4)if(i[r]>0&&i[r]<255){s=!0;break}return pt(this,"isFontSubpixelAAEnabled",s)}showText(t,i){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,hi.showText).resetBBox(t),this.current.textRenderingMode&fe.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,r=s.font;if(r.isType3Font){this.showType3Text(t,i),this.dependencyTracker?.recordShowTextOperation(t);return}const o=s.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const l=this.ctx,u=s.fontSizeScale,d=s.charSpacing,f=s.wordSpacing,g=s.fontDirection,y=s.textHScale*g,b=i.length,A=r.vertical,w=A?1:-1,S=r.defaultVMetrics,T=o*s.fontMatrix[0],E=s.textRenderingMode===fe.FILL&&!r.disableFontFace&&!s.patternFill;l.save(),s.textMatrix&&l.transform(...s.textMatrix),l.translate(s.x,s.y+s.textRise),g>0?l.scale(y,-1):l.scale(y,1);let x,C;const O=s.textRenderingMode&fe.FILL_STROKE_MASK,L=O===fe.FILL||O===fe.FILL_STROKE,N=O===fe.STROKE||O===fe.FILL_STROKE;if(L&&s.patternFill){l.save();const Q=s.fillColor.getPattern(l,this,_i(l),Ce.FILL,t);x=Wt(l),l.restore(),l.fillStyle=Q}if(N&&s.patternStroke){l.save();const Q=s.strokeColor.getPattern(l,this,_i(l),Ce.STROKE,t);C=Wt(l),l.restore(),l.strokeStyle=Q}let z=s.lineWidth;const $=s.textMatrixScale;if($===0||z===0?N&&(z=this.getSinglePixelWidth()):z/=$,u!==1&&(l.scale(u,u),z/=u),l.lineWidth=z,r.isInvalidPDFjsFont){const Q=[];let ht=0;for(const dt of i)Q.push(dt.unicode),ht+=dt.width;const xt=Q.join("");if(l.fillText(xt,0,0),this.dependencyTracker!==null){const dt=l.measureText(xt);this.dependencyTracker.recordBBox(t,this.ctx,-dt.actualBoundingBoxLeft,dt.actualBoundingBoxRight,-dt.actualBoundingBoxAscent,dt.actualBoundingBoxDescent).recordShowTextOperation(t)}s.x+=ht*T*y,l.restore(),this.compose();return}let K=0,J;for(J=0;J<b;++J){const Q=i[J];if(typeof Q=="number"){K+=w*Q*o/1e3;continue}let ht=!1;const xt=(Q.isSpace?f:0)+d,dt=Q.fontChar,Mt=Q.accent;let k,V,Z=Q.width;if(A){const D=Q.vmetric||S,H=-(Q.vmetric?D[1]:Z*.5)*T,W=D[2]*T;Z=D?-D[0]:Z,k=H/u,V=(K+W)/u}else k=K/u,V=0;let yt;if(r.remeasure&&Z>0){yt=l.measureText(dt);const D=yt.width*1e3/o*u;if(Z<D&&this.isFontSubpixelAAEnabled){const H=Z/D;ht=!0,l.save(),l.scale(H,1),k/=H}else Z!==D&&(k+=(Z-D)/2e3*o/u)}if(this.contentVisible&&(Q.isInFont||r.missingFile)){if(E&&!Mt)l.fillText(dt,k,V),this.dependencyTracker?.recordCharacterBBox(t,l,yt?{bbox:null}:r,o/u,k,V,()=>yt??l.measureText(dt));else if(this.paintChar(t,dt,k,V,x,C),Mt){const D=k+o*Mt.offset.x/u,H=V-o*Mt.offset.y/u;this.paintChar(t,Mt.fontChar,D,H,x,C)}}const At=A?Z*T-xt*g:Z*T+xt*g;K+=At,ht&&l.restore()}A?s.y-=K:s.x+=K*y,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,i){const s=this.ctx,r=this.current,o=r.font,l=r.fontSize,u=r.fontDirection,d=o.vertical?1:-1,f=r.charSpacing,g=r.wordSpacing,y=r.textHScale*u,b=r.fontMatrix||ch,A=i.length,w=r.textRenderingMode===fe.INVISIBLE;let S,T,E,x;if(w||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),r.textMatrix&&s.transform(...r.textMatrix),s.translate(r.x,r.y+r.textRise),s.scale(y,u);const C=this.dependencyTracker;for(this.dependencyTracker=C?new cl(C,t):null,S=0;S<A;++S){if(T=i[S],typeof T=="number"){x=d*T*l/1e3,this.ctx.translate(x,0),r.x+=x*y;continue}const O=(T.isSpace?g:0)+f,L=o.charProcOperatorList[T.operatorListId];L?this.contentVisible&&(this.save(),s.scale(l,l),s.transform(...b),this.executeOperatorList(L),this.restore()):ft(`Type3 character "${T.operatorListId}" is not available.`);const N=[T.width,0];et.applyTransform(N,b),E=N[0]*l+O,s.translate(E,0),r.x+=E*y}s.restore(),C&&(this.dependencyTracker=C)}setCharWidth(t,i,s){}setCharWidthAndBounds(t,i,s,r,o,l,u){const d=new Path2D;d.rect(r,o,l-r,u-o),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,r,l,o,u).recordClipBox(t,this.ctx,r,l,o,u),this.endPath(t)}getColorN_Pattern(t,i){let s;if(i[0]==="TilingPattern"){const r=this.baseTransform||Wt(this.ctx),o={createCanvasGraphics:(l,u)=>new ea(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new cl(this.dependencyTracker,u,!0):null)};s=new zh(i,this.ctx,o,r)}else s=this._getPattern(t,i[1],i[2]);return s}setStrokeColorN(t,...i){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,i),this.current.patternStroke=!0}setFillColorN(t,...i){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,i),this.current.patternFill=!0}setStrokeRGBColor(t,i){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=i,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,i){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=i,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,i,s=null){let r;return this.cachedPatterns.has(i)?r=this.cachedPatterns.get(i):(r=$S(this.getObject(t,i)),this.cachedPatterns.set(i,r)),s&&(r.matrix=s),r}shadingFill(t,i){if(!this.contentVisible)return;const s=this.ctx;this.save(t);const r=this._getPattern(t,i);s.fillStyle=r.getPattern(s,this,_i(s),Ce.SHADING,t);const o=_i(s);if(o){const{width:l,height:u}=s.canvas,d=Qs.slice();et.axialAlignedBoundingBox([0,0,l,u],o,d);const[f,g,y,b]=d;this.ctx.fillRect(f,g,y-f,b-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,hi.transform).recordDependencies(t,hi.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){zt("Should not call beginInlineImage")}beginImageData(){zt("Should not call beginImageData")}paintFormXObjectBegin(t,i,s){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),i&&this.transform(t,...i),this.baseTransform=Wt(this.ctx),s)){et.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[r,o,l,u]=s,d=new Path2D;d.rect(r,o,l-r,u-o),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,r,l,o,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,i){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;i.isolated||ml("TODO: Support non-isolated groups."),i.knockout&&ft("Knockout groups not supported.");const r=Wt(s);if(i.matrix&&s.transform(...i.matrix),!i.bbox)throw new Error("Bounding box is required.");let o=Qs.slice();et.axialAlignedBoundingBox(i.bbox,Wt(s),o);const l=[0,0,s.canvas.width,s.canvas.height];o=et.intersect(o,l)||[0,0,0,0];const u=Math.floor(o[0]),d=Math.floor(o[1]),f=Math.max(Math.ceil(o[2])-u,1),g=Math.max(Math.ceil(o[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,g]);let y="groupAt"+this.groupLevel;i.smask&&(y+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(y,f,g),A=b.context;A.translate(-u,-d),A.transform(...r);let w=new Path2D;const[S,T,E,x]=i.bbox;if(w.rect(S,T,E-S,x-T),i.matrix){const C=new Path2D;C.addPath(w,new DOMMatrix(i.matrix)),w=C}A.clip(w),i.smask&&this.smaskStack.push({canvas:b.canvas,context:A,offsetX:u,offsetY:d,subtype:i.smask.subtype,backdrop:i.smask.backdrop,transferMap:i.smask.transferMap||null,startTransformInverse:null}),(!i.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(u,d),s.save()),sr(s,A),this.ctx=A,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(t,i){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),i.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Wt(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const l=Qs.slice();et.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o,l),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,i,s,r,o,l){if(this.#t(),Jo(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const u=s[2]-s[0],d=s[3]-s[1];if(l&&this.annotationCanvasMap){r=r.slice(),r[4]-=s[0],r[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=u,s[3]=d,et.singularValueDecompose2dScale(Wt(this.ctx),Je);const{viewportScale:f}=this,g=Math.ceil(u*this.outputScaleX*f),y=Math.ceil(d*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(g,y);const{canvas:b,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(i,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(Je[0],0,0,-Je[1],0,d*Je[1]),Jo(this.ctx)}else{Jo(this.ctx),this.endPath(t);const f=new Path2D;f.rect(s[0],s[1],u,d),this.ctx.clip(f)}}this.current=new xm(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...r),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,i){if(!this.contentVisible)return;const s=i.count;i=this.getObject(t,i.data,i),i.count=s;const r=this.ctx,o=this._createMaskCanvas(t,i),l=o.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(l,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+l.width,o.offsetY,o.offsetY+l.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,i,s,r=0,o=0,l,u){if(!this.contentVisible)return;i=this.getObject(t,i.data,i);const d=this.ctx;d.save();const f=Wt(d);d.transform(s,r,o,l,0,0);const g=this._createMaskCanvas(t,i);d.setTransform(1,0,0,1,g.offsetX-f[4],g.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let y=0,b=u.length;y<b;y+=2){const A=et.transform(f,[s,r,o,l,u[y],u[y+1]]);d.drawImage(g.canvas,A[4],A[5]),this.dependencyTracker?.recordBBox(t,this.ctx,A[4],A[4]+g.canvas.width,A[5],A[5]+g.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,i){if(!this.contentVisible)return;const s=this.ctx,r=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,hi.transformAndFill);for(const l of i){const{data:u,width:d,height:f,transform:g}=l,y=this.cachedCanvases.getCanvas("maskCanvas",d,f),b=y.context;b.save();const A=this.getObject(t,u,l);Dm(b,A),b.globalCompositeOperation="source-in",b.fillStyle=o?r.getPattern(b,this,_i(s),Ce.FILL,t):r,b.fillRect(0,0,d,f),b.restore(),s.save(),s.transform(...g),s.scale(1,-1),Zo(s,y.canvas,0,0,d,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,s,0,d,0,f),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,i){if(!this.contentVisible)return;const s=this.getObject(t,i);if(!s){ft("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,s)}paintImageXObjectRepeat(t,i,s,r,o){if(!this.contentVisible)return;const l=this.getObject(t,i);if(!l){ft("Dependent image isn't ready yet");return}const u=l.width,d=l.height,f=[];for(let g=0,y=o.length;g<y;g+=2)f.push({transform:[s,0,0,r,o[g],o[g+1]],x:0,y:0,w:u,h:d});this.paintInlineImageXObjectGroup(t,l,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:i,width:s,height:r}=t,o=this.cachedCanvases.getCanvas("inlineImage",s,r),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(i,0,0),l.filter="none",o.canvas}paintInlineImageXObject(t,i){if(!this.contentVisible)return;const s=i.width,r=i.height,o=this.ctx;this.save(t);const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/s,-1/r);let u;if(i.bitmap)u=this.applyTransferMapsToBitmap(i);else if(typeof HTMLElement=="function"&&i instanceof HTMLElement||!i.data)u=i;else{const g=this.cachedCanvases.getCanvas("inlineImage",s,r).context;Mm(g,i),u=this.applyTransferMapsToCanvas(g)}const d=this._scaleImage(u,_i(o));o.imageSmoothingEnabled=Rm(Wt(o),i.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,s,-r,0).recordDependencies(t,hi.imageXObject).recordOperation(t),Zo(o,d.img,0,0,d.paintWidth,d.paintHeight,0,-r,s,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,i,s){if(!this.contentVisible)return;const r=this.ctx;let o;if(i.bitmap)o=i.bitmap;else{const l=i.width,u=i.height,f=this.cachedCanvases.getCanvas("inlineImage",l,u).context;Mm(f,i),o=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const l of s)r.save(),r.transform(...l.transform),r.scale(1,-1),Zo(r,o,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,r,0,1,-1,0),r.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,hi.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,i){}markPointProps(t,i,s){}beginMarkedContent(t,i){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,i,s){this.dependencyTracker?.beginMarkedContent(t),i==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,i,s){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const o=this.ctx;this.pendingClip?(r||(this.pendingClip===Lm?o.clip(i,"evenodd"):o.clip(i)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Wt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const i=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/i}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:i,b:s,c:r,d:o}=this.ctx.getTransform();let l,u;if(s===0&&r===0){const d=Math.abs(i),f=Math.abs(o);if(d===f)if(t===0)l=u=1/d;else{const g=d*t;l=u=g<1?1/g:1}else if(t===0)l=1/d,u=1/f;else{const g=d*t,y=f*t;l=g<1?1/g:1,u=y<1?1/y:1}}else{const d=Math.abs(i*o-s*r),f=Math.hypot(i,s),g=Math.hypot(r,o);if(t===0)l=g/d,u=f/d;else{const y=t*d;l=g>y?g/y:1,u=f>y?f/y:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,i){const{ctx:s,current:{lineWidth:r}}=this,[o,l]=this.getScaleForStroking();if(o===l){s.lineWidth=(r||1)*o,s.stroke(t);return}const u=s.getLineDash();i&&s.save(),s.scale(o,l),sh.a=1/o,sh.d=1/l;const d=new Path2D;if(d.addPath(t,sh),u.length>0){const f=Math.max(o,l);s.setLineDash(u.map(g=>g/f)),s.lineDashOffset/=f}s.lineWidth=r||1,s.stroke(d),i&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const h in mr)ea.prototype[h]!==void 0&&(ea.prototype[mr[h]]=ea.prototype[h]);class ia{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class i1{#t;#e;constructor({parsedData:t,rawData:i}){this.#t=t,this.#e=i}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const $s=Symbol("INTERNAL");class n1{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:i,intent:s,usage:r,rbGroups:o}){this.#t=!!(t&Qe.DISPLAY),this.#e=!!(t&Qe.PRINT),this.name=i,this.intent=s,this.usage=r,this.rbGroups=o}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:i}=this.usage;return this.#t?i?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,i,s=!1){t!==$s&&zt("Internal method `_setVisible` called."),this.#n=s,this.#i=i}}class s1{#t=null;#e=new Map;#n=null;#i=null;constructor(t,i=Qe.DISPLAY){if(this.renderingIntent=i,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const s of t.groups)this.#e.set(s.id,new n1(i,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible($s,!1);for(const s of t.on)this.#e.get(s)._setVisible($s,!0);for(const s of t.off)this.#e.get(s)._setVisible($s,!1);this.#n=this.getHash()}}#a(t){const i=t.length;if(i<2)return!0;const s=t[0];for(let r=1;r<i;r++){const o=t[r];let l;if(Array.isArray(o))l=this.#a(o);else if(this.#e.has(o))l=this.#e.get(o).visible;else return ft(`Optional content group not found: ${o}`),!0;switch(s){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return ml("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(ft(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const i of t.ids){if(!this.#e.has(i))return ft(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const i of t.ids){if(!this.#e.has(i))return ft(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const i of t.ids){if(!this.#e.has(i))return ft(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const i of t.ids){if(!this.#e.has(i))return ft(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!1}return!0}return ft(`Unknown optional content policy ${t.policy}.`),!0}return ft(`Unknown group type ${t.type}.`),!0}setVisibility(t,i=!0,s=!0){const r=this.#e.get(t);if(!r){ft(`Optional content group not found: ${t}`);return}if(s&&i&&r.rbGroups.length)for(const o of r.rbGroups)for(const l of o)l!==t&&this.#e.get(l)?._setVisible($s,!1,!0);r._setVisible($s,!!i,!0),this.#t=null}setOCGState({state:t,preserveRB:i}){let s;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const o=this.#e.get(r);if(o)switch(s){case"ON":this.setVisibility(r,!0,i);break;case"OFF":this.setVisibility(r,!1,i);break;case"Toggle":this.setVisibility(r,!o.visible,i);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new hy;for(const[i,s]of this.#e)t.update(`${i}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class Al{#t=null;#e=null;_fullReader=null;_rangeReaders=new Set;_source=null;constructor(t,i,s){this._source=t,this.#t=i,this.#e=s}get _progressiveDataLength(){return this._fullReader?._loaded??0}getFullReader(){return Bt(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new this.#t(this)}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new this.#e(this,t,i);return this._rangeReaders.add(s),s}cancelAllRequests(t){this._fullReader?.cancel(t);for(const i of new Set(this._rangeReaders))i.cancel(t)}}class Sl{onProgress=null;_contentLength=0;_filename=null;_headersCapability=Promise.withResolvers();_isRangeSupported=!1;_isStreamingSupported=!1;_loaded=0;_stream=null;constructor(t){this._stream=t}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){zt("Abstract method `read` called")}cancel(t){zt("Abstract method `cancel` called")}}class wl{_stream=null;constructor(t,i,s){this._stream=t}async read(){zt("Abstract method `read` called")}cancel(t){zt("Abstract method `cancel` called")}}function Om(h){return h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength?h.buffer:new Uint8Array(h).buffer}class a1 extends Al{_progressiveDone=!1;_queuedChunks=[];constructor(t){super(t,r1,o1);const{pdfDataRangeTransport:i}=t,{initialData:s,progressiveDone:r}=i;if(s?.length>0){const o=Om(s);this._queuedChunks.push(o)}this._progressiveDone=r,i.addRangeListener((o,l)=>{this.#t(o,l)}),i.addProgressListener((o,l)=>{l!==void 0&&this._fullReader?.onProgress?.({loaded:o,total:l})}),i.addProgressiveReadListener(o=>{this.#t(void 0,o)}),i.addProgressiveDoneListener(()=>{this._fullReader?.progressiveDone(),this._progressiveDone=!0}),i.transportReady()}#t(t,i){const s=Om(i);if(t===void 0)this._fullReader?this._fullReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.keys().find(o=>o._begin===t);Bt(r,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),r._enqueue(s)}}getFullReader(){const t=super.getFullReader();return this._queuedChunks=null,t}getRangeReader(t,i){const s=super.getRangeReader(t,i);return s&&(s.onDone=()=>this._rangeReaders.delete(s),this._source.pdfDataRangeTransport.requestDataRange(t,i)),s}cancelAllRequests(t){super.cancelAllRequests(t),this._source.pdfDataRangeTransport.abort()}}class r1 extends Sl{_done=!1;_queuedChunks=null;_requests=[];constructor(t){super(t);const{pdfDataRangeTransport:i,disableRange:s,disableStream:r}=t._source,{length:o,contentDispositionFilename:l}=i;this._queuedChunks=t._queuedChunks||[];for(const u of this._queuedChunks)this._loaded+=u.byteLength;this._done=t._progressiveDone,this._contentLength=o,this._isStreamingSupported=!r,this._isRangeSupported=!s,Rh(l)&&(this._filename=l),this._headersCapability.resolve()}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||=!0}}class o1 extends wl{onDone=null;_begin=-1;_done=!1;_queuedChunk=null;_requests=[];constructor(t,i,s){super(t,i,s),this._begin=i}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this.onDone?.()}}async read(){if(this._queuedChunk){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this.onDone?.()}}function l1(h){let t=!0,i=s("filename\\*","i").exec(h);if(i){i=i[1];let g=u(i);return g=unescape(g),g=d(g),g=f(g),o(g)}if(i=l(h),i){const g=f(i);return o(g)}if(i=s("filename","i").exec(h),i){i=i[1];let g=u(i);return g=f(g),o(g)}function s(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(g,{fatal:!0}),A=yl(y);y=b.decode(A),t=!1}catch{}}return y}function o(g){return t&&/[\x80-\xff]/.test(g)&&(g=r("utf-8",g),t&&(g=r("iso-8859-1",g))),g}function l(g){const y=[];let b;const A=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=A.exec(g))!==null;){let[,S,T,E]=b;if(S=parseInt(S,10),S in y){if(S===0)break;continue}y[S]=[T,E]}const w=[];for(let S=0;S<y.length&&S in y;++S){let[T,E]=y[S];E=u(E),T&&(E=unescape(E),S===0&&(E=d(E))),w.push(E)}return w.join("")}function u(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let b=0;b<y.length;++b){const A=y[b].indexOf('"');A!==-1&&(y[b]=y[b].slice(0,A),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function d(g){const y=g.indexOf("'");if(y===-1)return g;const b=g.slice(0,y),w=g.slice(y+1).replace(/^[^']*'/,"");return r(b,w)}function f(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,A,w){if(A==="q"||A==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,T){return String.fromCharCode(parseInt(T,16))}),r(b,w);try{w=atob(w)}catch{}return r(b,w)})}return""}function by(h,t){const i=new Headers;if(!h||!t||typeof t!="object")return i;for(const s in t){const r=t[s];r!==void 0&&i.append(s,r)}return i}function El(h){return URL.parse(h)?.origin??null}function vy({responseHeaders:h,isHttp:t,rangeChunkSize:i,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(h.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*i)||s||!t||h.get("Accept-Ranges")!=="bytes"||(h.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function Ay(h){const t=h.get("Content-Disposition");if(t){let i=l1(t);if(i.includes("%"))try{i=decodeURIComponent(i)}catch{}if(Rh(i))return i}return null}function Tl(h,t){return new ll(`Unexpected server response (${h}) while retrieving PDF "${t}".`,h,h===404||h===0&&t.startsWith("file:"))}function Sy(h,t){if(h!==t)throw new Error(`Expected range response-origin "${h}" to match "${t}".`)}function wy(h,t,i,s){return fetch(h,{method:"GET",headers:t,signal:s.signal,mode:"cors",credentials:i?"include":"same-origin",redirect:"follow"})}function Ey(h,t){if(h!==200&&h!==206)throw Tl(h,t)}function Ty(h){return h instanceof Uint8Array?h.buffer:h instanceof ArrayBuffer?h:(ft(`getArrayBuffer - unexpected data format: ${h}`),new Uint8Array(h).buffer)}class c1 extends Al{_responseOrigin=null;constructor(t){super(t,u1,h1),this.isHttp=/^https?:/i.test(t.url),this.headers=by(this.isHttp,t.httpHeaders)}}class u1 extends Sl{_abortController=new AbortController;_reader=null;constructor(t){super(t);const{disableRange:i,disableStream:s,length:r,rangeChunkSize:o,url:l,withCredentials:u}=t._source;this._contentLength=r,this._isStreamingSupported=!s,this._isRangeSupported=!i;const d=new Headers(t.headers);wy(l,d,u,this._abortController).then(f=>{t._responseOrigin=El(f.url),Ey(f.status,l),this._reader=f.body.getReader();const g=f.headers,{allowRangeRequests:y,suggestedLength:b}=vy({responseHeaders:g,isHttp:t.isHttp,rangeChunkSize:o,disableRange:i});this._isRangeSupported=y,this._contentLength=b||this._contentLength,this._filename=Ay(g),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ln("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){await this._headersCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Ty(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class h1 extends wl{_abortController=new AbortController;_readCapability=Promise.withResolvers();_reader=null;constructor(t,i,s){super(t,i,s);const{url:r,withCredentials:o}=t._source,l=new Headers(t.headers);l.append("Range",`bytes=${i}-${s-1}`),wy(r,l,o,this._abortController).then(u=>{const d=El(u.url);Sy(d,t._responseOrigin),Ey(u.status,r),this._reader=u.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:{value:Ty(t),done:!1}}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const ah=200,Nm=206;function d1(h){return typeof h!="string"?h:yl(h).buffer}class f1 extends Al{#t=new WeakMap;_responseOrigin=null;constructor(t){super(t,p1,g1),this.url=t.url,this.isHttp=/^https?:/i.test(this.url),this.headers=by(this.isHttp,t.httpHeaders)}_request(t){const i=new XMLHttpRequest,s={validateStatus:null,onHeadersReceived:t.onHeadersReceived,onDone:t.onDone,onError:t.onError,onProgress:t.onProgress};this.#t.set(i,s),i.open("GET",this.url),i.withCredentials=this._source.withCredentials;for(const[r,o]of this.headers)i.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(i.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.validateStatus=r=>r===Nm||r===ah):s.validateStatus=r=>r===ah,i.responseType="arraybuffer",Bt(t.onError,"Expected `onError` callback to be provided."),i.onerror=()=>t.onError(i.status),i.onreadystatechange=this.#n.bind(this,i),i.onprogress=this.#e.bind(this,i),i.send(null),i}#e(t,i){this.#t.get(t)?.onProgress?.(i)}#n(t,i){const s=this.#t.get(t);if(!s||(t.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),t.readyState!==4)||!this.#t.has(t))return;if(this.#t.delete(t),t.status===0&&this.isHttp){s.onError(t.status);return}const r=t.status||ah;if(!s.validateStatus(r)){s.onError(t.status);return}const o=d1(t.response);if(r===Nm){const l=t.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(l)?s.onDone(o):(ft('Missing or invalid "Content-Range" header.'),s.onError(0))}else o?s.onDone(o):s.onError(t.status)}_abortRequest(t){this.#t.has(t)&&(this.#t.delete(t),t.abort())}getRangeReader(t,i){const s=super.getRangeReader(t,i);return s&&(s.onClosed=()=>this._rangeReaders.delete(s)),s}}class p1 extends Sl{_cachedChunks=[];_done=!1;_requests=[];_storedError=null;constructor(t){super(t);const{length:i}=t._source;this._contentLength=i,this._fullRequestXhr=t._request({onHeadersReceived:this.#t.bind(this),onDone:this.#e.bind(this),onError:this.#n.bind(this),onProgress:this.#i.bind(this)})}#t(){const t=this._stream,{disableRange:i,rangeChunkSize:s}=t._source,r=this._fullRequestXhr;t._responseOrigin=El(r.responseURL);const o=r.getAllResponseHeaders(),l=new Headers(o?o.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(f=>{const[g,...y]=f.split(": ");return[g,y.join(": ")]}):[]),{allowRangeRequests:u,suggestedLength:d}=vy({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:s,disableRange:i});u&&(this._isRangeSupported=!0),this._contentLength=d||this._contentLength,this._filename=Ay(l),this._isRangeSupported&&t._abortRequest(r),this._headersCapability.resolve()}#e(t){if(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._cachedChunks.push(t),this._done=!0,!(this._cachedChunks.length>0)){for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}}#n(t){this._storedError=Tl(t,this._stream.url),this._headersCapability.reject(this._storedError);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}#i(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}class g1 extends wl{onClosed=null;_done=!1;_queuedChunk=null;_requests=[];_storedError=null;constructor(t,i,s){super(t,i,s),this._requestXhr=t._request({begin:i,end:s,onHeadersReceived:this.#t.bind(this),onDone:this.#e.bind(this),onError:this.#n.bind(this),onProgress:null})}#t(){const t=El(this._requestXhr?.responseURL);try{Sy(t,this._stream._responseOrigin)}catch(i){this._storedError=i,this.#n(0)}}#e(t){this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this.onClosed?.()}#n(t){this._storedError??=Tl(t,this._stream.url);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),this.onClosed?.()}}const m1=/^[a-z][a-z0-9\-+.]+:/i;function y1(h){if(m1.test(h))return new URL(h);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(h))}function _y(h){const{Readable:t}=process.getBuiltinModule("stream");return typeof t.toWeb=="function"?t.toWeb(h):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(h)}function Cy(h){return h instanceof Uint8Array?h.buffer:h instanceof ArrayBuffer?h:(ft(`getArrayBuffer - unexpected data format: ${h}`),new Uint8Array(h).buffer)}class b1 extends Al{constructor(t){super(t,v1,A1),this.url=y1(t.url),Bt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class v1 extends Sl{_reader=null;constructor(t){super(t);const{disableRange:i,disableStream:s,length:r,rangeChunkSize:o}=t._source;this._contentLength=r,this._isStreamingSupported=!s,this._isRangeSupported=!i;const l=t.url,u=process.getBuiltinModule("fs");u.promises.lstat(l).then(d=>{const f=u.createReadStream(l),g=_y(f);this._reader=g.getReader();const{size:y}=d;y<=2*o&&(this._isRangeSupported=!1),this._contentLength=y,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ln("Streaming is disabled.")),this._headersCapability.resolve()}).catch(d=>{d.code==="ENOENT"&&(d=Tl(0,l.href)),this._headersCapability.reject(d)})}async read(){await this._headersCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Cy(t),done:!1})}cancel(t){this._reader?.cancel(t)}}class A1 extends wl{_readCapability=Promise.withResolvers();_reader=null;constructor(t,i,s){super(t,i,s);const r=t.url,o=process.getBuiltinModule("fs");try{const l=o.createReadStream(r,{start:i,end:s-1}),u=_y(l);this._reader=u.getReader(),this._readCapability.resolve()}catch(l){this._readCapability.reject(l)}}async read(){await this._readCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:{value:Cy(t),done:!1}}cancel(t){this._reader?.cancel(t)}}const ar=Symbol("INITIAL_DATA");class xy{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:ar}}get(t,i=null){if(i){const r=this.#e(t);return r.promise.then(()=>i(r.data)),null}const s=this.#t[t];if(!s||s.data===ar)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const i=this.#t[t];return!!i&&i.data!==ar}delete(t){const i=this.#t[t];return!i||i.data===ar?!1:(delete this.#t[t],!0)}resolve(t,i=null){const s=this.#e(t);s.data=i,s.resolve()}clear(){for(const t in this.#t){const{data:i}=this.#t[t];i?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:i}=this.#t[t];i!==ar&&(yield[t,i])}}}const S1=1e5,km=30;class Ze{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#a=null;#r=null;#s=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#m=[];#g=null;#u=[];#p=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#_=new WeakMap;static#E=null;static#S=new Set;constructor({textContentSource:t,container:i,viewport:s}){if(t instanceof ReadableStream)this.#g=t;else if(typeof t=="object")this.#g=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=i,this.#h=s.scale*Ri.pixelRatio,this.#d=s.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:o,pageX:l,pageY:u}=s.rawDims;this.#y=[1,0,0,-1,-l,u+o],this.#o=r,this.#s=o,Ze.#D(),i.style.setProperty("--min-font-size",Ze.#E),ns(i,s),this.#t.promise.finally(()=>{Ze.#S.delete(this),this.#r=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:i}=pe.platform;return pt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&i?"Calibri, ":""}sans-serif`],["monospace",`${t&&i?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:i,done:s})=>{if(s){this.#t.resolve();return}this.#a??=i.lang,Object.assign(this.#f,i.styles),this.#x(i.items),t()},this.#t.reject)};return this.#c=this.#g.getReader(),Ze.#S.add(this),t(),this.#t.promise}update({viewport:t,onBefore:i=null}){const s=t.scale*Ri.pixelRatio,r=t.rotation;if(r!==this.#d&&(i?.(),this.#d=r,ns(this.#l,{rotation:r})),s!==this.#h){i?.(),this.#h=s;const o={div:null,properties:null,ctx:Ze.#R(this.#a)};for(const l of this.#u)o.properties=this.#p.get(l),o.div=l,this.#T(o)}}cancel(){const t=new Ln("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#x(t){if(this.#n)return;this.#r.ctx??=Ze.#R(this.#a);const i=this.#u,s=this.#m;for(const r of t){if(i.length>S1){ft("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id&&this.#e.setAttribute("id",`${r.id}`),r.tag==="Artifact"&&(this.#e.ariaHidden=!0),o.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(r.str),this.#A(r)}}#A(t){const i=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(i);const r=et.transform(this.#y,t.transform);let o=Math.atan2(r[1],r[0]);const l=this.#f[t.fontName];l.vertical&&(o+=Math.PI/2);let u=this.#i&&l.fontSubstitution||l.fontFamily;u=Ze.fontFamilyMap.get(u)||u;const d=Math.hypot(r[2],r[3]),f=d*Ze.#P(u,l,this.#a);let g,y;o===0?(g=r[4],y=r[5]-f):(g=r[4]+f*Math.sin(o),y=r[5]-f*Math.cos(o));const b=i.style;b.left=`${(100*g/this.#o).toFixed(2)}%`,b.top=`${(100*y/this.#s).toFixed(2)}%`,b.setProperty("--font-height",`${d.toFixed(2)}px`),b.fontFamily=u,s.fontSize=d,i.setAttribute("role","presentation"),i.textContent=t.str,i.dir=t.dir,this.#i&&(i.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),o!==0&&(s.angle=o*(180/Math.PI));let A=!1;if(t.str.length>1)A=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const w=Math.abs(t.transform[0]),S=Math.abs(t.transform[3]);w!==S&&Math.max(w,S)/Math.min(w,S)>1.5&&(A=!0)}if(A&&(s.canvasWidth=l.vertical?t.height:t.width),this.#p.set(i,s),this.#r.div=i,this.#r.properties=s,this.#T(this.#r),s.hasText&&this.#e.append(i),s.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this.#e.append(w)}}#T(t){const{div:i,properties:s,ctx:r}=t,{style:o}=i;if(s.canvasWidth!==0&&s.hasText){const{fontFamily:l}=o,{canvasWidth:u,fontSize:d}=s;Ze.#M(r,d*this.#h,l);const{width:f}=r.measureText(i.textContent);f>0&&o.setProperty("--scale-x",u*this.#h/f)}s.angle!==0&&o.setProperty("--rotate",`${s.angle}deg`)}static cleanup(){if(!(this.#S.size>0)){this.#v.clear();for(const{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#R(t=null){let i=this.#b.get(t||="");if(!i){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),i=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,i),this.#_.set(i,{size:0,family:""})}return i}static#M(t,i,s){const r=this.#_.get(t);i===r.size&&s===r.family||(t.font=`${i}px ${s}`,r.size=i,r.family=s)}static#D(){if(this.#E!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#E=t.getBoundingClientRect().height,t.remove()}static#P(t,i,s){const r=this.#v.get(t);if(r)return r;const o=this.#R(s);o.canvas.width=o.canvas.height=km,this.#M(o,km,t);const l=o.measureText(""),u=l.fontBoundingBoxAscent,d=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return u?f=u/(u+d):(pe.platform.isFirefox&&ft("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),i.ascent?f=i.ascent:i.descent&&(f=1+i.descent)),this.#v.set(t,f),f}}const w1=100;function My(h={}){typeof h=="string"||h instanceof URL?h={url:h}:(h instanceof ArrayBuffer||ArrayBuffer.isView(h))&&(h={data:h});const t=new Ph,{docId:i}=t,s=h.url?RS(h.url):null,r=h.data?LS(h.data):null,o=h.httpHeaders||null,l=h.withCredentials===!0,u=h.password??null,d=h.range instanceof Dy?h.range:null,f=Number.isInteger(h.rangeChunkSize)&&h.rangeChunkSize>0?h.rangeChunkSize:2**16;let g=h.worker instanceof br?h.worker:null;const y=h.verbosity,b=typeof h.docBaseUrl=="string"&&!bl(h.docBaseUrl)?h.docBaseUrl:null,A=$o(h.cMapUrl),w=h.cMapPacked!==!1,S=h.CMapReaderFactory||(De?US:bm),T=$o(h.iccUrl),E=$o(h.standardFontDataUrl),x=h.StandardFontDataFactory||(De?IS:vm),C=$o(h.wasmUrl),O=h.WasmFactory||(De?HS:Am),L=h.stopAtErrors!==!0,N=Number.isInteger(h.maxImageSize)&&h.maxImageSize>-1?h.maxImageSize:-1,z=h.isEvalSupported!==!1,$=typeof h.isOffscreenCanvasSupported=="boolean"?h.isOffscreenCanvasSupported:!De,K=typeof h.isImageDecoderSupported=="boolean"?h.isImageDecoderSupported:!De&&(pe.platform.isFirefox||!globalThis.chrome),J=Number.isInteger(h.canvasMaxAreaInBytes)?h.canvasMaxAreaInBytes:-1,Q=typeof h.disableFontFace=="boolean"?h.disableFontFace:De,ht=h.fontExtraProperties===!0,xt=h.enableXfa===!0,dt=h.ownerDocument||globalThis.document,Mt=h.disableRange===!0,k=h.disableStream===!0,V=h.disableAutoFetch===!0,Z=h.pdfBug===!0,yt=h.CanvasFactory||(De?FS:BS),At=h.FilterFactory||(De?PS:zS),D=h.enableHWA===!0,H=h.useWasm!==!1,W=d?d.length:h.length??NaN,tt=typeof h.useSystemFonts=="boolean"?h.useSystemFonts:!De&&!Q,ot=typeof h.useWorkerFetch=="boolean"?h.useWorkerFetch:!!(S===bm&&x===vm&&O===Am&&A&&E&&C&&ur(A,document.baseURI)&&ur(E,document.baseURI)&&ur(C,document.baseURI)),ut=null;nS(y);const lt={canvasFactory:new yt({ownerDocument:dt,enableHWA:D}),filterFactory:new At({docId:i,ownerDocument:dt}),cMapReaderFactory:ot?null:new S({baseUrl:A,isCompressed:w}),standardFontDataFactory:ot?null:new x({baseUrl:E}),wasmFactory:ot?null:new O({baseUrl:C})};g||(g=br.create({verbosity:y,port:ia.workerPort}),t._worker=g);const ie={docId:i,apiVersion:"5.4.624",data:r,password:u,disableAutoFetch:V,rangeChunkSize:f,length:W,docBaseUrl:b,enableXfa:xt,evaluatorOptions:{maxImageSize:N,disableFontFace:Q,ignoreErrors:L,isEvalSupported:z,isOffscreenCanvasSupported:$,isImageDecoderSupported:K,canvasMaxAreaInBytes:J,fontExtraProperties:ht,useSystemFonts:tt,useWasm:H,useWorkerFetch:ot,cMapUrl:A,iccUrl:T,standardFontDataUrl:E,wasmUrl:C}},Gt={ownerDocument:dt,pdfBug:Z,styleElement:ut,enableHWA:D,loadingParams:{disableAutoFetch:V,enableXfa:xt}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Nn=g.messageHandler.sendWithPromise("GetDocRequest",ie,r?[r.buffer]:null);let nn;if(d)nn=new a1({pdfDataRangeTransport:d,disableRange:Mt,disableStream:k});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const kn=ur(s)?c1:De?b1:f1;nn=new kn({url:s,length:W,httpHeaders:o,withCredentials:l,rangeChunkSize:f,disableRange:Mt,disableStream:k})}return Nn.then(kn=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const oa=new hr(i,kn,g.port),Li=new _1(oa,t,nn,Gt,lt);t._transport=Li,oa.send("Ready",null)})}).catch(t._capability.reject),t}class Ph{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Ph.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class Dy{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#a=[];constructor(t,i,s=!1,r=null){this.length=t,this.initialData=i,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(t){this.#a.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,i){for(const s of this.#a)s(t,i)}onDataProgress(t,i){this.#t.promise.then(()=>{for(const s of this.#i)s(t,i)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const i of this.#n)i(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,i){zt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class E1{constructor(t,i){this._pdfInfo=t,this._transport=i}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return pt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,i){return this._transport.getAnnotationsByType(t,i)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(i)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class T1{#t=!1;#e=Nt.instance;constructor(t,i,s,r=!1){this._pageIndex=t,this._pageInfo=i,this._transport=s,this._stats=r?new hm:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new xy,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(t){this._pageIndex=t-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:i=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:o=!1}={}){return new Tr({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:i,offsetX:s,offsetY:r,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,i)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return pt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:i=t.canvas,viewport:s,intent:r="display",annotationMode:o=Dn.ENABLE,transform:l=null,background:u=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:g=null,printAnnotationStorage:y=null,isEditing:b=!1,recordOperations:A=!1,operationsFilter:w=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(r,o,y,b),{renderingIntent:T,cacheKey:E}=S;this.#t=!1,d||=this._transport.getOptionalContentConfig(T);let x=this._intentStates.get(E);x||(x=Object.create(null),this._intentStates.set(E,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const C=!!(T&Qe.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const O=!!(this._pdfBug&&globalThis.StepperManager?.enabled),L=!this.recordedBBoxes&&(A||O),N=K=>{if(x.renderTasks.delete(z),L){const J=z.gfx?.dependencyTracker.take();J&&(z.stepper&&z.stepper.setOperatorBBoxes(J,z.gfx.dependencyTracker.takeDebugMetadata()),A&&(this.recordedBBoxes=J))}C&&(this.#t=!0),this.#n(),K?(z.capability.reject(K),this._abortOperatorList({intentState:x,reason:K instanceof Error?K:new Error(K)})):z.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},z=new Zs({callback:N,params:{canvas:i,canvasContext:t,dependencyTracker:L?new GS(i,x.operatorList.length,O):null,viewport:s,transform:l,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:g,enableHWA:this._transport.enableHWA,operationsFilter:w});(x.renderTasks||=new Set).add(z);const $=z.task;return Promise.all([x.displayReadyCapability.promise,d]).then(([K,J])=>{if(this.destroyed){N();return}if(this._stats?.time("Rendering"),!(J.renderingIntent&T))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");z.initializeGraphics({transparency:K,optionalContentConfig:J}),z.operatorListChanged()}).catch(N),$}getOperatorList({intent:t="display",annotationMode:i=Dn.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(t,i,s,r,!0);let u=this._intentStates.get(l.cacheKey);u||(u=Object.create(null),this._intentStates.set(l.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:i=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:this.#e.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:i===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>yr.textContent(s));const i=this.streamTextContent(t);return new Promise(function(s,r){function o(){l.read().then(function({value:d,done:f}){if(f){s(u);return}u.lang??=d.lang,Object.assign(u.styles,d.styles),u.items.push(...d.items),o()},r)}const l=i.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const i of this._intentStates.values())if(this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0}),!i.opListReadCapability)for(const s of i.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const i=this.#n();return t&&i&&(this._stats&&=new hm),i}#n(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,i){const s=this._intentStates.get(i);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,i){for(let s=0,r=t.length;s<r;s++)i.operatorList.fnArray.push(t.fnArray[s]),i.operatorList.argsArray.push(t.argsArray[s]);i.operatorList.lastChunk=t.lastChunk,i.operatorList.separateAnnots=t.separateAnnots;for(const s of i.renderTasks)s.operatorListChanged();t.lastChunk&&this.#n()}_pumpOperatorList({renderingIntent:t,cacheKey:i,annotationStorageSerializable:s,modifiedIds:r}){const{map:o,transfer:l}=s,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:this.#e.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:t,cacheKey:i,annotationStorage:o,modifiedIds:r},l).getReader(),f=this._intentStates.get(i);f.streamReader=d;const g=()=>{d.read().then(({value:y,done:b})=>{if(b){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,f),g())},y=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const b of f.renderTasks)b.operatorListChanged();this.#n()}if(f.displayReadyCapability)f.displayReadyCapability.reject(y);else if(f.opListReadCapability)f.opListReadCapability.reject(y);else throw y}})};g()}_abortOperatorList({intentState:t,reason:i,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(i instanceof Dh){let r=w1;i.extraDelay>0&&i.extraDelay<1e3&&(r+=i.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:i,force:!0})},r);return}}if(t.streamReader.cancel(new Ln(i.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var Rn,bi,Zi,ts,hl,es,is,Re,al,Ry,Ly,dr,na,rl;const Kt=class Kt{constructor({name:t=null,port:i=null,verbosity:s=sS()}={}){Ei(this,Re);Ei(this,Rn,Promise.withResolvers());Ei(this,bi,null);Ei(this,Zi,null);Ei(this,ts,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,i){if($t(Kt,is).has(i))throw new Error("Cannot use more than one PDFWorker per port.");$t(Kt,is).set(i,this),Ti(this,Re,Ry).call(this,i)}else Ti(this,Re,Ly).call(this)}get promise(){return $t(this,Rn).promise}get port(){return $t(this,Zi)}get messageHandler(){return $t(this,bi)}destroy(){this.destroyed=!0,$t(this,ts)?.terminate(),Fe(this,ts,null),$t(Kt,is).delete($t(this,Zi)),Fe(this,Zi,null),$t(this,bi)?.destroy(),Fe(this,bi,null)}static create(t){const i=$t(this,is).get(t?.port);if(i){if(i._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return i}return new Kt(t)}static get workerSrc(){if(ia.workerSrc)return ia.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return pt(this,"_setupFakeWorkerGlobal",(async()=>$t(this,na,rl)?$t(this,na,rl):(await import(this.workerSrc)).WorkerMessageHandler)())}};Rn=new WeakMap,bi=new WeakMap,Zi=new WeakMap,ts=new WeakMap,hl=new WeakMap,es=new WeakMap,is=new WeakMap,Re=new WeakSet,al=function(){$t(this,Rn).resolve(),$t(this,bi).send("configure",{verbosity:this.verbosity})},Ry=function(t){Fe(this,Zi,t),Fe(this,bi,new hr("main","worker",t)),$t(this,bi).on("ready",()=>{}),Ti(this,Re,al).call(this)},Ly=function(){if($t(Kt,es)||$t(Kt,na,rl)){Ti(this,Re,dr).call(this);return}let{workerSrc:t}=Kt;try{Kt._isSameOrigin(window.location,t)||(t=Kt._createCDNWrapper(new URL(t,window.location).href));const i=new Worker(t,{type:"module"}),s=new hr("main","worker",i),r=()=>{o.abort(),s.destroy(),i.terminate(),this.destroyed?$t(this,Rn).reject(new Error("Worker was destroyed")):Ti(this,Re,dr).call(this)},o=new AbortController;i.addEventListener("error",()=>{$t(this,ts)||r()},{signal:o.signal}),s.on("test",u=>{if(o.abort(),this.destroyed||!u){r();return}Fe(this,bi,s),Fe(this,Zi,i),Fe(this,ts,i),Ti(this,Re,al).call(this)}),s.on("ready",u=>{if(o.abort(),this.destroyed){r();return}try{l()}catch{Ti(this,Re,dr).call(this)}});const l=()=>{const u=new Uint8Array;s.send("test",u,[u.buffer])};l();return}catch{ml("The worker has been disabled.")}Ti(this,Re,dr).call(this)},dr=function(){$t(Kt,es)||(ft("Setting up fake worker."),Fe(Kt,es,!0)),Kt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){$t(this,Rn).reject(new Error("Worker was destroyed"));return}const i=new kS;Fe(this,Zi,i);const s=`fake${Yg(Kt,hl)._++}`,r=new hr(s+"_worker",s,i);t.setup(r,i),Fe(this,bi,new hr(s,s+"_worker",i)),Ti(this,Re,al).call(this)}).catch(t=>{$t(this,Rn).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},na=new WeakSet,rl=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Ei(Kt,na),Ei(Kt,hl,0),Ei(Kt,es,!1),Ei(Kt,is,new WeakMap),De&&(Fe(Kt,es,!0),ia.workerSrc||="./pdf.worker.mjs"),Kt._isSameOrigin=(t,i)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const r=new URL(i,s);return s.origin===r.origin},Kt._createCDNWrapper=t=>{const i=`await import("${t}");`;return URL.createObjectURL(new Blob([i],{type:"text/javascript"}))},Kt.fromPort=t=>{if(mS("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Kt.create(t)};let br=Kt;class _1{downloadInfoCapability=Promise.withResolvers();#t=null;#e=new Map;#n=null;#i=new Map;#a=new Map;#r=new Map;#s=null;#o=Nt.instance;constructor(t,i,s,r,o){this.messageHandler=t,this.loadingTask=i,this.#n=s,this.commonObjs=new xy,this.fontLoader=new xS({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.enableHWA=r.enableHWA,this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),this.#o.addListener(this.#c.bind(this))}#c(){const t=new Map,i=new Map;for(let s=0,r=this.#o.pagesNumber;s<r;s++){const o=this.#o.getPrevPageNumber(s+1)-1,l=this.#i.get(o);l&&t.set(s,l);const u=this.#a.get(o);u&&i.set(s,u)}this.#i=t,this.#a=i}#l(t,i=null){const s=this.#e.get(t);if(s)return s;const r=this.messageHandler.sendWithPromise(t,i);return this.#e.set(t,r),r}#d({loaded:t,total:i}){this.loadingTask.onProgress?.({loaded:t,total:i,percent:_e(Math.round(t/i*100),0,100)})}get annotationStorage(){return pt(this,"annotationStorage",new Nh)}getRenderingIntent(t,i=Dn.ENABLE,s=null,r=!1,o=!1){let l=Qe.DISPLAY,u=gh;switch(t){case"any":l=Qe.ANY;break;case"display":break;case"print":l=Qe.PRINT;break;default:ft(`getRenderingIntent - invalid intent: ${t}`)}const d=l&Qe.PRINT&&s instanceof dy?s:this.annotationStorage;switch(i){case Dn.DISABLE:l+=Qe.ANNOTATIONS_DISABLE;break;case Dn.ENABLE:break;case Dn.ENABLE_FORMS:l+=Qe.ANNOTATIONS_FORMS;break;case Dn.ENABLE_STORAGE:l+=Qe.ANNOTATIONS_STORAGE,u=d.serializable;break;default:ft(`getRenderingIntent - invalid annotationMode: ${i}`)}r&&(l+=Qe.IS_EDITING),o&&(l+=Qe.OPLIST);const{ids:f,hash:g}=d.modifiedIds,y=[l,u.hash,g];return{renderingIntent:l,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#i.values())t.push(s._destroy());this.#i.clear(),this.#a.clear(),this.#r.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const i=this.messageHandler.sendWithPromise("Terminate",null);return t.push(i),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),Ze.cleanup(),this.#n?.cancelAllRequests(new Ln("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:i}=this;t.on("GetReader",(s,r)=>{Bt(this.#n,"GetReader - no `BasePDFStream` instance available."),this.#t=this.#n.getFullReader(),this.#t.onProgress=o=>this.#d(o),r.onPull=()=>{this.#t.read().then(function({value:o,done:l}){if(l){r.close();return}Bt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this.#t.cancel(o),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async s=>{await this.#t.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:l}=this.#t;return r&&o&&(this.#t.onProgress=null),{isStreamingSupported:r,isRangeSupported:o,contentLength:l}}),t.on("GetRangeReader",(s,r)=>{Bt(this.#n,"GetRangeReader - no `BasePDFStream` instance available.");const o=this.#n.getRangeReader(s.begin,s.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:l,done:u}){if(u){r.close();return}Bt(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{o.cancel(l),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:s})=>{this.#o.pagesNumber=s.numPages,this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,i._capability.resolve(new E1(s,this))}),t.on("DocException",s=>{i._capability.reject(Ue(s))}),t.on("PasswordRequest",s=>{this.#s=Promise.withResolvers();try{if(!i.onPassword)throw Ue(s);const r=o=>{o instanceof Error?this.#s.reject(o):this.#s.resolve({password:o})};i.onPassword(r,s.code)}catch(r){this.#s.reject(r)}return this.#s.promise}),t.on("DataLoaded",s=>{this.#d({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#i.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,r,o])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in o){const y=o.error;ft(`Error during font loading: ${y}`),this.commonObjs.resolve(s,y);break}const l=new jt(o),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(y,b)=>globalThis.FontInspector.fontAdded(y,b):null,d=new MS(l,u,o.extra,o.charProcOperatorList);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:f}=o;Bt(f,"The imageRef must be defined.");for(const y of this.#i.values())for(const[,b]of y.objs)if(b?.ref===f)return b.dataLen?(this.commonObjs.resolve(s,structuredClone(b)),b.dataLen):null;break;case"FontPath":this.commonObjs.resolve(s,new DS(o));break;case"Image":this.commonObjs.resolve(s,o);break;case"Pattern":const g=new ye(o);this.commonObjs.resolve(s,g.getIR());break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([s,r,o,l])=>{if(this.destroyed)return;const u=this.#i.get(r);if(!u.objs.has(s)){if(u._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(s,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",s=>{this.destroyed||this.#d(s)}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&ft("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this.#t?.filename??null},i).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this.#o.pagesNumber)return Promise.reject(new Error("Invalid page request."));const i=t-1,s=this.#o.getPageId(t)-1,r=this.#a.get(i);if(r)return r;const o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:s}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&this.#r.set(l.refStr,s);const u=new T1(i,l,this,this._params.pdfBug);return this.#i.set(i,u),u});return this.#a.set(i,o),o}async getPageIndex(t){if(!mh(t))throw new Error("Invalid pageIndex request.");const i=await this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen});return this.#o.getPageNumber(i+1)-1}getAnnotations(t,i){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:this.#o.getPageId(t+1)-1,intent:i})}getFieldObjects(){return this.#l("GetFieldObjects")}hasJSActions(){return this.#l("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,i){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:i})}getDocJSActions(){return this.#l("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:this.#o.getPageId(t+1)-1})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:this.#o.getPageId(t+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#l("GetOptionalContentConfig").then(i=>new s1(i,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",i=this.#e.get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new i1(r[1]):null,contentDispositionFilename:this.#t?.filename??null,contentLength:this.#t?.contentLength??null,hasStructTree:r[2]}));return this.#e.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const i of this.#i.values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),Ze.cleanup()}}cachedPageNumber(t){if(!mh(t))return null;const i=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`,s=this.#r.get(i);return s>=0?this.#o.getPageNumber(s+1):null}}class C1{_internalRenderTask=null;onContinue=null;onError=null;constructor(t){this._internalRenderTask=t}get promise(){return this._internalRenderTask.capability.promise}cancel(t=0){this._internalRenderTask.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this._internalRenderTask.operatorList;if(!t)return!1;const{annotationCanvasMap:i}=this._internalRenderTask;return t.form||t.canvas&&i?.size>0}}class Zs{#t=null;static#e=new WeakSet;constructor({callback:t,params:i,objs:s,commonObjs:r,annotationCanvasMap:o,operatorList:l,pageIndex:u,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:b=null,enableHWA:A=!1,operationsFilter:w=null}){this.callback=t,this.params=i,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new C1(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvas,this._canvasContext=i.canvas?null:i.canvasContext,this._enableHWA=A,this._dependencyTracker=i.dependencyTracker,this._operationsFilter=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:i}){if(this.cancelled)return;if(this._canvas){if(Zs.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Zs.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:r,background:o,dependencyTracker:l}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new ea(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:r,viewport:s,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,i=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),Zs.#e.delete(this._canvas),t||=new Dh(`Rendering cancelled, page ${this._pageIndex+1}`,i),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Zs.#e.delete(this._canvas),this.callback())))}}const x1="5.4.624",M1="384c6208b";class di{#t=null;#e=null;#n;#i=null;#a=!1;#r=!1;#s=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return pt(this,"_keyboardManager",new Cr([[["Escape","mac+Escape"],di.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],di.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],di.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],di.prototype._moveToPrevious],[["Home","mac+Home"],di.prototype._moveToBeginning],[["End","mac+End"],di.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:i=null}){t?(this.#r=!1,this.#s=t):this.#r=!0,this.#l=t?._uiManager||i,this.#o=this.#l._eventBus,this.#n=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",di.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#s&&(t.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const i=this.#l._signal;t.addEventListener("click",this.#g.bind(this),{signal:i}),t.addEventListener("keydown",this.#m.bind(this),{signal:i});const s=this.#e=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#n,t.append(s),t}renderMainDropdown(){const t=this.#i=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),i=this.#l._signal;t.addEventListener("contextmenu",fi,{signal:i}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(t.id=`${this.#s.id}_colorpicker_dropdown`);for(const[s,r]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=s,o.setAttribute("data-l10n-id",di.#d[s]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=r,o.ariaSelected=r===this.#n,o.addEventListener("click",this.#f.bind(this,r),{signal:i}),t.append(o)}return t.addEventListener("keydown",this.#m.bind(this),{signal:i}),t}#f(t,i){i.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Ct.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#g(t);return}const i=t.target.getAttribute("data-color");i&&this.#f(i,t)}_moveToNext(t){if(!this.#p){this.#g(t);return}if(t.target===this.#t){this.#i.firstElementChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstElementChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#g(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#g(t);return}this.#i.firstElementChild?.focus()}_moveToEnd(t){if(!this.#p){this.#g(t);return}this.#i.lastElementChild?.focus()}#m(t){di._keyboardManager.exec(this,t)}#g(t){if(this.#p){this.hideDropdown();return}if(this.#a=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const i=this.#i=this.#h();this.#t.append(i)}#u(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#p){this.#s?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const i=this.#l.highlightColors.values();for(const s of this.#i.children)s.ariaSelected=i.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class vr{#t=null;#e=null;#n=null;static#i=null;constructor(t){this.#e=t,this.#n=t._uiManager,vr.#i||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:i,color:s}=this.#e,r=this.#t=document.createElement("input");return r.type="color",r.value=s||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",vr.#i[t]),r.addEventListener("input",()=>{this.#n.updateParams(i,r.value)},{signal:this.#n._signal}),r}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function Bm(h){return Math.floor(Math.max(0,Math.min(1,h))*255).toString(16).padStart(2,"0")}function rr(h){return Math.max(0,Math.min(255,255*h))}class zm{static CMYK_G([t,i,s,r]){return["G",1-Math.min(1,.3*t+.59*s+.11*i+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=rr(t),[t,t,t]}static G_HTML([t]){const i=Bm(t);return`#${i}${i}${i}`}static RGB_G([t,i,s]){return["G",.3*t+.59*i+.11*s]}static RGB_rgb(t){return t.map(rr)}static RGB_HTML(t){return`#${t.map(Bm).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,i,s,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,s+r),1-Math.min(1,i+r)]}static CMYK_rgb([t,i,s,r]){return[rr(1-Math.min(1,t+r)),rr(1-Math.min(1,s+r)),rr(1-Math.min(1,i+r))]}static CMYK_HTML(t){const i=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(i)}static RGB_CMYK([t,i,s]){const r=1-t,o=1-i,l=1-s,u=Math.min(r,o,l);return["CMYK",r,o,l,u]}}class D1{create(t,i,s=!1){if(t<=0||i<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${i}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${i}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){zt("Abstract method `_createSVG` called.")}}class ul extends D1{_createSVG(t){return document.createElementNS(Wi,t)}}const R1=9,ss=new WeakSet,L1=new Date().getTimezoneOffset()*60*1e3;class rh{static create(t){switch(t.data.annotationType){case he.LINK:return new Fh(t);case he.TEXT:return new N1(t);case he.WIDGET:switch(t.data.fieldType){case"Tx":return new k1(t);case"Btn":return t.data.radioButton?new Oy(t):t.data.checkBox?new z1(t):new P1(t);case"Ch":return new F1(t);case"Sig":return new B1(t)}return new os(t);case he.POPUP:return new vh(t);case he.FREETEXT:return new Ny(t);case he.LINE:return new I1(t);case he.SQUARE:return new H1(t);case he.CIRCLE:return new j1(t);case he.POLYLINE:return new ky(t);case he.CARET:return new V1(t);case he.INK:return new Uh(t);case he.POLYGON:return new G1(t);case he.HIGHLIGHT:return new By(t);case he.UNDERLINE:return new X1(t);case he.SQUIGGLY:return new Y1(t);case he.STRIKEOUT:return new q1(t);case he.STAMP:return new zy(t);case he.FILEATTACHMENT:return new $1(t);default:return new Zt(t)}}}class Zt{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:i=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=i,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,i&&(this.contentElement=this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:i}){return!!(t?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Zt._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,i=this.annotationStorage?.getEditor(t.id);return i?i.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:i,inkLists:s,rect:r}=this.data;let o=-1/0,l=-1/0;if(i?.length>=8){for(let u=0;u<i.length;u+=8)i[u+1]>l?(l=i[u+1],o=i[u+2]):i[u+1]===l&&(o=Math.max(o,i[u+2]));return[o,l]}if(s?.length>=1){for(const u of s)for(let d=0,f=u.length;d<f;d+=2)u[d+1]>l?(l=u[d+1],o=u[d]):u[d+1]===l&&(o=Math.max(o,u[d]));if(o!==1/0)return[o,l]}return r?[r[2],r[3]]:null}_normalizePoint(t){const{page:{view:i},viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:o,pageY:l}}}=this.parent;return t[1]=i[3]-t[1]+i[1],t[0]=100*(t[0]-o)/s,t[1]=100*(t[1]-l)/r,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${gr}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:i}=this,s={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(i.id,{popup:s})||this.annotationStorage.setValue(`${gr}${i.id}`,{id:i.id,annotationType:i.annotationType,page:this.parent.page,popup:s,popupRef:i.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#n?.popup||this.popup)?.remove(),this.#n=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:i,popup:s}=t;i&&this.#i(i);let r=this.#n?.popup||this.popup;!r&&s?.text&&(this._createPopup(s),r=this.#n.popup),r&&(r.updateEdited(t),s?.deleted&&(r.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:i},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:u,pageY:d}}}}=this;s?.splice(0,4,...t),i.left=`${100*(t[0]-u)/o}%`,i.top=`${100*(l-t[3]+d)/l}%`,r===0?(i.width=`${100*(t[2]-t[0])/o}%`,i.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(r)}_createContainer(t){const{data:i,parent:{page:s,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",i.id),!(this instanceof os)&&!(this instanceof Fh)&&(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,i.alternativeText&&(o.title=i.alternativeText),i.noRotate&&o.classList.add("norotate"),!i.rect||this instanceof vh){const{rotation:S}=i;return!i.hasOwnCanvas&&S!==0&&this.setRotation(S,o),o}const{width:u,height:d}=this;if(!t&&i.borderStyle.width>0){l.borderWidth=`${i.borderStyle.width}px`;const S=i.borderStyle.horizontalCornerRadius,T=i.borderStyle.verticalCornerRadius;if(S>0||T>0){const x=`calc(${S}px * var(--total-scale-factor)) / calc(${T}px * var(--total-scale-factor))`;l.borderRadius=x}else if(this instanceof Oy){const x=`calc(${u}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;l.borderRadius=x}switch(i.borderStyle.style){case qs.SOLID:l.borderStyle="solid";break;case qs.DASHED:l.borderStyle="dashed";break;case qs.BEVELED:ft("Unimplemented border style: beveled");break;case qs.INSET:ft("Unimplemented border style: inset");break;case qs.UNDERLINE:l.borderBottomStyle="solid";break}const E=i.borderColor||null;E?(this.#e=!0,l.borderColor=et.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):l.borderWidth=0}const f=et.normalizeRect([i.rect[0],s.view[3]-i.rect[1]+s.view[1],i.rect[2],s.view[3]-i.rect[3]+s.view[1]]),{pageWidth:g,pageHeight:y,pageX:b,pageY:A}=r.rawDims;l.left=`${100*(f[0]-b)/g}%`,l.top=`${100*(f[1]-A)/y}%`;const{rotation:w}=i;return i.hasOwnCanvas||w===0?(l.width=`${100*u/g}%`,l.height=`${100*d/y}%`):this.setRotation(w,o),o}setRotation(t,i=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:o,height:l}=this;t%180!==0&&([o,l]=[l,o]),i.style.width=`${100*o/s}%`,i.style.height=`${100*l/r}%`,i.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(i,s,r)=>{const o=r.detail[i],l=o[0],u=o.slice(1);r.target.style[s]=zm[`${l}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[s]:zm[`${l}_rgb`](u)})};return pt(this,"_commonActions",{display:i=>{const{display:s}=i.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:i=>{this.annotationStorage.setValue(this.data.id,{noPrint:!i.detail.print})},hidden:i=>{const{hidden:s}=i.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:i=>{setTimeout(()=>i.target.focus({preventScroll:!1}),0)},userName:i=>{i.target.title=i.detail.userName},readonly:i=>{i.target.disabled=i.detail.readonly},required:i=>{this._setRequired(i.target,i.detail.required)},bgColor:i=>{t("bgColor","backgroundColor",i)},fillColor:i=>{t("fillColor","backgroundColor",i)},fgColor:i=>{t("fgColor","color",i)},textColor:i=>{t("textColor","color",i)},borderColor:i=>{t("borderColor","borderColor",i)},strokeColor:i=>{t("strokeColor","borderColor",i)},rotation:i=>{const s=i.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,i){const s=this._commonActions;for(const r of Object.keys(i.detail))(t[r]||s[r])?.(i)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const i=this.annotationStorage.getRawValue(this.data.id);if(!i)return;const s=this._commonActions;for(const[r,o]of Object.entries(i)){const l=s[r];if(l){const u={detail:{[r]:o},target:t};l(u),delete i[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[i,s,r,o]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,T,E,x]=t.subarray(2,6);if(r===S&&o===T&&i===E&&s===x)return}const{style:l}=this.container;let u;if(this.#e){const{borderColor:S,borderWidth:T}=l;l.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${T}">`],this.container.classList.add("hasBorder")}const d=r-i,f=o-s,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const b=g.createElement("defs");y.append(b);const A=g.createElement("clipPath"),w=`clippath_${this.data.id}`;A.setAttribute("id",w),A.setAttribute("clipPathUnits","objectBoundingBox"),b.append(A);for(let S=2,T=t.length;S<T;S+=8){const E=t[S],x=t[S+1],C=t[S+2],O=t[S+3],L=g.createElement("rect"),N=(C-i)/d,z=(o-x)/f,$=(E-C)/d,K=(x-O)/f;L.setAttribute("x",N),L.setAttribute("y",z),L.setAttribute("width",$),L.setAttribute("height",K),A.append(L),u?.push(`<rect vector-effect="non-scaling-stroke" x="${N}" y="${z}" width="${$}" height="${K}"/>`)}this.#e&&(u.push("</g></svg>')"),l.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${w})`}_createPopup(t=null){const{data:i}=this;let s,r;t?(s={str:t.text},r=t.date):(s=i.contentsObj,r=i.modificationDate),this.#n=new vh({data:{color:i.color,titleObj:i.titleObj,modificationDate:r,contentsObj:s,richText:i.richText,parentRect:i.rect,borderStyle:0,id:`popup_${i.id}`,rotation:i.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#n}render(){zt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,i=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:o,id:l,exportValues:u}of r){if(o===-1||l===i)continue;const d=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!ss.has(f)){ft(`_getElementsByName - element not allowed: ${l}`);continue}s.push({id:l,exportValue:d,domElement:f})}return s}for(const r of document.getElementsByName(t)){const{exportValue:o}=r,l=r.getAttribute("data-element-id");l!==i&&ss.has(r)&&s.push({id:l,exportValue:o,domElement:r})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const i of t)i.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:i}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:i,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class O1 extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class Fh extends Zt{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!i?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(i.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),r=!0):t.attachment?(this.#e(s,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(this.#n(s,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&(this.contentElement=s,this.container.append(s)),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,i,s=""){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&this.#t(),s&&(t.title=s)}_bindNamedAction(t,i,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),s&&(t.title=s),this.#t()}#e(t,i,s="",r=null){t.href=this.linkService.getAnchorUrl(""),i.description?t.title=i.description:s&&(t.title=s),t.onclick=()=>(this.downloadManager?.openOrDownloadData(i.content,i.filename,r),!1),this.#t()}#n(t,i,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),s&&(t.title=s),this.#t()}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const o=s.get(r);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1))}i.overlaidText&&(t.title=i.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,i){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){ft('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:r,refs:o,include:l}=i,u=[];if(r.length!==0||o.length!==0){const g=new Set(o);for(const y of r){const b=this._fieldObjects[y]||[];for(const{id:A}of b)g.add(A)}for(const y of Object.values(this._fieldObjects))for(const b of y)g.has(b.id)===l&&u.push(b)}else for(const g of Object.values(this._fieldObjects))u.push(...g);const d=this.annotationStorage,f=[];for(const g of u){const{id:y}=g;switch(f.push(y),g.type){case"text":{const A=g.defaultValue||"";d.setValue(y,{value:A});break}case"checkbox":case"radiobutton":{const A=g.defaultValue===g.exportValues;d.setValue(y,{value:A});break}case"combobox":case"listbox":{const A=g.defaultValue||"";d.setValue(y,{value:A});break}default:continue}const b=document.querySelector(`[data-element-id="${y}"]`);if(b){if(!ss.has(b)){ft(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class N1 extends Zt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class os extends Zt{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return pe.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,i,s,r,o){s.includes("mouse")?t.addEventListener(s,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(s,l=>{if(s==="blur"){if(!i.focused||!l.relatedTarget)return;i.focused=!1}else if(s==="focus"){if(i.focused)return;i.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l)}})})}_setEventListeners(t,i,s,r){for(const[o,l]of s)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(i||={focused:!1}),this._setEventListener(t,i,o,l,r),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,i,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,i,"focus","Focus",null))}_setBackgroundColor(t){const i=this.data.backgroundColor||null;t.style.backgroundColor=i===null?"transparent":et.makeHexColor(i[0],i[1],i[2])}_setTextStyle(t){const i=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||R1,o=t.style;let l;const u=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),g=Math.round(f/(Ju*r))||1,y=f/g;l=Math.min(r,d(y/Ju))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);l=Math.min(r,d(f/Ju))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=et.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(o.textAlign=i[this.data.textAlignment])}_setRequired(t,i){i?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",i)}}class k1 extends os{constructor(t){const i=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:i})}setPropertyOnSiblings(t,i,s,r){const o=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[i]=s),o.setValue(l.id,{[r]:s})}render(){const t=this.annotationStorage,i=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const r=t.getValue(i,{value:this.data.fieldValue});let o=r.value||"";const l=t.getValue(i,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=r.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),ss.add(s),this.contentElement=s,s.setAttribute("data-element-id",i),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:f,datetimeType:g,timeStep:y}=this.data,b=!!g&&this.enableScripting;f&&(s.title=f),this._setRequired(s,this.data.required),l&&(s.maxLength=l),s.addEventListener("input",w=>{t.setValue(i,{value:w.target.value}),this.setPropertyOnSiblings(s,"value",w.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",w=>{const S=this.data.defaultFieldValue??"";s.value=d.userValue=S,d.formattedValue=null});let A=w=>{const{formattedValue:S}=d;S!=null&&(w.target.value=S),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",S=>{if(d.focused)return;const{target:T}=S;if(b&&(T.type=g,y&&(T.step=y)),d.userValue){const E=d.userValue;if(b)if(g==="time"){const x=new Date(E),C=[x.getHours(),x.getMinutes(),x.getSeconds()];T.value=C.map(O=>O.toString().padStart(2,"0")).join(":")}else T.value=new Date(E-L1).toISOString().split(g==="date"?"T":".",1)[0];else T.value=E}d.lastCommittedValue=T.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const T={value(E){d.userValue=E.detail.value??"",b||t.setValue(i,{value:d.userValue.toString()}),E.target.value=d.userValue},formattedValue(E){const{formattedValue:x}=E.detail;d.formattedValue=x,x!=null&&E.target!==document.activeElement&&(E.target.value=x);const C={formattedValue:x};b&&(C.value=x),t.setValue(i,C)},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{const{charLimit:x}=E.detail,{target:C}=E;if(x===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",x);let O=d.userValue;!O||O.length<=x||(O=O.slice(0,x),C.value=d.userValue=O,t.setValue(i,{value:O}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:O,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(T,S)}),s.addEventListener("keydown",S=>{d.commitKey=1;let T=-1;if(S.key==="Escape"?T=0:S.key==="Enter"&&!this.data.multiLine?T=2:S.key==="Tab"&&(d.commitKey=3),T===-1)return;const{value:E}=S.target;d.lastCommittedValue!==E&&(d.lastCommittedValue=E,d.userValue=E,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:E,willCommit:!0,commitKey:T,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const w=A;A=null,s.addEventListener("blur",S=>{if(!d.focused||!S.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:T}=S;let{value:E}=T;if(b){if(E&&g==="time"){const x=E.split(":").map(C=>parseInt(C,10));E=new Date(2e3,0,1,x[0],x[1],x[2]||0).valueOf(),T.step=""}else E.includes("T")||(E=`${E}T00:00`),E=new Date(E).valueOf();T.type="text"}d.userValue=E,d.lastCommittedValue!==E&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:E,willCommit:!0,commitKey:d.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),w(S)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",S=>{d.lastCommittedValue=null;const{data:T,target:E}=S,{value:x,selectionStart:C,selectionEnd:O}=E;let L=C,N=O;switch(S.inputType){case"deleteWordBackward":{const z=x.substring(0,C).match(/\w*[^\w]*$/);z&&(L-=z[0].length);break}case"deleteWordForward":{const z=x.substring(C).match(/^[^\w]*\w*/);z&&(N+=z[0].length);break}case"deleteContentBackward":C===O&&(L-=1);break;case"deleteContentForward":C===O&&(N+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:x,change:T||"",willCommit:!1,selStart:L,selEnd:N}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(A&&s.addEventListener("blur",A),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/l;s.classList.add("comb"),s.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class B1 extends os{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class z1 extends os{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,i=this.data,s=i.id;let r=t.getValue(s,{value:i.exportValue===i.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return ss.add(o),o.setAttribute("data-element-id",s),o.disabled=i.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=i.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",i.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const f of this._getElementsByName(u,s)){const g=d&&f.exportValue===i.exportValue;f.domElement&&(f.domElement.checked=g),t.setValue(f.id,{value:g})}t.setValue(s,{value:d})}),o.addEventListener("resetform",l=>{const u=i.defaultFieldValue||"Off";l.target.checked=u===i.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(s,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Oy extends os{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,i=this.data,s=i.id;let r=t.getValue(s,{value:i.fieldValue===i.buttonValue}).value;if(typeof r=="string"&&(r=r!==i.buttonValue,t.setValue(s,{value:r})),r)for(const l of this._getElementsByName(i.fieldName,s))t.setValue(l.id,{value:!1});const o=document.createElement("input");if(ss.add(o),o.setAttribute("data-element-id",s),o.disabled=i.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=i.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const f of this._getElementsByName(u,s))t.setValue(f.id,{value:!1});t.setValue(s,{value:d})}),o.addEventListener("resetform",l=>{const u=i.defaultFieldValue;l.target.checked=u!=null&&u===i.buttonValue}),this.enableScripting&&this.hasJSActions){const l=i.buttonValue;o.addEventListener("updatefromsandbox",u=>{const d={value:f=>{const g=l===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const b=g&&y.id===s;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class P1 extends Fh{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const i=t.lastChild;return this.enableScripting&&this.hasJSActions&&i&&(this._setDefaultPropertiesFromJS(i),i.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class F1 extends os{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,i=this.data.id,s=t.getValue(i,{value:this.data.fieldValue}),r=document.createElement("select");ss.add(r),r.setAttribute("data-element-id",i),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const b of r.options)b.selected=b.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,s.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),o=!1),r.append(y)}let l=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),r.prepend(g),l=()=>{g.remove(),r.removeEventListener("input",l),l=null},r.addEventListener("input",l)}const u=g=>{const y=g?"value":"textContent",{options:b,multiple:A}=r;return A?Array.prototype.filter.call(b,w=>w.selected).map(w=>w[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let d=u(!1);const f=g=>{const y=g.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",g=>{const y={value(b){l?.();const A=b.detail.value,w=new Set(Array.isArray(A)?A:[A]);for(const S of r.options)S.selected=w.has(S.value);t.setValue(i,{value:u(!0)}),d=u(!1)},multipleSelection(b){r.multiple=!0},remove(b){const A=r.options,w=b.detail.remove;A[w].selected=!1,r.remove(w),A.length>0&&Array.prototype.findIndex.call(A,T=>T.selected)===-1&&(A[0].selected=!0),t.setValue(i,{value:u(!0),items:f(b)}),d=u(!1)},clear(b){for(;r.length!==0;)r.remove(0);t.setValue(i,{value:null,items:[]}),d=u(!1)},insert(b){const{index:A,displayValue:w,exportValue:S}=b.detail.insert,T=r.children[A],E=document.createElement("option");E.textContent=w,E.value=S,T?T.before(E):r.append(E),t.setValue(i,{value:u(!0),items:f(b)}),d=u(!1)},items(b){const{items:A}=b.detail;for(;r.length!==0;)r.remove(0);for(const w of A){const{displayValue:S,exportValue:T}=w,E=document.createElement("option");E.textContent=S,E.value=T,r.append(E)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(i,{value:u(!0),items:f(b)}),d=u(!1)},indices(b){const A=new Set(b.detail.indices);for(const w of b.target.options)w.selected=A.has(w.index);t.setValue(i,{value:u(!0)}),d=u(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,g)}),r.addEventListener("input",g=>{const y=u(!0),b=u(!1);t.setValue(i,{value:y}),g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:d,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):r.addEventListener("input",function(g){t.setValue(i,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class vh extends Zt{constructor(t){const{data:i,elements:s,parent:r}=t,o=!!r._commentManager;if(super(t,{isRenderable:!o&&Zt._hasPopupData(i)}),this.elements=s,o&&Zt._hasPopupData(i)){const l=this.popup=this.#t();for(const u of s)u.popup=l}else this.popup=null}#t(){return new U1({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const i=this.popup=this.#t(),s=[];for(const r of this.elements)r.popup=i,r.container.ariaHasPopup="dialog",s.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(r=>`${Ws}${r}`).join(",")),this.container}}class U1{#t=null;#e=this.#V.bind(this);#n=this.#U.bind(this);#i=this.#N.bind(this);#a=this.#w.bind(this);#r=null;#s=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#m=null;#g=null;#u=null;#p=null;#y=null;#v=null;#b=null;#_=null;#E=null;#S=null;#x=!1;#A=null;#T=null;constructor({container:t,color:i,elements:s,titleObj:r,modificationDate:o,contentsObj:l,richText:u,parent:d,rect:f,parentRect:g,open:y,commentManager:b=null}){this.#s=t,this.#E=r,this.#o=l,this.#_=u,this.#d=d,this.#r=i,this.#b=f,this.#h=g,this.#l=s,this.#t=b,this.#A=s[0],this.#c=dh.toDateObject(o),this.trigger=s.flatMap(A=>A.getElementsToTriggerPopup()),b||(this.#R(),this.#s.hidden=!0,y&&this.#w())}#R(){if(this.#g)return;this.#g=new AbortController;const{signal:t}=this.#g;for(const i of this.trigger)i.addEventListener("click",this.#a,{signal:t}),i.addEventListener("pointerenter",this.#i,{signal:t}),i.addEventListener("pointerleave",this.#n,{signal:t}),i.classList.add("popupTriggerArea");for(const i of this.#l)i.container?.addEventListener("keydown",this.#e,{signal:t})}#M(){const t=this.#l.find(i=>i.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#p){this.#p.parentNode||this.#A.container.after(this.#p);return}if(this.#y||this.#M(),!this.#y)return;const{signal:t}=this.#g=new AbortController,i=this.#A.hasOwnCommentButton,s=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!i)},r=()=>{this.#t.toggleCommentPopup(this,!1,!0,!i)},o=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(i){this.#p=this.#A.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",s,{signal:t}),l.addEventListener("pointerenter",r,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),l.classList.add("popupTriggerArea")}else{const l=this.#p=document.createElement("button");l.className="annotationCommentButton";const u=this.#A.container;l.style.zIndex=u.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#P(),this.#D(),l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",s,{signal:t}),l.addEventListener("pointerenter",r,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),u.after(l)}}#D(){if(this.#A.extraPopupElement&&!this.#A.editor)return;this.#p||this.renderCommentButton();const[t,i]=this.#y,{style:s}=this.#p;s.left=`calc(${t}%)`,s.top=`calc(${i}% - var(--comment-button-dim))`}#P(){this.#A.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:i}=this.#A.commentData;return t?this.#d._commentManager.makeCommentColor(t,i):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:t,color:i,opacity:s,creationDate:r,modificationDate:o}=this.#A.commentData;return{contentsObj:{str:this.comment},richText:t,color:i,opacity:s,creationDate:r,modificationDate:o}}get elementBeforePopup(){return this.#p}get comment(){return this.#T||=this.#A.commentText,this.#T}set comment(t){t!==this.comment&&(this.#A.commentText=this.#T=t)}focus(){this.#A.container?.focus()}get parentBoundingClientRect(){return this.#A.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:i}){this.#p&&(this.#p.classList.toggle("selected",t),this.#p.ariaExpanded=i)}setSelectedCommentButton(t){this.#p.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:i,height:s}=this.#p.getBoundingClientRect(),{x:r,y:o,width:l,height:u}=this.#A.layer.getBoundingClientRect();return[(t-r)/l,(i+s-o)/u]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[i,s]=this.#v||this.commentButtonPosition.map(f=>f/100),r=this.parentBoundingClientRect,{x:o,y:l,width:u,height:d}=r;this.#t.showDialog(null,this,o+i*u,l+s*d,{...t,parentDimensions:r})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#r){const s=t.style.outlineColor=et.makeHexColor(...this.#r);t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const i=document.createElement("span");if(i.className="header",this.#E?.str){const s=document.createElement("span");s.className="title",i.append(s),{dir:s.dir,str:s.textContent}=this.#E}if(t.append(i),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),i.append(s)}ly({html:this.#O||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#s.append(t)}get#O(){const t=this.#_,i=this.#o;return t?.str&&(!i?.str||i.str===t.str)&&this.#_.html||null}get#k(){return this.#O?.attributes?.style?.fontSize||0}get#F(){return this.#O?.attributes?.style?.color||null}#B(t){const i=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:i}]}},r={style:{color:this.#F,fontSize:this.#k?`calc(${this.#k}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))i.push({name:"span",value:o,attributes:r});return s}#V(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#w()}updateEdited({rect:t,popup:i,deleted:s}){if(this.#t){s?(this.remove(),this.#T=null):i&&(i.deleted?this.remove():(this.#P(),this.#T=i.text)),t&&(this.#y=null,this.#M(),this.#D());return}if(s||i?.deleted){this.remove();return}this.#R(),this.#S||={contentsObj:this.#o,richText:this.#_},t&&(this.#u=null),i&&i.text&&(this.#_=this.#B(i.text),this.#c=dh.toDateObject(i.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#S&&({contentsObj:this.#o,richText:this.#_}=this.#S,this.#S=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#g?.abort(),this.#g=null,this.#m?.remove(),this.#m=null,this.#x=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#C(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:o}}}=this.#d;let l=!!this.#h,u=l?this.#h:this.#b;for(const w of this.#l)if(!u||et.intersect(w.data.rect,u)!==null){u=w.data.rect,l=!0;break}const d=et.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),g=l?u[2]-u[0]+5:0,y=d[0]+g,b=d[1];this.#u=[100*(y-r)/i,100*(b-o)/s];const{style:A}=this.#s;A.left=`${this.#u[0]}%`,A.top=`${this.#u[1]}%`}#w(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#N(),this.#s.addEventListener("click",this.#a),this.#s.addEventListener("keydown",this.#e)):(this.#U(),this.#s.removeEventListener("click",this.#a),this.#s.removeEventListener("keydown",this.#e))}#N(){this.#m||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#C(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#U(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#x=this.isVisible,this.#x&&(this.#s.hidden=!0)}maybeShow(){this.#t||(this.#R(),this.#x&&(this.#m||this.#N(),this.#x=!1,this.#s.hidden=!1))}get isVisible(){return this.#t?!1:this.#s.hidden===!1}}class Ny extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=mt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const i of this.textContent){const s=document.createElement("span");s.textContent=i,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class I1 extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class H1 extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",i-o),l.setAttribute("height",s-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class j1 extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",i/2),l.setAttribute("cy",s/2),l.setAttribute("rx",i/2-o/2),l.setAttribute("ry",s/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class ky extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:s,popupRef:r},width:o,height:l}=this;if(!i)return this.container;const u=this.svgFactory.create(o,l,!0);let d=[];for(let g=0,y=i.length;g<y;g+=2){const b=i[g]-t[0],A=t[3]-i[g+1];d.push(`${b},${A}`)}d=d.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",d),f.setAttribute("stroke-width",s.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class G1 extends ky{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class V1 extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class Uh extends Zt{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?mt.HIGHLIGHT:mt.INK}#n(t,i){switch(t){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:i,inkLists:s,borderStyle:r,popupRef:o}}=this,{transform:l,width:u,height:d}=this.#n(i,t),f=this.svgFactory.create(u,d,!0),g=this.#t=this.svgFactory.createElement("svg:g");f.append(g),g.setAttribute("stroke-width",r.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",l);for(let y=0,b=s.length;y<b;y++){const A=this.svgFactory.createElement(this.svgElementName);this.#e.push(A),A.setAttribute("points",s[y].join(",")),g.append(A)}return!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:i,points:s,rect:r}=t,o=this.#t;if(i>=0&&o.setAttribute("stroke-width",i||1),s)for(let l=0,u=this.#e.length;l<u;l++)this.#e[l].setAttribute("points",s[l].join(","));if(r){const{transform:l,width:u,height:d}=this.#n(this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${d}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class By extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=mt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class X1 extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class Y1 extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class q1 extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class zy extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=mt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class $1 extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:i}=this.data;this.filename=i.filename,this.content=i.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:r}=pe.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&this.#e()}),!i.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Ih{#t=null;#e=null;#n=null;#i=new Map;#a=null;#r=null;#s=[];#o=!1;constructor({div:t,accessibilityManager:i,annotationCanvasMap:s,annotationEditorUIManager:r,page:o,viewport:l,structTreeLayer:u,commentManager:d,linkService:f,annotationStorage:g}){this.div=t,this.#t=i,this.#e=s,this.#a=u||null,this.#r=f||null,this.#n=g||new Nh,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=d||null}hasEditableAnnotations(){return this.#i.size>0}async render(t){const{annotations:i}=t,s=this.div;ns(s,this.viewport);const r=new Map,o=[],l={data:null,layer:s,linkService:this.#r,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new ul,annotationStorage:this.#n,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of i){if(u.noHTML)continue;const d=u.annotationType===he.POPUP;if(d){const y=r.get(u.id);if(!y)continue;if(!this._commentManager){o.push(u);continue}l.elements=y}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;l.data=u;const f=rh.create(l);if(!f.isRenderable)continue;if(!d&&(this.#s.push(f),u.popupRef)){const y=r.get(u.popupRef);y?y.push(f):r.set(u.popupRef,[f])}const g=f.render();u.hidden&&(g.style.visibility="hidden"),f._isEditable&&(this.#i.set(f.data.id,f),this._annotationEditorUIManager?.renderAnnotationElement(f))}await this.#c();for(const u of o){const d=l.elements=r.get(u.id);l.data=u;const f=rh.create(l);if(!f.isRenderable)continue;const g=f.render();f.contentElement.id=`${Ws}${u.id}`,u.hidden&&(g.style.visibility="hidden"),d.at(-1).container.after(g)}this.#l()}async#c(){if(this.#s.length===0)return;this.div.replaceChildren();const t=[];if(!this.#o){this.#o=!0;for(const{contentElement:s,data:{id:r}}of this.#s){const o=s.id=`${Ws}${r}`;t.push(this.#a?.getAriaAttributes(o).then(l=>{if(l)for(const[u,d]of l)s.setAttribute(u,d)}))}}this.#s.sort(({data:{rect:[s,r,o,l]}},{data:{rect:[u,d,f,g]}})=>{if(s===o&&r===l)return 1;if(u===f&&d===g)return-1;const y=l,b=r,A=(r+l)/2,w=g,S=d,T=(d+g)/2;if(A>=w&&T<=b)return-1;if(T>=y&&A<=S)return 1;const E=(s+o)/2,x=(u+f)/2;return E-x});const i=document.createDocumentFragment();for(const s of this.#s)i.append(s.container),this._commentManager?(s.extraPopupElement?.popup||s.popup)?.renderCommentButton():s.extraPopupElement&&i.append(s.extraPopupElement.render());if(this.div.append(i),await Promise.all(t),this.#t)for(const s of this.#s)this.#t.addPointerInTextLayer(s.contentElement,!1)}async addLinkAnnotations(t){const i={data:null,layer:this.div,linkService:this.#r,svgFactory:new ul,parent:this};for(const s of t){s.borderStyle||=Ih._defaultBorderStyle,i.data=s;const r=rh.create(i);r.isRenderable&&(r.render(),r.contentElement.id=`${Ws}${s.id}`,this.#s.push(r))}await this.#c()}update({viewport:t}){const i=this.div;this.viewport=t,ns(i,{rotation:t.rotation}),this.#l(),i.hidden=!1}#l(){if(!this.#e)return;const t=this.div;for(const[i,s]of this.#e){const r=t.querySelector(`[data-annotation-id="${i}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):r.append(s);const l=this.#i.get(i);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(i,r.id,s),l._hasNoCanvas=!1):l.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}addFakeAnnotation(t){const{div:i}=this,{id:s,rotation:r}=t,o=new O1({data:{id:s,rect:t.getPDFRect(),rotation:r},editor:t,layer:i,parent:this,enableComment:!!this._commentManager,linkService:this.#r,annotationStorage:this.#n});return o.render(),o.contentElement.id=`${Ws}${s}`,o.createOrUpdatePopup(),this.#s.push(o),o}removeAnnotation(t){const i=this.#s.findIndex(r=>r.data.id===t);if(i<0)return;const[s]=this.#s.splice(i,1);this.#t?.removePointerInTextLayer(s.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const i of t)i.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return pt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:qs.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const tl=/\r\n?|\n/g;class be extends rt{#t="";#e=`${this.id}-editor`;#n=null;#i;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=be.prototype,i=o=>o.isEmpty(),s=On.TRANSLATE_SMALL,r=On.TRANSLATE_BIG;return pt(this,"_keyboardManager",new Cr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}]]))}static _type="freetext";static _editorType=mt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||be._defaultColor||rt._defaultLineColor,this.#i=t.fontSize||be._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(t,i){rt.initialize(t,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case Ct.FREETEXT_SIZE:be._defaultFontSize=i;break;case Ct.FREETEXT_COLOR:be._defaultColor=i;break}}updateParams(t,i){switch(t){case Ct.FREETEXT_SIZE:this.#a(i);break;case Ct.FREETEXT_COLOR:this.#r(i);break}}static get defaultPropertiesToUpdate(){return[[Ct.FREETEXT_SIZE,be._defaultFontSize],[Ct.FREETEXT_COLOR,be._defaultColor||rt._defaultLineColor]]}get propertiesToUpdate(){return[[Ct.FREETEXT_SIZE,this.#i],[Ct.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new vr(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ct.FREETEXT_COLOR}#a(t){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#i)*this.parentScale),this.#i=r,this.#o()},s=this.#i;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#r(t){const i=r=>{this.color=r,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-be._internalPadding*t,-(be._internalPadding+this.#i)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const t=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const t=[];this.editorDiv.normalize();let i=null;for(const s of this.editorDiv.childNodes)i?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(be.#c(s)),i=s);return t.join(`
`)}#o(){const[t,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,l=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/i):(this.width=s.height/t,this.height=s.width/i),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,i=this.#t=this.#s().trimEnd();if(t===i)return;const s=r=>{if(this.#t=r,!r){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){be._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,i;(this._isCopy||this.annotationElementId)&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[u,d]=this.getInitialTranslation();[u,d]=this.pageTranslationToScreen(u,d);const[f,g]=this.pageDimensions,[y,b]=this.pageTranslation;let A,w;switch(this.rotation){case 0:A=t+(l[0]-y)/f,w=i+this.height-(l[1]-b)/g;break;case 90:A=t+(l[0]-y)/f,w=i-(l[1]-b)/g,[u,d]=[d,-u];break;case 180:A=t-this.width+(l[0]-y)/f,w=i-(l[1]-b)/g,[u,d]=[-u,-d];break;case 270:A=t+(l[0]-y-this.height*g)/f,w=i+(l[1]-b-this.width*f)/g,[u,d]=[-d,u];break}this.setAt(A*r,w*o,u,d)}else this._moveAfterPaste(t,i);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(tl,"")}editorDivPaste(t){const i=t.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=be.#h(i.getData("text")||"").replaceAll(tl,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:d}=l,f=[],g=[];if(u.nodeType===Node.TEXT_NODE){const A=u.parentElement;if(g.push(u.nodeValue.slice(d).replaceAll(tl,"")),A!==this.editorDiv){let w=f;for(const S of this.editorDiv.childNodes){if(S===A){w=g;continue}w.push(be.#c(S))}}f.push(u.nodeValue.slice(0,d).replaceAll(tl,""))}else if(u===this.editorDiv){let A=f,w=0;for(const S of this.editorDiv.childNodes)w++===d&&(A=g),A.push(be.#c(S))}this.#t=`${f.join(`
`)}${r}${g.join(`
`)}`,this.#l();const y=new Range;let b=Math.sumPrecise(f.map(A=>A.length));for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const w=A.nodeValue.length;if(b<=w){y.setStart(A,b),y.setEnd(A,b);break}b-=w}o.removeAllRanges(),o.addRange(y)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=be._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,i,s){let r=null;if(t instanceof Ny){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:d,rotation:f,id:g,popupRef:y,richText:b,contentsObj:A,creationDate:w,modificationDate:S},textContent:T,textPosition:E,parent:{page:{pageNumber:x}}}=t;if(!T||T.length===0)return null;r=t={annotationType:mt.FREETEXT,color:Array.from(u),fontSize:l,value:T.join(`
`),position:E,pageIndex:x-1,rect:d.slice(0),rotation:f,annotationElementId:g,id:g,deleted:!1,popupRef:y,comment:A?.str||null,richText:b,creationDate:w,modificationDate:S}}const o=await super.deserialize(t,i,s);return o.#i=t.fontSize,o.color=et.makeHexColor(...t.color),o.#t=be.#h(t.value),o._initialData=r,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=rt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:i,fontSize:this.#i,value:this.#d()});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(t){const{value:i,fontSize:s,color:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==i||t.fontSize!==s||t.color.some((l,u)=>l!==r[u])||t.pageIndex!==o}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(!i)return null;const{style:s}=i;s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.color,i.replaceChildren();for(const r of this.#t.split(`
`)){const o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),i.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class it{static PRECISION=1e-4;toSVGPath(){zt("Abstract method `toSVGPath` must be implemented.")}get box(){zt("Abstract getter `box` must be implemented.")}serialize(t,i){zt("Abstract method `serialize` must be implemented.")}static _rescale(t,i,s,r,o,l){l||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)l[u]=i+t[u]*r,l[u+1]=s+t[u+1]*o;return l}static _rescaleAndSwap(t,i,s,r,o,l){l||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)l[u]=i+t[u+1]*r,l[u+1]=s+t[u]*o;return l}static _translate(t,i,s,r){r||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)r[o]=i+t[o],r[o+1]=s+t[o+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,i,s,r,o){switch(o){case 90:return[1-i/s,t/r];case 180:return[1-t/s,1-i/r];case 270:return[i/s,1-t/r];default:return[t/s,i/r]}}static _normalizePagePoint(t,i,s){switch(s){case 90:return[1-i,t];case 180:return[1-t,1-i];case 270:return[i,1-t];default:return[t,i]}}static createBezierPoints(t,i,s,r,o,l){return[(t+5*s)/6,(i+5*r)/6,(5*s+o)/6,(5*r+l)/6,(s+o)/2,(r+l)/2]}}class Jn{#t;#e=[];#n;#i;#a=[];#r=new Float32Array(18);#s;#o;#c;#l;#d;#h;#f=[];static#m=8;static#g=2;static#u=Jn.#m+Jn.#g;constructor({x:t,y:i},s,r,o,l,u=0){this.#t=s,this.#h=o*r,this.#i=l,this.#r.set([NaN,NaN,NaN,NaN,t,i],6),this.#n=u,this.#l=Jn.#m*r,this.#c=Jn.#u*r,this.#d=r,this.#f.push(t,i)}isEmpty(){return isNaN(this.#r[8])}#p(){const t=this.#r.subarray(4,6),i=this.#r.subarray(16,18),[s,r,o,l]=this.#t;return[(this.#s+(t[0]-i[0])/2-s)/o,(this.#o+(t[1]-i[1])/2-r)/l,(this.#s+(i[0]-t[0])/2-s)/o,(this.#o+(i[1]-t[1])/2-r)/l]}add({x:t,y:i}){this.#s=t,this.#o=i;const[s,r,o,l]=this.#t;let[u,d,f,g]=this.#r.subarray(8,12);const y=t-f,b=i-g,A=Math.hypot(y,b);if(A<this.#c)return!1;const w=A-this.#l,S=w/A,T=S*y,E=S*b;let x=u,C=d;u=f,d=g,f+=T,g+=E,this.#f?.push(t,i);const O=-E/w,L=T/w,N=O*this.#h,z=L*this.#h;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([f+N,g+z],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([f-N,g-z],16),isNaN(this.#r[6])?(this.#a.length===0&&(this.#r.set([u+N,d+z],2),this.#a.push(NaN,NaN,NaN,NaN,(u+N-s)/o,(d+z-r)/l),this.#r.set([u-N,d-z],14),this.#e.push(NaN,NaN,NaN,NaN,(u-N-s)/o,(d-z-r)/l)),this.#r.set([x,C,u,d,f,g],6),!this.isEmpty()):(this.#r.set([x,C,u,d,f,g],6),Math.abs(Math.atan2(C-d,x-u)-Math.atan2(E,T))<Math.PI/2?([u,d,f,g]=this.#r.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((u+f)/2-s)/o,((d+g)/2-r)/l),[u,d,x,C]=this.#r.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((x+u)/2-s)/o,((C+d)/2-r)/l),!0):([x,C,u,d,f,g]=this.#r.subarray(0,6),this.#a.push(((x+5*u)/6-s)/o,((C+5*d)/6-r)/l,((5*u+f)/6-s)/o,((5*d+g)/6-r)/l,((u+f)/2-s)/o,((d+g)/2-r)/l),[f,g,u,d,x,C]=this.#r.subarray(12,18),this.#e.push(((x+5*u)/6-s)/o,((C+5*d)/6-r)/l,((5*u+f)/6-s)/o,((5*d+g)/6-r)/l,((u+f)/2-s)/o,((d+g)/2-r)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#a,i=this.#e;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#y();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#b(s);for(let r=i.length-6;r>=6;r-=6)isNaN(i[r])?s.push(`L${i[r+4]} ${i[r+5]}`):s.push(`C${i[r]} ${i[r+1]} ${i[r+2]} ${i[r+3]} ${i[r+4]} ${i[r+5]}`);return this.#v(s),s.join(" ")}#y(){const[t,i,s,r]=this.#t,[o,l,u,d]=this.#p();return`M${(this.#r[2]-t)/s} ${(this.#r[3]-i)/r} L${(this.#r[4]-t)/s} ${(this.#r[5]-i)/r} L${o} ${l} L${u} ${d} L${(this.#r[16]-t)/s} ${(this.#r[17]-i)/r} L${(this.#r[14]-t)/s} ${(this.#r[15]-i)/r} Z`}#v(t){const i=this.#e;t.push(`L${i[4]} ${i[5]} Z`)}#b(t){const[i,s,r,o]=this.#t,l=this.#r.subarray(4,6),u=this.#r.subarray(16,18),[d,f,g,y]=this.#p();t.push(`L${(l[0]-i)/r} ${(l[1]-s)/o} L${d} ${f} L${g} ${y} L${(u[0]-i)/r} ${(u[1]-s)/o}`)}newFreeDrawOutline(t,i,s,r,o,l){return new Py(t,i,s,r,o,l)}getOutlines(){const t=this.#a,i=this.#e,s=this.#r,[r,o,l,u]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let y=0,b=d.length-2;y<b;y+=2)d[y]=(this.#f[y]-r)/l,d[y+1]=(this.#f[y+1]-o)/u;if(d[d.length-2]=(this.#s-r)/l,d[d.length-1]=(this.#o-o)/u,isNaN(s[6])&&!this.isEmpty())return this.#_(d);const f=new Float32Array(this.#a.length+24+this.#e.length);let g=t.length;for(let y=0;y<g;y+=2){if(isNaN(t[y])){f[y]=f[y+1]=NaN;continue}f[y]=t[y],f[y+1]=t[y+1]}g=this.#S(f,g);for(let y=i.length-6;y>=6;y-=6)for(let b=0;b<6;b+=2){if(isNaN(i[y+b])){f[g]=f[g+1]=NaN,g+=2;continue}f[g]=i[y+b],f[g+1]=i[y+b+1],g+=2}return this.#E(f,g),this.newFreeDrawOutline(f,d,this.#t,this.#d,this.#n,this.#i)}#_(t){const i=this.#r,[s,r,o,l]=this.#t,[u,d,f,g]=this.#p(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(i[2]-s)/o,(i[3]-r)/l,NaN,NaN,NaN,NaN,(i[4]-s)/o,(i[5]-r)/l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,(i[16]-s)/o,(i[17]-r)/l,NaN,NaN,NaN,NaN,(i[14]-s)/o,(i[15]-r)/l],0),this.newFreeDrawOutline(y,t,this.#t,this.#d,this.#n,this.#i)}#E(t,i){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],i),i+=6}#S(t,i){const s=this.#r.subarray(4,6),r=this.#r.subarray(16,18),[o,l,u,d]=this.#t,[f,g,y,b]=this.#p();return t.set([NaN,NaN,NaN,NaN,(s[0]-o)/u,(s[1]-l)/d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(r[0]-o)/u,(r[1]-l)/d],i),i+=24}}class Py extends it{#t;#e=new Float32Array(4);#n;#i;#a;#r;#s;constructor(t,i,s,r,o,l){super(),this.#s=t,this.#a=i,this.#t=s,this.#r=r,this.#n=o,this.#i=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(l);const[u,d,f,g]=this.#e;for(let y=0,b=t.length;y<b;y+=2)t[y]=(t[y]-u)/f,t[y+1]=(t[y+1]-d)/g;for(let y=0,b=i.length;y<b;y+=2)i[y]=(i[y]-u)/f,i[y+1]=(i[y+1]-d)/g}toSVGPath(){const t=[`M${this.#s[4]} ${this.#s[5]}`];for(let i=6,s=this.#s.length;i<s;i+=6){if(isNaN(this.#s[i])){t.push(`L${this.#s[i+4]} ${this.#s[i+5]}`);continue}t.push(`C${this.#s[i]} ${this.#s[i+1]} ${this.#s[i+2]} ${this.#s[i+3]} ${this.#s[i+4]} ${this.#s[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,s,r],o){const l=s-t,u=r-i;let d,f;switch(o){case 0:d=it._rescale(this.#s,t,r,l,-u),f=it._rescale(this.#a,t,r,l,-u);break;case 90:d=it._rescaleAndSwap(this.#s,t,i,l,u),f=it._rescaleAndSwap(this.#a,t,i,l,u);break;case 180:d=it._rescale(this.#s,s,i,-l,u),f=it._rescale(this.#a,s,i,-l,u);break;case 270:d=it._rescaleAndSwap(this.#s,s,r,-l,-u),f=it._rescaleAndSwap(this.#a,s,r,-l,-u);break}return{outline:Array.from(d),points:[Array.from(f)]}}#o(t){const i=this.#s;let s=i[4],r=i[5];const o=[s,r,s,r];let l=s,u=r,d=s,f=r;const g=t?Math.max:Math.min,y=new Float32Array(4);for(let A=6,w=i.length;A<w;A+=6){const S=i[A+4],T=i[A+5];isNaN(i[A])?(et.pointBoundingBox(S,T,o),u>T?(l=S,u=T):u===T&&(l=g(l,S)),f<T?(d=S,f=T):f===T&&(d=g(d,S))):(y[0]=y[1]=1/0,y[2]=y[3]=-1/0,et.bezierBoundingBox(s,r,...i.slice(A,A+6),y),et.rectBoundingBox(y[0],y[1],y[2],y[3],o),u>y[1]?(l=y[0],u=y[1]):u===y[1]&&(l=g(l,y[0])),f<y[3]?(d=y[2],f=y[3]):f===y[3]&&(d=g(d,y[2]))),s=S,r=T}const b=this.#e;b[0]=o[0]-this.#n,b[1]=o[1]-this.#n,b[2]=o[2]-o[0]+2*this.#n,b[3]=o[3]-o[1]+2*this.#n,this.firstPoint=[l,u],this.lastPoint=[d,f]}get box(){return this.#e}newOutliner(t,i,s,r,o,l=0){return new Jn(t,i,s,r,o,l)}getNewOutline(t,i){const[s,r,o,l]=this.#e,[u,d,f,g]=this.#t,y=o*f,b=l*g,A=s*f+u,w=r*g+d,S=this.newOutliner({x:this.#a[0]*y+A,y:this.#a[1]*b+w},this.#t,this.#r,t,this.#i,i??this.#n);for(let T=2;T<this.#a.length;T+=2)S.add({x:this.#a[T]*y+A,y:this.#a[T+1]*b+w});return S.getOutlines()}}class Ah{#t;#e;#n;#i=[];#a=[];constructor(t,i=0,s=0,r=!0){const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:S,y:T,width:E,height:x}of t){const C=Math.floor((S-i)/l)*l,O=Math.ceil((S+E+i)/l)*l,L=Math.floor((T-i)/l)*l,N=Math.ceil((T+x+i)/l)*l,z=[C,L,N,!0],$=[O,L,N,!1];this.#i.push(z,$),et.rectBoundingBox(C,L,O,N,o)}const u=o[2]-o[0]+2*s,d=o[3]-o[1]+2*s,f=o[0]-s,g=o[1]-s;let y=r?-1/0:1/0,b=1/0;const A=this.#i.at(r?-1:-2),w=[A[0],A[2]];for(const S of this.#i){const[T,E,x,C]=S;!C&&r?E<b?(b=E,y=T):E===b&&(y=Math.max(y,T)):C&&!r&&(E<b?(b=E,y=T):E===b&&(y=Math.min(y,T))),S[0]=(T-f)/u,S[1]=(E-g)/d,S[2]=(x-g)/d}this.#t=new Float32Array([f,g,u,d]),this.#e=[y,b],this.#n=w}getOutlines(){this.#i.sort((i,s)=>i[0]-s[0]||i[1]-s[1]||i[2]-s[2]);const t=[];for(const i of this.#i)i[3]?(t.push(...this.#l(i)),this.#o(i)):(this.#c(i),t.push(...this.#l(i)));return this.#r(t)}#r(t){const i=[],s=new Set;for(const l of t){const[u,d,f]=l;i.push([u,d,l],[u,f,l])}i.sort((l,u)=>l[1]-u[1]||l[0]-u[0]);for(let l=0,u=i.length;l<u;l+=2){const d=i[l][2],f=i[l+1][2];d.push(f),f.push(d),s.add(d),s.add(f)}const r=[];let o;for(;s.size>0;){const l=s.values().next().value;let[u,d,f,g,y]=l;s.delete(l);let b=u,A=d;for(o=[u,f],r.push(o);;){let w;if(s.has(g))w=g;else if(s.has(y))w=y;else break;s.delete(w),[u,d,f,g,y]=w,b!==u&&(o.push(b,A,u,A===d?d:f),b=u),A=A===d?f:d}o.push(b,A)}return new K1(r,this.#t,this.#e,this.#n)}#s(t){const i=this.#a;let s=0,r=i.length-1;for(;s<=r;){const o=s+r>>1,l=i[o][0];if(l===t)return o;l<t?s=o+1:r=o-1}return r+1}#o([,t,i]){const s=this.#s(t);this.#a.splice(s,0,[t,i])}#c([,t,i]){const s=this.#s(t);for(let r=s;r<this.#a.length;r++){const[o,l]=this.#a[r];if(o!==t)break;if(o===t&&l===i){this.#a.splice(r,1);return}}for(let r=s-1;r>=0;r--){const[o,l]=this.#a[r];if(o!==t)break;if(o===t&&l===i){this.#a.splice(r,1);return}}}#l(t){const[i,s,r]=t,o=[[i,s,r]],l=this.#s(r);for(let u=0;u<l;u++){const[d,f]=this.#a[u];for(let g=0,y=o.length;g<y;g++){const[,b,A]=o[g];if(!(f<=b||A<=d)){if(b>=d){if(A>f)o[g][1]=f;else{if(y===1)return[];o.splice(g,1),g--,y--}continue}o[g][2]=d,A>f&&o.push([i,f,A])}}}return o}}class K1 extends it{#t;#e;constructor(t,i,s,r){super(),this.#e=t,this.#t=i,this.firstPoint=s,this.lastPoint=r}toSVGPath(){const t=[];for(const i of this.#e){let[s,r]=i;t.push(`M${s} ${r}`);for(let o=2;o<i.length;o+=2){const l=i[o],u=i[o+1];l===s?(t.push(`V${u}`),r=u):u===r&&(t.push(`H${l}`),s=l)}t.push("Z")}return t.join(" ")}serialize([t,i,s,r],o){const l=[],u=s-t,d=r-i;for(const f of this.#e){const g=new Array(f.length);for(let y=0;y<f.length;y+=2)g[y]=t+f[y]*u,g[y+1]=r-f[y+1]*d;l.push(g)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Sh extends Jn{newFreeDrawOutline(t,i,s,r,o,l){return new W1(t,i,s,r,o,l)}}class W1 extends Py{newOutliner(t,i,s,r,o,l=0){return new Sh(t,i,s,r,o,l)}}class ae extends rt{#t=null;#e=0;#n;#i=null;#a=null;#r=null;#s=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#m=null;#g=null;#u="";#p;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=mt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=ae.prototype;return pt(this,"_keyboardManager",new Cr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||ae._defaultColor,this.#p=t.thickness||ae._defaultThickness,this.opacity=t.opacity||ae._defaultOpacity,this.#n=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#b(t),this.#A()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#s=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#A(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new Ah(this.#n,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const i=new Ah(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#r=i.getOutlines();const{firstPoint:s}=this.#l;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:r}=this.#r;this.#m=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:i,clipPathId:s}){this.#l=t;const r=1.5;if(this.#r=t.getNewOutline(this.#p/2+r,.0025),i>=0)this.#d=i,this.#i=s,this.parent.drawLayer.finalizeDraw(i,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},!0);else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:ae.#T(this.#l.box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:ae.#T(this.#r.box,y),path:{d:this.#r.toSVGPath()}})}const[o,l,u,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=u,this.height=d;break;case 90:{const[y,b]=this.parentDimensions;this.x=l,this.y=1-o,this.width=u*b/y,this.height=d*y/b;break}case 180:this.x=1-o,this.y=1-l,this.width=u,this.height=d;break;case 270:{const[y,b]=this.parentDimensions;this.x=1-l,this.y=o,this.width=u*b/y,this.height=d*y/b;break}}const{firstPoint:f}=t;this.#f=[(f[0]-o)/u,(f[1]-l)/d];const{lastPoint:g}=this.#r;this.#m=[(g[0]-o)/u,(g[1]-l)/d]}static initialize(t,i){rt.initialize(t,i),ae._defaultColor||=i.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,i){switch(t){case Ct.HIGHLIGHT_COLOR:ae._defaultColor=i;break;case Ct.HIGHLIGHT_THICKNESS:ae._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(t,i){switch(t){case Ct.HIGHLIGHT_COLOR:this.#_(i);break;case Ct.HIGHLIGHT_THICKNESS:this.#E(i);break}}static get defaultPropertiesToUpdate(){return[[Ct.HIGHLIGHT_COLOR,ae._defaultColor],[Ct.HIGHLIGHT_THICKNESS,ae._defaultThickness]]}get propertiesToUpdate(){return[[Ct.HIGHLIGHT_COLOR,this.color||ae._defaultColor],[Ct.HIGHLIGHT_THICKNESS,this.#p||ae._defaultThickness],[Ct.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#a?.updateColor(this.color),super.onUpdatedColor()}#_(t){const i=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},s=this.color,r=this.opacity;this.addCommands({cmd:i.bind(this,t,ae._defaultOpacity),undo:i.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#E(t){const i=this.#p,s=r=>{this.#p=r,this.#S(r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new di({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#D())}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,this.#D())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#x(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#A(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?this.#x():t&&(this.#A(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),i&&this.select()}#S(t){this.#h&&(this.#b({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())}#x(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#A(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#g=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#i))}static#T([t,i,s,r],o){switch(o){case 90:return[1-i-r,t,r,s];case 180:return[1-t-s,1-i-r,s,r];case 270:return[i,1-t-s,r,s]}return[t,i,s,r]}rotate(t){const{drawLayer:i}=this.parent;let s;this.#h?(t=(t-this.rotation+360)%360,s=ae.#T(this.#l.box,t)):s=ae.#T([this.x,this.y,this.width,this.height],t),i.updateProperties(this.#d,{bbox:s,root:{"data-main-rotation":t}}),i.updateProperties(this.#g,{bbox:ae.#T(this.#r.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const i=this.#c=document.createElement("div");return t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=this.#i,this.setDims(),uy(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#R(t){ae._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#M(!0);break;case 1:case 3:this.#M(!1);break}}#M(t){if(!this.#t)return;const i=window.getSelection();t?i.setPosition(this.#t,this.#e):i.setPosition(this.#s,this.#o)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#h||this.#M(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!t}}))}#D(){return this.#h?this.rotation:0}#P(){if(this.#h)return null;const[t,i]=this.pageDimensions,[s,r]=this.pageTranslation,o=this.#n,l=new Float32Array(o.length*8);let u=0;for(const{x:d,y:f,width:g,height:y}of o){const b=d*t+s,A=(1-f)*i+r;l[u]=l[u+4]=b,l[u+1]=l[u+3]=A,l[u+2]=l[u+6]=b+g*t,l[u+5]=l[u+7]=A-y*i,u+=8}return l}#O(t){return this.#l.serialize(t,this.#D())}static startHighlighting(t,i,{target:s,x:r,y:o}){const{x:l,y:u,width:d,height:f}=s.getBoundingClientRect(),g=new AbortController,y=t.combinedSignal(g),b=A=>{g.abort(),this.#F(t,A)};window.addEventListener("blur",b,{signal:y}),window.addEventListener("pointerup",b,{signal:y}),window.addEventListener("pointerdown",ee,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",fi,{signal:y}),s.addEventListener("pointermove",this.#k.bind(this,t),{signal:y}),this._freeHighlight=new Sh({x:r,y:o},[l,u,d,f],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#k(t,i){this._freeHighlight.add(i)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,i,s){let r=null;if(t instanceof By){const{data:{quadPoints:w,rect:S,rotation:T,id:E,color:x,opacity:C,popupRef:O,richText:L,contentsObj:N,creationDate:z,modificationDate:$},parent:{page:{pageNumber:K}}}=t;r=t={annotationType:mt.HIGHLIGHT,color:Array.from(x),opacity:C,quadPoints:w,boxes:null,pageIndex:K-1,rect:S.slice(0),rotation:T,annotationElementId:E,id:E,deleted:!1,popupRef:O,richText:L,comment:N?.str||null,creationDate:z,modificationDate:$}}else if(t instanceof Uh){const{data:{inkLists:w,rect:S,rotation:T,id:E,color:x,borderStyle:{rawWidth:C},popupRef:O,richText:L,contentsObj:N,creationDate:z,modificationDate:$},parent:{page:{pageNumber:K}}}=t;r=t={annotationType:mt.HIGHLIGHT,color:Array.from(x),thickness:C,inkLists:w,boxes:null,pageIndex:K-1,rect:S.slice(0),rotation:T,annotationElementId:E,id:E,deleted:!1,popupRef:O,richText:L,comment:N?.str||null,creationDate:z,modificationDate:$}}const{color:o,quadPoints:l,inkLists:u,opacity:d}=t,f=await super.deserialize(t,i,s);f.color=et.makeHexColor(...o),f.opacity=d||1,u&&(f.#p=t.thickness),f._initialData=r,t.comment&&f.setCommentData(t);const[g,y]=f.pageDimensions,[b,A]=f.pageTranslation;if(l){const w=f.#n=[];for(let S=0;S<l.length;S+=8)w.push({x:(l[S]-b)/g,y:1-(l[S+1]-A)/y,width:(l[S+2]-l[S])/g,height:(l[S+1]-l[S+5])/y});f.#v(),f.#A(),f.rotate(f.rotation)}else if(u){f.#h=!0;const w=u[0],S={x:w[0]-b,y:y-(w[1]-A)},T=new Sh(S,[0,0,g,y],1,f.#p/2,!0,.001);for(let C=0,O=w.length;C<O;C+=2)S.x=w[C]-b,S.y=y-(w[C+1]-A),T.add(S);const{id:E,clipPathId:x}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:T.toSVGPath()}},!0,!0);f.#b({highlightOutlines:T.getOutlines(),highlightId:E,clipPathId:x}),f.#A(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=rt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:i,opacity:this.opacity,thickness:this.#p,quadPoints:this.#P(),outlines:this.#O(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#B(s)?null:(s.id=this.annotationElementId,s)}#B(t){const{color:i}=this._initialData;return this.hasEditedComment||t.color.some((s,r)=>s!==i[r])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class Fy{#t=Object.create(null);updateProperty(t,i){this[t]=i,this.updateSVGProperty(t,i)}updateProperties(t){if(t)for(const[i,s]of Object.entries(t))i.startsWith("_")||this.updateProperty(i,s)}updateSVGProperty(t,i){this.#t[t]=i}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){zt("Not implemented")}}class Ot extends rt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#a=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#r(t),this.#c())}#r({drawOutlines:t,drawId:i,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=this.#s(t,this.parent),this.#h(t.box)}#s(t,i){const{id:s}=i.drawLayer.draw(Ot._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,i){const s=new Set(Object.keys(t));for(const[r,o]of Object.entries(i))s.has(r)?Object.assign(t[r],o):t[r]=o;return t}static getDefaultDrawingOptions(t){zt("Not implemented")}static get typesMap(){zt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,i){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,i),this._currentParent&&(Ot.#n.updateProperty(s,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,i){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,i)}static get defaultPropertiesToUpdate(){const t=[],i=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)t.push([s,i[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:i}=this;for(const[s,r]of this.constructor.typesMap)t.push([s,i[r]]);return t}_updateProperty(t,i,s){const r=this._drawingOptions,o=r[i],l=u=>{r.updateProperty(i,u);const d=this.#t.updateProperty(i,u);d&&this.#h(d),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,s),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Ot._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#d()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Ot._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#d()),{bbox:this.#f()}))}_onTranslating(t,i){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Ot._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#d(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#o()):t&&(this._uiManager.addShouldRescale(this),this.#c(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),i&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#s(this.#t,t)}}#l([t,i,s,r]){const{parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[i,1-t,s*(l/o),r*(o/l)];case 180:return[1-t,1-i,s,r];case 270:return[1-i,t,s*(l/o),r*(o/l)];default:return[t,i,s,r]}}#d(){const{x:t,y:i,width:s,height:r,parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[1-i,t,s*(o/l),r*(l/o)];case 180:return[1-t,1-i,s,r];case 270:return[i,1-t,s*(o/l),r*(l/o)];default:return[t,i,s,r]}}#h(t){[this.x,this.y,this.width,this.height]=this.#l(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:t,y:i,width:s,height:r,rotation:o,parentRotation:l,parentDimensions:[u,d]}=this;switch((o*4+l)/90){case 1:return[1-i-r,t,r,s];case 2:return[1-t-s,1-i-r,s,r];case 3:return[i,1-t-s,r,s];case 4:return[t,i-s*(u/d),r*(d/u),s*(u/d)];case 5:return[1-i,t,s*(u/d),r*(d/u)];case 6:return[1-t-r*(d/u),1-i,r*(d/u),s*(u/d)];case 7:return[i-s*(u/d),1-t-r*(d/u),s*(u/d),r*(d/u)];case 8:return[t-s,i-r,s,r];case 9:return[1-i,t-s,r,s];case 10:return[1-t,1-i,s,r];case 11:return[i-r,1-t,r,s];case 12:return[t-r*(d/u),i,r*(d/u),s*(u/d)];case 13:return[1-i-s*(u/d),t-r*(d/u),s*(u/d),r*(d/u)];case 14:return[1-t,1-i-s*(u/d),r*(d/u),s*(u/d)];case 15:return[i,1-t,s*(u/d),r*(d/u)];default:return[t,i,s,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Ot._mergeSVGProperties({bbox:this.#f()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,i;this._isCopy&&(t=this.x,i=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");return s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,i),s}static createDrawerInstance(t,i,s,r,o){zt("Not implemented")}static startDrawing(t,i,s,r){const{target:o,offsetX:l,offsetY:u,pointerId:d,pointerType:f}=r;if(kt.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:g}}=t,{width:y,height:b}=o.getBoundingClientRect(),A=Ot.#i=new AbortController,w=t.combinedSignal(A);if(kt.setPointer(f,d),window.addEventListener("pointerup",S=>{kt.isSamePointerIdOrRemove(S.pointerId)&&this._endDraw(S)},{signal:w}),window.addEventListener("pointercancel",S=>{kt.isSamePointerIdOrRemove(S.pointerId)&&this._currentParent.endDrawingSession()},{signal:w}),window.addEventListener("pointerdown",S=>{kt.isSamePointerType(S.pointerType)&&(kt.initializeAndAddPointerId(S.pointerId),Ot.#n.isCancellable()&&(Ot.#n.removeLastElement(),Ot.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",fi,{signal:w}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),o.addEventListener("touchmove",S=>{kt.isSameTimeStamp(S.timeStamp)&&ee(S)},{signal:w}),t.toggleDrawing(),i._editorUndoBar?.hide(),Ot.#n){t.drawLayer.updateProperties(this._currentDrawId,Ot.#n.startNew(l,u,y,b,g));return}i.updateUIForDefaultProperties(this),Ot.#n=this.createDrawerInstance(l,u,y,b,g),Ot.#a=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(Ot.#a.toSVGProperties(),Ot.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(kt.isSameTimeStamp(t.timeStamp),!Ot.#n)return;const{offsetX:i,offsetY:s,pointerId:r}=t;if(kt.isSamePointerId(r)){if(kt.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Ot.#n.add(i,s)),kt.setTimeStamp(t.timeStamp),ee(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,Ot.#n=null,Ot.#a=null,kt.clearTimeStamp()),Ot.#i&&(Ot.#i.abort(),Ot.#i=null,kt.clearPointerIds())}static _endDraw(t){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),t?.target===i.div&&i.drawLayer.updateProperties(this._currentDrawId,Ot.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=Ot.#n,r=this._currentDrawId,o=s.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(r,s.setLastElement(o))},undo:()=>{i.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:Ct.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(Ct.DRAW_STEP),!Ot.#n.isEmpty()){const{pageDimensions:[s,r],scale:o}=i,l=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Ot.#n.getOutlines(s*o,r*o,o,this._INNER_MARGIN),drawingOptions:Ot.#a,mustBeCommitted:!t});return this._cleanup(!0),l}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,i,s,r,o,l){zt("Not implemented")}static async deserialize(t,i,s){const{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:u}}=i.viewport,d=this.deserializeDraw(l,u,r,o,this._INNER_MARGIN,t),f=await super.deserialize(t,i,s);return f.createDrawingOptions(t),f.#r({drawOutlines:d}),f.#c(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[i,s]=this.pageTranslation,[r,o]=this.pageDimensions;return this.#t.serialize([i,s,r,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class Q1{#t=new Float64Array(6);#e;#n;#i;#a;#r;#s="";#o=0;#c=new xr;#l;#d;constructor(t,i,s,r,o,l){this.#l=s,this.#d=r,this.#i=o,this.#a=l,[t,i]=this.#h(t,i);const u=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#r=[t,i],this.#n=[{line:u,points:this.#r}],this.#t.set(u,0)}updateProperty(t,i){t==="stroke-width"&&(this.#a=i)}#h(t,i){return it._normalizePoint(t,i,this.#l,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#r.length<=10}add(t,i){[t,i]=this.#h(t,i);const[s,r,o,l]=this.#t.subarray(2,6),u=t-o,d=i-l;return Math.hypot(this.#l*u,this.#d*d)<=2?null:(this.#r.push(t,i),isNaN(s)?(this.#t.set([o,l,t,i],2),this.#e.push(NaN,NaN,NaN,NaN,t,i),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,r,o,l,t,i],0),this.#e.push(...it.createBezierPoints(s,r,o,l,t,i)),{path:{d:this.toSVGPath()}}))}end(t,i){const s=this.add(t,i);return s||(this.#r.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,i,s,r,o){this.#l=s,this.#d=r,this.#i=o,[t,i]=this.#h(t,i);const l=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#r=[t,i];const u=this.#n.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#n.push({line:l,points:this.#r}),this.#t.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#r=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#c.removeLastElement();this.#n.pop(),this.#s="";for(let t=0,i=this.#n.length;t<i;t++){const{line:s,points:r}=this.#n[t];this.#e=s,this.#r=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const t=it.svgRound(this.#e[4]),i=it.svgRound(this.#e[5]);if(this.#r.length===2)return this.#s=`${this.#s} M ${t} ${i} Z`,this.#s;if(this.#r.length<=6){const r=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,r)} M ${t} ${i}`,this.#o=6}if(this.#r.length===4){const r=it.svgRound(this.#e[10]),o=it.svgRound(this.#e[11]);return this.#s=`${this.#s} L ${r} ${o}`,this.#o=12,this.#s}const s=[];this.#o===0&&(s.push(`M ${t} ${i}`),this.#o=6);for(let r=this.#o,o=this.#e.length;r<o;r+=6){const[l,u,d,f,g,y]=this.#e.slice(r,r+6).map(it.svgRound);s.push(`C${l} ${u} ${d} ${f} ${g} ${y}`)}return this.#s+=s.join(" "),this.#o=this.#e.length,this.#s}getOutlines(t,i,s,r){const o=this.#n.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#n,t,i,s,this.#i,this.#a,r),this.#t=null,this.#e=null,this.#n=null,this.#s=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class xr extends it{#t;#e=0;#n;#i;#a;#r;#s;#o;#c;build(t,i,s,r,o,l,u){this.#a=i,this.#r=s,this.#s=r,this.#o=o,this.#c=l,this.#n=u??0,this.#i=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:i}of this.#i){if(t.push(`M${it.svgRound(i[4])} ${it.svgRound(i[5])}`),i.length===6){t.push("Z");continue}if(i.length===12&&isNaN(i[6])){t.push(`L${it.svgRound(i[10])} ${it.svgRound(i[11])}`);continue}for(let s=6,r=i.length;s<r;s+=6){const[o,l,u,d,f,g]=i.subarray(s,s+6).map(it.svgRound);t.push(`C${o} ${l} ${u} ${d} ${f} ${g}`)}}return t.join("")}serialize([t,i,s,r],o){const l=[],u=[],[d,f,g,y]=this.#d();let b,A,w,S,T,E,x,C,O;switch(this.#o){case 0:O=it._rescale,b=t,A=i+r,w=s,S=-r,T=t+d*s,E=i+(1-f-y)*r,x=t+(d+g)*s,C=i+(1-f)*r;break;case 90:O=it._rescaleAndSwap,b=t,A=i,w=s,S=r,T=t+f*s,E=i+d*r,x=t+(f+y)*s,C=i+(d+g)*r;break;case 180:O=it._rescale,b=t+s,A=i,w=-s,S=r,T=t+(1-d-g)*s,E=i+f*r,x=t+(1-d)*s,C=i+(f+y)*r;break;case 270:O=it._rescaleAndSwap,b=t+s,A=i+r,w=-s,S=-r,T=t+(1-f-y)*s,E=i+(1-d-g)*r,x=t+(1-f)*s,C=i+(1-d)*r;break}for(const{line:L,points:N}of this.#i)l.push(O(L,b,A,w,S,o?new Array(L.length):null)),u.push(O(N,b,A,w,S,o?new Array(N.length):null));return{lines:l,points:u,rect:[T,E,x,C]}}static deserialize(t,i,s,r,o,{paths:{lines:l,points:u},rotation:d,thickness:f}){const g=[];let y,b,A,w,S;switch(d){case 0:S=it._rescale,y=-t/s,b=i/r+1,A=1/s,w=-1/r;break;case 90:S=it._rescaleAndSwap,y=-i/r,b=-t/s,A=1/r,w=1/s;break;case 180:S=it._rescale,y=t/s+1,b=-i/r,A=-1/s,w=1/r;break;case 270:S=it._rescaleAndSwap,y=i/r+1,b=t/s+1,A=-1/r,w=-1/s;break}if(!l){l=[];for(const E of u){const x=E.length;if(x===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(x===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const C=new Float32Array(3*(x-2));l.push(C);let[O,L,N,z]=E.subarray(0,4);C.set([NaN,NaN,NaN,NaN,O,L],0);for(let $=4;$<x;$+=2){const K=E[$],J=E[$+1];C.set(it.createBezierPoints(O,L,N,z,K,J),($-2)*3),[O,L,N,z]=[N,z,K,J]}}}for(let E=0,x=l.length;E<x;E++)g.push({line:S(l[E].map(C=>C??NaN),y,b,A,w),points:S(u[E].map(C=>C??NaN),y,b,A,w)});const T=new this.prototype.constructor;return T.build(g,s,r,1,d,f,o),T}#l(t=this.#c){const i=this.#n+t/2*this.#s;return this.#o%180===0?[i/this.#a,i/this.#r]:[i/this.#r,i/this.#a]}#d(){const[t,i,s,r]=this.#t,[o,l]=this.#l(0);return[t+o,i+l,s-2*o,r-2*l]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#i){if(r.length<=12){for(let u=4,d=r.length;u<d;u+=6)et.pointBoundingBox(r[u],r[u+1],t);continue}let o=r[4],l=r[5];for(let u=6,d=r.length;u<d;u+=6){const[f,g,y,b,A,w]=r.subarray(u,u+6);et.bezierBoundingBox(o,l,f,g,y,b,A,w,t),o=A,l=w}}const[i,s]=this.#l();t[0]=_e(t[0]-i,0,1),t[1]=_e(t[1]-s,0,1),t[2]=_e(t[2]+i,0,1),t[3]=_e(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,i){return t==="stroke-width"?this.#f(i):null}#f(t){const[i,s]=this.#l();this.#c=t;const[r,o]=this.#l(),[l,u]=[r-i,o-s],d=this.#t;return d[0]-=l,d[1]-=u,d[2]+=2*l,d[3]+=2*u,d}updateParentDimensions([t,i],s){const[r,o]=this.#l();this.#a=t,this.#r=i,this.#s=s;const[l,u]=this.#l(),d=l-r,f=u-o,g=this.#t;return g[0]-=d,g[1]-=f,g[2]+=2*d,g[3]+=2*f,g}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(it.svgRound).join(" ")}get defaultProperties(){const[t,i]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(i)}`}}}get rotationTransform(){const[,,t,i]=this.#t;let s=0,r=0,o=0,l=0,u=0,d=0;switch(this.#e){case 90:r=i/t,o=-t/i,u=t;break;case 180:s=-1,l=-1,u=t,d=i;break;case 270:r=-i/t,o=t/i,d=i;break;default:return""}return`matrix(${s} ${r} ${o} ${l} ${it.svgRound(u)} ${it.svgRound(d)})`}getPathResizingSVGProperties([t,i,s,r]){const[o,l]=this.#l(),[u,d,f,g]=this.#t;if(Math.abs(f-o)<=it.PRECISION||Math.abs(g-l)<=it.PRECISION){const S=t+s/2-(u+f/2),T=i+r/2-(d+g/2);return{path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(i)}`,transform:`${this.rotationTransform} translate(${S} ${T})`}}}const y=(s-2*o)/(f-2*o),b=(r-2*l)/(g-2*l),A=f/s,w=g/r;return{path:{"transform-origin":`${it.svgRound(u)} ${it.svgRound(d)}`,transform:`${this.rotationTransform} scale(${A} ${w}) translate(${it.svgRound(o)} ${it.svgRound(l)}) scale(${y} ${b}) translate(${it.svgRound(-o)} ${it.svgRound(-l)})`}}}getPathResizedSVGProperties([t,i,s,r]){const[o,l]=this.#l(),u=this.#t,[d,f,g,y]=u;if(u[0]=t,u[1]=i,u[2]=s,u[3]=r,Math.abs(g-o)<=it.PRECISION||Math.abs(y-l)<=it.PRECISION){const T=t+s/2-(d+g/2),E=i+r/2-(f+y/2);for(const{line:x,points:C}of this.#i)it._translate(x,T,E,x),it._translate(C,T,E,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(s-2*o)/(g-2*o),A=(r-2*l)/(y-2*l),w=-b*(d+o)+t+o,S=-A*(f+l)+i+l;if(b!==1||A!==1||w!==0||S!==0)for(const{line:T,points:E}of this.#i)it._rescale(T,w,S,b,A,T),it._rescale(E,w,S,b,A,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,i],s){const[r,o]=s,l=this.#t,u=t-l[0],d=i-l[1];if(this.#a===r&&this.#r===o)for(const{line:f,points:g}of this.#i)it._translate(f,u,d,f),it._translate(g,u,d,g);else{const f=this.#a/r,g=this.#r/o;this.#a=r,this.#r=o;for(const{line:y,points:b}of this.#i)it._rescale(y,u,d,f,g,y),it._rescale(b,u,d,f,g,b);l[2]*=f,l[3]*=g}return l[0]=t,l[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${it.svgRound(t)} ${it.svgRound(i)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${it.svgRound(t[0])} ${it.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class _l extends Fy{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:rt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,i){t==="stroke-width"&&(i??=this["stroke-width"],i*=this._viewParameters.realScale),super.updateSVGProperty(t,i)}clone(){const t=new _l(this._viewParameters);return t.updateAll(this),t}}class Hh extends Ot{static _type="ink";static _editorType=mt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,i){rt.initialize(t,i),this._defaultDrawingOptions=new _l(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return pt(this,"typesMap",new Map([[Ct.INK_THICKNESS,"stroke-width"],[Ct.INK_COLOR,"stroke"],[Ct.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,i,s,r,o){return new Q1(t,i,s,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,i,s,r,o,l){return xr.deserialize(t,i,s,r,o,l)}static async deserialize(t,i,s){let r=null;if(t instanceof Uh){const{data:{inkLists:l,rect:u,rotation:d,id:f,color:g,opacity:y,borderStyle:{rawWidth:b},popupRef:A,richText:w,contentsObj:S,creationDate:T,modificationDate:E},parent:{page:{pageNumber:x}}}=t;r=t={annotationType:mt.INK,color:Array.from(g),thickness:b,opacity:y,paths:{points:l},boxes:null,pageIndex:x-1,rect:u.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:A,richText:w,comment:S?.str||null,creationDate:T,modificationDate:E}}const o=await super.deserialize(t,i,s);return o._initialData=r,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||=new vr(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ct.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:i,parent:s}=this;i.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:i,opacity:s}){this._drawingOptions=Hh.getDefaultDrawingOptions({stroke:et.makeHexColor(...t),"stroke-width":i,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":o,"stroke-width":l}}=this,u=Object.assign(super.serialize(t),{color:rt._colorManager.convert(r),opacity:o,thickness:l,paths:{lines:i,points:s}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:i,thickness:s,opacity:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,u)=>l!==i[u])||t.thickness!==s||t.opacity!==r||t.pageIndex!==o}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:i,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:i,popup:this.comment}),null}}class wh extends xr{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const el=8,or=3;class Ks{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,i,s,r){return s-=t,r-=i,s===0?r>0?0:4:s===1?r+6:2-r}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,i,s,r,o,l,u){const d=this.#e(s,r,o,l);for(let f=0;f<8;f++){const g=(-f+d-u+16)%8,y=this.#n[2*g],b=this.#n[2*g+1];if(t[(s+y)*i+(r+b)]!==0)return g}return-1}static#a(t,i,s,r,o,l,u){const d=this.#e(s,r,o,l);for(let f=0;f<8;f++){const g=(f+d+u+16)%8,y=this.#n[2*g],b=this.#n[2*g+1];if(t[(s+y)*i+(r+b)]!==0)return g}return-1}static#r(t,i,s,r){const o=t.length,l=new Int32Array(o);for(let g=0;g<o;g++)l[g]=t[g]<=r?1:0;for(let g=1;g<s-1;g++)l[g*i]=l[g*i+i-1]=0;for(let g=0;g<i;g++)l[g]=l[i*s-1-g]=0;let u=1,d;const f=[];for(let g=1;g<s-1;g++){d=1;for(let y=1;y<i-1;y++){const b=g*i+y,A=l[b];if(A===0)continue;let w=g,S=y;if(A===1&&l[b-1]===0)u+=1,S-=1;else if(A>=1&&l[b+1]===0)u+=1,S+=1,A>1&&(d=A);else{A!==1&&(d=Math.abs(A));continue}const T=[y,g],E=S===y+1,x={isHole:E,points:T,id:u,parent:0};f.push(x);let C;for(const Q of f)if(Q.id===d){C=Q;break}C?C.isHole?x.parent=E?C.parent:d:x.parent=E?d:C.parent:x.parent=E?d:0;const O=this.#i(l,i,g,y,w,S,0);if(O===-1){l[b]=-u,l[b]!==1&&(d=Math.abs(l[b]));continue}let L=this.#n[2*O],N=this.#n[2*O+1];const z=g+L,$=y+N;w=z,S=$;let K=g,J=y;for(;;){const Q=this.#a(l,i,K,J,w,S,1);L=this.#n[2*Q],N=this.#n[2*Q+1];const ht=K+L,xt=J+N;T.push(xt,ht);const dt=K*i+J;if(l[dt+1]===0?l[dt]=-u:l[dt]===1&&(l[dt]=u),ht===g&&xt===y&&K===z&&J===$){l[b]!==1&&(d=Math.abs(l[b]));break}else w=K,S=J,K=ht,J=xt}}}return f}static#s(t,i,s,r){if(s-i<=4){for(let z=i;z<s-2;z+=2)r.push(t[z],t[z+1]);return}const o=t[i],l=t[i+1],u=t[s-4]-o,d=t[s-3]-l,f=Math.hypot(u,d),g=u/f,y=d/f,b=g*l-y*o,A=d/u,w=1/f,S=Math.atan(A),T=Math.cos(S),E=Math.sin(S),x=w*(Math.abs(T)+Math.abs(E)),C=w*(1-x+x**2),O=Math.max(Math.atan(Math.abs(E+T)*C),Math.atan(Math.abs(E-T)*C));let L=0,N=i;for(let z=i+2;z<s-2;z+=2){const $=Math.abs(b-g*t[z+1]+y*t[z]);$>L&&(N=z,L=$)}L>(f*O)**2?(this.#s(t,i,N+2,r),this.#s(t,N,s,r)):r.push(o,l)}static#o(t){const i=[],s=t.length;return this.#s(t,0,s,i),i.push(t[s-2],t[s-1]),i.length<=4?null:i}static#c(t,i,s,r,o,l){const u=new Float32Array(l**2),d=-2*r**2,f=l>>1;for(let S=0;S<l;S++){const T=(S-f)**2;for(let E=0;E<l;E++)u[S*l+E]=Math.exp((T+(E-f)**2)/d)}const g=new Float32Array(256),y=-2*o**2;for(let S=0;S<256;S++)g[S]=Math.exp(S**2/y);const b=t.length,A=new Uint8Array(b),w=new Uint32Array(256);for(let S=0;S<s;S++)for(let T=0;T<i;T++){const E=S*i+T,x=t[E];let C=0,O=0;for(let N=0;N<l;N++){const z=S+N-f;if(!(z<0||z>=s))for(let $=0;$<l;$++){const K=T+$-f;if(K<0||K>=i)continue;const J=t[z*i+K],Q=u[N*l+$]*g[Math.abs(J-x)];C+=J*Q,O+=Q}}const L=A[E]=Math.round(C/O);w[L]++}return[A,w]}static#l(t){const i=new Uint32Array(256);for(const s of t)i[s]++;return i}static#d(t){const i=t.length,s=new Uint8ClampedArray(i>>2);let r=-1/0,o=1/0;for(let u=0,d=s.length;u<d;u++){const f=s[u]=t[u<<2];r=Math.max(r,f),o=Math.min(o,f)}const l=255/(r-o);for(let u=0,d=s.length;u<d;u++)s[u]=(s[u]-o)*l;return s}static#h(t){let i,s=-1/0,r=-1/0;const o=t.findIndex(d=>d!==0);let l=o,u=o;for(i=o;i<256;i++){const d=t[i];d>s&&(i-l>r&&(r=i-l,u=i-1),s=d,l=i)}for(i=u-1;i>=0&&!(t[i]>t[i+1]);i--);return i}static#f(t){const i=t,{width:s,height:r}=t,{maxDim:o}=this.#t;let l=s,u=r;if(s>o||r>o){let b=s,A=r,w=Math.log2(Math.max(s,r)/o);const S=Math.floor(w);w=w===S?S-1:S;for(let E=0;E<w;E++){l=Math.ceil(b/2),u=Math.ceil(A/2);const x=new OffscreenCanvas(l,u);x.getContext("2d").drawImage(t,0,0,b,A,0,0,l,u),b=l,A=u,t!==i&&t.close(),t=x.transferToImageBitmap()}const T=Math.min(o/l,o/u);l=Math.round(l*T),u=Math.round(u*T)}const f=new OffscreenCanvas(l,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,l,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,l,u);const g=f.getImageData(0,0,l,u).data;return[this.#d(g),l,u]}static extractContoursFromText(t,{fontFamily:i,fontStyle:s,fontWeight:r},o,l,u,d){let f=new OffscreenCanvas(1,1),g=f.getContext("2d",{alpha:!1});const y=200,b=g.font=`${s} ${r} ${y}px ${i}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:w,actualBoundingBoxAscent:S,actualBoundingBoxDescent:T,fontBoundingBoxAscent:E,fontBoundingBoxDescent:x,width:C}=g.measureText(t),O=1.5,L=Math.ceil(Math.max(Math.abs(A)+Math.abs(w)||0,C)*O),N=Math.ceil(Math.max(Math.abs(S)+Math.abs(T)||y,Math.abs(E)+Math.abs(x)||y)*O);f=new OffscreenCanvas(L,N),g=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=b,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,L,N),g.fillStyle="black",g.fillText(t,L*(O-1)/2,N*(3-O)/2);const z=this.#d(g.getImageData(0,0,L,N).data),$=this.#l(z),K=this.#h($),J=this.#r(z,L,N,K);return this.processDrawnLines({lines:{curves:J,width:L,height:N},pageWidth:o,pageHeight:l,rotation:u,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,i,s,r,o){const[l,u,d]=this.#f(t),[f,g]=this.#c(l,u,d,Math.hypot(u,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),y=this.#h(g),b=this.#r(f,u,d,y);return this.processDrawnLines({lines:{curves:b,width:u,height:d},pageWidth:i,pageHeight:s,rotation:r,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:r,innerMargin:o,mustSmooth:l,areContours:u}){r%180!==0&&([i,s]=[s,i]);const{curves:d,width:f,height:g}=t,y=t.thickness??0,b=[],A=Math.min(i/f,s/g),w=A/i,S=A/s,T=[];for(const{points:x}of d){const C=l?this.#o(x):x;if(!C)continue;T.push(C);const O=C.length,L=new Float32Array(O),N=new Float32Array(3*(O===2?2:O-2));if(b.push({line:N,points:L}),O===2){L[0]=C[0]*w,L[1]=C[1]*S,N.set([NaN,NaN,NaN,NaN,L[0],L[1]],0);continue}let[z,$,K,J]=C;z*=w,$*=S,K*=w,J*=S,L.set([z,$,K,J],0),N.set([NaN,NaN,NaN,NaN,z,$],0);for(let Q=4;Q<O;Q+=2){const ht=L[Q]=C[Q]*w,xt=L[Q+1]=C[Q+1]*S;N.set(it.createBezierPoints(z,$,K,J,ht,xt),(Q-2)*3),[z,$,K,J]=[K,J,ht,xt]}}if(b.length===0)return null;const E=u?new wh:new xr;return E.build(b,i,s,1,r,u?0:y,o),{outline:E,newCurves:T,areContours:u,thickness:y,width:f,height:g}}static async compressSignature({outlines:t,areContours:i,thickness:s,width:r,height:o}){let l=1/0,u=-1/0,d=0;for(const C of t){d+=C.length;for(let O=2,L=C.length;O<L;O++){const N=C[O]-C[O-2];l=Math.min(l,N),u=Math.max(u,N)}}let f;l>=-128&&u<=127?f=Int8Array:l>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const g=t.length,y=el+or*g,b=new Uint32Array(y);let A=0;b[A++]=y*Uint32Array.BYTES_PER_ELEMENT+(d-2*g)*f.BYTES_PER_ELEMENT,b[A++]=0,b[A++]=r,b[A++]=o,b[A++]=i?0:1,b[A++]=Math.max(0,Math.floor(s??0)),b[A++]=g,b[A++]=f.BYTES_PER_ELEMENT;for(const C of t)b[A++]=C.length-2,b[A++]=C[0],b[A++]=C[1];const w=new CompressionStream("deflate-raw"),S=w.writable.getWriter();await S.ready,S.write(b);const T=f.prototype.constructor;for(const C of t){const O=new T(C.length-2);for(let L=2,N=C.length;L<N;L++)O[L-2]=C[L]-C[L-2];S.write(O)}S.close();const E=await new Response(w.readable).arrayBuffer();return new Uint8Array(E).toBase64()}static async decompressSignature(t){try{const i=Uint8Array.fromBase64(t),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),o=r.getWriter();await o.ready,o.write(i).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,u=0;for await(const C of s)l||=new Uint8Array(new Uint32Array(C.buffer,0,4)[0]),l.set(C,u),u+=C.length;const d=new Uint32Array(l.buffer,0,l.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const g=d[2],y=d[3],b=d[4]===0,A=d[5],w=d[6],S=d[7],T=[],E=(el+or*w)*Uint32Array.BYTES_PER_ELEMENT;let x;switch(S){case Int8Array.BYTES_PER_ELEMENT:x=new Int8Array(l.buffer,E);break;case Int16Array.BYTES_PER_ELEMENT:x=new Int16Array(l.buffer,E);break;case Int32Array.BYTES_PER_ELEMENT:x=new Int32Array(l.buffer,E);break}u=0;for(let C=0;C<w;C++){const O=d[or*C+el],L=new Float32Array(O+2);T.push(L);for(let N=0;N<or-1;N++)L[N]=d[or*C+el+N+1];for(let N=0;N<O;N++)L[N+2]=L[N]+x[u++]}return{areContours:b,thickness:A,outlines:T,width:g,height:y}}catch(i){return ft(`decompressSignature: ${i}`),null}}}class jh extends Fy{constructor(){super(),super.updateProperties({fill:rt._defaultLineColor,"stroke-width":0})}clone(){const t=new jh;return t.updateAll(this),t}}class Gh extends _l{constructor(t){super(t),super.updateProperties({stroke:rt._defaultLineColor,"stroke-width":1})}clone(){const t=new Gh(this._viewParameters);return t.updateAll(this),t}}class xi extends Ot{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=mt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,i){rt.initialize(t,i),this._defaultDrawingOptions=new jh,this._defaultDrawnSignatureOptions=new Gh(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!1}static get typesMap(){return pt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const i=t.get("hasDescription");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,i;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,i=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:r,mustSmooth:o,areContours:l,description:u,uuid:d,heightInPage:f}=this.#n,{rawDims:{pageWidth:g,pageHeight:y},rotation:b}=this.parent.viewport,A=Ks.processDrawnLines({lines:r,pageWidth:g,pageHeight:y,rotation:b,innerMargin:xi._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(A,f,u,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,i)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(i=>{i?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:i,thickness:s,width:r,height:o}=this.#n,l=Math.max(r,o),u=Ks.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:s,width:r,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:i});return{areContours:i,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,i,s,r){const{x:o,y:l}=this,{outline:u}=this.#n=t;this.#t=u instanceof wh,this.description=s;let d;this.#t?d=xi.getDefaultDrawingOptions():(d=xi._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:d});const[,f]=this.pageDimensions;let g=i/f;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return Ks.process(t,i,s,r,xi._INNER_MARGIN)}getFromText(t,i){const{rawDims:{pageWidth:s,pageHeight:r},rotation:o}=this.parent.viewport;return Ks.extractContoursFromText(t,i,s,r,o,xi._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return Ks.processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:r,innerMargin:xi._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:i}){t?this._drawingOptions=xi.getDefaultDrawingOptions():(this._drawingOptions=xi._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:i,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:r});return this.addComment(o),t?(o.paths={lines:i,points:s},o.uuid=this.#i,o.isCopy=!0):o.lines=i,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,i,s,r,o,l){return l.areContours?wh.deserialize(t,i,s,r,o,l):xr.deserialize(t,i,s,r,o,l)}static async deserialize(t,i,s){const r=await super.deserialize(t,i,s);return r.#t=t.areContours,r.description=t.accessibilityData?.alt||"",r.#i=t.uuid,r}}class Z1 extends rt{#t=null;#e=null;#n=null;#i=null;#a=null;#r="";#s=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=mt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#a=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,i){rt.initialize(t,i)}static isHandlingMimeForPasting(t){return fh.includes(t)}static paste(t,i){i.pasteEditor({mode:mt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}#h(t,i=!1){if(!t){this.remove();return}this.#t=t.bitmap,i||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#r=t.file.name),this.#g()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:r,width:o,height:l,channels:r.length/(o*l)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const d=u.output;return await this.setGuessedAltText(d),i&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#h(s,!0)).finally(()=>this.#f());return}if(this.#i){const s=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(s).then(r=>this.#h(r)).finally(()=>this.#f());return}if(this.#a){const s=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(s).then(r=>this.#h(r)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=fh.join(",");const i=this._uiManager._signal;this.#n=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(r)}s()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#s?.remove(),this.#s=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#s===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#a||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;return this._isCopy&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#g():this.#m()),this._isCopy&&this._moveAfterPaste(t,i),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,i){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,i);i.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,r&&(this.#t=r),this.#o=!1,this.#g())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},t)}#g(){const{div:t}=this;let{width:i,height:s}=this.#t;const[r,o]=this.pageDimensions,l=.75;if(this.width)i=this.width*r,s=this.height*o;else if(i>l*r||s>l*o){const d=Math.min(l*r/i,l*o/s);i*=d,s*=d}this._uiManager.enableWaiting(!1);const u=this.#s=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=i/r,this.height=s/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&this.div.setAttribute("aria-description",this.#r),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,i,s=!1){t||(t=224);const{width:r,height:o}=this.#t,l=new Ri;let u=this.#t,d=r,f=o,g=null;if(i){if(r>i||o>i){const N=Math.min(i/r,i/o);d=Math.floor(r*N),f=Math.floor(o*N)}g=document.createElement("canvas");const b=g.width=Math.ceil(d*l.sx),A=g.height=Math.ceil(f*l.sy);this.#l||(u=this.#u(b,A));const w=g.getContext("2d");w.filter=this._uiManager.hcmFilter;let S="white",T="#cfcfd8";this._uiManager.hcmFilter!=="none"?T="black":vS.isDarkMode&&(S="#8f8f9d",T="#42414d");const E=15,x=E*l.sx,C=E*l.sy,O=new OffscreenCanvas(x*2,C*2),L=O.getContext("2d");L.fillStyle=S,L.fillRect(0,0,x*2,C*2),L.fillStyle=T,L.fillRect(0,0,x,C),L.fillRect(x,C,x,C),w.fillStyle=w.createPattern(O,"repeat"),w.fillRect(0,0,b,A),w.drawImage(u,0,0,u.width,u.height,0,0,b,A)}let y=null;if(s){let b,A;if(l.symmetric&&u.width<t&&u.height<t)b=u.width,A=u.height;else if(u=this.#t,r>t||o>t){const T=Math.min(t/r,t/o);b=Math.floor(r*T),A=Math.floor(o*T),this.#l||(u=this.#u(b,A))}const S=new OffscreenCanvas(b,A).getContext("2d",{willReadFrequently:!0});S.drawImage(u,0,0,u.width,u.height,0,0,b,A),y={width:b,height:A,data:S.getImageData(0,0,b,A).data}}return{canvas:g,width:d,height:f,imageData:y}}#u(t,i){const{width:s,height:r}=this.#t;let o=s,l=r,u=this.#t;for(;o>2*t||l>2*i;){const d=o,f=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*i&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const g=new OffscreenCanvas(o,l);g.getContext("2d").drawImage(u,0,0,d,f,0,0,o,l),u=g.transferToImageBitmap()}return u}#p(){const[t,i]=this.parentDimensions,{width:s,height:r}=this,o=new Ri,l=Math.ceil(s*t*o.sx),u=Math.ceil(r*i*o.sy),d=this.#s;if(!d||d.width===l&&d.height===u)return;d.width=l,d.height=u;const f=this.#l?this.#t:this.#u(l,u),g=d.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(f,0,0,f.width,f.height,0,0,l,u)}#y(t){if(t){if(this.#l){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=this.#t,i.getContext("2d").drawImage(this.#t,0,0),i.toDataURL()}if(this.#l){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*sa.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*sa.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,o);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,o),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,i,s){let r=null,o=!1;if(t instanceof zy){const{data:{rect:S,rotation:T,id:E,structParent:x,popupRef:C,richText:O,contentsObj:L,creationDate:N,modificationDate:z},container:$,parent:{page:{pageNumber:K}},canvas:J}=t;let Q,ht;J?(delete t.canvas,{id:Q,bitmap:ht}=s.imageManager.getFromCanvas($.id,J),J.remove()):(o=!0,t._hasNoCanvas=!0);const xt=(await i._structTree.getAriaAttributes(`${Ws}${E}`))?.get("aria-label")||"";r=t={annotationType:mt.STAMP,bitmapId:Q,bitmap:ht,pageIndex:K-1,rect:S.slice(0),rotation:T,annotationElementId:E,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:xt},isSvg:!1,structParent:x,popupRef:C,richText:O,comment:L?.str||null,creationDate:N,modificationDate:z}}const l=await super.deserialize(t,i,s),{rect:u,bitmap:d,bitmapUrl:f,bitmapId:g,isSvg:y,accessibilityData:b}=t;o?(s.addMissingCanvas(t.id,l),l.#o=!0):g&&s.imageManager.isValidId(g)?(l.#e=g,d&&(l.#t=d)):l.#i=f,l.#l=y;const[A,w]=l.pageDimensions;return l.width=(u[2]-u[0])/A,l.height=(u[3]-u[1])/w,b&&(l.altTextData=b),l._initialData=r,t.comment&&l.setCommentData(t),l.#d=!!r,l}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(s),t)return s.bitmapUrl=this.#y(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#v(s);return u.isSame?null:(u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(i===null)return s;i.stamps||=new Map;const l=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(this.#e))i.stamps.set(this.#e,{area:l,serialized:s}),s.bitmap=this.#y(!1);else if(this.#l){const u=i.stamps.get(this.#e);l>u.area&&(u.area=l,u.serialized.bitmap.close(),u.serialized.bitmap=this.#y(!1))}return s}#v(t){const{pageIndex:i,accessibilityData:{altText:s}}=this._initialData,r=t.pageIndex===i,o=(t.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Qi{#t;#e=!1;#n=null;#i=null;#a=null;#r=new Map;#s=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#m=null;#g=-1;#u;static _initialized=!1;static#p=new Map([be,Hh,Z1,ae,xi].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:i,div:s,structTreeLayer:r,accessibilityManager:o,annotationLayer:l,drawLayer:u,textLayer:d,viewport:f,l10n:g}){const y=[...Qi.#p.values()];if(!Qi._initialized){Qi._initialized=!0;for(const b of y)b.initialize(g,t)}t.registerEditorTypes(y),this.#u=t,this.pageIndex=i,this.div=s,this.#t=o,this.#n=l,this.viewport=f,this.#h=d,this.drawLayer=u,this._structTree=r,this.#u.addLayer(this)}updatePageIndex(t){this.pageIndex=t}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===mt.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#S(),t){case mt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case mt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case mt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:i}=this.div;if(i.toggle("nonEditing",!1),t===mt.POPUP)i.toggle("commentEditing",!0);else{i.toggle("commentEditing",!1);for(const s of Qi.#p.values())i.toggle(`${s._type}Editing`,t===s._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.togglePointerEvents(t)}get#y(){return this.#r.size!==0?this.#r.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const s of this.#y)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#u.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const i=this.#n;if(i)for(const s of i.getEditableAnnotations()){if(s.hide(),this.#u.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#m){this.#m=new AbortController;const r=this.#u.combinedSignal(this.#m);this.#h.div.addEventListener("pointerdown",o=>{const{clientX:u,clientY:d,timeStamp:f}=o,g=this.#g;if(f-g>500){this.#g=f;return}this.#g=-1;const{classList:y}=this.div;y.toggle("getElements",!0);const b=document.elementsFromPoint(u,d);if(y.toggle("getElements",!1),!this.div.contains(b[0]))return;let A;const w=new RegExp(`^${gr}[0-9]+$`);for(const T of b)if(w.test(T.id)){A=T.id;break}if(!A)return;const S=this.#r.get(A);S?.annotationElementId===null&&(o.stopPropagation(),o.preventDefault(),S.dblclick(o))},{signal:r,capture:!0})}const t=this.#n,i=[];if(t){const r=new Map,o=new Map;for(const u of this.#y){if(u.disableEditing(),!u.annotationElementId){i.push(u);continue}if(u.serialize()!==null){r.set(u.annotationElementId,u);continue}else o.set(u.annotationElementId,u);this.getEditableAnnotation(u.annotationElementId)?.show(),u.remove()}const l=t.getEditableAnnotations();for(const u of l){const{id:d}=u.data;if(this.#u.isDeletedAnnotationElement(d)){u.updateEdited({deleted:!0});continue}let f=o.get(d);if(f){f.resetAnnotationElement(u),f.show(!1),u.show();continue}f=r.get(d),f&&(this.#u.addChangedExistingAnnotation(f),f.renderAnnotationElement(u)&&f.show(!1)),u.show()}}this.#S(),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of Qi.#p.values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(i),this.#o=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:i}=t;if(i===this.#h.div||(i.getAttribute("role")==="img"||i.classList.contains("endOfContent"))&&this.#h.div.contains(i)){const{isMac:s}=pe.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),ae.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#u.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const i=this.pointerup.bind(this);this.div.addEventListener("pointerup",i,{signal:t}),this.div.addEventListener("pointercancel",i,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#r.set(t.id,t);const{annotationElementId:i}=t;i&&this.#u.isDeletedAnnotationElement(i)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#r.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t),rt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const i=t.render();this.div.append(i),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:i}=document;t.div.contains(i)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),i.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const i=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:i,undo:s,mustExec:!1})}getEditorByUID(t){for(const i of this.#r.values())if(i.uid===t)return i;return null}getNextId(){return this.#u.getId()}get#b(){return Qi.#p.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#_(t){const i=this.#b;return i?new i.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,i){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:s,offsetY:r}=this.#E(),o=this.getNextId(),l=this.#_({parent:this,id:o,x:s,y:r,uiManager:this.#u,isCentered:!0,...i});l&&this.add(l)}async deserialize(t){return await Qi.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,i,s={}){const r=this.getNextId(),o=this.#_({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:i,...s});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#E(){const{x:t,y:i,width:s,height:r}=this.boundingClientRect,o=Math.max(0,t),l=Math.max(0,i),u=Math.min(window.innerWidth,t+s),d=Math.min(window.innerHeight,i+r),f=(o+u)/2-t,g=(l+d)/2-i,[y,b]=this.viewport.rotation%180===0?[f,g]:[g,f];return{offsetX:y,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#E(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:i}=pe.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div||!this.#s||(this.#s=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#u.getMode();if(s===mt.STAMP||s===mt.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===mt.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:i}=pe.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div)return;if(this.#s=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const s=this.#u.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const i=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#d=null,this.commitOrRemove())},{signal:i}),this.#b.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:i}=document;this.div.contains(i)&&(this.#d=i);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,i,s){const r=this.#u.findParent(i,s);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const t of this.#r.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#r.clear(),this.#u.removeLayer(this)}#S(){for(const t of this.#r.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,ns(this.div,t);for(const i of this.#u.getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#S();const i=this.viewport.rotation,s=t.rotation;if(this.viewport=t,ns(this.div,{rotation:s}),i!==s)for(const r of this.#r.values())r.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:i}=this.viewport.rawDims;return[t,i]}get scale(){return this.#u.viewParameters.realScale}}class Te{#t=null;#e=new Map;#n=new Map;static#i=0;setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const i of this.#e.values())i.remove(),t.append(i);this.#t=t}}static get _svgFactory(){return pt(this,"_svgFactory",new ul)}static#a(t,[i,s,r,o]){const{style:l}=t;l.top=`${100*s}%`,l.left=`${100*i}%`,l.width=`${100*r}%`,l.height=`${100*o}%`}#r(){const t=Te._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#s(t,i){const s=Te._svgFactory.createElement("clipPath");t.append(s);const r=`clip_${i}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const o=Te._svgFactory.createElement("use");return s.append(o),o.setAttribute("href",`#${i}`),o.classList.add("clip"),r}#o(t,i){for(const[s,r]of Object.entries(i))r===null?t.removeAttribute(s):t.setAttribute(s,r)}draw(t,i=!1,s=!1){const r=Te.#i++,o=this.#r(),l=Te._svgFactory.createElement("defs");o.append(l);const u=Te._svgFactory.createElement("path");l.append(u);const d=`path_${r}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),i&&this.#n.set(r,u);const f=s?this.#s(l,d):null,g=Te._svgFactory.createElement("use");return o.append(g),g.setAttribute("href",`#${d}`),this.updateProperties(o,t),this.#e.set(r,o),{id:r,clipPathId:`url(#${f})`}}drawOutline(t,i){const s=Te.#i++,r=this.#r(),o=Te._svgFactory.createElement("defs");r.append(o);const l=Te._svgFactory.createElement("path");o.append(l);const u=`path_${s}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(i){const y=Te._svgFactory.createElement("mask");o.append(y),d=`mask_${s}`,y.setAttribute("id",d),y.setAttribute("maskUnits","objectBoundingBox");const b=Te._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const A=Te._svgFactory.createElement("use");y.append(A),A.setAttribute("href",`#${u}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const f=Te._svgFactory.createElement("use");r.append(f),f.setAttribute("href",`#${u}`),d&&f.setAttribute("mask",`url(#${d})`);const g=f.cloneNode();return r.append(g),f.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#e.set(s,r),s}finalizeDraw(t,i){this.#n.delete(t),this.updateProperties(t,i)}updateProperties(t,i){if(!i)return;const{root:s,bbox:r,rootClass:o,path:l}=i,u=typeof t=="number"?this.#e.get(t):t;if(u){if(s&&this.#o(u,s),r&&Te.#a(u,r),o){const{classList:d}=u;for(const[f,g]of Object.entries(o))d.toggle(f,g)}if(l){const f=u.firstElementChild.firstElementChild;this.#o(f,l)}}}updateParent(t,i){if(i===this)return;const s=this.#e.get(t);s&&(i.#t.append(s),this.#e.delete(t),i.#e.set(t,s))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Ah};globalThis.pdfjsLib={AbortException:Ln,AnnotationEditorLayer:Qi,AnnotationEditorParamsType:Ct,AnnotationEditorType:mt,AnnotationEditorUIManager:On,AnnotationLayer:Ih,AnnotationMode:Dn,AnnotationType:he,applyOpacity:SS,build:M1,ColorPicker:di,createValidAbsoluteUrl:sy,CSSConstants:AS,DOMSVGFactory:ul,DrawLayer:Te,FeatureTest:pe,fetchData:Er,findContrastColor:wS,getDocument:My,getFilenameFromUrl:pS,getPdfFilenameFromUrl:gS,getRGB:_r,getUuid:ry,getXfaPageViewport:yS,GlobalWorkerOptions:ia,ImageKind:sl,InvalidPDFException:hh,isDataScheme:bl,isPdfFile:Rh,isValidExplicitDest:NS,MathClamp:_e,noContextMenu:fi,normalizeUnicode:dS,OPS:mr,OutputScale:Ri,PagesMapper:Nt,PasswordResponses:iS,PDFDataRangeTransport:Dy,PDFDateString:dh,PDFWorker:br,PermissionFlag:eS,PixelsPerInch:sa,RenderingCancelledException:Dh,renderRichText:ly,ResponseException:ll,setLayerDimensions:ns,shadow:pt,SignatureExtractor:Ks,stopEvent:ee,SupportedImageMimeTypes:fh,TextLayer:Ze,TouchManager:vl,updateUrlHash:ay,Util:et,VerbosityLevel:pl,version:x1,XfaLayer:oy};ia.workerSrc=new URL("/assets/pdf.worker-BA9kU3Pw.mjs",import.meta.url).toString();function J1({url:h}){const t=j.useRef(null);return j.useEffect(()=>{let i=!1;async function s(){try{const o=await(await My(encodeURI(h)).promise).getPage(1),l=t.current;if(!l||i)return;const u=140,d=o.getViewport({scale:1}),f=u/d.width,g=o.getViewport({scale:f});l.width=g.width,l.height=g.height,await o.render({canvasContext:l.getContext("2d"),viewport:g,canvas:l}).promise}catch{}}return s(),()=>{i=!0}},[h]),G.jsx("canvas",{ref:t,style:{width:"70px",height:"90px",borderRadius:"0.25rem",border:"1px solid #333",backgroundColor:"#1e1e1e",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"}})}const lr=[{title:"Publications",description:"Published works in academic journals and conferences.",items:[{title:"PEDAGOGICAL FOUNDATIONS OF ENSURING CYBERSECURITY OF SCHOOLCHILDREN IN THE CONTEXT OF DIGITAL TRANSFORMATION OF EDUCATION",language:"Russian",publication:"ALATOO ACADEMIC STUDIES",date:"January 2026",description:"The article examines the theoretical and pedagogical foundations for developing a culture of cybersecurity among schoolchildren in the context of the digital transformation of education. It substantiates the need to incorporate issues of digital and information security into the content of general education. The key pedagogical approaches, methods, and conditions that ensure the formation of safe and responsible student behavior in the digital environment are analyzed. A model for ensuring students cybersecurity is presented, outlining the stages of cybersecurity developmentfrom defining the goal to achieving the final outcome. Special attention is given to the role of pedagogical support, the improvement of teachers digital literacy, and the creation of an educational environment aimed at fostering students competence in the field of cybersecurity. Practical recommendations for improving the student cybersecurity system are provided. The material offers a conceptual analysis and synthesis of current pedagogical approaches.",pdfUrl:"/PEDAGOGICAL FOUNDATIONS OF ENSURING CYBERSECURITY.pdf"}]},{title:"Research Papers",description:"In-depth research on various topics.",items:[{title:"Harmony or Hegemony: A Study of the Overwhelming Approval of the Social Credit System by Chinese Citizens",language:"English",publication:"Course: Chinas Foreign Policy",date:"December 2024",description:"Despite the diabolical portrayal the Chinese Social Credit System (SCS) received in Western democratic media, recent surveys have shown that less than one percent of Chinese citizens disapprove of the SCS. To find the grassroots of this astounding statistic, this paper delves into Chinese culture, exploring its notion of privacy and civil ideals, as well as analyzing Chinese history, the Chinese crisis of trust, and the radical steps the Chinese Communist Party has taken to bring the situation under control. This paper will argue that Chinese citizens overwhelmingly approve of the SCS because of the Chinese Communist Partys media control, social deterrence, and authority.",pdfUrl:"/Harmony or Hegemony.pdf"}]},{title:"Essays",description:"Long-form analytical and expository writing.",items:[{title:"The Antique and the Modern Promethies",language:"English",publication:"Course: First Year Seminar I",date:"December 2023",description:"Both Prometheus and Frankenstein were oblivious of their mortal status, and deserve punishment from their superiors precisely for their repeated, arrogant, and inconsiderate attempts of grandeur. The essay delves into the predicaments one is funneled into by fate, and whether the individuals themselves can be held accountable for their actions. With thorough and rigorous examination of the conditions Prometheus and Victor Frankenstein discover themselves in, this essay definitively asserts that encountering repercussions from others as a result of ones recklessness is not only justified, but deserved.",pdfUrl:"/The Antique and the Modern Prometheis.pdf"},{title:"Individuals, Injustices, Coping Patterns",language:"English",publication:"Course: First Year Seminar II",date:"May 2024",description:"In an attempt to create a mental safespace from the injustice they suffered with coping mechanisms, individuals perpetrated their own doom precisely because they did not rationalize their emotions.",pdfUrl:"/Individuals, Injustices, Coping Patterns.pdf"}]},{title:"Articles",description:"Opinion pieces and editorials.",items:[{title:"Beyond The Books: Project-Based Learning at AUCA",language:"English",publication:"The Newstar",date:"March 2025",description:"Is Project-Based Learning the superior form of learning? Why do some courses use it and others do not?",pdfUrl:"/Beyond the Books I.pdf"},{title:"The New Advising System Is a Disaster",language:"English",publication:"The Newstar - Rejected",date:"October 2024",description:"In 2024, the administration of the American University of Central Asia removed student-to-student advising. What are the consequences of this decision?",pdfUrl:"/The New Advising System Is a Disaster.pdf"}]}];function tw({item:h,id:t,highlighted:i,expanded:s,onToggle:r}){const o=j.useRef(null),[l,u]=j.useState(24);return j.useEffect(()=>{if(o.current)if(s)u(o.current.scrollHeight);else{const d=o.current.scrollHeight;u(d),setTimeout(()=>{u(24)},10)}},[s]),G.jsxs("div",{id:t,style:{display:"flex",backgroundColor:i?"#1a1a1a":"#141414",borderRadius:"0.75rem",border:i?"2px solid #888":"1px solid #222",overflow:"hidden",transition:"all 0.3s ease",boxShadow:i?"0 0 20px rgba(136, 136, 136, 0.3)":"none"},children:[G.jsxs("div",{style:{flex:1,minWidth:0,padding:"1.5rem",display:"flex",flexDirection:"column",gap:"0.4rem",cursor:"pointer"},onClick:r,children:[G.jsx("h3",{style:{fontFamily:"CustomRegularBold, sans-serif",fontSize:"1.15rem",color:"#ffffff",margin:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:s?"normal":"nowrap",transition:"all 0.3s ease"},children:h.title}),G.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",color:"#888",fontSize:"0.85rem",flexWrap:"wrap"},children:[G.jsx("span",{children:h.language}),G.jsx("span",{style:{color:"#444"},children:""}),G.jsx("span",{children:h.publication}),G.jsx("span",{style:{color:"#444"},children:""}),G.jsx("span",{children:h.date})]}),G.jsx("div",{ref:o,style:{maxHeight:`${l}px`,overflow:"hidden",transition:"max-height 0.3s ease"},children:G.jsx("p",{style:{color:"#aaa",fontSize:"0.9rem",margin:"0.4rem 0 0 0",lineHeight:1.5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:s?"normal":"nowrap"},children:h.description})})]}),G.jsx("div",{style:{width:"100px",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem 0.5rem",flexShrink:0},children:G.jsx(J1,{url:h.pdfUrl})}),G.jsxs("a",{href:encodeURI(h.pdfUrl),target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"0 1.5rem",borderLeft:"1px solid #222",color:"#ffffff",fontSize:"0.95rem",textDecoration:"none",flexShrink:0,transition:"background-color 0.2s ease",whiteSpace:"nowrap"},onMouseEnter:d=>d.currentTarget.style.backgroundColor="#1e1e1e",onMouseLeave:d=>d.currentTarget.style.backgroundColor="transparent",children:[G.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[G.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),G.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),"Read"]})]})}function ew(){const[h,t]=j.useState(lr[0].title),[i,s]=j.useState(null),[r,o]=j.useState(null),l=j.useRef(!1),[u,d]=j.useState(new Set);j.useEffect(()=>{const g=lr.map(b=>b.title.toLowerCase().replace(/\s+/g,"-")),y=new IntersectionObserver(b=>{for(const A of b)if(A.isIntersecting){const w=lr.find(S=>S.title.toLowerCase().replace(/\s+/g,"-")===A.target.id);w&&t(w.title)}},{rootMargin:"-20% 0px -60% 0px"});return g.forEach(b=>{const A=document.getElementById(b);A&&y.observe(A)}),()=>y.disconnect()},[]),j.useEffect(()=>{function g(){l.current||(s(null),o(null))}return window.addEventListener("scroll",g),()=>window.removeEventListener("scroll",g)},[]);function f(g,y=!1){l.current=!0,s(g),o(y?null:g),document.getElementById(g)?.scrollIntoView({behavior:"smooth"}),setTimeout(()=>{l.current=!1},1e3)}return G.jsxs("div",{style:{backgroundColor:"#000000",minHeight:"100vh",padding:"3rem 3rem 3rem 5rem",display:"flex",gap:"3rem"},children:[G.jsx("nav",{style:{position:"fixed",top:"6rem",left:"2rem",display:"flex",flexDirection:"column",gap:"0.75rem",borderRight:"1px solid #222",paddingRight:"1.5rem",zIndex:10,maxHeight:"calc(100vh - 8rem)",overflowY:"auto"},children:lr.map(g=>{const y=g.title.toLowerCase().replace(/\s+/g,"-"),b=i?i===y&&!r:h===g.title&&!r;return G.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[G.jsx("a",{href:`#${y}`,onClick:A=>{A.preventDefault(),f(y,!0)},style:{color:b?"#ffffff":"#666",fontSize:"0.9rem",fontFamily:"CustomRegularBold, sans-serif",textDecoration:"none",padding:"0.3rem 0.75rem",borderRadius:"0.25rem",backgroundColor:b?"#1a1a1a":"transparent",transition:"all 0.2s ease"},onMouseEnter:A=>{b||(A.currentTarget.style.color="#aaa")},onMouseLeave:A=>{b||(A.currentTarget.style.color="#666")},children:g.title}),G.jsx("div",{style:{display:"flex",flexDirection:"column",marginTop:"0.15rem"},children:g.items.map(A=>{const w=`${y}-${A.title.toLowerCase().replace(/\s+/g,"-")}`,S=r===w;return G.jsx("a",{href:`#${w}`,onClick:T=>{T.preventDefault(),f(w)},style:{color:S?"#ffffff":"#555",fontSize:"0.8rem",textDecoration:"none",padding:"0.2rem 0.75rem 0.2rem 1.5rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"160px",backgroundColor:S?"#1a1a1a":"transparent",borderRadius:"0.25rem",transition:"all 0.2s ease"},onMouseEnter:T=>{S||(T.currentTarget.style.color="#aaa")},onMouseLeave:T=>{S||(T.currentTarget.style.color="#555")},children:A.title},A.title)})})]},g.title)})}),G.jsxs("div",{style:{flex:1,minWidth:0,marginLeft:"180px"},children:[G.jsx("h1",{style:{fontFamily:"CustomTitle, sans-serif",fontSize:"2.5rem",color:"#ffffff",margin:"0 0 0.5rem 0"},children:"Academic Writing"}),G.jsx("p",{style:{color:"#888",fontSize:"1.05rem",margin:"0 0 3rem 0"},children:"A collection of publications, research papers, essays, and opinions."}),G.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"3rem"},children:lr.map(g=>G.jsxs("div",{id:g.title.toLowerCase().replace(/\s+/g,"-"),style:{borderLeft:i===g.title.toLowerCase().replace(/\s+/g,"-")?"3px solid #888":"3px solid transparent",paddingLeft:"0.75rem",transition:"all 0.3s ease",backgroundColor:i===g.title.toLowerCase().replace(/\s+/g,"-")?"rgba(136, 136, 136, 0.05)":"transparent",borderRadius:"0.5rem"},children:[G.jsx("h2",{style:{fontFamily:"CustomRegularBold, sans-serif",fontSize:"1.3rem",color:"#ffffff",margin:"0 0 0.25rem 0"},children:g.title}),G.jsx("p",{style:{color:"#666",fontSize:"0.9rem",margin:"0 0 1rem 0"},children:g.description}),G.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:g.items.map((y,b)=>{const A=g.title.toLowerCase().replace(/\s+/g,"-"),w=`${A}-${y.title.toLowerCase().replace(/\s+/g,"-")}`,S=Math.floor(b/2),T=`${A}-row-${S}`,E=u.has(T),x=()=>{d(C=>{const O=new Set(C);return O.has(T)?O.delete(T):O.add(T),O})};return G.jsx(tw,{item:y,id:w,highlighted:i===w,expanded:E,onToggle:x},y.title)})})]},g.title))})]})]})}function iw(){const h=["C","C++","raylib","Qt","Python","Scikit-Learn","Linux","Cisco IOS"],t=["Blender","aseprite","Photoshop","Illustrator","InDesign","VEGAS Pro"],i=["Research"],s=({skill:r})=>G.jsx("span",{style:{display:"inline-block",backgroundColor:"rgba(255,255,255,0.07)",color:"#c8c4bc",padding:"0.5rem 1rem",borderRadius:"9999px",fontSize:"0.75rem",fontFamily:"CustomRegular, sans-serif",marginRight:"0.5rem",marginBottom:"0.5rem",border:"1px solid rgba(255,255,255,0.08)"},children:r});return G.jsx("div",{style:{backgroundColor:"#000000",minHeight:"calc(100vh - 120px)",padding:"3rem",display:"flex",justifyContent:"center"},children:G.jsxs("div",{style:{maxWidth:"70%"},children:[G.jsx("h1",{style:{fontFamily:"CustomTitle, sans-serif",fontSize:"2.5rem",fontWeight:"bold",color:"#ffffff",marginBottom:"2rem",textAlign:"center"},children:"About Me"}),G.jsx("section",{style:{marginTop:"2rem",marginBottom:"2rem"},children:G.jsx("p",{style:{fontFamily:"CustomRegular, sans-serif",fontSize:"1rem",color:"#d4d0c8",lineHeight:"1.6"},children:"My name is Luna Maltseva. I grew up between the United Kingdom and the Kyrgyz Republic, and as a result speak both English and Russian fluently. At the moment, I am doing an undergrad in Software Engineering at the American University of Central Asia, specializing in Data Science. I am active in the field of Civic Engagement, I mentor others as a Peer Advisor and a Teaching Assistant, and I do research, journalism, and business coordination as a side-kick."})}),G.jsxs("section",{style:{marginBottom:"2rem"},children:[G.jsxs("p",{style:{fontFamily:"CustomRegular, sans-serif",fontSize:"1rem",color:"#d4d0c8",lineHeight:"1.6",marginBottom:"1rem"},children:[G.jsx("span",{style:{fontFamily:"CustomRegularBold, sans-serif",fontWeight:"bold",color:"#ffffff"},children:"Programming."})," I have taken an interest in programming at the age of 8. Professionally, I have developed and deployed a data analysis platform for Civic Engagement grants using Python and Google Scripts. As a Teaching Assistant, I have put together course websites and designed educational projects using raylib and Qt. For personal enjoyment, I have put together a then-cutting-edge GPT 2.0 chatbot and created and distributed games."]}),G.jsx("div",{style:{display:"flex",flexWrap:"wrap"},children:h.map(r=>G.jsx(s,{skill:r},r))})]}),G.jsxs("section",{style:{marginBottom:"2rem"},children:[G.jsxs("p",{style:{fontFamily:"CustomRegular, sans-serif",fontSize:"1rem",color:"#d4d0c8",lineHeight:"1.6",marginBottom:"1rem"},children:[G.jsx("span",{style:{fontFamily:"CustomRegularBold, sans-serif",fontWeight:"bold",color:"#ffffff"},children:"Design."}),' By 17, my graphic design skills have passed my threshold of being deemed "professional." I have been commissioned to design university resources, such as promotion materials, presentations, and branding. More often, I do graphic design for my own purposes and/or enjoyment, such as designing template course registration schedules or QR codes for study calendars.']}),G.jsx("div",{style:{display:"flex",flexWrap:"wrap"},children:t.map(r=>G.jsx(s,{skill:r},r))})]}),G.jsxs("section",{style:{marginBottom:"2rem"},children:[G.jsxs("p",{style:{fontFamily:"CustomRegular, sans-serif",fontSize:"1rem",color:"#d4d0c8",lineHeight:"1.6"},children:[G.jsx("span",{style:{fontFamily:"CustomRegularBold, sans-serif",fontWeight:"bold",color:"#ffffff"},children:"Writing."})," In my academic life, I have written essays, research papers, technical documentation, and op-eds. For self-development, I have written pop-journalism articles and am in the process of writing a novel."]}),G.jsx("div",{style:{display:"flex",flexWrap:"wrap"},children:i.map(r=>G.jsx(s,{skill:r},r))})]})]})})}const nw=[{title:"Writing",subtitle:"Essays, research papers, articles, and Thezeraine.",color:"#166cc3",buttons:[{label:"Academic",href:"/writing/academic"},{label:"Fiction",href:"/writing/fiction"}]},{title:"Design",subtitle:"Commissioned and personal design work.",color:"#7820c5",buttons:[{label:"Commissioned",href:"/design/commissioned"},{label:"Personal",href:"/design/personal"}]},{title:"Programming",subtitle:"Software solutions and educational projects.",color:"#3e36a7",buttons:[{label:"Projects",href:"/programming"},{label:"GitHub",href:"https://github.com"}]}];function sw(){return G.jsxs("div",{className:"app-wrapper",children:[G.jsx(WA,{}),G.jsxs(pA,{children:[G.jsx(cr,{path:"/",element:G.jsxs("main",{className:"main-content",children:[G.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:0,background:"#000000"}}),G.jsx(ZA,{}),G.jsx("div",{className:"cards-wrapper",children:G.jsx("div",{className:"cards-container",children:nw.map(h=>G.jsx(JA,{title:h.title,subtitle:h.subtitle,color:h.color,buttons:h.buttons},h.title))})})]})}),G.jsx(cr,{path:"/about",element:G.jsx(iw,{})}),G.jsx(cr,{path:"/writing/fiction",element:G.jsx(tS,{})}),G.jsx(cr,{path:"/writing/academic",element:G.jsx(ew,{})})]}),G.jsx(QA,{})]})}function aw(){const h=Km();return j.useEffect(()=>{const t=sessionStorage.getItem("redirectPath");t&&(sessionStorage.removeItem("redirectPath"),h(t,{replace:!0}))},[h]),null}yv.createRoot(document.getElementById("root")).render(G.jsx(j.StrictMode,{children:G.jsxs(FA,{children:[G.jsx(aw,{}),G.jsx(sw,{})]})}));
