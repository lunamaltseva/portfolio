var Kg=h=>{throw TypeError(h)};var $u=(h,t,i)=>t.has(h)||Kg("Cannot "+i);var $t=(h,t,i)=>($u(h,t,"read from private field"),i?i.call(h):t.get(h)),Ei=(h,t,i)=>t.has(h)?Kg("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(h):t.set(h,i),Fe=(h,t,i,s)=>($u(h,t,"write to private field"),s?s.call(h,i):t.set(h,i),i),xi=(h,t,i)=>($u(h,t,"access private method"),i);var Qg=(h,t,i,s)=>({set _(a){Fe(h,t,a,i)},get _(){return $t(h,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function i(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=i(a);fetch(a.href,o)}})();var Wu={exports:{}},ir={};var Zg;function gv(){if(Zg)return ir;Zg=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(s,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:h,type:s,key:l,ref:a!==void 0?a:null,props:o}}return ir.Fragment=t,ir.jsx=i,ir.jsxs=i,ir}var Jg;function mv(){return Jg||(Jg=1,Wu.exports=gv()),Wu.exports}var R=mv(),Ku={exports:{}},yt={};var tm;function yv(){if(tm)return yt;tm=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function v(D){return D===null||typeof D!="object"?null:(D=b&&D[b]||D["@@iterator"],typeof D=="function"?D:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,x={};function E(D,V,K){this.props=D,this.context=V,this.refs=x,this.updater=K||w}E.prototype.isReactComponent={},E.prototype.setState=function(D,V){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,V,"setState")},E.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function _(){}_.prototype=E.prototype;function T(D,V,K){this.props=D,this.context=V,this.refs=x,this.updater=K||w}var N=T.prototype=new _;N.constructor=T,S(N,E.prototype),N.isPureReactComponent=!0;var L=Array.isArray;function B(){}var F={H:null,A:null,T:null,S:null},$=Object.prototype.hasOwnProperty;function W(D,V,K){var et=K.ref;return{$$typeof:h,type:D,key:V,ref:et!==void 0?et:null,props:K}}function tt(D,V){return W(D.type,V,D.props)}function J(D){return typeof D=="object"&&D!==null&&D.$$typeof===h}function dt(D){var V={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(K){return V[K]})}var xt=/\/+/g;function Q(D,V){return typeof D=="object"&&D!==null&&D.key!=null?dt(""+D.key):V.toString(36)}function rt(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(B,B):(D.status="pending",D.then(function(V){D.status==="pending"&&(D.status="fulfilled",D.value=V)},function(V){D.status==="pending"&&(D.status="rejected",D.reason=V)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function k(D,V,K,et,ct){var ft=typeof D;(ft==="undefined"||ft==="boolean")&&(D=null);var ut=!1;if(D===null)ut=!0;else switch(ft){case"bigint":case"string":case"number":ut=!0;break;case"object":switch(D.$$typeof){case h:case t:ut=!0;break;case g:return ut=D._init,k(ut(D._payload),V,K,et,ct)}}if(ut)return ct=ct(D),ut=et===""?"."+Q(D,0):et,L(ct)?(K="",ut!=null&&(K=ut.replace(xt,"$&/")+"/"),k(ct,V,K,"",function(kn){return kn})):ct!=null&&(J(ct)&&(ct=tt(ct,K+(ct.key==null||D&&D.key===ct.key?"":(""+ct.key).replace(xt,"$&/")+"/")+ut)),V.push(ct)),1;ut=0;var ie=et===""?".":et+":";if(L(D))for(var Gt=0;Gt<D.length;Gt++)et=D[Gt],ft=ie+Q(et,Gt),ut+=k(et,V,K,ft,ct);else if(Gt=v(D),typeof Gt=="function")for(D=Gt.call(D),Gt=0;!(et=D.next()).done;)et=et.value,ft=ie+Q(et,Gt++),ut+=k(et,V,K,ft,ct);else if(ft==="object"){if(typeof D.then=="function")return k(rt(D),V,K,et,ct);throw V=String(D),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return ut}function j(D,V,K){if(D==null)return D;var et=[],ct=0;return k(D,et,"","",function(ft){return V.call(K,ft,ct++)}),et}function Z(D){if(D._status===-1){var V=D._result;V=V(),V.then(function(K){(D._status===0||D._status===-1)&&(D._status=1,D._result=K)},function(K){(D._status===0||D._status===-1)&&(D._status=2,D._result=K)}),D._status===-1&&(D._status=0,D._result=V)}if(D._status===1)return D._result.default;throw D._result}var mt=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},St={map:j,forEach:function(D,V,K){j(D,function(){V.apply(this,arguments)},K)},count:function(D){var V=0;return j(D,function(){V++}),V},toArray:function(D){return j(D,function(V){return V})||[]},only:function(D){if(!J(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return yt.Activity=y,yt.Children=St,yt.Component=E,yt.Fragment=i,yt.Profiler=a,yt.PureComponent=T,yt.StrictMode=s,yt.Suspense=d,yt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,yt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return F.H.useMemoCache(D)}},yt.cache=function(D){return function(){return D.apply(null,arguments)}},yt.cacheSignal=function(){return null},yt.cloneElement=function(D,V,K){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var et=S({},D.props),ct=D.key;if(V!=null)for(ft in V.key!==void 0&&(ct=""+V.key),V)!$.call(V,ft)||ft==="key"||ft==="__self"||ft==="__source"||ft==="ref"&&V.ref===void 0||(et[ft]=V[ft]);var ft=arguments.length-2;if(ft===1)et.children=K;else if(1<ft){for(var ut=Array(ft),ie=0;ie<ft;ie++)ut[ie]=arguments[ie+2];et.children=ut}return W(D.type,ct,et)},yt.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:o,_context:D},D},yt.createElement=function(D,V,K){var et,ct={},ft=null;if(V!=null)for(et in V.key!==void 0&&(ft=""+V.key),V)$.call(V,et)&&et!=="key"&&et!=="__self"&&et!=="__source"&&(ct[et]=V[et]);var ut=arguments.length-2;if(ut===1)ct.children=K;else if(1<ut){for(var ie=Array(ut),Gt=0;Gt<ut;Gt++)ie[Gt]=arguments[Gt+2];ct.children=ie}if(D&&D.defaultProps)for(et in ut=D.defaultProps,ut)ct[et]===void 0&&(ct[et]=ut[et]);return W(D,ft,ct)},yt.createRef=function(){return{current:null}},yt.forwardRef=function(D){return{$$typeof:u,render:D}},yt.isValidElement=J,yt.lazy=function(D){return{$$typeof:g,_payload:{_status:-1,_result:D},_init:Z}},yt.memo=function(D,V){return{$$typeof:f,type:D,compare:V===void 0?null:V}},yt.startTransition=function(D){var V=F.T,K={};F.T=K;try{var et=D(),ct=F.S;ct!==null&&ct(K,et),typeof et=="object"&&et!==null&&typeof et.then=="function"&&et.then(B,mt)}catch(ft){mt(ft)}finally{V!==null&&K.types!==null&&(V.types=K.types),F.T=V}},yt.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},yt.use=function(D){return F.H.use(D)},yt.useActionState=function(D,V,K){return F.H.useActionState(D,V,K)},yt.useCallback=function(D,V){return F.H.useCallback(D,V)},yt.useContext=function(D){return F.H.useContext(D)},yt.useDebugValue=function(){},yt.useDeferredValue=function(D,V){return F.H.useDeferredValue(D,V)},yt.useEffect=function(D,V){return F.H.useEffect(D,V)},yt.useEffectEvent=function(D){return F.H.useEffectEvent(D)},yt.useId=function(){return F.H.useId()},yt.useImperativeHandle=function(D,V,K){return F.H.useImperativeHandle(D,V,K)},yt.useInsertionEffect=function(D,V){return F.H.useInsertionEffect(D,V)},yt.useLayoutEffect=function(D,V){return F.H.useLayoutEffect(D,V)},yt.useMemo=function(D,V){return F.H.useMemo(D,V)},yt.useOptimistic=function(D,V){return F.H.useOptimistic(D,V)},yt.useReducer=function(D,V,K){return F.H.useReducer(D,V,K)},yt.useRef=function(D){return F.H.useRef(D)},yt.useState=function(D){return F.H.useState(D)},yt.useSyncExternalStore=function(D,V,K){return F.H.useSyncExternalStore(D,V,K)},yt.useTransition=function(){return F.H.useTransition()},yt.version="19.2.4",yt}var em;function Mh(){return em||(em=1,Ku.exports=yv()),Ku.exports}var P=Mh(),Qu={exports:{}},nr={},Zu={exports:{}},Ju={};var im;function bv(){return im||(im=1,(function(h){function t(k,j){var Z=k.length;k.push(j);t:for(;0<Z;){var mt=Z-1>>>1,St=k[mt];if(0<a(St,j))k[mt]=j,k[Z]=St,Z=mt;else break t}}function i(k){return k.length===0?null:k[0]}function s(k){if(k.length===0)return null;var j=k[0],Z=k.pop();if(Z!==j){k[0]=Z;t:for(var mt=0,St=k.length,D=St>>>1;mt<D;){var V=2*(mt+1)-1,K=k[V],et=V+1,ct=k[et];if(0>a(K,Z))et<St&&0>a(ct,K)?(k[mt]=ct,k[et]=Z,mt=et):(k[mt]=K,k[V]=Z,mt=V);else if(et<St&&0>a(ct,Z))k[mt]=ct,k[et]=Z,mt=et;else break t}}return j}function a(k,j){var Z=k.sortIndex-j.sortIndex;return Z!==0?Z:k.id-j.id}if(h.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;h.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();h.unstable_now=function(){return l.now()-u}}var d=[],f=[],g=1,y=null,b=3,v=!1,w=!1,S=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function N(k){for(var j=i(f);j!==null;){if(j.callback===null)s(f);else if(j.startTime<=k)s(f),j.sortIndex=j.expirationTime,t(d,j);else break;j=i(f)}}function L(k){if(S=!1,N(k),!w)if(i(d)!==null)w=!0,B||(B=!0,dt());else{var j=i(f);j!==null&&rt(L,j.startTime-k)}}var B=!1,F=-1,$=5,W=-1;function tt(){return x?!0:!(h.unstable_now()-W<$)}function J(){if(x=!1,B){var k=h.unstable_now();W=k;var j=!0;try{t:{w=!1,S&&(S=!1,_(F),F=-1),v=!0;var Z=b;try{e:{for(N(k),y=i(d);y!==null&&!(y.expirationTime>k&&tt());){var mt=y.callback;if(typeof mt=="function"){y.callback=null,b=y.priorityLevel;var St=mt(y.expirationTime<=k);if(k=h.unstable_now(),typeof St=="function"){y.callback=St,N(k),j=!0;break e}y===i(d)&&s(d),N(k)}else s(d);y=i(d)}if(y!==null)j=!0;else{var D=i(f);D!==null&&rt(L,D.startTime-k),j=!1}}break t}finally{y=null,b=Z,v=!1}j=void 0}}finally{j?dt():B=!1}}}var dt;if(typeof T=="function")dt=function(){T(J)};else if(typeof MessageChannel<"u"){var xt=new MessageChannel,Q=xt.port2;xt.port1.onmessage=J,dt=function(){Q.postMessage(null)}}else dt=function(){E(J,0)};function rt(k,j){F=E(function(){k(h.unstable_now())},j)}h.unstable_IdlePriority=5,h.unstable_ImmediatePriority=1,h.unstable_LowPriority=4,h.unstable_NormalPriority=3,h.unstable_Profiling=null,h.unstable_UserBlockingPriority=2,h.unstable_cancelCallback=function(k){k.callback=null},h.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<k?Math.floor(1e3/k):5},h.unstable_getCurrentPriorityLevel=function(){return b},h.unstable_next=function(k){switch(b){case 1:case 2:case 3:var j=3;break;default:j=b}var Z=b;b=j;try{return k()}finally{b=Z}},h.unstable_requestPaint=function(){x=!0},h.unstable_runWithPriority=function(k,j){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var Z=b;b=k;try{return j()}finally{b=Z}},h.unstable_scheduleCallback=function(k,j,Z){var mt=h.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?mt+Z:mt):Z=mt,k){case 1:var St=-1;break;case 2:St=250;break;case 5:St=1073741823;break;case 4:St=1e4;break;default:St=5e3}return St=Z+St,k={id:g++,callback:j,priorityLevel:k,startTime:Z,expirationTime:St,sortIndex:-1},Z>mt?(k.sortIndex=Z,t(f,k),i(d)===null&&k===i(f)&&(S?(_(F),F=-1):S=!0,rt(L,Z-mt))):(k.sortIndex=St,t(d,k),w||v||(w=!0,B||(B=!0,dt()))),k},h.unstable_shouldYield=tt,h.unstable_wrapCallback=function(k){var j=b;return function(){var Z=b;b=j;try{return k.apply(this,arguments)}finally{b=Z}}}})(Ju)),Ju}var nm;function vv(){return nm||(nm=1,Zu.exports=bv()),Zu.exports}var th={exports:{}},_e={};var sm;function Av(){if(sm)return _e;sm=1;var h=Mh();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,f,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:d,containerInfo:f,implementation:g}}var l=h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return _e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,_e.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,g)},_e.flushSync=function(d){var f=l.T,g=s.p;try{if(l.T=null,s.p=2,d)return d()}finally{l.T=f,s.p=g,s.d.f()}},_e.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(d,f))},_e.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},_e.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,v=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?s.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:v}):g==="script"&&s.d.X(d,{crossOrigin:y,integrity:b,fetchPriority:v,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},_e.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);s.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(d)},_e.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin);s.d.L(d,g,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},_e.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=u(f.as,f.crossOrigin);s.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(d)},_e.requestFormReset=function(d){s.d.r(d)},_e.unstable_batchedUpdates=function(d,f){return d(f)},_e.useFormState=function(d,f,g){return l.H.useFormState(d,f,g)},_e.useFormStatus=function(){return l.H.useHostTransitionStatus()},_e.version="19.2.4",_e}var am;function Gm(){if(am)return th.exports;am=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),th.exports=Av(),th.exports}var rm;function Sv(){if(rm)return nr;rm=1;var h=vv(),t=Mh(),i=Gm();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var n=e,r=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(r=n.return),e=n.return;while(e)}return n.tag===3?r:null}function l(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function u(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function d(e){if(o(e)!==e)throw Error(s(188))}function f(e){var n=e.alternate;if(!n){if(n=o(e),n===null)throw Error(s(188));return n!==e?null:e}for(var r=e,c=n;;){var p=r.return;if(p===null)break;var m=p.alternate;if(m===null){if(c=p.return,c!==null){r=c;continue}break}if(p.child===m.child){for(m=p.child;m;){if(m===r)return d(p),e;if(m===c)return d(p),n;m=m.sibling}throw Error(s(188))}if(r.return!==c.return)r=p,c=m;else{for(var A=!1,C=p.child;C;){if(C===r){A=!0,r=p,c=m;break}if(C===c){A=!0,c=p,r=m;break}C=C.sibling}if(!A){for(C=m.child;C;){if(C===r){A=!0,r=m,c=p;break}if(C===c){A=!0,c=m,r=p;break}C=C.sibling}if(!A)throw Error(s(189))}}if(r.alternate!==c)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?e:n}function g(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=g(e),n!==null)return n;e=e.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),T=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),tt=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function dt(e){return e===null||typeof e!="object"?null:(e=J&&e[J]||e["@@iterator"],typeof e=="function"?e:null)}var xt=Symbol.for("react.client.reference");function Q(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===xt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case E:return"Profiler";case x:return"StrictMode";case L:return"Suspense";case B:return"SuspenseList";case W:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case T:return e.displayName||"Context";case _:return(e._context.displayName||"Context")+".Consumer";case N:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case F:return n=e.displayName||null,n!==null?n:Q(e.type)||"Memo";case $:n=e._payload,e=e._init;try{return Q(e(n))}catch{}}return null}var rt=Array.isArray,k=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},mt=[],St=-1;function D(e){return{current:e}}function V(e){0>St||(e.current=mt[St],mt[St]=null,St--)}function K(e,n){St++,mt[St]=e.current,e.current=n}var et=D(null),ct=D(null),ft=D(null),ut=D(null);function ie(e,n){switch(K(ft,n),K(ct,e),K(et,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?vg(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=vg(n),e=Ag(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(et),K(et,e)}function Gt(){V(et),V(ct),V(ft)}function kn(e){e.memoizedState!==null&&K(ut,e);var n=et.current,r=Ag(n,e.type);n!==r&&(K(ct,e),K(et,r))}function nn(e){ct.current===e&&(V(et),V(ct)),ut.current===e&&(V(ut),Za._currentValue=Z)}var Nn,ca;function Li(e){if(Nn===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);Nn=n&&n[1]||"",ca=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Nn+e+ca}var Ll=!1;function Ol(e,n){if(!e||Ll)return"";Ll=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(n){var q=function(){throw Error()};if(Object.defineProperty(q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(q,[])}catch(G){var H=G}Reflect.construct(e,[],q)}else{try{q.call()}catch(G){H=G}e.call(q.prototype)}}else{try{throw Error()}catch(G){H=G}(q=e())&&typeof q.catch=="function"&&q.catch(function(){})}}catch(G){if(G&&H&&typeof G.stack=="string")return[G.stack,H.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),A=m[0],C=m[1];if(A&&C){var M=A.split(`
`),U=C.split(`
`);for(p=c=0;c<M.length&&!M[c].includes("DetermineComponentFrameRoot");)c++;for(;p<U.length&&!U[p].includes("DetermineComponentFrameRoot");)p++;if(c===M.length||p===U.length)for(c=M.length-1,p=U.length-1;1<=c&&0<=p&&M[c]!==U[p];)p--;for(;1<=c&&0<=p;c--,p--)if(M[c]!==U[p]){if(c!==1||p!==1)do if(c--,p--,0>p||M[c]!==U[p]){var X=`
`+M[c].replace(" at new "," at ");return e.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",e.displayName)),X}while(1<=c&&0<=p);break}}}finally{Ll=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?Li(r):""}function Yy(e,n){switch(e.tag){case 26:case 27:case 5:return Li(e.type);case 16:return Li("Lazy");case 13:return e.child!==n&&n!==null?Li("Suspense Fallback"):Li("Suspense");case 19:return Li("SuspenseList");case 0:case 15:return Ol(e.type,!1);case 11:return Ol(e.type.render,!1);case 1:return Ol(e.type,!0);case 31:return Li("Activity");default:return""}}function Wh(e){try{var n="",r=null;do n+=Yy(e,r),r=e,e=e.return;while(e);return n}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var kl=Object.prototype.hasOwnProperty,Nl=h.unstable_scheduleCallback,Bl=h.unstable_cancelCallback,qy=h.unstable_shouldYield,$y=h.unstable_requestPaint,He=h.unstable_now,Wy=h.unstable_getCurrentPriorityLevel,Kh=h.unstable_ImmediatePriority,Qh=h.unstable_UserBlockingPriority,Dr=h.unstable_NormalPriority,Ky=h.unstable_LowPriority,Zh=h.unstable_IdlePriority,Qy=h.log,Zy=h.unstable_setDisableYieldValue,ua=null,je=null;function sn(e){if(typeof Qy=="function"&&Zy(e),je&&typeof je.setStrictMode=="function")try{je.setStrictMode(ua,e)}catch{}}var Ge=Math.clz32?Math.clz32:e0,Jy=Math.log,t0=Math.LN2;function e0(e){return e>>>=0,e===0?32:31-(Jy(e)/t0|0)|0}var Lr=256,Or=262144,kr=4194304;function Bn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Nr(e,n,r){var c=e.pendingLanes;if(c===0)return 0;var p=0,m=e.suspendedLanes,A=e.pingedLanes;e=e.warmLanes;var C=c&134217727;return C!==0?(c=C&~m,c!==0?p=Bn(c):(A&=C,A!==0?p=Bn(A):r||(r=C&~e,r!==0&&(p=Bn(r))))):(C=c&~m,C!==0?p=Bn(C):A!==0?p=Bn(A):r||(r=c&~e,r!==0&&(p=Bn(r)))),p===0?0:n!==0&&n!==p&&(n&m)===0&&(m=p&-p,r=n&-n,m>=r||m===32&&(r&4194048)!==0)?n:p}function ha(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function i0(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jh(){var e=kr;return kr<<=1,(kr&62914560)===0&&(kr=4194304),e}function zl(e){for(var n=[],r=0;31>r;r++)n.push(e);return n}function da(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function n0(e,n,r,c,p,m){var A=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var C=e.entanglements,M=e.expirationTimes,U=e.hiddenUpdates;for(r=A&~r;0<r;){var X=31-Ge(r),q=1<<X;C[X]=0,M[X]=-1;var H=U[X];if(H!==null)for(U[X]=null,X=0;X<H.length;X++){var G=H[X];G!==null&&(G.lane&=-536870913)}r&=~q}c!==0&&td(e,c,0),m!==0&&p===0&&e.tag!==0&&(e.suspendedLanes|=m&~(A&~n))}function td(e,n,r){e.pendingLanes|=n,e.suspendedLanes&=~n;var c=31-Ge(n);e.entangledLanes|=n,e.entanglements[c]=e.entanglements[c]|1073741824|r&261930}function ed(e,n){var r=e.entangledLanes|=n;for(e=e.entanglements;r;){var c=31-Ge(r),p=1<<c;p&n|e[c]&n&&(e[c]|=n),r&=~p}}function id(e,n){var r=n&-n;return r=(r&42)!==0?1:Pl(r),(r&(e.suspendedLanes|n))!==0?0:r}function Pl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function nd(){var e=j.p;return e!==0?e:(e=window.event,e===void 0?32:Gg(e.type))}function sd(e,n){var r=j.p;try{return j.p=e,n()}finally{j.p=r}}var an=Math.random().toString(36).slice(2),ve="__reactFiber$"+an,Le="__reactProps$"+an,us="__reactContainer$"+an,Il="__reactEvents$"+an,s0="__reactListeners$"+an,a0="__reactHandles$"+an,ad="__reactResources$"+an,fa="__reactMarker$"+an;function Ul(e){delete e[ve],delete e[Le],delete e[Il],delete e[s0],delete e[a0]}function hs(e){var n=e[ve];if(n)return n;for(var r=e.parentNode;r;){if(n=r[us]||r[ve]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(e=_g(e);e!==null;){if(r=e[ve])return r;e=_g(e)}return n}e=r,r=e.parentNode}return null}function ds(e){if(e=e[ve]||e[us]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function pa(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function fs(e){var n=e[ad];return n||(n=e[ad]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function ge(e){e[fa]=!0}var rd=new Set,od={};function zn(e,n){ps(e,n),ps(e+"Capture",n)}function ps(e,n){for(od[e]=n,e=0;e<n.length;e++)rd.add(n[e])}var r0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ld={},cd={};function o0(e){return kl.call(cd,e)?!0:kl.call(ld,e)?!1:r0.test(e)?cd[e]=!0:(ld[e]=!0,!1)}function Br(e,n,r){if(o0(n))if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var c=n.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+r)}}function zr(e,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+r)}}function Oi(e,n,r,c){if(c===null)e.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(n,r,""+c)}}function ti(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ud(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function l0(e,n,r){var c=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,m=c.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return p.call(this)},set:function(A){r=""+A,m.call(this,A)}}),Object.defineProperty(e,n,{enumerable:c.enumerable}),{getValue:function(){return r},setValue:function(A){r=""+A},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Hl(e){if(!e._valueTracker){var n=ud(e)?"checked":"value";e._valueTracker=l0(e,n,""+e[n])}}function hd(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var r=n.getValue(),c="";return e&&(c=ud(e)?e.checked?"true":"false":e.value),e=c,e!==r?(n.setValue(e),!0):!1}function Pr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var c0=/[\n"\\]/g;function ei(e){return e.replace(c0,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function jl(e,n,r,c,p,m,A,C){e.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?e.type=A:e.removeAttribute("type"),n!=null?A==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+ti(n)):e.value!==""+ti(n)&&(e.value=""+ti(n)):A!=="submit"&&A!=="reset"||e.removeAttribute("value"),n!=null?Gl(e,A,ti(n)):r!=null?Gl(e,A,ti(r)):c!=null&&e.removeAttribute("value"),p==null&&m!=null&&(e.defaultChecked=!!m),p!=null&&(e.checked=p&&typeof p!="function"&&typeof p!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.name=""+ti(C):e.removeAttribute("name")}function dd(e,n,r,c,p,m,A,C){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),n!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){Hl(e);return}r=r!=null?""+ti(r):"",n=n!=null?""+ti(n):r,C||n===e.value||(e.value=n),e.defaultValue=n}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=C?e.checked:!!c,e.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(e.name=A),Hl(e)}function Gl(e,n,r){n==="number"&&Pr(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function gs(e,n,r,c){if(e=e.options,n){n={};for(var p=0;p<r.length;p++)n["$"+r[p]]=!0;for(r=0;r<e.length;r++)p=n.hasOwnProperty("$"+e[r].value),e[r].selected!==p&&(e[r].selected=p),p&&c&&(e[r].defaultSelected=!0)}else{for(r=""+ti(r),n=null,p=0;p<e.length;p++){if(e[p].value===r){e[p].selected=!0,c&&(e[p].defaultSelected=!0);return}n!==null||e[p].disabled||(n=e[p])}n!==null&&(n.selected=!0)}}function fd(e,n,r){if(n!=null&&(n=""+ti(n),n!==e.value&&(e.value=n),r==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=r!=null?""+ti(r):""}function pd(e,n,r,c){if(n==null){if(c!=null){if(r!=null)throw Error(s(92));if(rt(c)){if(1<c.length)throw Error(s(93));c=c[0]}r=c}r==null&&(r=""),n=r}r=ti(n),e.defaultValue=r,c=e.textContent,c===r&&c!==""&&c!==null&&(e.value=c),Hl(e)}function ms(e,n){if(n){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=n;return}}e.textContent=n}var u0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gd(e,n,r){var c=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":c?e.setProperty(n,r):typeof r!="number"||r===0||u0.has(n)?n==="float"?e.cssFloat=r:e[n]=(""+r).trim():e[n]=r+"px"}function md(e,n,r){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||n!=null&&n.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var p in n)c=n[p],n.hasOwnProperty(p)&&r[p]!==c&&gd(e,p,c)}else for(var m in n)n.hasOwnProperty(m)&&gd(e,m,n[m])}function Vl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var h0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),d0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fr(e){return d0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ki(){}var Xl=null;function Yl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ys=null,bs=null;function yd(e){var n=ds(e);if(n&&(e=n.stateNode)){var r=e[Le]||null;t:switch(e=n.stateNode,n.type){case"input":if(jl(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+ei(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var c=r[n];if(c!==e&&c.form===e.form){var p=c[Le]||null;if(!p)throw Error(s(90));jl(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(n=0;n<r.length;n++)c=r[n],c.form===e.form&&hd(c)}break t;case"textarea":fd(e,r.value,r.defaultValue);break t;case"select":n=r.value,n!=null&&gs(e,!!r.multiple,n,!1)}}}var ql=!1;function bd(e,n,r){if(ql)return e(n,r);ql=!0;try{var c=e(n);return c}finally{if(ql=!1,(ys!==null||bs!==null)&&(To(),ys&&(n=ys,e=bs,bs=ys=null,yd(n),e)))for(n=0;n<e.length;n++)yd(e[n])}}function ga(e,n){var r=e.stateNode;if(r===null)return null;var c=r[Le]||null;if(c===null)return null;r=c[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break t;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(s(231,n,typeof r));return r}var Ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$l=!1;if(Ni)try{var ma={};Object.defineProperty(ma,"passive",{get:function(){$l=!0}}),window.addEventListener("test",ma,ma),window.removeEventListener("test",ma,ma)}catch{$l=!1}var rn=null,Wl=null,Ir=null;function vd(){if(Ir)return Ir;var e,n=Wl,r=n.length,c,p="value"in rn?rn.value:rn.textContent,m=p.length;for(e=0;e<r&&n[e]===p[e];e++);var A=r-e;for(c=1;c<=A&&n[r-c]===p[m-c];c++);return Ir=p.slice(e,1<c?1-c:void 0)}function Ur(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Hr(){return!0}function Ad(){return!1}function Oe(e){function n(r,c,p,m,A){this._reactName=r,this._targetInst=p,this.type=c,this.nativeEvent=m,this.target=A,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(r=e[C],this[C]=r?r(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Hr:Ad,this.isPropagationStopped=Ad,this}return y(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Hr)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Hr)},persist:function(){},isPersistent:Hr}),n}var Pn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jr=Oe(Pn),ya=y({},Pn,{view:0,detail:0}),f0=Oe(ya),Kl,Ql,ba,Gr=y({},ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ba&&(ba&&e.type==="mousemove"?(Kl=e.screenX-ba.screenX,Ql=e.screenY-ba.screenY):Ql=Kl=0,ba=e),Kl)},movementY:function(e){return"movementY"in e?e.movementY:Ql}}),Sd=Oe(Gr),p0=y({},Gr,{dataTransfer:0}),g0=Oe(p0),m0=y({},ya,{relatedTarget:0}),Zl=Oe(m0),y0=y({},Pn,{animationName:0,elapsedTime:0,pseudoElement:0}),b0=Oe(y0),v0=y({},Pn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),A0=Oe(v0),S0=y({},Pn,{data:0}),wd=Oe(S0),w0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},E0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},x0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function C0(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=x0[e])?!!n[e]:!1}function Jl(){return C0}var T0=y({},ya,{key:function(e){if(e.key){var n=w0[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Ur(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?E0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jl,charCode:function(e){return e.type==="keypress"?Ur(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ur(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_0=Oe(T0),M0=y({},Gr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ed=Oe(M0),R0=y({},ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jl}),D0=Oe(R0),L0=y({},Pn,{propertyName:0,elapsedTime:0,pseudoElement:0}),O0=Oe(L0),k0=y({},Gr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),N0=Oe(k0),B0=y({},Pn,{newState:0,oldState:0}),z0=Oe(B0),P0=[9,13,27,32],tc=Ni&&"CompositionEvent"in window,va=null;Ni&&"documentMode"in document&&(va=document.documentMode);var F0=Ni&&"TextEvent"in window&&!va,xd=Ni&&(!tc||va&&8<va&&11>=va),Cd=" ",Td=!1;function _d(e,n){switch(e){case"keyup":return P0.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Md(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vs=!1;function I0(e,n){switch(e){case"compositionend":return Md(n);case"keypress":return n.which!==32?null:(Td=!0,Cd);case"textInput":return e=n.data,e===Cd&&Td?null:e;default:return null}}function U0(e,n){if(vs)return e==="compositionend"||!tc&&_d(e,n)?(e=vd(),Ir=Wl=rn=null,vs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return xd&&n.locale!=="ko"?null:n.data;default:return null}}var H0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rd(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!H0[e.type]:n==="textarea"}function Dd(e,n,r,c){ys?bs?bs.push(c):bs=[c]:ys=c,n=ko(n,"onChange"),0<n.length&&(r=new jr("onChange","change",null,r,c),e.push({event:r,listeners:n}))}var Aa=null,Sa=null;function j0(e){fg(e,0)}function Vr(e){var n=pa(e);if(hd(n))return e}function Ld(e,n){if(e==="change")return n}var Od=!1;if(Ni){var ec;if(Ni){var ic="oninput"in document;if(!ic){var kd=document.createElement("div");kd.setAttribute("oninput","return;"),ic=typeof kd.oninput=="function"}ec=ic}else ec=!1;Od=ec&&(!document.documentMode||9<document.documentMode)}function Nd(){Aa&&(Aa.detachEvent("onpropertychange",Bd),Sa=Aa=null)}function Bd(e){if(e.propertyName==="value"&&Vr(Sa)){var n=[];Dd(n,Sa,e,Yl(e)),bd(j0,n)}}function G0(e,n,r){e==="focusin"?(Nd(),Aa=n,Sa=r,Aa.attachEvent("onpropertychange",Bd)):e==="focusout"&&Nd()}function V0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Vr(Sa)}function X0(e,n){if(e==="click")return Vr(n)}function Y0(e,n){if(e==="input"||e==="change")return Vr(n)}function q0(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Ve=typeof Object.is=="function"?Object.is:q0;function wa(e,n){if(Ve(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var r=Object.keys(e),c=Object.keys(n);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var p=r[c];if(!kl.call(n,p)||!Ve(e[p],n[p]))return!1}return!0}function zd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pd(e,n){var r=zd(e);e=0;for(var c;r;){if(r.nodeType===3){if(c=e+r.textContent.length,e<=n&&c>=n)return{node:r,offset:n-e};e=c}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=zd(r)}}function Fd(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Fd(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Id(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Pr(e.document);n instanceof e.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)e=n.contentWindow;else break;n=Pr(e.document)}return n}function nc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var $0=Ni&&"documentMode"in document&&11>=document.documentMode,As=null,sc=null,Ea=null,ac=!1;function Ud(e,n,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ac||As==null||As!==Pr(c)||(c=As,"selectionStart"in c&&nc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ea&&wa(Ea,c)||(Ea=c,c=ko(sc,"onSelect"),0<c.length&&(n=new jr("onSelect","select",null,n,r),e.push({event:n,listeners:c}),n.target=As)))}function Fn(e,n){var r={};return r[e.toLowerCase()]=n.toLowerCase(),r["Webkit"+e]="webkit"+n,r["Moz"+e]="moz"+n,r}var Ss={animationend:Fn("Animation","AnimationEnd"),animationiteration:Fn("Animation","AnimationIteration"),animationstart:Fn("Animation","AnimationStart"),transitionrun:Fn("Transition","TransitionRun"),transitionstart:Fn("Transition","TransitionStart"),transitioncancel:Fn("Transition","TransitionCancel"),transitionend:Fn("Transition","TransitionEnd")},rc={},Hd={};Ni&&(Hd=document.createElement("div").style,"AnimationEvent"in window||(delete Ss.animationend.animation,delete Ss.animationiteration.animation,delete Ss.animationstart.animation),"TransitionEvent"in window||delete Ss.transitionend.transition);function In(e){if(rc[e])return rc[e];if(!Ss[e])return e;var n=Ss[e],r;for(r in n)if(n.hasOwnProperty(r)&&r in Hd)return rc[e]=n[r];return e}var jd=In("animationend"),Gd=In("animationiteration"),Vd=In("animationstart"),W0=In("transitionrun"),K0=In("transitionstart"),Q0=In("transitioncancel"),Xd=In("transitionend"),Yd=new Map,oc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");oc.push("scrollEnd");function gi(e,n){Yd.set(e,n),zn(n,[e])}var Xr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ii=[],ws=0,lc=0;function Yr(){for(var e=ws,n=lc=ws=0;n<e;){var r=ii[n];ii[n++]=null;var c=ii[n];ii[n++]=null;var p=ii[n];ii[n++]=null;var m=ii[n];if(ii[n++]=null,c!==null&&p!==null){var A=c.pending;A===null?p.next=p:(p.next=A.next,A.next=p),c.pending=p}m!==0&&qd(r,p,m)}}function qr(e,n,r,c){ii[ws++]=e,ii[ws++]=n,ii[ws++]=r,ii[ws++]=c,lc|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function cc(e,n,r,c){return qr(e,n,r,c),$r(e)}function Un(e,n){return qr(e,null,null,n),$r(e)}function qd(e,n,r){e.lanes|=r;var c=e.alternate;c!==null&&(c.lanes|=r);for(var p=!1,m=e.return;m!==null;)m.childLanes|=r,c=m.alternate,c!==null&&(c.childLanes|=r),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(p=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,p&&n!==null&&(p=31-Ge(r),e=m.hiddenUpdates,c=e[p],c===null?e[p]=[n]:c.push(n),n.lane=r|536870912),m):null}function $r(e){if(50<Xa)throw Xa=0,bu=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Es={};function Z0(e,n,r,c){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xe(e,n,r,c){return new Z0(e,n,r,c)}function uc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Bi(e,n){var r=e.alternate;return r===null?(r=Xe(e.tag,n,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=n,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,n=e.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function $d(e,n){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,n=r.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Wr(e,n,r,c,p,m){var A=0;if(c=e,typeof e=="function")uc(e)&&(A=1);else if(typeof e=="string")A=nv(e,r,et.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case W:return e=Xe(31,r,n,p),e.elementType=W,e.lanes=m,e;case S:return Hn(r.children,p,m,n);case x:A=8,p|=24;break;case E:return e=Xe(12,r,n,p|2),e.elementType=E,e.lanes=m,e;case L:return e=Xe(13,r,n,p),e.elementType=L,e.lanes=m,e;case B:return e=Xe(19,r,n,p),e.elementType=B,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case T:A=10;break t;case _:A=9;break t;case N:A=11;break t;case F:A=14;break t;case $:A=16,c=null;break t}A=29,r=Error(s(130,e===null?"null":typeof e,"")),c=null}return n=Xe(A,r,n,p),n.elementType=e,n.type=c,n.lanes=m,n}function Hn(e,n,r,c){return e=Xe(7,e,c,n),e.lanes=r,e}function hc(e,n,r){return e=Xe(6,e,null,n),e.lanes=r,e}function Wd(e){var n=Xe(18,null,null,0);return n.stateNode=e,n}function dc(e,n,r){return n=Xe(4,e.children!==null?e.children:[],e.key,n),n.lanes=r,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Kd=new WeakMap;function ni(e,n){if(typeof e=="object"&&e!==null){var r=Kd.get(e);return r!==void 0?r:(n={value:e,source:n,stack:Wh(n)},Kd.set(e,n),n)}return{value:e,source:n,stack:Wh(n)}}var xs=[],Cs=0,Kr=null,xa=0,si=[],ai=0,on=null,vi=1,Ai="";function zi(e,n){xs[Cs++]=xa,xs[Cs++]=Kr,Kr=e,xa=n}function Qd(e,n,r){si[ai++]=vi,si[ai++]=Ai,si[ai++]=on,on=e;var c=vi;e=Ai;var p=32-Ge(c)-1;c&=~(1<<p),r+=1;var m=32-Ge(n)+p;if(30<m){var A=p-p%5;m=(c&(1<<A)-1).toString(32),c>>=A,p-=A,vi=1<<32-Ge(n)+p|r<<p|c,Ai=m+e}else vi=1<<m|r<<p|c,Ai=e}function fc(e){e.return!==null&&(zi(e,1),Qd(e,1,0))}function pc(e){for(;e===Kr;)Kr=xs[--Cs],xs[Cs]=null,xa=xs[--Cs],xs[Cs]=null;for(;e===on;)on=si[--ai],si[ai]=null,Ai=si[--ai],si[ai]=null,vi=si[--ai],si[ai]=null}function Zd(e,n){si[ai++]=vi,si[ai++]=Ai,si[ai++]=on,vi=n.id,Ai=n.overflow,on=e}var Ae=null,Xt=null,_t=!1,ln=null,ri=!1,gc=Error(s(519));function cn(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ca(ni(n,e)),gc}function Jd(e){var n=e.stateNode,r=e.type,c=e.memoizedProps;switch(n[ve]=e,n[Le]=c,r){case"dialog":Et("cancel",n),Et("close",n);break;case"iframe":case"object":case"embed":Et("load",n);break;case"video":case"audio":for(r=0;r<qa.length;r++)Et(qa[r],n);break;case"source":Et("error",n);break;case"img":case"image":case"link":Et("error",n),Et("load",n);break;case"details":Et("toggle",n);break;case"input":Et("invalid",n),dd(n,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Et("invalid",n);break;case"textarea":Et("invalid",n),pd(n,c.value,c.defaultValue,c.children)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||c.suppressHydrationWarning===!0||yg(n.textContent,r)?(c.popover!=null&&(Et("beforetoggle",n),Et("toggle",n)),c.onScroll!=null&&Et("scroll",n),c.onScrollEnd!=null&&Et("scrollend",n),c.onClick!=null&&(n.onclick=ki),n=!0):n=!1,n||cn(e,!0)}function tf(e){for(Ae=e.return;Ae;)switch(Ae.tag){case 5:case 31:case 13:ri=!1;return;case 27:case 3:ri=!0;return;default:Ae=Ae.return}}function Ts(e){if(e!==Ae)return!1;if(!_t)return tf(e),_t=!0,!1;var n=e.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||ku(e.type,e.memoizedProps)),r=!r),r&&Xt&&cn(e),tf(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Xt=Tg(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Xt=Tg(e)}else n===27?(n=Xt,En(e.type)?(e=Fu,Fu=null,Xt=e):Xt=n):Xt=Ae?li(e.stateNode.nextSibling):null;return!0}function jn(){Xt=Ae=null,_t=!1}function mc(){var e=ln;return e!==null&&(ze===null?ze=e:ze.push.apply(ze,e),ln=null),e}function Ca(e){ln===null?ln=[e]:ln.push(e)}var yc=D(null),Gn=null,Pi=null;function un(e,n,r){K(yc,n._currentValue),n._currentValue=r}function Fi(e){e._currentValue=yc.current,V(yc)}function bc(e,n,r){for(;e!==null;){var c=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),e===r)break;e=e.return}}function vc(e,n,r,c){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var m=p.dependencies;if(m!==null){var A=p.child;m=m.firstContext;t:for(;m!==null;){var C=m;m=p;for(var M=0;M<n.length;M++)if(C.context===n[M]){m.lanes|=r,C=m.alternate,C!==null&&(C.lanes|=r),bc(m.return,r,e),c||(A=null);break t}m=C.next}}else if(p.tag===18){if(A=p.return,A===null)throw Error(s(341));A.lanes|=r,m=A.alternate,m!==null&&(m.lanes|=r),bc(A,r,e),A=null}else A=p.child;if(A!==null)A.return=p;else for(A=p;A!==null;){if(A===e){A=null;break}if(p=A.sibling,p!==null){p.return=A.return,A=p;break}A=A.return}p=A}}function _s(e,n,r,c){e=null;for(var p=n,m=!1;p!==null;){if(!m){if((p.flags&524288)!==0)m=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var A=p.alternate;if(A===null)throw Error(s(387));if(A=A.memoizedProps,A!==null){var C=p.type;Ve(p.pendingProps.value,A.value)||(e!==null?e.push(C):e=[C])}}else if(p===ut.current){if(A=p.alternate,A===null)throw Error(s(387));A.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(e!==null?e.push(Za):e=[Za])}p=p.return}e!==null&&vc(n,e,r,c),n.flags|=262144}function Qr(e){for(e=e.firstContext;e!==null;){if(!Ve(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Vn(e){Gn=e,Pi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Se(e){return ef(Gn,e)}function Zr(e,n){return Gn===null&&Vn(e),ef(e,n)}function ef(e,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},Pi===null){if(e===null)throw Error(s(308));Pi=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Pi=Pi.next=n;return r}var J0=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(r,c){e.push(c)}};this.abort=function(){n.aborted=!0,e.forEach(function(r){return r()})}},tb=h.unstable_scheduleCallback,eb=h.unstable_NormalPriority,re={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ac(){return{controller:new J0,data:new Map,refCount:0}}function Ta(e){e.refCount--,e.refCount===0&&tb(eb,function(){e.controller.abort()})}var _a=null,Sc=0,Ms=0,Rs=null;function ib(e,n){if(_a===null){var r=_a=[];Sc=0,Ms=xu(),Rs={status:"pending",value:void 0,then:function(c){r.push(c)}}}return Sc++,n.then(nf,nf),n}function nf(){if(--Sc===0&&_a!==null){Rs!==null&&(Rs.status="fulfilled");var e=_a;_a=null,Ms=0,Rs=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function nb(e,n){var r=[],c={status:"pending",value:null,reason:null,then:function(p){r.push(p)}};return e.then(function(){c.status="fulfilled",c.value=n;for(var p=0;p<r.length;p++)(0,r[p])(n)},function(p){for(c.status="rejected",c.reason=p,p=0;p<r.length;p++)(0,r[p])(void 0)}),c}var sf=k.S;k.S=function(e,n){Hp=He(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&ib(e,n),sf!==null&&sf(e,n)};var Xn=D(null);function wc(){var e=Xn.current;return e!==null?e:Vt.pooledCache}function Jr(e,n){n===null?K(Xn,Xn.current):K(Xn,n.pool)}function af(){var e=wc();return e===null?null:{parent:re._currentValue,pool:e}}var Ds=Error(s(460)),Ec=Error(s(474)),to=Error(s(542)),eo={then:function(){}};function rf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function of(e,n,r){switch(r=e[r],r===void 0?e.push(n):r!==n&&(n.then(ki,ki),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,cf(e),e;default:if(typeof n.status=="string")n.then(ki,ki);else{if(e=Vt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(c){if(n.status==="pending"){var p=n;p.status="fulfilled",p.value=c}},function(c){if(n.status==="pending"){var p=n;p.status="rejected",p.reason=c}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,cf(e),e}throw qn=n,Ds}}function Yn(e){try{var n=e._init;return n(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(qn=r,Ds):r}}var qn=null;function lf(){if(qn===null)throw Error(s(459));var e=qn;return qn=null,e}function cf(e){if(e===Ds||e===to)throw Error(s(483))}var Ls=null,Ma=0;function io(e){var n=Ma;return Ma+=1,Ls===null&&(Ls=[]),of(Ls,e,n)}function Ra(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function no(e,n){throw n.$$typeof===b?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function uf(e){function n(z,O){if(e){var I=z.deletions;I===null?(z.deletions=[O],z.flags|=16):I.push(O)}}function r(z,O){if(!e)return null;for(;O!==null;)n(z,O),O=O.sibling;return null}function c(z){for(var O=new Map;z!==null;)z.key!==null?O.set(z.key,z):O.set(z.index,z),z=z.sibling;return O}function p(z,O){return z=Bi(z,O),z.index=0,z.sibling=null,z}function m(z,O,I){return z.index=I,e?(I=z.alternate,I!==null?(I=I.index,I<O?(z.flags|=67108866,O):I):(z.flags|=67108866,O)):(z.flags|=1048576,O)}function A(z){return e&&z.alternate===null&&(z.flags|=67108866),z}function C(z,O,I,Y){return O===null||O.tag!==6?(O=hc(I,z.mode,Y),O.return=z,O):(O=p(O,I),O.return=z,O)}function M(z,O,I,Y){var ot=I.type;return ot===S?X(z,O,I.props.children,Y,I.key):O!==null&&(O.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===$&&Yn(ot)===O.type)?(O=p(O,I.props),Ra(O,I),O.return=z,O):(O=Wr(I.type,I.key,I.props,null,z.mode,Y),Ra(O,I),O.return=z,O)}function U(z,O,I,Y){return O===null||O.tag!==4||O.stateNode.containerInfo!==I.containerInfo||O.stateNode.implementation!==I.implementation?(O=dc(I,z.mode,Y),O.return=z,O):(O=p(O,I.children||[]),O.return=z,O)}function X(z,O,I,Y,ot){return O===null||O.tag!==7?(O=Hn(I,z.mode,Y,ot),O.return=z,O):(O=p(O,I),O.return=z,O)}function q(z,O,I){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=hc(""+O,z.mode,I),O.return=z,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case v:return I=Wr(O.type,O.key,O.props,null,z.mode,I),Ra(I,O),I.return=z,I;case w:return O=dc(O,z.mode,I),O.return=z,O;case $:return O=Yn(O),q(z,O,I)}if(rt(O)||dt(O))return O=Hn(O,z.mode,I,null),O.return=z,O;if(typeof O.then=="function")return q(z,io(O),I);if(O.$$typeof===T)return q(z,Zr(z,O),I);no(z,O)}return null}function H(z,O,I,Y){var ot=O!==null?O.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return ot!==null?null:C(z,O,""+I,Y);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case v:return I.key===ot?M(z,O,I,Y):null;case w:return I.key===ot?U(z,O,I,Y):null;case $:return I=Yn(I),H(z,O,I,Y)}if(rt(I)||dt(I))return ot!==null?null:X(z,O,I,Y,null);if(typeof I.then=="function")return H(z,O,io(I),Y);if(I.$$typeof===T)return H(z,O,Zr(z,I),Y);no(z,I)}return null}function G(z,O,I,Y,ot){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return z=z.get(I)||null,C(O,z,""+Y,ot);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case v:return z=z.get(Y.key===null?I:Y.key)||null,M(O,z,Y,ot);case w:return z=z.get(Y.key===null?I:Y.key)||null,U(O,z,Y,ot);case $:return Y=Yn(Y),G(z,O,I,Y,ot)}if(rt(Y)||dt(Y))return z=z.get(I)||null,X(O,z,Y,ot,null);if(typeof Y.then=="function")return G(z,O,I,io(Y),ot);if(Y.$$typeof===T)return G(z,O,I,Zr(O,Y),ot);no(O,Y)}return null}function st(z,O,I,Y){for(var ot=null,Rt=null,at=O,At=O=0,Tt=null;at!==null&&At<I.length;At++){at.index>At?(Tt=at,at=null):Tt=at.sibling;var Dt=H(z,at,I[At],Y);if(Dt===null){at===null&&(at=Tt);break}e&&at&&Dt.alternate===null&&n(z,at),O=m(Dt,O,At),Rt===null?ot=Dt:Rt.sibling=Dt,Rt=Dt,at=Tt}if(At===I.length)return r(z,at),_t&&zi(z,At),ot;if(at===null){for(;At<I.length;At++)at=q(z,I[At],Y),at!==null&&(O=m(at,O,At),Rt===null?ot=at:Rt.sibling=at,Rt=at);return _t&&zi(z,At),ot}for(at=c(at);At<I.length;At++)Tt=G(at,z,At,I[At],Y),Tt!==null&&(e&&Tt.alternate!==null&&at.delete(Tt.key===null?At:Tt.key),O=m(Tt,O,At),Rt===null?ot=Tt:Rt.sibling=Tt,Rt=Tt);return e&&at.forEach(function(Mn){return n(z,Mn)}),_t&&zi(z,At),ot}function ht(z,O,I,Y){if(I==null)throw Error(s(151));for(var ot=null,Rt=null,at=O,At=O=0,Tt=null,Dt=I.next();at!==null&&!Dt.done;At++,Dt=I.next()){at.index>At?(Tt=at,at=null):Tt=at.sibling;var Mn=H(z,at,Dt.value,Y);if(Mn===null){at===null&&(at=Tt);break}e&&at&&Mn.alternate===null&&n(z,at),O=m(Mn,O,At),Rt===null?ot=Mn:Rt.sibling=Mn,Rt=Mn,at=Tt}if(Dt.done)return r(z,at),_t&&zi(z,At),ot;if(at===null){for(;!Dt.done;At++,Dt=I.next())Dt=q(z,Dt.value,Y),Dt!==null&&(O=m(Dt,O,At),Rt===null?ot=Dt:Rt.sibling=Dt,Rt=Dt);return _t&&zi(z,At),ot}for(at=c(at);!Dt.done;At++,Dt=I.next())Dt=G(at,z,At,Dt.value,Y),Dt!==null&&(e&&Dt.alternate!==null&&at.delete(Dt.key===null?At:Dt.key),O=m(Dt,O,At),Rt===null?ot=Dt:Rt.sibling=Dt,Rt=Dt);return e&&at.forEach(function(pv){return n(z,pv)}),_t&&zi(z,At),ot}function Ht(z,O,I,Y){if(typeof I=="object"&&I!==null&&I.type===S&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case v:t:{for(var ot=I.key;O!==null;){if(O.key===ot){if(ot=I.type,ot===S){if(O.tag===7){r(z,O.sibling),Y=p(O,I.props.children),Y.return=z,z=Y;break t}}else if(O.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===$&&Yn(ot)===O.type){r(z,O.sibling),Y=p(O,I.props),Ra(Y,I),Y.return=z,z=Y;break t}r(z,O);break}else n(z,O);O=O.sibling}I.type===S?(Y=Hn(I.props.children,z.mode,Y,I.key),Y.return=z,z=Y):(Y=Wr(I.type,I.key,I.props,null,z.mode,Y),Ra(Y,I),Y.return=z,z=Y)}return A(z);case w:t:{for(ot=I.key;O!==null;){if(O.key===ot)if(O.tag===4&&O.stateNode.containerInfo===I.containerInfo&&O.stateNode.implementation===I.implementation){r(z,O.sibling),Y=p(O,I.children||[]),Y.return=z,z=Y;break t}else{r(z,O);break}else n(z,O);O=O.sibling}Y=dc(I,z.mode,Y),Y.return=z,z=Y}return A(z);case $:return I=Yn(I),Ht(z,O,I,Y)}if(rt(I))return st(z,O,I,Y);if(dt(I)){if(ot=dt(I),typeof ot!="function")throw Error(s(150));return I=ot.call(I),ht(z,O,I,Y)}if(typeof I.then=="function")return Ht(z,O,io(I),Y);if(I.$$typeof===T)return Ht(z,O,Zr(z,I),Y);no(z,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,O!==null&&O.tag===6?(r(z,O.sibling),Y=p(O,I),Y.return=z,z=Y):(r(z,O),Y=hc(I,z.mode,Y),Y.return=z,z=Y),A(z)):r(z,O)}return function(z,O,I,Y){try{Ma=0;var ot=Ht(z,O,I,Y);return Ls=null,ot}catch(at){if(at===Ds||at===to)throw at;var Rt=Xe(29,at,null,z.mode);return Rt.lanes=Y,Rt.return=z,Rt}}}var $n=uf(!0),hf=uf(!1),hn=!1;function xc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Cc(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function dn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function fn(e,n,r){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(Lt&2)!==0){var p=c.pending;return p===null?n.next=n:(n.next=p.next,p.next=n),c.pending=n,n=$r(e),qd(e,null,r),n}return qr(e,c,n,r),$r(e)}function Da(e,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var c=n.lanes;c&=e.pendingLanes,r|=c,n.lanes=r,ed(e,r)}}function Tc(e,n){var r=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var p=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var A={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?p=m=A:m=m.next=A,r=r.next}while(r!==null);m===null?p=m=n:m=m.next=n}else p=m=n;r={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=n:e.next=n,r.lastBaseUpdate=n}var _c=!1;function La(){if(_c){var e=Rs;if(e!==null)throw e}}function Oa(e,n,r,c){_c=!1;var p=e.updateQueue;hn=!1;var m=p.firstBaseUpdate,A=p.lastBaseUpdate,C=p.shared.pending;if(C!==null){p.shared.pending=null;var M=C,U=M.next;M.next=null,A===null?m=U:A.next=U,A=M;var X=e.alternate;X!==null&&(X=X.updateQueue,C=X.lastBaseUpdate,C!==A&&(C===null?X.firstBaseUpdate=U:C.next=U,X.lastBaseUpdate=M))}if(m!==null){var q=p.baseState;A=0,X=U=M=null,C=m;do{var H=C.lane&-536870913,G=H!==C.lane;if(G?(Ct&H)===H:(c&H)===H){H!==0&&H===Ms&&(_c=!0),X!==null&&(X=X.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});t:{var st=e,ht=C;H=n;var Ht=r;switch(ht.tag){case 1:if(st=ht.payload,typeof st=="function"){q=st.call(Ht,q,H);break t}q=st;break t;case 3:st.flags=st.flags&-65537|128;case 0:if(st=ht.payload,H=typeof st=="function"?st.call(Ht,q,H):st,H==null)break t;q=y({},q,H);break t;case 2:hn=!0}}H=C.callback,H!==null&&(e.flags|=64,G&&(e.flags|=8192),G=p.callbacks,G===null?p.callbacks=[H]:G.push(H))}else G={lane:H,tag:C.tag,payload:C.payload,callback:C.callback,next:null},X===null?(U=X=G,M=q):X=X.next=G,A|=H;if(C=C.next,C===null){if(C=p.shared.pending,C===null)break;G=C,C=G.next,G.next=null,p.lastBaseUpdate=G,p.shared.pending=null}}while(!0);X===null&&(M=q),p.baseState=M,p.firstBaseUpdate=U,p.lastBaseUpdate=X,m===null&&(p.shared.lanes=0),bn|=A,e.lanes=A,e.memoizedState=q}}function df(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function ff(e,n){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)df(r[e],n)}var Os=D(null),so=D(0);function pf(e,n){e=qi,K(so,e),K(Os,n),qi=e|n.baseLanes}function Mc(){K(so,qi),K(Os,Os.current)}function Rc(){qi=so.current,V(Os),V(so)}var Ye=D(null),oi=null;function pn(e){var n=e.alternate;K(ne,ne.current&1),K(Ye,e),oi===null&&(n===null||Os.current!==null||n.memoizedState!==null)&&(oi=e)}function Dc(e){K(ne,ne.current),K(Ye,e),oi===null&&(oi=e)}function gf(e){e.tag===22?(K(ne,ne.current),K(Ye,e),oi===null&&(oi=e)):gn()}function gn(){K(ne,ne.current),K(Ye,Ye.current)}function qe(e){V(Ye),oi===e&&(oi=null),V(ne)}var ne=D(0);function ao(e){for(var n=e;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||zu(r)||Pu(r)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Ii=0,vt=null,It=null,oe=null,ro=!1,ks=!1,Wn=!1,oo=0,ka=0,Ns=null,sb=0;function Jt(){throw Error(s(321))}function Lc(e,n){if(n===null)return!1;for(var r=0;r<n.length&&r<e.length;r++)if(!Ve(e[r],n[r]))return!1;return!0}function Oc(e,n,r,c,p,m){return Ii=m,vt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,k.H=e===null||e.memoizedState===null?Zf:qc,Wn=!1,m=r(c,p),Wn=!1,ks&&(m=yf(n,r,c,p)),mf(e),m}function mf(e){k.H=za;var n=It!==null&&It.next!==null;if(Ii=0,oe=It=vt=null,ro=!1,ka=0,Ns=null,n)throw Error(s(300));e===null||le||(e=e.dependencies,e!==null&&Qr(e)&&(le=!0))}function yf(e,n,r,c){vt=e;var p=0;do{if(ks&&(Ns=null),ka=0,ks=!1,25<=p)throw Error(s(301));if(p+=1,oe=It=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}k.H=Jf,m=n(r,c)}while(ks);return m}function ab(){var e=k.H,n=e.useState()[0];return n=typeof n.then=="function"?Na(n):n,e=e.useState()[0],(It!==null?It.memoizedState:null)!==e&&(vt.flags|=1024),n}function kc(){var e=oo!==0;return oo=0,e}function Nc(e,n,r){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~r}function Bc(e){if(ro){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}ro=!1}Ii=0,oe=It=vt=null,ks=!1,ka=oo=0,Ns=null}function Me(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oe===null?vt.memoizedState=oe=e:oe=oe.next=e,oe}function se(){if(It===null){var e=vt.alternate;e=e!==null?e.memoizedState:null}else e=It.next;var n=oe===null?vt.memoizedState:oe.next;if(n!==null)oe=n,It=e;else{if(e===null)throw vt.alternate===null?Error(s(467)):Error(s(310));It=e,e={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},oe===null?vt.memoizedState=oe=e:oe=oe.next=e}return oe}function lo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Na(e){var n=ka;return ka+=1,Ns===null&&(Ns=[]),e=of(Ns,e,n),n=vt,(oe===null?n.memoizedState:oe.next)===null&&(n=n.alternate,k.H=n===null||n.memoizedState===null?Zf:qc),e}function co(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Na(e);if(e.$$typeof===T)return Se(e)}throw Error(s(438,String(e)))}function zc(e){var n=null,r=vt.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var c=vt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(n={data:c.data.map(function(p){return p.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=lo(),vt.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(e),c=0;c<e;c++)r[c]=tt;return n.index++,r}function Ui(e,n){return typeof n=="function"?n(e):n}function uo(e){var n=se();return Pc(n,It,e)}function Pc(e,n,r){var c=e.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=r;var p=e.baseQueue,m=c.pending;if(m!==null){if(p!==null){var A=p.next;p.next=m.next,m.next=A}n.baseQueue=p=m,c.pending=null}if(m=e.baseState,p===null)e.memoizedState=m;else{n=p.next;var C=A=null,M=null,U=n,X=!1;do{var q=U.lane&-536870913;if(q!==U.lane?(Ct&q)===q:(Ii&q)===q){var H=U.revertLane;if(H===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),q===Ms&&(X=!0);else if((Ii&H)===H){U=U.next,H===Ms&&(X=!0);continue}else q={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},M===null?(C=M=q,A=m):M=M.next=q,vt.lanes|=H,bn|=H;q=U.action,Wn&&r(m,q),m=U.hasEagerState?U.eagerState:r(m,q)}else H={lane:q,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},M===null?(C=M=H,A=m):M=M.next=H,vt.lanes|=q,bn|=q;U=U.next}while(U!==null&&U!==n);if(M===null?A=m:M.next=C,!Ve(m,e.memoizedState)&&(le=!0,X&&(r=Rs,r!==null)))throw r;e.memoizedState=m,e.baseState=A,e.baseQueue=M,c.lastRenderedState=m}return p===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function Fc(e){var n=se(),r=n.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var c=r.dispatch,p=r.pending,m=n.memoizedState;if(p!==null){r.pending=null;var A=p=p.next;do m=e(m,A.action),A=A.next;while(A!==p);Ve(m,n.memoizedState)||(le=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),r.lastRenderedState=m}return[m,c]}function bf(e,n,r){var c=vt,p=se(),m=_t;if(m){if(r===void 0)throw Error(s(407));r=r()}else r=n();var A=!Ve((It||p).memoizedState,r);if(A&&(p.memoizedState=r,le=!0),p=p.queue,Hc(Sf.bind(null,c,p,e),[e]),p.getSnapshot!==n||A||oe!==null&&oe.memoizedState.tag&1){if(c.flags|=2048,Bs(9,{destroy:void 0},Af.bind(null,c,p,r,n),null),Vt===null)throw Error(s(349));m||(Ii&127)!==0||vf(c,n,r)}return r}function vf(e,n,r){e.flags|=16384,e={getSnapshot:n,value:r},n=vt.updateQueue,n===null?(n=lo(),vt.updateQueue=n,n.stores=[e]):(r=n.stores,r===null?n.stores=[e]:r.push(e))}function Af(e,n,r,c){n.value=r,n.getSnapshot=c,wf(n)&&Ef(e)}function Sf(e,n,r){return r(function(){wf(n)&&Ef(e)})}function wf(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!Ve(e,r)}catch{return!0}}function Ef(e){var n=Un(e,2);n!==null&&Pe(n,e,2)}function Ic(e){var n=Me();if(typeof e=="function"){var r=e;if(e=r(),Wn){sn(!0);try{r()}finally{sn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:e},n}function xf(e,n,r,c){return e.baseState=r,Pc(e,It,typeof c=="function"?c:Ui)}function rb(e,n,r,c,p){if(po(e))throw Error(s(485));if(e=n.action,e!==null){var m={payload:p,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){m.listeners.push(A)}};k.T!==null?r(!0):m.isTransition=!1,c(m),r=n.pending,r===null?(m.next=n.pending=m,Cf(n,m)):(m.next=r.next,n.pending=r.next=m)}}function Cf(e,n){var r=n.action,c=n.payload,p=e.state;if(n.isTransition){var m=k.T,A={};k.T=A;try{var C=r(p,c),M=k.S;M!==null&&M(A,C),Tf(e,n,C)}catch(U){Uc(e,n,U)}finally{m!==null&&A.types!==null&&(m.types=A.types),k.T=m}}else try{m=r(p,c),Tf(e,n,m)}catch(U){Uc(e,n,U)}}function Tf(e,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){_f(e,n,c)},function(c){return Uc(e,n,c)}):_f(e,n,r)}function _f(e,n,r){n.status="fulfilled",n.value=r,Mf(n),e.state=r,n=e.pending,n!==null&&(r=n.next,r===n?e.pending=null:(r=r.next,n.next=r,Cf(e,r)))}function Uc(e,n,r){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do n.status="rejected",n.reason=r,Mf(n),n=n.next;while(n!==c)}e.action=null}function Mf(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Rf(e,n){return n}function Df(e,n){if(_t){var r=Vt.formState;if(r!==null){t:{var c=vt;if(_t){if(Xt){e:{for(var p=Xt,m=ri;p.nodeType!==8;){if(!m){p=null;break e}if(p=li(p.nextSibling),p===null){p=null;break e}}m=p.data,p=m==="F!"||m==="F"?p:null}if(p){Xt=li(p.nextSibling),c=p.data==="F!";break t}}cn(c)}c=!1}c&&(n=r[0])}}return r=Me(),r.memoizedState=r.baseState=n,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rf,lastRenderedState:n},r.queue=c,r=Wf.bind(null,vt,c),c.dispatch=r,c=Ic(!1),m=Yc.bind(null,vt,!1,c.queue),c=Me(),p={state:n,dispatch:null,action:e,pending:null},c.queue=p,r=rb.bind(null,vt,p,m,r),p.dispatch=r,c.memoizedState=e,[n,r,!1]}function Lf(e){var n=se();return Of(n,It,e)}function Of(e,n,r){if(n=Pc(e,n,Rf)[0],e=uo(Ui)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var c=Na(n)}catch(A){throw A===Ds?to:A}else c=n;n=se();var p=n.queue,m=p.dispatch;return r!==n.memoizedState&&(vt.flags|=2048,Bs(9,{destroy:void 0},ob.bind(null,p,r),null)),[c,m,e]}function ob(e,n){e.action=n}function kf(e){var n=se(),r=It;if(r!==null)return Of(n,r,e);se(),n=n.memoizedState,r=se();var c=r.queue.dispatch;return r.memoizedState=e,[n,c,!1]}function Bs(e,n,r,c){return e={tag:e,create:r,deps:c,inst:n,next:null},n=vt.updateQueue,n===null&&(n=lo(),vt.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=e.next=e:(c=r.next,r.next=e,e.next=c,n.lastEffect=e),e}function Nf(){return se().memoizedState}function ho(e,n,r,c){var p=Me();vt.flags|=e,p.memoizedState=Bs(1|n,{destroy:void 0},r,c===void 0?null:c)}function fo(e,n,r,c){var p=se();c=c===void 0?null:c;var m=p.memoizedState.inst;It!==null&&c!==null&&Lc(c,It.memoizedState.deps)?p.memoizedState=Bs(n,m,r,c):(vt.flags|=e,p.memoizedState=Bs(1|n,m,r,c))}function Bf(e,n){ho(8390656,8,e,n)}function Hc(e,n){fo(2048,8,e,n)}function lb(e){vt.flags|=4;var n=vt.updateQueue;if(n===null)n=lo(),vt.updateQueue=n,n.events=[e];else{var r=n.events;r===null?n.events=[e]:r.push(e)}}function zf(e){var n=se().memoizedState;return lb({ref:n,nextImpl:e}),function(){if((Lt&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function Pf(e,n){return fo(4,2,e,n)}function Ff(e,n){return fo(4,4,e,n)}function If(e,n){if(typeof n=="function"){e=e();var r=n(e);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Uf(e,n,r){r=r!=null?r.concat([e]):null,fo(4,4,If.bind(null,n,e),r)}function jc(){}function Hf(e,n){var r=se();n=n===void 0?null:n;var c=r.memoizedState;return n!==null&&Lc(n,c[1])?c[0]:(r.memoizedState=[e,n],e)}function jf(e,n){var r=se();n=n===void 0?null:n;var c=r.memoizedState;if(n!==null&&Lc(n,c[1]))return c[0];if(c=e(),Wn){sn(!0);try{e()}finally{sn(!1)}}return r.memoizedState=[c,n],c}function Gc(e,n,r){return r===void 0||(Ii&1073741824)!==0&&(Ct&261930)===0?e.memoizedState=n:(e.memoizedState=r,e=Gp(),vt.lanes|=e,bn|=e,r)}function Gf(e,n,r,c){return Ve(r,n)?r:Os.current!==null?(e=Gc(e,r,c),Ve(e,n)||(le=!0),e):(Ii&42)===0||(Ii&1073741824)!==0&&(Ct&261930)===0?(le=!0,e.memoizedState=r):(e=Gp(),vt.lanes|=e,bn|=e,n)}function Vf(e,n,r,c,p){var m=j.p;j.p=m!==0&&8>m?m:8;var A=k.T,C={};k.T=C,Yc(e,!1,n,r);try{var M=p(),U=k.S;if(U!==null&&U(C,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var X=nb(M,c);Ba(e,n,X,Ke(e))}else Ba(e,n,c,Ke(e))}catch(q){Ba(e,n,{then:function(){},status:"rejected",reason:q},Ke())}finally{j.p=m,A!==null&&C.types!==null&&(A.types=C.types),k.T=A}}function cb(){}function Vc(e,n,r,c){if(e.tag!==5)throw Error(s(476));var p=Xf(e).queue;Vf(e,p,n,Z,r===null?cb:function(){return Yf(e),r(c)})}function Xf(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:Z},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:r},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Yf(e){var n=Xf(e);n.next===null&&(n=e.alternate.memoizedState),Ba(e,n.next.queue,{},Ke())}function Xc(){return Se(Za)}function qf(){return se().memoizedState}function $f(){return se().memoizedState}function ub(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var r=Ke();e=dn(r);var c=fn(n,e,r);c!==null&&(Pe(c,n,r),Da(c,n,r)),n={cache:Ac()},e.payload=n;return}n=n.return}}function hb(e,n,r){var c=Ke();r={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},po(e)?Kf(n,r):(r=cc(e,n,r,c),r!==null&&(Pe(r,e,c),Qf(r,n,c)))}function Wf(e,n,r){var c=Ke();Ba(e,n,r,c)}function Ba(e,n,r,c){var p={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(po(e))Kf(n,p);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var A=n.lastRenderedState,C=m(A,r);if(p.hasEagerState=!0,p.eagerState=C,Ve(C,A))return qr(e,n,p,0),Vt===null&&Yr(),!1}catch{}if(r=cc(e,n,p,c),r!==null)return Pe(r,e,c),Qf(r,n,c),!0}return!1}function Yc(e,n,r,c){if(c={lane:2,revertLane:xu(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},po(e)){if(n)throw Error(s(479))}else n=cc(e,r,c,2),n!==null&&Pe(n,e,2)}function po(e){var n=e.alternate;return e===vt||n!==null&&n===vt}function Kf(e,n){ks=ro=!0;var r=e.pending;r===null?n.next=n:(n.next=r.next,r.next=n),e.pending=n}function Qf(e,n,r){if((r&4194048)!==0){var c=n.lanes;c&=e.pendingLanes,r|=c,n.lanes=r,ed(e,r)}}var za={readContext:Se,use:co,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useLayoutEffect:Jt,useInsertionEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useSyncExternalStore:Jt,useId:Jt,useHostTransitionStatus:Jt,useFormState:Jt,useActionState:Jt,useOptimistic:Jt,useMemoCache:Jt,useCacheRefresh:Jt};za.useEffectEvent=Jt;var Zf={readContext:Se,use:co,useCallback:function(e,n){return Me().memoizedState=[e,n===void 0?null:n],e},useContext:Se,useEffect:Bf,useImperativeHandle:function(e,n,r){r=r!=null?r.concat([e]):null,ho(4194308,4,If.bind(null,n,e),r)},useLayoutEffect:function(e,n){return ho(4194308,4,e,n)},useInsertionEffect:function(e,n){ho(4,2,e,n)},useMemo:function(e,n){var r=Me();n=n===void 0?null:n;var c=e();if(Wn){sn(!0);try{e()}finally{sn(!1)}}return r.memoizedState=[c,n],c},useReducer:function(e,n,r){var c=Me();if(r!==void 0){var p=r(n);if(Wn){sn(!0);try{r(n)}finally{sn(!1)}}}else p=n;return c.memoizedState=c.baseState=p,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:p},c.queue=e,e=e.dispatch=hb.bind(null,vt,e),[c.memoizedState,e]},useRef:function(e){var n=Me();return e={current:e},n.memoizedState=e},useState:function(e){e=Ic(e);var n=e.queue,r=Wf.bind(null,vt,n);return n.dispatch=r,[e.memoizedState,r]},useDebugValue:jc,useDeferredValue:function(e,n){var r=Me();return Gc(r,e,n)},useTransition:function(){var e=Ic(!1);return e=Vf.bind(null,vt,e.queue,!0,!1),Me().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,r){var c=vt,p=Me();if(_t){if(r===void 0)throw Error(s(407));r=r()}else{if(r=n(),Vt===null)throw Error(s(349));(Ct&127)!==0||vf(c,n,r)}p.memoizedState=r;var m={value:r,getSnapshot:n};return p.queue=m,Bf(Sf.bind(null,c,m,e),[e]),c.flags|=2048,Bs(9,{destroy:void 0},Af.bind(null,c,m,r,n),null),r},useId:function(){var e=Me(),n=Vt.identifierPrefix;if(_t){var r=Ai,c=vi;r=(c&~(1<<32-Ge(c)-1)).toString(32)+r,n="_"+n+"R_"+r,r=oo++,0<r&&(n+="H"+r.toString(32)),n+="_"}else r=sb++,n="_"+n+"r_"+r.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Xc,useFormState:Df,useActionState:Df,useOptimistic:function(e){var n=Me();n.memoizedState=n.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=Yc.bind(null,vt,!0,r),r.dispatch=n,[e,n]},useMemoCache:zc,useCacheRefresh:function(){return Me().memoizedState=ub.bind(null,vt)},useEffectEvent:function(e){var n=Me(),r={impl:e};return n.memoizedState=r,function(){if((Lt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}},qc={readContext:Se,use:co,useCallback:Hf,useContext:Se,useEffect:Hc,useImperativeHandle:Uf,useInsertionEffect:Pf,useLayoutEffect:Ff,useMemo:jf,useReducer:uo,useRef:Nf,useState:function(){return uo(Ui)},useDebugValue:jc,useDeferredValue:function(e,n){var r=se();return Gf(r,It.memoizedState,e,n)},useTransition:function(){var e=uo(Ui)[0],n=se().memoizedState;return[typeof e=="boolean"?e:Na(e),n]},useSyncExternalStore:bf,useId:qf,useHostTransitionStatus:Xc,useFormState:Lf,useActionState:Lf,useOptimistic:function(e,n){var r=se();return xf(r,It,e,n)},useMemoCache:zc,useCacheRefresh:$f};qc.useEffectEvent=zf;var Jf={readContext:Se,use:co,useCallback:Hf,useContext:Se,useEffect:Hc,useImperativeHandle:Uf,useInsertionEffect:Pf,useLayoutEffect:Ff,useMemo:jf,useReducer:Fc,useRef:Nf,useState:function(){return Fc(Ui)},useDebugValue:jc,useDeferredValue:function(e,n){var r=se();return It===null?Gc(r,e,n):Gf(r,It.memoizedState,e,n)},useTransition:function(){var e=Fc(Ui)[0],n=se().memoizedState;return[typeof e=="boolean"?e:Na(e),n]},useSyncExternalStore:bf,useId:qf,useHostTransitionStatus:Xc,useFormState:kf,useActionState:kf,useOptimistic:function(e,n){var r=se();return It!==null?xf(r,It,e,n):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:zc,useCacheRefresh:$f};Jf.useEffectEvent=zf;function $c(e,n,r,c){n=e.memoizedState,r=r(c,n),r=r==null?n:y({},n,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Wc={enqueueSetState:function(e,n,r){e=e._reactInternals;var c=Ke(),p=dn(c);p.payload=n,r!=null&&(p.callback=r),n=fn(e,p,c),n!==null&&(Pe(n,e,c),Da(n,e,c))},enqueueReplaceState:function(e,n,r){e=e._reactInternals;var c=Ke(),p=dn(c);p.tag=1,p.payload=n,r!=null&&(p.callback=r),n=fn(e,p,c),n!==null&&(Pe(n,e,c),Da(n,e,c))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var r=Ke(),c=dn(r);c.tag=2,n!=null&&(c.callback=n),n=fn(e,c,r),n!==null&&(Pe(n,e,r),Da(n,e,r))}};function tp(e,n,r,c,p,m,A){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,m,A):n.prototype&&n.prototype.isPureReactComponent?!wa(r,c)||!wa(p,m):!0}function ep(e,n,r,c){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,c),n.state!==e&&Wc.enqueueReplaceState(n,n.state,null)}function Kn(e,n){var r=n;if("ref"in n){r={};for(var c in n)c!=="ref"&&(r[c]=n[c])}if(e=e.defaultProps){r===n&&(r=y({},r));for(var p in e)r[p]===void 0&&(r[p]=e[p])}return r}function ip(e){Xr(e)}function np(e){console.error(e)}function sp(e){Xr(e)}function go(e,n){try{var r=e.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(c){setTimeout(function(){throw c})}}function ap(e,n,r){try{var c=e.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Kc(e,n,r){return r=dn(r),r.tag=3,r.payload={element:null},r.callback=function(){go(e,n)},r}function rp(e){return e=dn(e),e.tag=3,e}function op(e,n,r,c){var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var m=c.value;e.payload=function(){return p(m)},e.callback=function(){ap(n,r,c)}}var A=r.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(e.callback=function(){ap(n,r,c),typeof p!="function"&&(vn===null?vn=new Set([this]):vn.add(this));var C=c.stack;this.componentDidCatch(c.value,{componentStack:C!==null?C:""})})}function db(e,n,r,c,p){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(n=r.alternate,n!==null&&_s(n,r,p,!0),r=Ye.current,r!==null){switch(r.tag){case 31:case 13:return oi===null?_o():r.alternate===null&&te===0&&(te=3),r.flags&=-257,r.flags|=65536,r.lanes=p,c===eo?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([c]):n.add(c),Su(e,c,p)),!1;case 22:return r.flags|=65536,c===eo?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([c]):r.add(c)),Su(e,c,p)),!1}throw Error(s(435,r.tag))}return Su(e,c,p),_o(),!1}if(_t)return n=Ye.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=p,c!==gc&&(e=Error(s(422),{cause:c}),Ca(ni(e,r)))):(c!==gc&&(n=Error(s(423),{cause:c}),Ca(ni(n,r))),e=e.current.alternate,e.flags|=65536,p&=-p,e.lanes|=p,c=ni(c,r),p=Kc(e.stateNode,c,p),Tc(e,p),te!==4&&(te=2)),!1;var m=Error(s(520),{cause:c});if(m=ni(m,r),Va===null?Va=[m]:Va.push(m),te!==4&&(te=2),n===null)return!0;c=ni(c,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,e=p&-p,r.lanes|=e,e=Kc(r.stateNode,c,e),Tc(r,e),!1;case 1:if(n=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(vn===null||!vn.has(m))))return r.flags|=65536,p&=-p,r.lanes|=p,p=rp(p),op(p,e,r,c),Tc(r,p),!1}r=r.return}while(r!==null);return!1}var Qc=Error(s(461)),le=!1;function we(e,n,r,c){n.child=e===null?hf(n,null,r,c):$n(n,e.child,r,c)}function lp(e,n,r,c,p){r=r.render;var m=n.ref;if("ref"in c){var A={};for(var C in c)C!=="ref"&&(A[C]=c[C])}else A=c;return Vn(n),c=Oc(e,n,r,A,m,p),C=kc(),e!==null&&!le?(Nc(e,n,p),Hi(e,n,p)):(_t&&C&&fc(n),n.flags|=1,we(e,n,c,p),n.child)}function cp(e,n,r,c,p){if(e===null){var m=r.type;return typeof m=="function"&&!uc(m)&&m.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=m,up(e,n,m,c,p)):(e=Wr(r.type,null,c,n,n.mode,p),e.ref=n.ref,e.return=n,n.child=e)}if(m=e.child,!au(e,p)){var A=m.memoizedProps;if(r=r.compare,r=r!==null?r:wa,r(A,c)&&e.ref===n.ref)return Hi(e,n,p)}return n.flags|=1,e=Bi(m,c),e.ref=n.ref,e.return=n,n.child=e}function up(e,n,r,c,p){if(e!==null){var m=e.memoizedProps;if(wa(m,c)&&e.ref===n.ref)if(le=!1,n.pendingProps=c=m,au(e,p))(e.flags&131072)!==0&&(le=!0);else return n.lanes=e.lanes,Hi(e,n,p)}return Zc(e,n,r,c,p)}function hp(e,n,r,c){var p=c.children,m=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|r:r,e!==null){for(c=n.child=e.child,p=0;c!==null;)p=p|c.lanes|c.childLanes,c=c.sibling;c=p&~m}else c=0,n.child=null;return dp(e,n,m,r,c)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Jr(n,m!==null?m.cachePool:null),m!==null?pf(n,m):Mc(),gf(n);else return c=n.lanes=536870912,dp(e,n,m!==null?m.baseLanes|r:r,r,c)}else m!==null?(Jr(n,m.cachePool),pf(n,m),gn(),n.memoizedState=null):(e!==null&&Jr(n,null),Mc(),gn());return we(e,n,p,r),n.child}function Pa(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function dp(e,n,r,c,p){var m=wc();return m=m===null?null:{parent:re._currentValue,pool:m},n.memoizedState={baseLanes:r,cachePool:m},e!==null&&Jr(n,null),Mc(),gf(n),e!==null&&_s(e,n,c,!0),n.childLanes=p,null}function mo(e,n){return n=bo({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function fp(e,n,r){return $n(n,e.child,null,r),e=mo(n,n.pendingProps),e.flags|=2,qe(n),n.memoizedState=null,e}function fb(e,n,r){var c=n.pendingProps,p=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(_t){if(c.mode==="hidden")return e=mo(n,c),n.lanes=536870912,Pa(null,e);if(Dc(n),(e=Xt)?(e=Cg(e,ri),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:on!==null?{id:vi,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},r=Wd(e),r.return=n,n.child=r,Ae=n,Xt=null)):e=null,e===null)throw cn(n);return n.lanes=536870912,null}return mo(n,c)}var m=e.memoizedState;if(m!==null){var A=m.dehydrated;if(Dc(n),p)if(n.flags&256)n.flags&=-257,n=fp(e,n,r);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(le||_s(e,n,r,!1),p=(r&e.childLanes)!==0,le||p){if(c=Vt,c!==null&&(A=id(c,r),A!==0&&A!==m.retryLane))throw m.retryLane=A,Un(e,A),Pe(c,e,A),Qc;_o(),n=fp(e,n,r)}else e=m.treeContext,Xt=li(A.nextSibling),Ae=n,_t=!0,ln=null,ri=!1,e!==null&&Zd(n,e),n=mo(n,c),n.flags|=4096;return n}return e=Bi(e.child,{mode:c.mode,children:c.children}),e.ref=n.ref,n.child=e,e.return=n,e}function yo(e,n){var r=n.ref;if(r===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(e===null||e.ref!==r)&&(n.flags|=4194816)}}function Zc(e,n,r,c,p){return Vn(n),r=Oc(e,n,r,c,void 0,p),c=kc(),e!==null&&!le?(Nc(e,n,p),Hi(e,n,p)):(_t&&c&&fc(n),n.flags|=1,we(e,n,r,p),n.child)}function pp(e,n,r,c,p,m){return Vn(n),n.updateQueue=null,r=yf(n,c,r,p),mf(e),c=kc(),e!==null&&!le?(Nc(e,n,m),Hi(e,n,m)):(_t&&c&&fc(n),n.flags|=1,we(e,n,r,m),n.child)}function gp(e,n,r,c,p){if(Vn(n),n.stateNode===null){var m=Es,A=r.contextType;typeof A=="object"&&A!==null&&(m=Se(A)),m=new r(c,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Wc,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=c,m.state=n.memoizedState,m.refs={},xc(n),A=r.contextType,m.context=typeof A=="object"&&A!==null?Se(A):Es,m.state=n.memoizedState,A=r.getDerivedStateFromProps,typeof A=="function"&&($c(n,r,A,c),m.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(A=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),A!==m.state&&Wc.enqueueReplaceState(m,m.state,null),Oa(n,c,m,p),La(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),c=!0}else if(e===null){m=n.stateNode;var C=n.memoizedProps,M=Kn(r,C);m.props=M;var U=m.context,X=r.contextType;A=Es,typeof X=="object"&&X!==null&&(A=Se(X));var q=r.getDerivedStateFromProps;X=typeof q=="function"||typeof m.getSnapshotBeforeUpdate=="function",C=n.pendingProps!==C,X||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(C||U!==A)&&ep(n,m,c,A),hn=!1;var H=n.memoizedState;m.state=H,Oa(n,c,m,p),La(),U=n.memoizedState,C||H!==U||hn?(typeof q=="function"&&($c(n,r,q,c),U=n.memoizedState),(M=hn||tp(n,r,M,c,H,U,A))?(X||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=U),m.props=c,m.state=U,m.context=A,c=M):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{m=n.stateNode,Cc(e,n),A=n.memoizedProps,X=Kn(r,A),m.props=X,q=n.pendingProps,H=m.context,U=r.contextType,M=Es,typeof U=="object"&&U!==null&&(M=Se(U)),C=r.getDerivedStateFromProps,(U=typeof C=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(A!==q||H!==M)&&ep(n,m,c,M),hn=!1,H=n.memoizedState,m.state=H,Oa(n,c,m,p),La();var G=n.memoizedState;A!==q||H!==G||hn||e!==null&&e.dependencies!==null&&Qr(e.dependencies)?(typeof C=="function"&&($c(n,r,C,c),G=n.memoizedState),(X=hn||tp(n,r,X,c,H,G,M)||e!==null&&e.dependencies!==null&&Qr(e.dependencies))?(U||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,G,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,G,M)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||A===e.memoizedProps&&H===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||A===e.memoizedProps&&H===e.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=G),m.props=c,m.state=G,m.context=M,c=X):(typeof m.componentDidUpdate!="function"||A===e.memoizedProps&&H===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||A===e.memoizedProps&&H===e.memoizedState||(n.flags|=1024),c=!1)}return m=c,yo(e,n),c=(n.flags&128)!==0,m||c?(m=n.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,e!==null&&c?(n.child=$n(n,e.child,null,p),n.child=$n(n,null,r,p)):we(e,n,r,p),n.memoizedState=m.state,e=n.child):e=Hi(e,n,p),e}function mp(e,n,r,c){return jn(),n.flags|=256,we(e,n,r,c),n.child}var Jc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tu(e){return{baseLanes:e,cachePool:af()}}function eu(e,n,r){return e=e!==null?e.childLanes&~r:0,n&&(e|=We),e}function yp(e,n,r){var c=n.pendingProps,p=!1,m=(n.flags&128)!==0,A;if((A=m)||(A=e!==null&&e.memoizedState===null?!1:(ne.current&2)!==0),A&&(p=!0,n.flags&=-129),A=(n.flags&32)!==0,n.flags&=-33,e===null){if(_t){if(p?pn(n):gn(),(e=Xt)?(e=Cg(e,ri),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:on!==null?{id:vi,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},r=Wd(e),r.return=n,n.child=r,Ae=n,Xt=null)):e=null,e===null)throw cn(n);return Pu(e)?n.lanes=32:n.lanes=536870912,null}var C=c.children;return c=c.fallback,p?(gn(),p=n.mode,C=bo({mode:"hidden",children:C},p),c=Hn(c,p,r,null),C.return=n,c.return=n,C.sibling=c,n.child=C,c=n.child,c.memoizedState=tu(r),c.childLanes=eu(e,A,r),n.memoizedState=Jc,Pa(null,c)):(pn(n),iu(n,C))}var M=e.memoizedState;if(M!==null&&(C=M.dehydrated,C!==null)){if(m)n.flags&256?(pn(n),n.flags&=-257,n=nu(e,n,r)):n.memoizedState!==null?(gn(),n.child=e.child,n.flags|=128,n=null):(gn(),C=c.fallback,p=n.mode,c=bo({mode:"visible",children:c.children},p),C=Hn(C,p,r,null),C.flags|=2,c.return=n,C.return=n,c.sibling=C,n.child=c,$n(n,e.child,null,r),c=n.child,c.memoizedState=tu(r),c.childLanes=eu(e,A,r),n.memoizedState=Jc,n=Pa(null,c));else if(pn(n),Pu(C)){if(A=C.nextSibling&&C.nextSibling.dataset,A)var U=A.dgst;A=U,c=Error(s(419)),c.stack="",c.digest=A,Ca({value:c,source:null,stack:null}),n=nu(e,n,r)}else if(le||_s(e,n,r,!1),A=(r&e.childLanes)!==0,le||A){if(A=Vt,A!==null&&(c=id(A,r),c!==0&&c!==M.retryLane))throw M.retryLane=c,Un(e,c),Pe(A,e,c),Qc;zu(C)||_o(),n=nu(e,n,r)}else zu(C)?(n.flags|=192,n.child=e.child,n=null):(e=M.treeContext,Xt=li(C.nextSibling),Ae=n,_t=!0,ln=null,ri=!1,e!==null&&Zd(n,e),n=iu(n,c.children),n.flags|=4096);return n}return p?(gn(),C=c.fallback,p=n.mode,M=e.child,U=M.sibling,c=Bi(M,{mode:"hidden",children:c.children}),c.subtreeFlags=M.subtreeFlags&65011712,U!==null?C=Bi(U,C):(C=Hn(C,p,r,null),C.flags|=2),C.return=n,c.return=n,c.sibling=C,n.child=c,Pa(null,c),c=n.child,C=e.child.memoizedState,C===null?C=tu(r):(p=C.cachePool,p!==null?(M=re._currentValue,p=p.parent!==M?{parent:M,pool:M}:p):p=af(),C={baseLanes:C.baseLanes|r,cachePool:p}),c.memoizedState=C,c.childLanes=eu(e,A,r),n.memoizedState=Jc,Pa(e.child,c)):(pn(n),r=e.child,e=r.sibling,r=Bi(r,{mode:"visible",children:c.children}),r.return=n,r.sibling=null,e!==null&&(A=n.deletions,A===null?(n.deletions=[e],n.flags|=16):A.push(e)),n.child=r,n.memoizedState=null,r)}function iu(e,n){return n=bo({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function bo(e,n){return e=Xe(22,e,null,n),e.lanes=0,e}function nu(e,n,r){return $n(n,e.child,null,r),e=iu(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function bp(e,n,r){e.lanes|=n;var c=e.alternate;c!==null&&(c.lanes|=n),bc(e.return,n,r)}function su(e,n,r,c,p,m){var A=e.memoizedState;A===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:p,treeForkCount:m}:(A.isBackwards=n,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=r,A.tailMode=p,A.treeForkCount=m)}function vp(e,n,r){var c=n.pendingProps,p=c.revealOrder,m=c.tail;c=c.children;var A=ne.current,C=(A&2)!==0;if(C?(A=A&1|2,n.flags|=128):A&=1,K(ne,A),we(e,n,c,r),c=_t?xa:0,!C&&e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&bp(e,r,n);else if(e.tag===19)bp(e,r,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(p){case"forwards":for(r=n.child,p=null;r!==null;)e=r.alternate,e!==null&&ao(e)===null&&(p=r),r=r.sibling;r=p,r===null?(p=n.child,n.child=null):(p=r.sibling,r.sibling=null),su(n,!1,p,r,m,c);break;case"backwards":case"unstable_legacy-backwards":for(r=null,p=n.child,n.child=null;p!==null;){if(e=p.alternate,e!==null&&ao(e)===null){n.child=p;break}e=p.sibling,p.sibling=r,r=p,p=e}su(n,!0,r,null,m,c);break;case"together":su(n,!1,null,null,void 0,c);break;default:n.memoizedState=null}return n.child}function Hi(e,n,r){if(e!==null&&(n.dependencies=e.dependencies),bn|=n.lanes,(r&n.childLanes)===0)if(e!==null){if(_s(e,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,r=Bi(e,e.pendingProps),n.child=r,r.return=n;e.sibling!==null;)e=e.sibling,r=r.sibling=Bi(e,e.pendingProps),r.return=n;r.sibling=null}return n.child}function au(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Qr(e)))}function pb(e,n,r){switch(n.tag){case 3:ie(n,n.stateNode.containerInfo),un(n,re,e.memoizedState.cache),jn();break;case 27:case 5:kn(n);break;case 4:ie(n,n.stateNode.containerInfo);break;case 10:un(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Dc(n),null;break;case 13:var c=n.memoizedState;if(c!==null)return c.dehydrated!==null?(pn(n),n.flags|=128,null):(r&n.child.childLanes)!==0?yp(e,n,r):(pn(n),e=Hi(e,n,r),e!==null?e.sibling:null);pn(n);break;case 19:var p=(e.flags&128)!==0;if(c=(r&n.childLanes)!==0,c||(_s(e,n,r,!1),c=(r&n.childLanes)!==0),p){if(c)return vp(e,n,r);n.flags|=128}if(p=n.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),K(ne,ne.current),c)break;return null;case 22:return n.lanes=0,hp(e,n,r,n.pendingProps);case 24:un(n,re,e.memoizedState.cache)}return Hi(e,n,r)}function Ap(e,n,r){if(e!==null)if(e.memoizedProps!==n.pendingProps)le=!0;else{if(!au(e,r)&&(n.flags&128)===0)return le=!1,pb(e,n,r);le=(e.flags&131072)!==0}else le=!1,_t&&(n.flags&1048576)!==0&&Qd(n,xa,n.index);switch(n.lanes=0,n.tag){case 16:t:{var c=n.pendingProps;if(e=Yn(n.elementType),n.type=e,typeof e=="function")uc(e)?(c=Kn(e,c),n.tag=1,n=gp(null,n,e,c,r)):(n.tag=0,n=Zc(null,n,e,c,r));else{if(e!=null){var p=e.$$typeof;if(p===N){n.tag=11,n=lp(null,n,e,c,r);break t}else if(p===F){n.tag=14,n=cp(null,n,e,c,r);break t}}throw n=Q(e)||e,Error(s(306,n,""))}}return n;case 0:return Zc(e,n,n.type,n.pendingProps,r);case 1:return c=n.type,p=Kn(c,n.pendingProps),gp(e,n,c,p,r);case 3:t:{if(ie(n,n.stateNode.containerInfo),e===null)throw Error(s(387));c=n.pendingProps;var m=n.memoizedState;p=m.element,Cc(e,n),Oa(n,c,null,r);var A=n.memoizedState;if(c=A.cache,un(n,re,c),c!==m.cache&&vc(n,[re],r,!0),La(),c=A.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:A.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=mp(e,n,c,r);break t}else if(c!==p){p=ni(Error(s(424)),n),Ca(p),n=mp(e,n,c,r);break t}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Xt=li(e.firstChild),Ae=n,_t=!0,ln=null,ri=!0,r=hf(n,null,c,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(jn(),c===p){n=Hi(e,n,r);break t}we(e,n,c,r)}n=n.child}return n;case 26:return yo(e,n),e===null?(r=Lg(n.type,null,n.pendingProps,null))?n.memoizedState=r:_t||(r=n.type,e=n.pendingProps,c=No(ft.current).createElement(r),c[ve]=n,c[Le]=e,Ee(c,r,e),ge(c),n.stateNode=c):n.memoizedState=Lg(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return kn(n),e===null&&_t&&(c=n.stateNode=Mg(n.type,n.pendingProps,ft.current),Ae=n,ri=!0,p=Xt,En(n.type)?(Fu=p,Xt=li(c.firstChild)):Xt=p),we(e,n,n.pendingProps.children,r),yo(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&_t&&((p=c=Xt)&&(c=Vb(c,n.type,n.pendingProps,ri),c!==null?(n.stateNode=c,Ae=n,Xt=li(c.firstChild),ri=!1,p=!0):p=!1),p||cn(n)),kn(n),p=n.type,m=n.pendingProps,A=e!==null?e.memoizedProps:null,c=m.children,ku(p,m)?c=null:A!==null&&ku(p,A)&&(n.flags|=32),n.memoizedState!==null&&(p=Oc(e,n,ab,null,null,r),Za._currentValue=p),yo(e,n),we(e,n,c,r),n.child;case 6:return e===null&&_t&&((e=r=Xt)&&(r=Xb(r,n.pendingProps,ri),r!==null?(n.stateNode=r,Ae=n,Xt=null,e=!0):e=!1),e||cn(n)),null;case 13:return yp(e,n,r);case 4:return ie(n,n.stateNode.containerInfo),c=n.pendingProps,e===null?n.child=$n(n,null,c,r):we(e,n,c,r),n.child;case 11:return lp(e,n,n.type,n.pendingProps,r);case 7:return we(e,n,n.pendingProps,r),n.child;case 8:return we(e,n,n.pendingProps.children,r),n.child;case 12:return we(e,n,n.pendingProps.children,r),n.child;case 10:return c=n.pendingProps,un(n,n.type,c.value),we(e,n,c.children,r),n.child;case 9:return p=n.type._context,c=n.pendingProps.children,Vn(n),p=Se(p),c=c(p),n.flags|=1,we(e,n,c,r),n.child;case 14:return cp(e,n,n.type,n.pendingProps,r);case 15:return up(e,n,n.type,n.pendingProps,r);case 19:return vp(e,n,r);case 31:return fb(e,n,r);case 22:return hp(e,n,r,n.pendingProps);case 24:return Vn(n),c=Se(re),e===null?(p=wc(),p===null&&(p=Vt,m=Ac(),p.pooledCache=m,m.refCount++,m!==null&&(p.pooledCacheLanes|=r),p=m),n.memoizedState={parent:c,cache:p},xc(n),un(n,re,p)):((e.lanes&r)!==0&&(Cc(e,n),Oa(n,null,null,r),La()),p=e.memoizedState,m=n.memoizedState,p.parent!==c?(p={parent:c,cache:c},n.memoizedState=p,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=p),un(n,re,c)):(c=m.cache,un(n,re,c),c!==p.cache&&vc(n,[re],r,!0))),we(e,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function ji(e){e.flags|=4}function ru(e,n,r,c,p){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(p&335544128)===p)if(e.stateNode.complete)e.flags|=8192;else if(qp())e.flags|=8192;else throw qn=eo,Ec}else e.flags&=-16777217}function Sp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!zg(n))if(qp())e.flags|=8192;else throw qn=eo,Ec}function vo(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Jh():536870912,e.lanes|=n,Is|=n)}function Fa(e,n){if(!_t)switch(e.tailMode){case"hidden":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function Yt(e){var n=e.alternate!==null&&e.alternate.child===e.child,r=0,c=0;if(n)for(var p=e.child;p!==null;)r|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)r|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=c,e.childLanes=r,n}function gb(e,n,r){var c=n.pendingProps;switch(pc(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(n),null;case 1:return Yt(n),null;case 3:return r=n.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),n.memoizedState.cache!==c&&(n.flags|=2048),Fi(re),Gt(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ts(n)?ji(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,mc())),Yt(n),null;case 26:var p=n.type,m=n.memoizedState;return e===null?(ji(n),m!==null?(Yt(n),Sp(n,m)):(Yt(n),ru(n,p,null,c,r))):m?m!==e.memoizedState?(ji(n),Yt(n),Sp(n,m)):(Yt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==c&&ji(n),Yt(n),ru(n,p,e,c,r)),null;case 27:if(nn(n),r=ft.current,p=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==c&&ji(n);else{if(!c){if(n.stateNode===null)throw Error(s(166));return Yt(n),null}e=et.current,Ts(n)?Jd(n):(e=Mg(p,c,r),n.stateNode=e,ji(n))}return Yt(n),null;case 5:if(nn(n),p=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==c&&ji(n);else{if(!c){if(n.stateNode===null)throw Error(s(166));return Yt(n),null}if(m=et.current,Ts(n))Jd(n);else{var A=No(ft.current);switch(m){case 1:m=A.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:m=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":m=A.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":m=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":m=A.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?A.createElement(p,{is:c.is}):A.createElement(p)}}m[ve]=n,m[Le]=c;t:for(A=n.child;A!==null;){if(A.tag===5||A.tag===6)m.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===n)break t;for(;A.sibling===null;){if(A.return===null||A.return===n)break t;A=A.return}A.sibling.return=A.return,A=A.sibling}n.stateNode=m;t:switch(Ee(m,p,c),p){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&ji(n)}}return Yt(n),ru(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,r),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==c&&ji(n);else{if(typeof c!="string"&&n.stateNode===null)throw Error(s(166));if(e=ft.current,Ts(n)){if(e=n.stateNode,r=n.memoizedProps,c=null,p=Ae,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}e[ve]=n,e=!!(e.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||yg(e.nodeValue,r)),e||cn(n,!0)}else e=No(e).createTextNode(c),e[ve]=n,n.stateNode=e}return Yt(n),null;case 31:if(r=n.memoizedState,e===null||e.memoizedState!==null){if(c=Ts(n),r!==null){if(e===null){if(!c)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[ve]=n}else jn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Yt(n),e=!1}else r=mc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return n.flags&256?(qe(n),n):(qe(n),null);if((n.flags&128)!==0)throw Error(s(558))}return Yt(n),null;case 13:if(c=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(p=Ts(n),c!==null&&c.dehydrated!==null){if(e===null){if(!p)throw Error(s(318));if(p=n.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[ve]=n}else jn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Yt(n),p=!1}else p=mc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=p),p=!0;if(!p)return n.flags&256?(qe(n),n):(qe(n),null)}return qe(n),(n.flags&128)!==0?(n.lanes=r,n):(r=c!==null,e=e!==null&&e.memoizedState!==null,r&&(c=n.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==p&&(c.flags|=2048)),r!==e&&r&&(n.child.flags|=8192),vo(n,n.updateQueue),Yt(n),null);case 4:return Gt(),e===null&&Mu(n.stateNode.containerInfo),Yt(n),null;case 10:return Fi(n.type),Yt(n),null;case 19:if(V(ne),c=n.memoizedState,c===null)return Yt(n),null;if(p=(n.flags&128)!==0,m=c.rendering,m===null)if(p)Fa(c,!1);else{if(te!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(m=ao(e),m!==null){for(n.flags|=128,Fa(c,!1),e=m.updateQueue,n.updateQueue=e,vo(n,e),n.subtreeFlags=0,e=r,r=n.child;r!==null;)$d(r,e),r=r.sibling;return K(ne,ne.current&1|2),_t&&zi(n,c.treeForkCount),n.child}e=e.sibling}c.tail!==null&&He()>xo&&(n.flags|=128,p=!0,Fa(c,!1),n.lanes=4194304)}else{if(!p)if(e=ao(m),e!==null){if(n.flags|=128,p=!0,e=e.updateQueue,n.updateQueue=e,vo(n,e),Fa(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!_t)return Yt(n),null}else 2*He()-c.renderingStartTime>xo&&r!==536870912&&(n.flags|=128,p=!0,Fa(c,!1),n.lanes=4194304);c.isBackwards?(m.sibling=n.child,n.child=m):(e=c.last,e!==null?e.sibling=m:n.child=m,c.last=m)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=He(),e.sibling=null,r=ne.current,K(ne,p?r&1|2:r&1),_t&&zi(n,c.treeForkCount),e):(Yt(n),null);case 22:case 23:return qe(n),Rc(),c=n.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(n.flags|=8192):c&&(n.flags|=8192),c?(r&536870912)!==0&&(n.flags&128)===0&&(Yt(n),n.subtreeFlags&6&&(n.flags|=8192)):Yt(n),r=n.updateQueue,r!==null&&vo(n,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==r&&(n.flags|=2048),e!==null&&V(Xn),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),Fi(re),Yt(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function mb(e,n){switch(pc(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Fi(re),Gt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return nn(n),null;case 31:if(n.memoizedState!==null){if(qe(n),n.alternate===null)throw Error(s(340));jn()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(qe(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));jn()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return V(ne),null;case 4:return Gt(),null;case 10:return Fi(n.type),null;case 22:case 23:return qe(n),Rc(),e!==null&&V(Xn),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Fi(re),null;case 25:return null;default:return null}}function wp(e,n){switch(pc(n),n.tag){case 3:Fi(re),Gt();break;case 26:case 27:case 5:nn(n);break;case 4:Gt();break;case 31:n.memoizedState!==null&&qe(n);break;case 13:qe(n);break;case 19:V(ne);break;case 10:Fi(n.type);break;case 22:case 23:qe(n),Rc(),e!==null&&V(Xn);break;case 24:Fi(re)}}function Ia(e,n){try{var r=n.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var p=c.next;r=p;do{if((r.tag&e)===e){c=void 0;var m=r.create,A=r.inst;c=m(),A.destroy=c}r=r.next}while(r!==p)}}catch(C){Ft(n,n.return,C)}}function mn(e,n,r){try{var c=n.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var m=p.next;c=m;do{if((c.tag&e)===e){var A=c.inst,C=A.destroy;if(C!==void 0){A.destroy=void 0,p=n;var M=r,U=C;try{U()}catch(X){Ft(p,M,X)}}}c=c.next}while(c!==m)}}catch(X){Ft(n,n.return,X)}}function Ep(e){var n=e.updateQueue;if(n!==null){var r=e.stateNode;try{ff(n,r)}catch(c){Ft(e,e.return,c)}}}function xp(e,n,r){r.props=Kn(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(c){Ft(e,n,c)}}function Ua(e,n){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof r=="function"?e.refCleanup=r(c):r.current=c}}catch(p){Ft(e,n,p)}}function Si(e,n){var r=e.ref,c=e.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(p){Ft(e,n,p)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(p){Ft(e,n,p)}else r.current=null}function Cp(e){var n=e.type,r=e.memoizedProps,c=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break t;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(p){Ft(e,e.return,p)}}function ou(e,n,r){try{var c=e.stateNode;Fb(c,e.type,r,n),c[Le]=n}catch(p){Ft(e,e.return,p)}}function Tp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&En(e.type)||e.tag===4}function lu(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Tp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&En(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cu(e,n,r){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(e),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=ki));else if(c!==4&&(c===27&&En(e.type)&&(r=e.stateNode,n=null),e=e.child,e!==null))for(cu(e,n,r),e=e.sibling;e!==null;)cu(e,n,r),e=e.sibling}function Ao(e,n,r){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?r.insertBefore(e,n):r.appendChild(e);else if(c!==4&&(c===27&&En(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(Ao(e,n,r),e=e.sibling;e!==null;)Ao(e,n,r),e=e.sibling}function _p(e){var n=e.stateNode,r=e.memoizedProps;try{for(var c=e.type,p=n.attributes;p.length;)n.removeAttributeNode(p[0]);Ee(n,c,r),n[ve]=e,n[Le]=r}catch(m){Ft(e,e.return,m)}}var Gi=!1,ce=!1,uu=!1,Mp=typeof WeakSet=="function"?WeakSet:Set,me=null;function yb(e,n){if(e=e.containerInfo,Lu=Ho,e=Id(e),nc(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else t:{r=(r=e.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var p=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break t}var A=0,C=-1,M=-1,U=0,X=0,q=e,H=null;e:for(;;){for(var G;q!==r||p!==0&&q.nodeType!==3||(C=A+p),q!==m||c!==0&&q.nodeType!==3||(M=A+c),q.nodeType===3&&(A+=q.nodeValue.length),(G=q.firstChild)!==null;)H=q,q=G;for(;;){if(q===e)break e;if(H===r&&++U===p&&(C=A),H===m&&++X===c&&(M=A),(G=q.nextSibling)!==null)break;q=H,H=q.parentNode}q=G}r=C===-1||M===-1?null:{start:C,end:M}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ou={focusedElem:e,selectionRange:r},Ho=!1,me=n;me!==null;)if(n=me,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,me=e;else for(;me!==null;){switch(n=me,m=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)p=e[r],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,r=n,p=m.memoizedProps,m=m.memoizedState,c=r.stateNode;try{var st=Kn(r.type,p);e=c.getSnapshotBeforeUpdate(st,m),c.__reactInternalSnapshotBeforeUpdate=e}catch(ht){Ft(r,r.return,ht)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,r=e.nodeType,r===9)Bu(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Bu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,me=e;break}me=n.return}}function Rp(e,n,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:Xi(e,r),c&4&&Ia(5,r);break;case 1:if(Xi(e,r),c&4)if(e=r.stateNode,n===null)try{e.componentDidMount()}catch(A){Ft(r,r.return,A)}else{var p=Kn(r.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(p,n,e.__reactInternalSnapshotBeforeUpdate)}catch(A){Ft(r,r.return,A)}}c&64&&Ep(r),c&512&&Ua(r,r.return);break;case 3:if(Xi(e,r),c&64&&(e=r.updateQueue,e!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{ff(e,n)}catch(A){Ft(r,r.return,A)}}break;case 27:n===null&&c&4&&_p(r);case 26:case 5:Xi(e,r),n===null&&c&4&&Cp(r),c&512&&Ua(r,r.return);break;case 12:Xi(e,r);break;case 31:Xi(e,r),c&4&&Op(e,r);break;case 13:Xi(e,r),c&4&&kp(e,r),c&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=Tb.bind(null,r),Yb(e,r))));break;case 22:if(c=r.memoizedState!==null||Gi,!c){n=n!==null&&n.memoizedState!==null||ce,p=Gi;var m=ce;Gi=c,(ce=n)&&!m?Yi(e,r,(r.subtreeFlags&8772)!==0):Xi(e,r),Gi=p,ce=m}break;case 30:break;default:Xi(e,r)}}function Dp(e){var n=e.alternate;n!==null&&(e.alternate=null,Dp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Ul(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var qt=null,ke=!1;function Vi(e,n,r){for(r=r.child;r!==null;)Lp(e,n,r),r=r.sibling}function Lp(e,n,r){if(je&&typeof je.onCommitFiberUnmount=="function")try{je.onCommitFiberUnmount(ua,r)}catch{}switch(r.tag){case 26:ce||Si(r,n),Vi(e,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:ce||Si(r,n);var c=qt,p=ke;En(r.type)&&(qt=r.stateNode,ke=!1),Vi(e,n,r),Wa(r.stateNode),qt=c,ke=p;break;case 5:ce||Si(r,n);case 6:if(c=qt,p=ke,qt=null,Vi(e,n,r),qt=c,ke=p,qt!==null)if(ke)try{(qt.nodeType===9?qt.body:qt.nodeName==="HTML"?qt.ownerDocument.body:qt).removeChild(r.stateNode)}catch(m){Ft(r,n,m)}else try{qt.removeChild(r.stateNode)}catch(m){Ft(r,n,m)}break;case 18:qt!==null&&(ke?(e=qt,Eg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),qs(e)):Eg(qt,r.stateNode));break;case 4:c=qt,p=ke,qt=r.stateNode.containerInfo,ke=!0,Vi(e,n,r),qt=c,ke=p;break;case 0:case 11:case 14:case 15:mn(2,r,n),ce||mn(4,r,n),Vi(e,n,r);break;case 1:ce||(Si(r,n),c=r.stateNode,typeof c.componentWillUnmount=="function"&&xp(r,n,c)),Vi(e,n,r);break;case 21:Vi(e,n,r);break;case 22:ce=(c=ce)||r.memoizedState!==null,Vi(e,n,r),ce=c;break;default:Vi(e,n,r)}}function Op(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{qs(e)}catch(r){Ft(n,n.return,r)}}}function kp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{qs(e)}catch(r){Ft(n,n.return,r)}}function bb(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Mp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Mp),n;default:throw Error(s(435,e.tag))}}function So(e,n){var r=bb(e);n.forEach(function(c){if(!r.has(c)){r.add(c);var p=_b.bind(null,e,c);c.then(p,p)}})}function Ne(e,n){var r=n.deletions;if(r!==null)for(var c=0;c<r.length;c++){var p=r[c],m=e,A=n,C=A;t:for(;C!==null;){switch(C.tag){case 27:if(En(C.type)){qt=C.stateNode,ke=!1;break t}break;case 5:qt=C.stateNode,ke=!1;break t;case 3:case 4:qt=C.stateNode.containerInfo,ke=!0;break t}C=C.return}if(qt===null)throw Error(s(160));Lp(m,A,p),qt=null,ke=!1,m=p.alternate,m!==null&&(m.return=null),p.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Np(n,e),n=n.sibling}var mi=null;function Np(e,n){var r=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ne(n,e),Be(e),c&4&&(mn(3,e,e.return),Ia(3,e),mn(5,e,e.return));break;case 1:Ne(n,e),Be(e),c&512&&(ce||r===null||Si(r,r.return)),c&64&&Gi&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var p=mi;if(Ne(n,e),Be(e),c&512&&(ce||r===null||Si(r,r.return)),c&4){var m=r!==null?r.memoizedState:null;if(c=e.memoizedState,r===null)if(c===null)if(e.stateNode===null){t:{c=e.type,r=e.memoizedProps,p=p.ownerDocument||p;e:switch(c){case"title":m=p.getElementsByTagName("title")[0],(!m||m[fa]||m[ve]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=p.createElement(c),p.head.insertBefore(m,p.querySelector("head > title"))),Ee(m,c,r),m[ve]=e,ge(m),c=m;break t;case"link":var A=Ng("link","href",p).get(c+(r.href||""));if(A){for(var C=0;C<A.length;C++)if(m=A[C],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){A.splice(C,1);break e}}m=p.createElement(c),Ee(m,c,r),p.head.appendChild(m);break;case"meta":if(A=Ng("meta","content",p).get(c+(r.content||""))){for(C=0;C<A.length;C++)if(m=A[C],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){A.splice(C,1);break e}}m=p.createElement(c),Ee(m,c,r),p.head.appendChild(m);break;default:throw Error(s(468,c))}m[ve]=e,ge(m),c=m}e.stateNode=c}else Bg(p,e.type,e.stateNode);else e.stateNode=kg(p,c,e.memoizedProps);else m!==c?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,c===null?Bg(p,e.type,e.stateNode):kg(p,c,e.memoizedProps)):c===null&&e.stateNode!==null&&ou(e,e.memoizedProps,r.memoizedProps)}break;case 27:Ne(n,e),Be(e),c&512&&(ce||r===null||Si(r,r.return)),r!==null&&c&4&&ou(e,e.memoizedProps,r.memoizedProps);break;case 5:if(Ne(n,e),Be(e),c&512&&(ce||r===null||Si(r,r.return)),e.flags&32){p=e.stateNode;try{ms(p,"")}catch(st){Ft(e,e.return,st)}}c&4&&e.stateNode!=null&&(p=e.memoizedProps,ou(e,p,r!==null?r.memoizedProps:p)),c&1024&&(uu=!0);break;case 6:if(Ne(n,e),Be(e),c&4){if(e.stateNode===null)throw Error(s(162));c=e.memoizedProps,r=e.stateNode;try{r.nodeValue=c}catch(st){Ft(e,e.return,st)}}break;case 3:if(Po=null,p=mi,mi=Bo(n.containerInfo),Ne(n,e),mi=p,Be(e),c&4&&r!==null&&r.memoizedState.isDehydrated)try{qs(n.containerInfo)}catch(st){Ft(e,e.return,st)}uu&&(uu=!1,Bp(e));break;case 4:c=mi,mi=Bo(e.stateNode.containerInfo),Ne(n,e),Be(e),mi=c;break;case 12:Ne(n,e),Be(e);break;case 31:Ne(n,e),Be(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,So(e,c)));break;case 13:Ne(n,e),Be(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Eo=He()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,So(e,c)));break;case 22:p=e.memoizedState!==null;var M=r!==null&&r.memoizedState!==null,U=Gi,X=ce;if(Gi=U||p,ce=X||M,Ne(n,e),ce=X,Gi=U,Be(e),c&8192)t:for(n=e.stateNode,n._visibility=p?n._visibility&-2:n._visibility|1,p&&(r===null||M||Gi||ce||Qn(e)),r=null,n=e;;){if(n.tag===5||n.tag===26){if(r===null){M=r=n;try{if(m=M.stateNode,p)A=m.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{C=M.stateNode;var q=M.memoizedProps.style,H=q!=null&&q.hasOwnProperty("display")?q.display:null;C.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(st){Ft(M,M.return,st)}}}else if(n.tag===6){if(r===null){M=n;try{M.stateNode.nodeValue=p?"":M.memoizedProps}catch(st){Ft(M,M.return,st)}}}else if(n.tag===18){if(r===null){M=n;try{var G=M.stateNode;p?xg(G,!0):xg(M.stateNode,!1)}catch(st){Ft(M,M.return,st)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}c&4&&(c=e.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,So(e,r))));break;case 19:Ne(n,e),Be(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,So(e,c)));break;case 30:break;case 21:break;default:Ne(n,e),Be(e)}}function Be(e){var n=e.flags;if(n&2){try{for(var r,c=e.return;c!==null;){if(Tp(c)){r=c;break}c=c.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var p=r.stateNode,m=lu(e);Ao(e,m,p);break;case 5:var A=r.stateNode;r.flags&32&&(ms(A,""),r.flags&=-33);var C=lu(e);Ao(e,C,A);break;case 3:case 4:var M=r.stateNode.containerInfo,U=lu(e);cu(e,U,M);break;default:throw Error(s(161))}}catch(X){Ft(e,e.return,X)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Bp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Bp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Xi(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Rp(e,n.alternate,n),n=n.sibling}function Qn(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:mn(4,n,n.return),Qn(n);break;case 1:Si(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&xp(n,n.return,r),Qn(n);break;case 27:Wa(n.stateNode);case 26:case 5:Si(n,n.return),Qn(n);break;case 22:n.memoizedState===null&&Qn(n);break;case 30:Qn(n);break;default:Qn(n)}e=e.sibling}}function Yi(e,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var c=n.alternate,p=e,m=n,A=m.flags;switch(m.tag){case 0:case 11:case 15:Yi(p,m,r),Ia(4,m);break;case 1:if(Yi(p,m,r),c=m,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(U){Ft(c,c.return,U)}if(c=m,p=c.updateQueue,p!==null){var C=c.stateNode;try{var M=p.shared.hiddenCallbacks;if(M!==null)for(p.shared.hiddenCallbacks=null,p=0;p<M.length;p++)df(M[p],C)}catch(U){Ft(c,c.return,U)}}r&&A&64&&Ep(m),Ua(m,m.return);break;case 27:_p(m);case 26:case 5:Yi(p,m,r),r&&c===null&&A&4&&Cp(m),Ua(m,m.return);break;case 12:Yi(p,m,r);break;case 31:Yi(p,m,r),r&&A&4&&Op(p,m);break;case 13:Yi(p,m,r),r&&A&4&&kp(p,m);break;case 22:m.memoizedState===null&&Yi(p,m,r),Ua(m,m.return);break;case 30:break;default:Yi(p,m,r)}n=n.sibling}}function hu(e,n){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&Ta(r))}function du(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ta(e))}function yi(e,n,r,c){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)zp(e,n,r,c),n=n.sibling}function zp(e,n,r,c){var p=n.flags;switch(n.tag){case 0:case 11:case 15:yi(e,n,r,c),p&2048&&Ia(9,n);break;case 1:yi(e,n,r,c);break;case 3:yi(e,n,r,c),p&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ta(e)));break;case 12:if(p&2048){yi(e,n,r,c),e=n.stateNode;try{var m=n.memoizedProps,A=m.id,C=m.onPostCommit;typeof C=="function"&&C(A,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(M){Ft(n,n.return,M)}}else yi(e,n,r,c);break;case 31:yi(e,n,r,c);break;case 13:yi(e,n,r,c);break;case 23:break;case 22:m=n.stateNode,A=n.alternate,n.memoizedState!==null?m._visibility&2?yi(e,n,r,c):Ha(e,n):m._visibility&2?yi(e,n,r,c):(m._visibility|=2,zs(e,n,r,c,(n.subtreeFlags&10256)!==0||!1)),p&2048&&hu(A,n);break;case 24:yi(e,n,r,c),p&2048&&du(n.alternate,n);break;default:yi(e,n,r,c)}}function zs(e,n,r,c,p){for(p=p&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=e,A=n,C=r,M=c,U=A.flags;switch(A.tag){case 0:case 11:case 15:zs(m,A,C,M,p),Ia(8,A);break;case 23:break;case 22:var X=A.stateNode;A.memoizedState!==null?X._visibility&2?zs(m,A,C,M,p):Ha(m,A):(X._visibility|=2,zs(m,A,C,M,p)),p&&U&2048&&hu(A.alternate,A);break;case 24:zs(m,A,C,M,p),p&&U&2048&&du(A.alternate,A);break;default:zs(m,A,C,M,p)}n=n.sibling}}function Ha(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=e,c=n,p=c.flags;switch(c.tag){case 22:Ha(r,c),p&2048&&hu(c.alternate,c);break;case 24:Ha(r,c),p&2048&&du(c.alternate,c);break;default:Ha(r,c)}n=n.sibling}}var ja=8192;function Ps(e,n,r){if(e.subtreeFlags&ja)for(e=e.child;e!==null;)Pp(e,n,r),e=e.sibling}function Pp(e,n,r){switch(e.tag){case 26:Ps(e,n,r),e.flags&ja&&e.memoizedState!==null&&sv(r,mi,e.memoizedState,e.memoizedProps);break;case 5:Ps(e,n,r);break;case 3:case 4:var c=mi;mi=Bo(e.stateNode.containerInfo),Ps(e,n,r),mi=c;break;case 22:e.memoizedState===null&&(c=e.alternate,c!==null&&c.memoizedState!==null?(c=ja,ja=16777216,Ps(e,n,r),ja=c):Ps(e,n,r));break;default:Ps(e,n,r)}}function Fp(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Ga(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var c=n[r];me=c,Up(c,e)}Fp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ip(e),e=e.sibling}function Ip(e){switch(e.tag){case 0:case 11:case 15:Ga(e),e.flags&2048&&mn(9,e,e.return);break;case 3:Ga(e);break;case 12:Ga(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,wo(e)):Ga(e);break;default:Ga(e)}}function wo(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var c=n[r];me=c,Up(c,e)}Fp(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:mn(8,n,n.return),wo(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,wo(n));break;default:wo(n)}e=e.sibling}}function Up(e,n){for(;me!==null;){var r=me;switch(r.tag){case 0:case 11:case 15:mn(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ta(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,me=c;else t:for(r=e;me!==null;){c=me;var p=c.sibling,m=c.return;if(Dp(c),c===r){me=null;break t}if(p!==null){p.return=m,me=p;break t}me=m}}}var vb={getCacheForType:function(e){var n=Se(re),r=n.data.get(e);return r===void 0&&(r=e(),n.data.set(e,r)),r},cacheSignal:function(){return Se(re).controller.signal}},Ab=typeof WeakMap=="function"?WeakMap:Map,Lt=0,Vt=null,wt=null,Ct=0,Pt=0,$e=null,yn=!1,Fs=!1,fu=!1,qi=0,te=0,bn=0,Zn=0,pu=0,We=0,Is=0,Va=null,ze=null,gu=!1,Eo=0,Hp=0,xo=1/0,Co=null,vn=null,de=0,An=null,Us=null,$i=0,mu=0,yu=null,jp=null,Xa=0,bu=null;function Ke(){return(Lt&2)!==0&&Ct!==0?Ct&-Ct:k.T!==null?xu():nd()}function Gp(){if(We===0)if((Ct&536870912)===0||_t){var e=Or;Or<<=1,(Or&3932160)===0&&(Or=262144),We=e}else We=536870912;return e=Ye.current,e!==null&&(e.flags|=32),We}function Pe(e,n,r){(e===Vt&&(Pt===2||Pt===9)||e.cancelPendingCommit!==null)&&(Hs(e,0),Sn(e,Ct,We,!1)),da(e,r),((Lt&2)===0||e!==Vt)&&(e===Vt&&((Lt&2)===0&&(Zn|=r),te===4&&Sn(e,Ct,We,!1)),wi(e))}function Vp(e,n,r){if((Lt&6)!==0)throw Error(s(327));var c=!r&&(n&127)===0&&(n&e.expiredLanes)===0||ha(e,n),p=c?Eb(e,n):Au(e,n,!0),m=c;do{if(p===0){Fs&&!c&&Sn(e,n,0,!1);break}else{if(r=e.current.alternate,m&&!Sb(r)){p=Au(e,n,!1),m=!1;continue}if(p===2){if(m=n,e.errorRecoveryDisabledLanes&m)var A=0;else A=e.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){n=A;t:{var C=e;p=Va;var M=C.current.memoizedState.isDehydrated;if(M&&(Hs(C,A).flags|=256),A=Au(C,A,!1),A!==2){if(fu&&!M){C.errorRecoveryDisabledLanes|=m,Zn|=m,p=4;break t}m=ze,ze=p,m!==null&&(ze===null?ze=m:ze.push.apply(ze,m))}p=A}if(m=!1,p!==2)continue}}if(p===1){Hs(e,0),Sn(e,n,0,!0);break}t:{switch(c=e,m=p,m){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Sn(c,n,We,!yn);break t;case 2:ze=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(p=Eo+300-He(),10<p)){if(Sn(c,n,We,!yn),Nr(c,0,!0)!==0)break t;$i=n,c.timeoutHandle=Sg(Xp.bind(null,c,r,ze,Co,gu,n,We,Zn,Is,yn,m,"Throttled",-0,0),p);break t}Xp(c,r,ze,Co,gu,n,We,Zn,Is,yn,m,null,-0,0)}}break}while(!0);wi(e)}function Xp(e,n,r,c,p,m,A,C,M,U,X,q,H,G){if(e.timeoutHandle=-1,q=n.subtreeFlags,q&8192||(q&16785408)===16785408){q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ki},Pp(n,m,q);var st=(m&62914560)===m?Eo-He():(m&4194048)===m?Hp-He():0;if(st=av(q,st),st!==null){$i=m,e.cancelPendingCommit=st(Jp.bind(null,e,n,m,r,c,p,A,C,M,X,q,null,H,G)),Sn(e,m,A,!U);return}}Jp(e,n,m,r,c,p,A,C,M)}function Sb(e){for(var n=e;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var p=r[c],m=p.getSnapshot;p=p.value;try{if(!Ve(m(),p))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Sn(e,n,r,c){n&=~pu,n&=~Zn,e.suspendedLanes|=n,e.pingedLanes&=~n,c&&(e.warmLanes|=n),c=e.expirationTimes;for(var p=n;0<p;){var m=31-Ge(p),A=1<<m;c[m]=-1,p&=~A}r!==0&&td(e,r,n)}function To(){return(Lt&6)===0?(Ya(0),!1):!0}function vu(){if(wt!==null){if(Pt===0)var e=wt.return;else e=wt,Pi=Gn=null,Bc(e),Ls=null,Ma=0,e=wt;for(;e!==null;)wp(e.alternate,e),e=e.return;wt=null}}function Hs(e,n){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,Hb(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),$i=0,vu(),Vt=e,wt=r=Bi(e.current,null),Ct=n,Pt=0,$e=null,yn=!1,Fs=ha(e,n),fu=!1,Is=We=pu=Zn=bn=te=0,ze=Va=null,gu=!1,(n&8)!==0&&(n|=n&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=n;0<c;){var p=31-Ge(c),m=1<<p;n|=e[p],c&=~m}return qi=n,Yr(),r}function Yp(e,n){vt=null,k.H=za,n===Ds||n===to?(n=lf(),Pt=3):n===Ec?(n=lf(),Pt=4):Pt=n===Qc?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,$e=n,wt===null&&(te=1,go(e,ni(n,e.current)))}function qp(){var e=Ye.current;return e===null?!0:(Ct&4194048)===Ct?oi===null:(Ct&62914560)===Ct||(Ct&536870912)!==0?e===oi:!1}function $p(){var e=k.H;return k.H=za,e===null?za:e}function Wp(){var e=k.A;return k.A=vb,e}function _o(){te=4,yn||(Ct&4194048)!==Ct&&Ye.current!==null||(Fs=!0),(bn&134217727)===0&&(Zn&134217727)===0||Vt===null||Sn(Vt,Ct,We,!1)}function Au(e,n,r){var c=Lt;Lt|=2;var p=$p(),m=Wp();(Vt!==e||Ct!==n)&&(Co=null,Hs(e,n)),n=!1;var A=te;t:do try{if(Pt!==0&&wt!==null){var C=wt,M=$e;switch(Pt){case 8:vu(),A=6;break t;case 3:case 2:case 9:case 6:Ye.current===null&&(n=!0);var U=Pt;if(Pt=0,$e=null,js(e,C,M,U),r&&Fs){A=0;break t}break;default:U=Pt,Pt=0,$e=null,js(e,C,M,U)}}wb(),A=te;break}catch(X){Yp(e,X)}while(!0);return n&&e.shellSuspendCounter++,Pi=Gn=null,Lt=c,k.H=p,k.A=m,wt===null&&(Vt=null,Ct=0,Yr()),A}function wb(){for(;wt!==null;)Kp(wt)}function Eb(e,n){var r=Lt;Lt|=2;var c=$p(),p=Wp();Vt!==e||Ct!==n?(Co=null,xo=He()+500,Hs(e,n)):Fs=ha(e,n);t:do try{if(Pt!==0&&wt!==null){n=wt;var m=$e;e:switch(Pt){case 1:Pt=0,$e=null,js(e,n,m,1);break;case 2:case 9:if(rf(m)){Pt=0,$e=null,Qp(n);break}n=function(){Pt!==2&&Pt!==9||Vt!==e||(Pt=7),wi(e)},m.then(n,n);break t;case 3:Pt=7;break t;case 4:Pt=5;break t;case 7:rf(m)?(Pt=0,$e=null,Qp(n)):(Pt=0,$e=null,js(e,n,m,7));break;case 5:var A=null;switch(wt.tag){case 26:A=wt.memoizedState;case 5:case 27:var C=wt;if(A?zg(A):C.stateNode.complete){Pt=0,$e=null;var M=C.sibling;if(M!==null)wt=M;else{var U=C.return;U!==null?(wt=U,Mo(U)):wt=null}break e}}Pt=0,$e=null,js(e,n,m,5);break;case 6:Pt=0,$e=null,js(e,n,m,6);break;case 8:vu(),te=6;break t;default:throw Error(s(462))}}xb();break}catch(X){Yp(e,X)}while(!0);return Pi=Gn=null,k.H=c,k.A=p,Lt=r,wt!==null?0:(Vt=null,Ct=0,Yr(),te)}function xb(){for(;wt!==null&&!qy();)Kp(wt)}function Kp(e){var n=Ap(e.alternate,e,qi);e.memoizedProps=e.pendingProps,n===null?Mo(e):wt=n}function Qp(e){var n=e,r=n.alternate;switch(n.tag){case 15:case 0:n=pp(r,n,n.pendingProps,n.type,void 0,Ct);break;case 11:n=pp(r,n,n.pendingProps,n.type.render,n.ref,Ct);break;case 5:Bc(n);default:wp(r,n),n=wt=$d(n,qi),n=Ap(r,n,qi)}e.memoizedProps=e.pendingProps,n===null?Mo(e):wt=n}function js(e,n,r,c){Pi=Gn=null,Bc(n),Ls=null,Ma=0;var p=n.return;try{if(db(e,p,n,r,Ct)){te=1,go(e,ni(r,e.current)),wt=null;return}}catch(m){if(p!==null)throw wt=p,m;te=1,go(e,ni(r,e.current)),wt=null;return}n.flags&32768?(_t||c===1?e=!0:Fs||(Ct&536870912)!==0?e=!1:(yn=e=!0,(c===2||c===9||c===3||c===6)&&(c=Ye.current,c!==null&&c.tag===13&&(c.flags|=16384))),Zp(n,e)):Mo(n)}function Mo(e){var n=e;do{if((n.flags&32768)!==0){Zp(n,yn);return}e=n.return;var r=gb(n.alternate,n,qi);if(r!==null){wt=r;return}if(n=n.sibling,n!==null){wt=n;return}wt=n=e}while(n!==null);te===0&&(te=5)}function Zp(e,n){do{var r=mb(e.alternate,e);if(r!==null){r.flags&=32767,wt=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(e=e.sibling,e!==null)){wt=e;return}wt=e=r}while(e!==null);te=6,wt=null}function Jp(e,n,r,c,p,m,A,C,M){e.cancelPendingCommit=null;do Ro();while(de!==0);if((Lt&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(m=n.lanes|n.childLanes,m|=lc,n0(e,r,m,A,C,M),e===Vt&&(wt=Vt=null,Ct=0),Us=n,An=e,$i=r,mu=m,yu=p,jp=c,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Mb(Dr,function(){return sg(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||c){c=k.T,k.T=null,p=j.p,j.p=2,A=Lt,Lt|=4;try{yb(e,n,r)}finally{Lt=A,j.p=p,k.T=c}}de=1,tg(),eg(),ig()}}function tg(){if(de===1){de=0;var e=An,n=Us,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=k.T,k.T=null;var c=j.p;j.p=2;var p=Lt;Lt|=4;try{Np(n,e);var m=Ou,A=Id(e.containerInfo),C=m.focusedElem,M=m.selectionRange;if(A!==C&&C&&C.ownerDocument&&Fd(C.ownerDocument.documentElement,C)){if(M!==null&&nc(C)){var U=M.start,X=M.end;if(X===void 0&&(X=U),"selectionStart"in C)C.selectionStart=U,C.selectionEnd=Math.min(X,C.value.length);else{var q=C.ownerDocument||document,H=q&&q.defaultView||window;if(H.getSelection){var G=H.getSelection(),st=C.textContent.length,ht=Math.min(M.start,st),Ht=M.end===void 0?ht:Math.min(M.end,st);!G.extend&&ht>Ht&&(A=Ht,Ht=ht,ht=A);var z=Pd(C,ht),O=Pd(C,Ht);if(z&&O&&(G.rangeCount!==1||G.anchorNode!==z.node||G.anchorOffset!==z.offset||G.focusNode!==O.node||G.focusOffset!==O.offset)){var I=q.createRange();I.setStart(z.node,z.offset),G.removeAllRanges(),ht>Ht?(G.addRange(I),G.extend(O.node,O.offset)):(I.setEnd(O.node,O.offset),G.addRange(I))}}}}for(q=[],G=C;G=G.parentNode;)G.nodeType===1&&q.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<q.length;C++){var Y=q[C];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Ho=!!Lu,Ou=Lu=null}finally{Lt=p,j.p=c,k.T=r}}e.current=n,de=2}}function eg(){if(de===2){de=0;var e=An,n=Us,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=k.T,k.T=null;var c=j.p;j.p=2;var p=Lt;Lt|=4;try{Rp(e,n.alternate,n)}finally{Lt=p,j.p=c,k.T=r}}de=3}}function ig(){if(de===4||de===3){de=0,$y();var e=An,n=Us,r=$i,c=jp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?de=5:(de=0,Us=An=null,ng(e,e.pendingLanes));var p=e.pendingLanes;if(p===0&&(vn=null),Fl(r),n=n.stateNode,je&&typeof je.onCommitFiberRoot=="function")try{je.onCommitFiberRoot(ua,n,void 0,(n.current.flags&128)===128)}catch{}if(c!==null){n=k.T,p=j.p,j.p=2,k.T=null;try{for(var m=e.onRecoverableError,A=0;A<c.length;A++){var C=c[A];m(C.value,{componentStack:C.stack})}}finally{k.T=n,j.p=p}}($i&3)!==0&&Ro(),wi(e),p=e.pendingLanes,(r&261930)!==0&&(p&42)!==0?e===bu?Xa++:(Xa=0,bu=e):Xa=0,Ya(0)}}function ng(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Ta(n)))}function Ro(){return tg(),eg(),ig(),sg()}function sg(){if(de!==5)return!1;var e=An,n=mu;mu=0;var r=Fl($i),c=k.T,p=j.p;try{j.p=32>r?32:r,k.T=null,r=yu,yu=null;var m=An,A=$i;if(de=0,Us=An=null,$i=0,(Lt&6)!==0)throw Error(s(331));var C=Lt;if(Lt|=4,Ip(m.current),zp(m,m.current,A,r),Lt=C,Ya(0,!1),je&&typeof je.onPostCommitFiberRoot=="function")try{je.onPostCommitFiberRoot(ua,m)}catch{}return!0}finally{j.p=p,k.T=c,ng(e,n)}}function ag(e,n,r){n=ni(r,n),n=Kc(e.stateNode,n,2),e=fn(e,n,2),e!==null&&(da(e,2),wi(e))}function Ft(e,n,r){if(e.tag===3)ag(e,e,r);else for(;n!==null;){if(n.tag===3){ag(n,e,r);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(vn===null||!vn.has(c))){e=ni(r,e),r=rp(2),c=fn(n,r,2),c!==null&&(op(r,c,n,e),da(c,2),wi(c));break}}n=n.return}}function Su(e,n,r){var c=e.pingCache;if(c===null){c=e.pingCache=new Ab;var p=new Set;c.set(n,p)}else p=c.get(n),p===void 0&&(p=new Set,c.set(n,p));p.has(r)||(fu=!0,p.add(r),e=Cb.bind(null,e,n,r),n.then(e,e))}function Cb(e,n,r){var c=e.pingCache;c!==null&&c.delete(n),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,Vt===e&&(Ct&r)===r&&(te===4||te===3&&(Ct&62914560)===Ct&&300>He()-Eo?(Lt&2)===0&&Hs(e,0):pu|=r,Is===Ct&&(Is=0)),wi(e)}function rg(e,n){n===0&&(n=Jh()),e=Un(e,n),e!==null&&(da(e,n),wi(e))}function Tb(e){var n=e.memoizedState,r=0;n!==null&&(r=n.retryLane),rg(e,r)}function _b(e,n){var r=0;switch(e.tag){case 31:case 13:var c=e.stateNode,p=e.memoizedState;p!==null&&(r=p.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(n),rg(e,r)}function Mb(e,n){return Nl(e,n)}var Do=null,Gs=null,wu=!1,Lo=!1,Eu=!1,wn=0;function wi(e){e!==Gs&&e.next===null&&(Gs===null?Do=Gs=e:Gs=Gs.next=e),Lo=!0,wu||(wu=!0,Db())}function Ya(e,n){if(!Eu&&Lo){Eu=!0;do for(var r=!1,c=Do;c!==null;){if(e!==0){var p=c.pendingLanes;if(p===0)var m=0;else{var A=c.suspendedLanes,C=c.pingedLanes;m=(1<<31-Ge(42|e)+1)-1,m&=p&~(A&~C),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,ug(c,m))}else m=Ct,m=Nr(c,c===Vt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||ha(c,m)||(r=!0,ug(c,m));c=c.next}while(r);Eu=!1}}function Rb(){og()}function og(){Lo=wu=!1;var e=0;wn!==0&&Ub()&&(e=wn);for(var n=He(),r=null,c=Do;c!==null;){var p=c.next,m=lg(c,n);m===0?(c.next=null,r===null?Do=p:r.next=p,p===null&&(Gs=r)):(r=c,(e!==0||(m&3)!==0)&&(Lo=!0)),c=p}de!==0&&de!==5||Ya(e),wn!==0&&(wn=0)}function lg(e,n){for(var r=e.suspendedLanes,c=e.pingedLanes,p=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var A=31-Ge(m),C=1<<A,M=p[A];M===-1?((C&r)===0||(C&c)!==0)&&(p[A]=i0(C,n)):M<=n&&(e.expiredLanes|=C),m&=~C}if(n=Vt,r=Ct,r=Nr(e,e===n?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,r===0||e===n&&(Pt===2||Pt===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&Bl(c),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||ha(e,r)){if(n=r&-r,n===e.callbackPriority)return n;switch(c!==null&&Bl(c),Fl(r)){case 2:case 8:r=Qh;break;case 32:r=Dr;break;case 268435456:r=Zh;break;default:r=Dr}return c=cg.bind(null,e),r=Nl(r,c),e.callbackPriority=n,e.callbackNode=r,n}return c!==null&&c!==null&&Bl(c),e.callbackPriority=2,e.callbackNode=null,2}function cg(e,n){if(de!==0&&de!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(Ro()&&e.callbackNode!==r)return null;var c=Ct;return c=Nr(e,e===Vt?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(Vp(e,c,n),lg(e,He()),e.callbackNode!=null&&e.callbackNode===r?cg.bind(null,e):null)}function ug(e,n){if(Ro())return null;Vp(e,n,!0)}function Db(){jb(function(){(Lt&6)!==0?Nl(Kh,Rb):og()})}function xu(){if(wn===0){var e=Ms;e===0&&(e=Lr,Lr<<=1,(Lr&261888)===0&&(Lr=256)),wn=e}return wn}function hg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Fr(""+e)}function dg(e,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,e.id&&r.setAttribute("form",e.id),n.parentNode.insertBefore(r,n),e=new FormData(e),r.parentNode.removeChild(r),e}function Lb(e,n,r,c,p){if(n==="submit"&&r&&r.stateNode===p){var m=hg((p[Le]||null).action),A=c.submitter;A&&(n=(n=A[Le]||null)?hg(n.formAction):A.getAttribute("formAction"),n!==null&&(m=n,A=null));var C=new jr("action","action",null,c,p);e.push({event:C,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(wn!==0){var M=A?dg(p,A):new FormData(p);Vc(r,{pending:!0,data:M,method:p.method,action:m},null,M)}}else typeof m=="function"&&(C.preventDefault(),M=A?dg(p,A):new FormData(p),Vc(r,{pending:!0,data:M,method:p.method,action:m},m,M))},currentTarget:p}]})}}for(var Cu=0;Cu<oc.length;Cu++){var Tu=oc[Cu],Ob=Tu.toLowerCase(),kb=Tu[0].toUpperCase()+Tu.slice(1);gi(Ob,"on"+kb)}gi(jd,"onAnimationEnd"),gi(Gd,"onAnimationIteration"),gi(Vd,"onAnimationStart"),gi("dblclick","onDoubleClick"),gi("focusin","onFocus"),gi("focusout","onBlur"),gi(W0,"onTransitionRun"),gi(K0,"onTransitionStart"),gi(Q0,"onTransitionCancel"),gi(Xd,"onTransitionEnd"),ps("onMouseEnter",["mouseout","mouseover"]),ps("onMouseLeave",["mouseout","mouseover"]),ps("onPointerEnter",["pointerout","pointerover"]),ps("onPointerLeave",["pointerout","pointerover"]),zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zn("onBeforeInput",["compositionend","keypress","textInput","paste"]),zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qa));function fg(e,n){n=(n&4)!==0;for(var r=0;r<e.length;r++){var c=e[r],p=c.event;c=c.listeners;t:{var m=void 0;if(n)for(var A=c.length-1;0<=A;A--){var C=c[A],M=C.instance,U=C.currentTarget;if(C=C.listener,M!==m&&p.isPropagationStopped())break t;m=C,p.currentTarget=U;try{m(p)}catch(X){Xr(X)}p.currentTarget=null,m=M}else for(A=0;A<c.length;A++){if(C=c[A],M=C.instance,U=C.currentTarget,C=C.listener,M!==m&&p.isPropagationStopped())break t;m=C,p.currentTarget=U;try{m(p)}catch(X){Xr(X)}p.currentTarget=null,m=M}}}}function Et(e,n){var r=n[Il];r===void 0&&(r=n[Il]=new Set);var c=e+"__bubble";r.has(c)||(pg(n,e,2,!1),r.add(c))}function _u(e,n,r){var c=0;n&&(c|=4),pg(r,e,c,n)}var Oo="_reactListening"+Math.random().toString(36).slice(2);function Mu(e){if(!e[Oo]){e[Oo]=!0,rd.forEach(function(r){r!=="selectionchange"&&(Nb.has(r)||_u(r,!1,e),_u(r,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Oo]||(n[Oo]=!0,_u("selectionchange",!1,n))}}function pg(e,n,r,c){switch(Gg(n)){case 2:var p=lv;break;case 8:p=cv;break;default:p=Gu}r=p.bind(null,n,r,e),p=void 0,!$l||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(p=!0),c?p!==void 0?e.addEventListener(n,r,{capture:!0,passive:p}):e.addEventListener(n,r,!0):p!==void 0?e.addEventListener(n,r,{passive:p}):e.addEventListener(n,r,!1)}function Ru(e,n,r,c,p){var m=c;if((n&1)===0&&(n&2)===0&&c!==null)t:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var C=c.stateNode.containerInfo;if(C===p)break;if(A===4)for(A=c.return;A!==null;){var M=A.tag;if((M===3||M===4)&&A.stateNode.containerInfo===p)return;A=A.return}for(;C!==null;){if(A=hs(C),A===null)return;if(M=A.tag,M===5||M===6||M===26||M===27){c=m=A;continue t}C=C.parentNode}}c=c.return}bd(function(){var U=m,X=Yl(r),q=[];t:{var H=Yd.get(e);if(H!==void 0){var G=jr,st=e;switch(e){case"keypress":if(Ur(r)===0)break t;case"keydown":case"keyup":G=_0;break;case"focusin":st="focus",G=Zl;break;case"focusout":st="blur",G=Zl;break;case"beforeblur":case"afterblur":G=Zl;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Sd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=g0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=D0;break;case jd:case Gd:case Vd:G=b0;break;case Xd:G=O0;break;case"scroll":case"scrollend":G=f0;break;case"wheel":G=N0;break;case"copy":case"cut":case"paste":G=A0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Ed;break;case"toggle":case"beforetoggle":G=z0}var ht=(n&4)!==0,Ht=!ht&&(e==="scroll"||e==="scrollend"),z=ht?H!==null?H+"Capture":null:H;ht=[];for(var O=U,I;O!==null;){var Y=O;if(I=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||I===null||z===null||(Y=ga(O,z),Y!=null&&ht.push($a(O,Y,I))),Ht)break;O=O.return}0<ht.length&&(H=new G(H,st,null,r,X),q.push({event:H,listeners:ht}))}}if((n&7)===0){t:{if(H=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",H&&r!==Xl&&(st=r.relatedTarget||r.fromElement)&&(hs(st)||st[us]))break t;if((G||H)&&(H=X.window===X?X:(H=X.ownerDocument)?H.defaultView||H.parentWindow:window,G?(st=r.relatedTarget||r.toElement,G=U,st=st?hs(st):null,st!==null&&(Ht=o(st),ht=st.tag,st!==Ht||ht!==5&&ht!==27&&ht!==6)&&(st=null)):(G=null,st=U),G!==st)){if(ht=Sd,Y="onMouseLeave",z="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(ht=Ed,Y="onPointerLeave",z="onPointerEnter",O="pointer"),Ht=G==null?H:pa(G),I=st==null?H:pa(st),H=new ht(Y,O+"leave",G,r,X),H.target=Ht,H.relatedTarget=I,Y=null,hs(X)===U&&(ht=new ht(z,O+"enter",st,r,X),ht.target=I,ht.relatedTarget=Ht,Y=ht),Ht=Y,G&&st)e:{for(ht=Bb,z=G,O=st,I=0,Y=z;Y;Y=ht(Y))I++;Y=0;for(var ot=O;ot;ot=ht(ot))Y++;for(;0<I-Y;)z=ht(z),I--;for(;0<Y-I;)O=ht(O),Y--;for(;I--;){if(z===O||O!==null&&z===O.alternate){ht=z;break e}z=ht(z),O=ht(O)}ht=null}else ht=null;G!==null&&gg(q,H,G,ht,!1),st!==null&&Ht!==null&&gg(q,Ht,st,ht,!0)}}t:{if(H=U?pa(U):window,G=H.nodeName&&H.nodeName.toLowerCase(),G==="select"||G==="input"&&H.type==="file")var Rt=Ld;else if(Rd(H))if(Od)Rt=Y0;else{Rt=V0;var at=G0}else G=H.nodeName,!G||G.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?U&&Vl(U.elementType)&&(Rt=Ld):Rt=X0;if(Rt&&(Rt=Rt(e,U))){Dd(q,Rt,r,X);break t}at&&at(e,H,U),e==="focusout"&&U&&H.type==="number"&&U.memoizedProps.value!=null&&Gl(H,"number",H.value)}switch(at=U?pa(U):window,e){case"focusin":(Rd(at)||at.contentEditable==="true")&&(As=at,sc=U,Ea=null);break;case"focusout":Ea=sc=As=null;break;case"mousedown":ac=!0;break;case"contextmenu":case"mouseup":case"dragend":ac=!1,Ud(q,r,X);break;case"selectionchange":if($0)break;case"keydown":case"keyup":Ud(q,r,X)}var At;if(tc)t:{switch(e){case"compositionstart":var Tt="onCompositionStart";break t;case"compositionend":Tt="onCompositionEnd";break t;case"compositionupdate":Tt="onCompositionUpdate";break t}Tt=void 0}else vs?_d(e,r)&&(Tt="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Tt="onCompositionStart");Tt&&(xd&&r.locale!=="ko"&&(vs||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&vs&&(At=vd()):(rn=X,Wl="value"in rn?rn.value:rn.textContent,vs=!0)),at=ko(U,Tt),0<at.length&&(Tt=new wd(Tt,e,null,r,X),q.push({event:Tt,listeners:at}),At?Tt.data=At:(At=Md(r),At!==null&&(Tt.data=At)))),(At=F0?I0(e,r):U0(e,r))&&(Tt=ko(U,"onBeforeInput"),0<Tt.length&&(at=new wd("onBeforeInput","beforeinput",null,r,X),q.push({event:at,listeners:Tt}),at.data=At)),Lb(q,e,U,r,X)}fg(q,n)})}function $a(e,n,r){return{instance:e,listener:n,currentTarget:r}}function ko(e,n){for(var r=n+"Capture",c=[];e!==null;){var p=e,m=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||m===null||(p=ga(e,r),p!=null&&c.unshift($a(e,p,m)),p=ga(e,n),p!=null&&c.push($a(e,p,m))),e.tag===3)return c;e=e.return}return[]}function Bb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function gg(e,n,r,c,p){for(var m=n._reactName,A=[];r!==null&&r!==c;){var C=r,M=C.alternate,U=C.stateNode;if(C=C.tag,M!==null&&M===c)break;C!==5&&C!==26&&C!==27||U===null||(M=U,p?(U=ga(r,m),U!=null&&A.unshift($a(r,U,M))):p||(U=ga(r,m),U!=null&&A.push($a(r,U,M)))),r=r.return}A.length!==0&&e.push({event:n,listeners:A})}var zb=/\r\n?/g,Pb=/\u0000|\uFFFD/g;function mg(e){return(typeof e=="string"?e:""+e).replace(zb,`
`).replace(Pb,"")}function yg(e,n){return n=mg(n),mg(e)===n}function Ut(e,n,r,c,p,m){switch(r){case"children":typeof c=="string"?n==="body"||n==="textarea"&&c===""||ms(e,c):(typeof c=="number"||typeof c=="bigint")&&n!=="body"&&ms(e,""+c);break;case"className":zr(e,"class",c);break;case"tabIndex":zr(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":zr(e,r,c);break;case"style":md(e,c,m);break;case"data":if(n!=="object"){zr(e,"data",c);break}case"src":case"href":if(c===""&&(n!=="a"||r!=="href")){e.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(r);break}c=Fr(""+c),e.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(n!=="input"&&Ut(e,n,"name",p.name,p,null),Ut(e,n,"formEncType",p.formEncType,p,null),Ut(e,n,"formMethod",p.formMethod,p,null),Ut(e,n,"formTarget",p.formTarget,p,null)):(Ut(e,n,"encType",p.encType,p,null),Ut(e,n,"method",p.method,p,null),Ut(e,n,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(r);break}c=Fr(""+c),e.setAttribute(r,c);break;case"onClick":c!=null&&(e.onclick=ki);break;case"onScroll":c!=null&&Et("scroll",e);break;case"onScrollEnd":c!=null&&Et("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(r=c.__html,r!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=r}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}r=Fr(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(r,""+c):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":c===!0?e.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(r,c):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(r,c):e.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(r):e.setAttribute(r,c);break;case"popover":Et("beforetoggle",e),Et("toggle",e),Br(e,"popover",c);break;case"xlinkActuate":Oi(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Oi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Oi(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Oi(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Oi(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Oi(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Oi(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Oi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Oi(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Br(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=h0.get(r)||r,Br(e,r,c))}}function Du(e,n,r,c,p,m){switch(r){case"style":md(e,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(r=c.__html,r!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=r}}break;case"children":typeof c=="string"?ms(e,c):(typeof c=="number"||typeof c=="bigint")&&ms(e,""+c);break;case"onScroll":c!=null&&Et("scroll",e);break;case"onScrollEnd":c!=null&&Et("scrollend",e);break;case"onClick":c!=null&&(e.onclick=ki);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!od.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(p=r.endsWith("Capture"),n=r.slice(2,p?r.length-7:void 0),m=e[Le]||null,m=m!=null?m[r]:null,typeof m=="function"&&e.removeEventListener(n,m,p),typeof c=="function")){typeof m!="function"&&m!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(n,c,p);break t}r in e?e[r]=c:c===!0?e.setAttribute(r,""):Br(e,r,c)}}}function Ee(e,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Et("error",e),Et("load",e);var c=!1,p=!1,m;for(m in r)if(r.hasOwnProperty(m)){var A=r[m];if(A!=null)switch(m){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Ut(e,n,m,A,r,null)}}p&&Ut(e,n,"srcSet",r.srcSet,r,null),c&&Ut(e,n,"src",r.src,r,null);return;case"input":Et("invalid",e);var C=m=A=p=null,M=null,U=null;for(c in r)if(r.hasOwnProperty(c)){var X=r[c];if(X!=null)switch(c){case"name":p=X;break;case"type":A=X;break;case"checked":M=X;break;case"defaultChecked":U=X;break;case"value":m=X;break;case"defaultValue":C=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,n));break;default:Ut(e,n,c,X,r,null)}}dd(e,m,C,M,U,A,p,!1);return;case"select":Et("invalid",e),c=A=m=null;for(p in r)if(r.hasOwnProperty(p)&&(C=r[p],C!=null))switch(p){case"value":m=C;break;case"defaultValue":A=C;break;case"multiple":c=C;default:Ut(e,n,p,C,r,null)}n=m,r=A,e.multiple=!!c,n!=null?gs(e,!!c,n,!1):r!=null&&gs(e,!!c,r,!0);return;case"textarea":Et("invalid",e),m=p=c=null;for(A in r)if(r.hasOwnProperty(A)&&(C=r[A],C!=null))switch(A){case"value":c=C;break;case"defaultValue":p=C;break;case"children":m=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:Ut(e,n,A,C,r,null)}pd(e,c,p,m);return;case"option":for(M in r)r.hasOwnProperty(M)&&(c=r[M],c!=null)&&(M==="selected"?e.selected=c&&typeof c!="function"&&typeof c!="symbol":Ut(e,n,M,c,r,null));return;case"dialog":Et("beforetoggle",e),Et("toggle",e),Et("cancel",e),Et("close",e);break;case"iframe":case"object":Et("load",e);break;case"video":case"audio":for(c=0;c<qa.length;c++)Et(qa[c],e);break;case"image":Et("error",e),Et("load",e);break;case"details":Et("toggle",e);break;case"embed":case"source":case"link":Et("error",e),Et("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in r)if(r.hasOwnProperty(U)&&(c=r[U],c!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Ut(e,n,U,c,r,null)}return;default:if(Vl(n)){for(X in r)r.hasOwnProperty(X)&&(c=r[X],c!==void 0&&Du(e,n,X,c,r,void 0));return}}for(C in r)r.hasOwnProperty(C)&&(c=r[C],c!=null&&Ut(e,n,C,c,r,null))}function Fb(e,n,r,c){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,m=null,A=null,C=null,M=null,U=null,X=null;for(G in r){var q=r[G];if(r.hasOwnProperty(G)&&q!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":M=q;default:c.hasOwnProperty(G)||Ut(e,n,G,null,c,q)}}for(var H in c){var G=c[H];if(q=r[H],c.hasOwnProperty(H)&&(G!=null||q!=null))switch(H){case"type":m=G;break;case"name":p=G;break;case"checked":U=G;break;case"defaultChecked":X=G;break;case"value":A=G;break;case"defaultValue":C=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,n));break;default:G!==q&&Ut(e,n,H,G,c,q)}}jl(e,A,C,M,U,X,m,p);return;case"select":G=A=C=H=null;for(m in r)if(M=r[m],r.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":G=M;default:c.hasOwnProperty(m)||Ut(e,n,m,null,c,M)}for(p in c)if(m=c[p],M=r[p],c.hasOwnProperty(p)&&(m!=null||M!=null))switch(p){case"value":H=m;break;case"defaultValue":C=m;break;case"multiple":A=m;default:m!==M&&Ut(e,n,p,m,c,M)}n=C,r=A,c=G,H!=null?gs(e,!!r,H,!1):!!c!=!!r&&(n!=null?gs(e,!!r,n,!0):gs(e,!!r,r?[]:"",!1));return;case"textarea":G=H=null;for(C in r)if(p=r[C],r.hasOwnProperty(C)&&p!=null&&!c.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Ut(e,n,C,null,c,p)}for(A in c)if(p=c[A],m=r[A],c.hasOwnProperty(A)&&(p!=null||m!=null))switch(A){case"value":H=p;break;case"defaultValue":G=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==m&&Ut(e,n,A,p,c,m)}fd(e,H,G);return;case"option":for(var st in r)H=r[st],r.hasOwnProperty(st)&&H!=null&&!c.hasOwnProperty(st)&&(st==="selected"?e.selected=!1:Ut(e,n,st,null,c,H));for(M in c)H=c[M],G=r[M],c.hasOwnProperty(M)&&H!==G&&(H!=null||G!=null)&&(M==="selected"?e.selected=H&&typeof H!="function"&&typeof H!="symbol":Ut(e,n,M,H,c,G));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ht in r)H=r[ht],r.hasOwnProperty(ht)&&H!=null&&!c.hasOwnProperty(ht)&&Ut(e,n,ht,null,c,H);for(U in c)if(H=c[U],G=r[U],c.hasOwnProperty(U)&&H!==G&&(H!=null||G!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,n));break;default:Ut(e,n,U,H,c,G)}return;default:if(Vl(n)){for(var Ht in r)H=r[Ht],r.hasOwnProperty(Ht)&&H!==void 0&&!c.hasOwnProperty(Ht)&&Du(e,n,Ht,void 0,c,H);for(X in c)H=c[X],G=r[X],!c.hasOwnProperty(X)||H===G||H===void 0&&G===void 0||Du(e,n,X,H,c,G);return}}for(var z in r)H=r[z],r.hasOwnProperty(z)&&H!=null&&!c.hasOwnProperty(z)&&Ut(e,n,z,null,c,H);for(q in c)H=c[q],G=r[q],!c.hasOwnProperty(q)||H===G||H==null&&G==null||Ut(e,n,q,H,c,G)}function bg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ib(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,r=performance.getEntriesByType("resource"),c=0;c<r.length;c++){var p=r[c],m=p.transferSize,A=p.initiatorType,C=p.duration;if(m&&C&&bg(A)){for(A=0,C=p.responseEnd,c+=1;c<r.length;c++){var M=r[c],U=M.startTime;if(U>C)break;var X=M.transferSize,q=M.initiatorType;X&&bg(q)&&(M=M.responseEnd,A+=X*(M<C?1:(C-U)/(M-U)))}if(--c,n+=8*(m+A)/(p.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Lu=null,Ou=null;function No(e){return e.nodeType===9?e:e.ownerDocument}function vg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ag(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function ku(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Nu=null;function Ub(){var e=window.event;return e&&e.type==="popstate"?e===Nu?!1:(Nu=e,!0):(Nu=null,!1)}var Sg=typeof setTimeout=="function"?setTimeout:void 0,Hb=typeof clearTimeout=="function"?clearTimeout:void 0,wg=typeof Promise=="function"?Promise:void 0,jb=typeof queueMicrotask=="function"?queueMicrotask:typeof wg<"u"?function(e){return wg.resolve(null).then(e).catch(Gb)}:Sg;function Gb(e){setTimeout(function(){throw e})}function En(e){return e==="head"}function Eg(e,n){var r=n,c=0;do{var p=r.nextSibling;if(e.removeChild(r),p&&p.nodeType===8)if(r=p.data,r==="/$"||r==="/&"){if(c===0){e.removeChild(p),qs(n);return}c--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")c++;else if(r==="html")Wa(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,Wa(r);for(var m=r.firstChild;m;){var A=m.nextSibling,C=m.nodeName;m[fa]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&m.rel.toLowerCase()==="stylesheet"||r.removeChild(m),m=A}}else r==="body"&&Wa(e.ownerDocument.body);r=p}while(r);qs(n)}function xg(e,n){var r=e;e=0;do{var c=r.nextSibling;if(r.nodeType===1?n?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(n?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=c}while(r)}function Bu(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Bu(r),Ul(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function Vb(e,n,r,c){for(;e.nodeType===1;){var p=r;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[fa])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==p.rel||e.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||e.getAttribute("title")!==(p.title==null?null:p.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(p.src==null?null:p.src)||e.getAttribute("type")!==(p.type==null?null:p.type)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var m=p.name==null?null:""+p.name;if(p.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=li(e.nextSibling),e===null)break}return null}function Xb(e,n,r){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=li(e.nextSibling),e===null))return null;return e}function Cg(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=li(e.nextSibling),e===null))return null;return e}function zu(e){return e.data==="$?"||e.data==="$~"}function Pu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Yb(e,n){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||r.readyState!=="loading")n();else{var c=function(){n(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function li(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Fu=null;function Tg(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(n===0)return li(e.nextSibling);n--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||n++}e=e.nextSibling}return null}function _g(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(n===0)return e;n--}else r!=="/$"&&r!=="/&"||n++}e=e.previousSibling}return null}function Mg(e,n,r){switch(n=No(r),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Wa(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Ul(e)}var ci=new Map,Rg=new Set;function Bo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Wi=j.d;j.d={f:qb,r:$b,D:Wb,C:Kb,L:Qb,m:Zb,X:tv,S:Jb,M:ev};function qb(){var e=Wi.f(),n=To();return e||n}function $b(e){var n=ds(e);n!==null&&n.tag===5&&n.type==="form"?Yf(n):Wi.r(e)}var Vs=typeof document>"u"?null:document;function Dg(e,n,r){var c=Vs;if(c&&typeof n=="string"&&n){var p=ei(n);p='link[rel="'+e+'"][href="'+p+'"]',typeof r=="string"&&(p+='[crossorigin="'+r+'"]'),Rg.has(p)||(Rg.add(p),e={rel:e,crossOrigin:r,href:n},c.querySelector(p)===null&&(n=c.createElement("link"),Ee(n,"link",e),ge(n),c.head.appendChild(n)))}}function Wb(e){Wi.D(e),Dg("dns-prefetch",e,null)}function Kb(e,n){Wi.C(e,n),Dg("preconnect",e,n)}function Qb(e,n,r){Wi.L(e,n,r);var c=Vs;if(c&&e&&n){var p='link[rel="preload"][as="'+ei(n)+'"]';n==="image"&&r&&r.imageSrcSet?(p+='[imagesrcset="'+ei(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(p+='[imagesizes="'+ei(r.imageSizes)+'"]')):p+='[href="'+ei(e)+'"]';var m=p;switch(n){case"style":m=Xs(e);break;case"script":m=Ys(e)}ci.has(m)||(e=y({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:e,as:n},r),ci.set(m,e),c.querySelector(p)!==null||n==="style"&&c.querySelector(Ka(m))||n==="script"&&c.querySelector(Qa(m))||(n=c.createElement("link"),Ee(n,"link",e),ge(n),c.head.appendChild(n)))}}function Zb(e,n){Wi.m(e,n);var r=Vs;if(r&&e){var c=n&&typeof n.as=="string"?n.as:"script",p='link[rel="modulepreload"][as="'+ei(c)+'"][href="'+ei(e)+'"]',m=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Ys(e)}if(!ci.has(m)&&(e=y({rel:"modulepreload",href:e},n),ci.set(m,e),r.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Qa(m)))return}c=r.createElement("link"),Ee(c,"link",e),ge(c),r.head.appendChild(c)}}}function Jb(e,n,r){Wi.S(e,n,r);var c=Vs;if(c&&e){var p=fs(c).hoistableStyles,m=Xs(e);n=n||"default";var A=p.get(m);if(!A){var C={loading:0,preload:null};if(A=c.querySelector(Ka(m)))C.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":n},r),(r=ci.get(m))&&Iu(e,r);var M=A=c.createElement("link");ge(M),Ee(M,"link",e),M._p=new Promise(function(U,X){M.onload=U,M.onerror=X}),M.addEventListener("load",function(){C.loading|=1}),M.addEventListener("error",function(){C.loading|=2}),C.loading|=4,zo(A,n,c)}A={type:"stylesheet",instance:A,count:1,state:C},p.set(m,A)}}}function tv(e,n){Wi.X(e,n);var r=Vs;if(r&&e){var c=fs(r).hoistableScripts,p=Ys(e),m=c.get(p);m||(m=r.querySelector(Qa(p)),m||(e=y({src:e,async:!0},n),(n=ci.get(p))&&Uu(e,n),m=r.createElement("script"),ge(m),Ee(m,"link",e),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(p,m))}}function ev(e,n){Wi.M(e,n);var r=Vs;if(r&&e){var c=fs(r).hoistableScripts,p=Ys(e),m=c.get(p);m||(m=r.querySelector(Qa(p)),m||(e=y({src:e,async:!0,type:"module"},n),(n=ci.get(p))&&Uu(e,n),m=r.createElement("script"),ge(m),Ee(m,"link",e),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(p,m))}}function Lg(e,n,r,c){var p=(p=ft.current)?Bo(p):null;if(!p)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=Xs(r.href),r=fs(p).hoistableStyles,c=r.get(n),c||(c={type:"style",instance:null,count:0,state:null},r.set(n,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=Xs(r.href);var m=fs(p).hoistableStyles,A=m.get(e);if(A||(p=p.ownerDocument||p,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,A),(m=p.querySelector(Ka(e)))&&!m._p&&(A.instance=m,A.state.loading=5),ci.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},ci.set(e,r),m||iv(p,e,r,A.state))),n&&c===null)throw Error(s(528,""));return A}if(n&&c!==null)throw Error(s(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Ys(r),r=fs(p).hoistableScripts,c=r.get(n),c||(c={type:"script",instance:null,count:0,state:null},r.set(n,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Xs(e){return'href="'+ei(e)+'"'}function Ka(e){return'link[rel="stylesheet"]['+e+"]"}function Og(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function iv(e,n,r,c){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?c.loading=1:(n=e.createElement("link"),c.preload=n,n.addEventListener("load",function(){return c.loading|=1}),n.addEventListener("error",function(){return c.loading|=2}),Ee(n,"link",r),ge(n),e.head.appendChild(n))}function Ys(e){return'[src="'+ei(e)+'"]'}function Qa(e){return"script[async]"+e}function kg(e,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var c=e.querySelector('style[data-href~="'+ei(r.href)+'"]');if(c)return n.instance=c,ge(c),c;var p=y({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),ge(c),Ee(c,"style",p),zo(c,r.precedence,e),n.instance=c;case"stylesheet":p=Xs(r.href);var m=e.querySelector(Ka(p));if(m)return n.state.loading|=4,n.instance=m,ge(m),m;c=Og(r),(p=ci.get(p))&&Iu(c,p),m=(e.ownerDocument||e).createElement("link"),ge(m);var A=m;return A._p=new Promise(function(C,M){A.onload=C,A.onerror=M}),Ee(m,"link",c),n.state.loading|=4,zo(m,r.precedence,e),n.instance=m;case"script":return m=Ys(r.src),(p=e.querySelector(Qa(m)))?(n.instance=p,ge(p),p):(c=r,(p=ci.get(m))&&(c=y({},r),Uu(c,p)),e=e.ownerDocument||e,p=e.createElement("script"),ge(p),Ee(p,"link",c),e.head.appendChild(p),n.instance=p);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(c=n.instance,n.state.loading|=4,zo(c,r.precedence,e));return n.instance}function zo(e,n,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,m=p,A=0;A<c.length;A++){var C=c[A];if(C.dataset.precedence===n)m=C;else if(m!==p)break}m?m.parentNode.insertBefore(e,m.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(e,n.firstChild))}function Iu(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Uu(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Po=null;function Ng(e,n,r){if(Po===null){var c=new Map,p=Po=new Map;p.set(r,c)}else p=Po,c=p.get(r),c||(c=new Map,p.set(r,c));if(c.has(e))return c;for(c.set(e,null),r=r.getElementsByTagName(e),p=0;p<r.length;p++){var m=r[p];if(!(m[fa]||m[ve]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var A=m.getAttribute(n)||"";A=e+A;var C=c.get(A);C?C.push(m):c.set(A,[m])}}return c}function Bg(e,n,r){e=e.ownerDocument||e,e.head.insertBefore(r,n==="title"?e.querySelector("head > title"):null)}function nv(e,n,r){if(r===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function zg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function sv(e,n,r,c){if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var p=Xs(c.href),m=n.querySelector(Ka(p));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Fo.bind(e),n.then(e,e)),r.state.loading|=4,r.instance=m,ge(m);return}m=n.ownerDocument||n,c=Og(c),(p=ci.get(p))&&Iu(c,p),m=m.createElement("link"),ge(m);var A=m;A._p=new Promise(function(C,M){A.onload=C,A.onerror=M}),Ee(m,"link",c),r.instance=m}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(e.count++,r=Fo.bind(e),n.addEventListener("load",r),n.addEventListener("error",r))}}var Hu=0;function av(e,n){return e.stylesheets&&e.count===0&&Uo(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var c=setTimeout(function(){if(e.stylesheets&&Uo(e,e.stylesheets),e.unsuspend){var m=e.unsuspend;e.unsuspend=null,m()}},6e4+n);0<e.imgBytes&&Hu===0&&(Hu=62500*Ib());var p=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Uo(e,e.stylesheets),e.unsuspend)){var m=e.unsuspend;e.unsuspend=null,m()}},(e.imgBytes>Hu?50:800)+n);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(c),clearTimeout(p)}}:null}function Fo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Uo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Io=null;function Uo(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Io=new Map,n.forEach(rv,e),Io=null,Fo.call(e))}function rv(e,n){if(!(n.state.loading&4)){var r=Io.get(e);if(r)var c=r.get(null);else{r=new Map,Io.set(e,r);for(var p=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<p.length;m++){var A=p[m];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(r.set(A.dataset.precedence,A),c=A)}c&&r.set(null,c)}p=n.instance,A=p.getAttribute("data-precedence"),m=r.get(A)||c,m===c&&r.set(null,p),r.set(A,p),this.count++,c=Fo.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),m?m.parentNode.insertBefore(p,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(p,e.firstChild)),n.state.loading|=4}}var Za={$$typeof:T,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function ov(e,n,r,c,p,m,A,C,M){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zl(0),this.hiddenUpdates=zl(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=m,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function Pg(e,n,r,c,p,m,A,C,M,U,X,q){return e=new ov(e,n,r,A,M,U,X,q,C),n=1,m===!0&&(n|=24),m=Xe(3,null,null,n),e.current=m,m.stateNode=e,n=Ac(),n.refCount++,e.pooledCache=n,n.refCount++,m.memoizedState={element:c,isDehydrated:r,cache:n},xc(m),e}function Fg(e){return e?(e=Es,e):Es}function Ig(e,n,r,c,p,m){p=Fg(p),c.context===null?c.context=p:c.pendingContext=p,c=dn(n),c.payload={element:r},m=m===void 0?null:m,m!==null&&(c.callback=m),r=fn(e,c,n),r!==null&&(Pe(r,e,n),Da(r,e,n))}function Ug(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<n?r:n}}function ju(e,n){Ug(e,n),(e=e.alternate)&&Ug(e,n)}function Hg(e){if(e.tag===13||e.tag===31){var n=Un(e,67108864);n!==null&&Pe(n,e,67108864),ju(e,67108864)}}function jg(e){if(e.tag===13||e.tag===31){var n=Ke();n=Pl(n);var r=Un(e,n);r!==null&&Pe(r,e,n),ju(e,n)}}var Ho=!0;function lv(e,n,r,c){var p=k.T;k.T=null;var m=j.p;try{j.p=2,Gu(e,n,r,c)}finally{j.p=m,k.T=p}}function cv(e,n,r,c){var p=k.T;k.T=null;var m=j.p;try{j.p=8,Gu(e,n,r,c)}finally{j.p=m,k.T=p}}function Gu(e,n,r,c){if(Ho){var p=Vu(c);if(p===null)Ru(e,n,c,jo,r),Vg(e,c);else if(hv(p,e,n,r,c))c.stopPropagation();else if(Vg(e,c),n&4&&-1<uv.indexOf(e)){for(;p!==null;){var m=ds(p);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var A=Bn(m.pendingLanes);if(A!==0){var C=m;for(C.pendingLanes|=2,C.entangledLanes|=2;A;){var M=1<<31-Ge(A);C.entanglements[1]|=M,A&=~M}wi(m),(Lt&6)===0&&(xo=He()+500,Ya(0))}}break;case 31:case 13:C=Un(m,2),C!==null&&Pe(C,m,2),To(),ju(m,2)}if(m=Vu(c),m===null&&Ru(e,n,c,jo,r),m===p)break;p=m}p!==null&&c.stopPropagation()}else Ru(e,n,c,null,r)}}function Vu(e){return e=Yl(e),Xu(e)}var jo=null;function Xu(e){if(jo=null,e=hs(e),e!==null){var n=o(e);if(n===null)e=null;else{var r=n.tag;if(r===13){if(e=l(n),e!==null)return e;e=null}else if(r===31){if(e=u(n),e!==null)return e;e=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return jo=e,null}function Gg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wy()){case Kh:return 2;case Qh:return 8;case Dr:case Ky:return 32;case Zh:return 268435456;default:return 32}default:return 32}}var Yu=!1,xn=null,Cn=null,Tn=null,Ja=new Map,tr=new Map,_n=[],uv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vg(e,n){switch(e){case"focusin":case"focusout":xn=null;break;case"dragenter":case"dragleave":Cn=null;break;case"mouseover":case"mouseout":Tn=null;break;case"pointerover":case"pointerout":Ja.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":tr.delete(n.pointerId)}}function er(e,n,r,c,p,m){return e===null||e.nativeEvent!==m?(e={blockedOn:n,domEventName:r,eventSystemFlags:c,nativeEvent:m,targetContainers:[p]},n!==null&&(n=ds(n),n!==null&&Hg(n)),e):(e.eventSystemFlags|=c,n=e.targetContainers,p!==null&&n.indexOf(p)===-1&&n.push(p),e)}function hv(e,n,r,c,p){switch(n){case"focusin":return xn=er(xn,e,n,r,c,p),!0;case"dragenter":return Cn=er(Cn,e,n,r,c,p),!0;case"mouseover":return Tn=er(Tn,e,n,r,c,p),!0;case"pointerover":var m=p.pointerId;return Ja.set(m,er(Ja.get(m)||null,e,n,r,c,p)),!0;case"gotpointercapture":return m=p.pointerId,tr.set(m,er(tr.get(m)||null,e,n,r,c,p)),!0}return!1}function Xg(e){var n=hs(e.target);if(n!==null){var r=o(n);if(r!==null){if(n=r.tag,n===13){if(n=l(r),n!==null){e.blockedOn=n,sd(e.priority,function(){jg(r)});return}}else if(n===31){if(n=u(r),n!==null){e.blockedOn=n,sd(e.priority,function(){jg(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Go(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var r=Vu(e.nativeEvent);if(r===null){r=e.nativeEvent;var c=new r.constructor(r.type,r);Xl=c,r.target.dispatchEvent(c),Xl=null}else return n=ds(r),n!==null&&Hg(n),e.blockedOn=r,!1;n.shift()}return!0}function Yg(e,n,r){Go(e)&&r.delete(n)}function dv(){Yu=!1,xn!==null&&Go(xn)&&(xn=null),Cn!==null&&Go(Cn)&&(Cn=null),Tn!==null&&Go(Tn)&&(Tn=null),Ja.forEach(Yg),tr.forEach(Yg)}function Vo(e,n){e.blockedOn===n&&(e.blockedOn=null,Yu||(Yu=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,dv)))}var Xo=null;function qg(e){Xo!==e&&(Xo=e,h.unstable_scheduleCallback(h.unstable_NormalPriority,function(){Xo===e&&(Xo=null);for(var n=0;n<e.length;n+=3){var r=e[n],c=e[n+1],p=e[n+2];if(typeof c!="function"){if(Xu(c||r)===null)continue;break}var m=ds(r);m!==null&&(e.splice(n,3),n-=3,Vc(m,{pending:!0,data:p,method:r.method,action:c},c,p))}}))}function qs(e){function n(M){return Vo(M,e)}xn!==null&&Vo(xn,e),Cn!==null&&Vo(Cn,e),Tn!==null&&Vo(Tn,e),Ja.forEach(n),tr.forEach(n);for(var r=0;r<_n.length;r++){var c=_n[r];c.blockedOn===e&&(c.blockedOn=null)}for(;0<_n.length&&(r=_n[0],r.blockedOn===null);)Xg(r),r.blockedOn===null&&_n.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var p=r[c],m=r[c+1],A=p[Le]||null;if(typeof m=="function")A||qg(r);else if(A){var C=null;if(m&&m.hasAttribute("formAction")){if(p=m,A=m[Le]||null)C=A.formAction;else if(Xu(p)!==null)continue}else C=A.action;typeof C=="function"?r[c+1]=C:(r.splice(c,3),c-=3),qg(r)}}}function $g(){function e(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(A){return p=A})},focusReset:"manual",scroll:"manual"})}function n(){p!==null&&(p(),p=null),c||setTimeout(r,20)}function r(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,p=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(r,100),function(){c=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),p!==null&&(p(),p=null)}}}function qu(e){this._internalRoot=e}Yo.prototype.render=qu.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var r=n.current,c=Ke();Ig(r,c,e,n,null,null)},Yo.prototype.unmount=qu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Ig(e.current,2,null,e,null,null),To(),n[us]=null}};function Yo(e){this._internalRoot=e}Yo.prototype.unstable_scheduleHydration=function(e){if(e){var n=nd();e={blockedOn:null,target:e,priority:n};for(var r=0;r<_n.length&&n!==0&&n<_n[r].priority;r++);_n.splice(r,0,e),r===0&&Xg(e)}};var Wg=t.version;if(Wg!=="19.2.4")throw Error(s(527,Wg,"19.2.4"));j.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=f(n),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var fv={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qo.isDisabled&&qo.supportsFiber)try{ua=qo.inject(fv),je=qo}catch{}}return nr.createRoot=function(e,n){if(!a(e))throw Error(s(299));var r=!1,c="",p=ip,m=np,A=sp;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(p=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(A=n.onRecoverableError)),n=Pg(e,1,!1,null,null,r,c,null,p,m,A,$g),e[us]=n.current,Mu(e),new qu(n)},nr.hydrateRoot=function(e,n,r){if(!a(e))throw Error(s(299));var c=!1,p="",m=ip,A=np,C=sp,M=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(A=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError),r.formState!==void 0&&(M=r.formState)),n=Pg(e,1,!0,n,r??null,c,p,M,m,A,C,$g),n.context=Fg(null),r=n.current,c=Ke(),c=Pl(c),p=dn(c),p.callback=null,fn(r,p,c),r=c,n.current.lanes=r,da(n,r),wi(n),e[us]=n.current,Mu(e),new Yo(n)},nr.version="19.2.4",nr}var om;function wv(){if(om)return Qu.exports;om=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),Qu.exports=Sv(),Qu.exports}var Ev=wv();var lm="popstate";function xv(h={}){function t(s,a){let{pathname:o,search:l,hash:u}=s.location;return dh("",{pathname:o,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function i(s,a){return typeof a=="string"?a:mr(a)}return Tv(t,i,null,h)}function Qt(h,t){if(h===!1||h===null||typeof h>"u")throw new Error(t)}function Ri(h,t){if(!h){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Cv(){return Math.random().toString(36).substring(2,10)}function cm(h,t){return{usr:h.state,key:h.key,idx:t}}function dh(h,t,i=null,s){return{pathname:typeof h=="string"?h:h.pathname,search:"",hash:"",...typeof t=="string"?ra(t):t,state:i,key:t&&t.key||s||Cv()}}function mr({pathname:h="/",search:t="",hash:i=""}){return t&&t!=="?"&&(h+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(h+=i.charAt(0)==="#"?i:"#"+i),h}function ra(h){let t={};if(h){let i=h.indexOf("#");i>=0&&(t.hash=h.substring(i),h=h.substring(0,i));let s=h.indexOf("?");s>=0&&(t.search=h.substring(s),h=h.substring(0,s)),h&&(t.pathname=h)}return t}function Tv(h,t,i,s={}){let{window:a=document.defaultView,v5Compat:o=!1}=s,l=a.history,u="POP",d=null,f=g();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function g(){return(l.state||{idx:null}).idx}function y(){u="POP";let x=g(),E=x==null?null:x-f;f=x,d&&d({action:u,location:S.location,delta:E})}function b(x,E){u="PUSH";let _=dh(S.location,x,E);f=g()+1;let T=cm(_,f),N=S.createHref(_);try{l.pushState(T,"",N)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;a.location.assign(N)}o&&d&&d({action:u,location:S.location,delta:1})}function v(x,E){u="REPLACE";let _=dh(S.location,x,E);f=g();let T=cm(_,f),N=S.createHref(_);l.replaceState(T,"",N),o&&d&&d({action:u,location:S.location,delta:0})}function w(x){return _v(x)}let S={get action(){return u},get location(){return h(a,l)},listen(x){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(lm,y),d=x,()=>{a.removeEventListener(lm,y),d=null}},createHref(x){return t(a,x)},createURL:w,encodeLocation(x){let E=w(x);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:b,replace:v,go(x){return l.go(x)}};return S}function _v(h,t=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Qt(i,"No window.location.(origin|href) available to create URL");let s=typeof h=="string"?h:mr(h);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=i+s),new URL(s,i)}function Vm(h,t,i="/"){return Mv(h,t,i,!1)}function Mv(h,t,i,s){let a=typeof t=="string"?ra(t):t,o=tn(a.pathname||"/",i);if(o==null)return null;let l=Xm(h);Rv(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let f=Uv(o);u=Fv(l[d],f,s)}return u}function Xm(h,t=[],i=[],s="",a=!1){let o=(l,u,d=a,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(s)&&d)return;Qt(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length)}let y=Ji([s,g.relativePath]),b=i.concat(g);l.children&&l.children.length>0&&(Qt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Xm(l.children,t,b,y,d)),!(l.path==null&&!l.index)&&t.push({path:y,score:zv(y,l.index),routesMeta:b})};return h.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let d of Ym(l.path))o(l,u,!0,d)}),t}function Ym(h){let t=h.split("/");if(t.length===0)return[];let[i,...s]=t,a=i.endsWith("?"),o=i.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let l=Ym(s.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),a&&u.push(...l),u.map(d=>h.startsWith("/")&&d===""?"/":d)}function Rv(h){h.sort((t,i)=>t.score!==i.score?i.score-t.score:Pv(t.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}var Dv=/^:[\w-]+$/,Lv=3,Ov=2,kv=1,Nv=10,Bv=-2,um=h=>h==="*";function zv(h,t){let i=h.split("/"),s=i.length;return i.some(um)&&(s+=Bv),t&&(s+=Ov),i.filter(a=>!um(a)).reduce((a,o)=>a+(Dv.test(o)?Lv:o===""?kv:Nv),s)}function Pv(h,t){return h.length===t.length&&h.slice(0,-1).every((s,a)=>s===t[a])?h[h.length-1]-t[t.length-1]:0}function Fv(h,t,i=!1){let{routesMeta:s}=h,a={},o="/",l=[];for(let u=0;u<s.length;++u){let d=s[u],f=u===s.length-1,g=o==="/"?t:t.slice(o.length)||"/",y=cl({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),b=d.route;if(!y&&f&&i&&!s[s.length-1].route.index&&(y=cl({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(a,y.params),l.push({params:a,pathname:Ji([o,y.pathname]),pathnameBase:Vv(Ji([o,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(o=Ji([o,y.pathnameBase]))}return l}function cl(h,t){typeof h=="string"&&(h={path:h,caseSensitive:!1,end:!0});let[i,s]=Iv(h.path,h.caseSensitive,h.end),a=t.match(i);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:s.reduce((f,{paramName:g,isOptional:y},b)=>{if(g==="*"){let w=u[b]||"";l=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const v=u[b];return y&&!v?f[g]=void 0:f[g]=(v||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:h}}function Iv(h,t=!1,i=!0){Ri(h==="*"||!h.endsWith("*")||h.endsWith("/*"),`Route path "${h}" will be treated as if it were "${h.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${h.replace(/\*$/,"/*")}".`);let s=[],a="^"+h.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(s.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return h.endsWith("*")?(s.push({paramName:"*"}),a+=h==="*"||h==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?a+="\\/*$":h!==""&&h!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function Uv(h){try{return h.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ri(!1,`The URL path "${h}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),h}}function tn(h,t){if(t==="/")return h;if(!h.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,s=h.charAt(i);return s&&s!=="/"?null:h.slice(i)||"/"}var Hv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function jv(h,t="/"){let{pathname:i,search:s="",hash:a=""}=typeof h=="string"?ra(h):h,o;return i?(i=i.replace(/\/\/+/g,"/"),i.startsWith("/")?o=hm(i.substring(1),"/"):o=hm(i,t)):o=t,{pathname:o,search:Xv(s),hash:Yv(a)}}function hm(h,t){let i=t.replace(/\/+$/,"").split("/");return h.split("/").forEach(a=>{a===".."?i.length>1&&i.pop():a!=="."&&i.push(a)}),i.length>1?i.join("/"):"/"}function eh(h,t,i,s){return`Cannot include a '${h}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Gv(h){return h.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function qm(h){let t=Gv(h);return t.map((i,s)=>s===t.length-1?i.pathname:i.pathnameBase)}function $m(h,t,i,s=!1){let a;typeof h=="string"?a=ra(h):(a={...h},Qt(!a.pathname||!a.pathname.includes("?"),eh("?","pathname","search",a)),Qt(!a.pathname||!a.pathname.includes("#"),eh("#","pathname","hash",a)),Qt(!a.search||!a.search.includes("#"),eh("#","search","hash",a)));let o=h===""||a.pathname==="",l=o?"/":a.pathname,u;if(l==null)u=i;else{let y=t.length-1;if(!s&&l.startsWith("..")){let b=l.split("/");for(;b[0]==="..";)b.shift(),y-=1;a.pathname=b.join("/")}u=y>=0?t[y]:"/"}let d=jv(a,u),f=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&i.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var Ji=h=>h.join("/").replace(/\/\/+/g,"/"),Vv=h=>h.replace(/\/+$/,"").replace(/^\/*/,"/"),Xv=h=>!h||h==="?"?"":h.startsWith("?")?h:"?"+h,Yv=h=>!h||h==="#"?"":h.startsWith("#")?h:"#"+h,qv=class{constructor(h,t,i,s=!1){this.status=h,this.statusText=t||"",this.internal=s,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function $v(h){return h!=null&&typeof h.status=="number"&&typeof h.statusText=="string"&&typeof h.internal=="boolean"&&"data"in h}function Wv(h){return h.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Wm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Km(h,t){let i=h;if(typeof i!="string"||!Hv.test(i))return{absoluteURL:void 0,isExternal:!1,to:i};let s=i,a=!1;if(Wm)try{let o=new URL(window.location.href),l=i.startsWith("//")?new URL(o.protocol+i):new URL(i),u=tn(l.pathname,t);l.origin===o.origin&&u!=null?i=u+l.search+l.hash:a=!0}catch{Ri(!1,`<Link to="${i}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:a,to:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Qm=["POST","PUT","PATCH","DELETE"];new Set(Qm);var Kv=["GET",...Qm];new Set(Kv);var oa=P.createContext(null);oa.displayName="DataRouter";var ml=P.createContext(null);ml.displayName="DataRouterState";var Qv=P.createContext(!1),Zm=P.createContext({isTransitioning:!1});Zm.displayName="ViewTransition";var Zv=P.createContext(new Map);Zv.displayName="Fetchers";var Jv=P.createContext(null);Jv.displayName="Await";var pi=P.createContext(null);pi.displayName="Navigation";var wr=P.createContext(null);wr.displayName="Location";var en=P.createContext({outlet:null,matches:[],isDataRoute:!1});en.displayName="Route";var Rh=P.createContext(null);Rh.displayName="RouteError";var Jm="REACT_ROUTER_ERROR",tA="REDIRECT",eA="ROUTE_ERROR_RESPONSE";function iA(h){if(h.startsWith(`${Jm}:${tA}:{`))try{let t=JSON.parse(h.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function nA(h){if(h.startsWith(`${Jm}:${eA}:{`))try{let t=JSON.parse(h.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new qv(t.status,t.statusText,t.data)}catch{}}function sA(h,{relative:t}={}){Qt(Er(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:s}=P.useContext(pi),{hash:a,pathname:o,search:l}=xr(h,{relative:t}),u=o;return i!=="/"&&(u=o==="/"?i:Ji([i,o])),s.createHref({pathname:u,search:l,hash:a})}function Er(){return P.useContext(wr)!=null}function os(){return Qt(Er(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(wr).location}var ty="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ey(h){P.useContext(pi).static||P.useLayoutEffect(h)}function iy(){let{isDataRoute:h}=P.useContext(en);return h?yA():aA()}function aA(){Qt(Er(),"useNavigate() may be used only in the context of a <Router> component.");let h=P.useContext(oa),{basename:t,navigator:i}=P.useContext(pi),{matches:s}=P.useContext(en),{pathname:a}=os(),o=JSON.stringify(qm(s)),l=P.useRef(!1);return ey(()=>{l.current=!0}),P.useCallback((d,f={})=>{if(Ri(l.current,ty),!l.current)return;if(typeof d=="number"){i.go(d);return}let g=$m(d,JSON.parse(o),a,f.relative==="path");h==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:Ji([t,g.pathname])),(f.replace?i.replace:i.push)(g,f.state,f)},[t,i,o,a,h])}P.createContext(null);function xr(h,{relative:t}={}){let{matches:i}=P.useContext(en),{pathname:s}=os(),a=JSON.stringify(qm(i));return P.useMemo(()=>$m(h,JSON.parse(a),s,t==="path"),[h,a,s,t])}function rA(h,t){return ny(h,t)}function ny(h,t,i,s,a){Qt(Er(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=P.useContext(pi),{matches:l}=P.useContext(en),u=l[l.length-1],d=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let _=y&&y.path||"";ay(f,!y||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let b=os(),v;if(t){let _=typeof t=="string"?ra(t):t;Qt(g==="/"||_.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${_.pathname}" was given in the \`location\` prop.`),v=_}else v=b;let w=v.pathname||"/",S=w;if(g!=="/"){let _=g.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(_.length).join("/")}let x=Vm(h,{pathname:S});Ri(y||x!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Ri(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=hA(x&&x.map(_=>Object.assign({},_,{params:Object.assign({},d,_.params),pathname:Ji([g,o.encodeLocation?o.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?g:Ji([g,o.encodeLocation?o.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),l,i,s,a);return t&&E?P.createElement(wr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},E):E}function oA(){let h=mA(),t=$v(h)?`${h.status} ${h.statusText}`:h instanceof Error?h.message:JSON.stringify(h),i=h instanceof Error?h.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",h),l=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:o},"ErrorBoundary")," or"," ",P.createElement("code",{style:o},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),i?P.createElement("pre",{style:a},i):null,l)}var lA=P.createElement(oA,null),sy=class extends P.Component{constructor(h){super(h),this.state={location:h.location,revalidation:h.revalidation,error:h.error}}static getDerivedStateFromError(h){return{error:h}}static getDerivedStateFromProps(h,t){return t.location!==h.location||t.revalidation!=="idle"&&h.revalidation==="idle"?{error:h.error,location:h.location,revalidation:h.revalidation}:{error:h.error!==void 0?h.error:t.error,location:t.location,revalidation:h.revalidation||t.revalidation}}componentDidCatch(h,t){this.props.onError?this.props.onError(h,t):console.error("React Router caught the following error during render",h)}render(){let h=this.state.error;if(this.context&&typeof h=="object"&&h&&"digest"in h&&typeof h.digest=="string"){const i=nA(h.digest);i&&(h=i)}let t=h!==void 0?P.createElement(en.Provider,{value:this.props.routeContext},P.createElement(Rh.Provider,{value:h,children:this.props.component})):this.props.children;return this.context?P.createElement(cA,{error:h},t):t}};sy.contextType=Qv;var ih=new WeakMap;function cA({children:h,error:t}){let{basename:i}=P.useContext(pi);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let s=iA(t.digest);if(s){let a=ih.get(t);if(a)throw a;let o=Km(s.location,i);if(Wm&&!ih.get(t))if(o.isExternal||s.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:s.replace}));throw ih.set(t,l),l}return P.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return h}function uA({routeContext:h,match:t,children:i}){let s=P.useContext(oa);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),P.createElement(en.Provider,{value:h},i)}function hA(h,t=[],i=null,s=null,a=null){if(h==null){if(!i)return null;if(i.errors)h=i.matches;else if(t.length===0&&!i.initialized&&i.matches.length>0)h=i.matches;else return null}let o=h,l=i?.errors;if(l!=null){let g=o.findIndex(y=>y.route.id&&l?.[y.route.id]!==void 0);Qt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let u=!1,d=-1;if(i)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=g),y.route.id){let{loaderData:b,errors:v}=i,w=y.route.loader&&!b.hasOwnProperty(y.route.id)&&(!v||v[y.route.id]===void 0);if(y.route.lazy||w){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let f=i&&s?(g,y)=>{s(g,{location:i.location,params:i.matches?.[0]?.params??{},unstable_pattern:Wv(i.matches),errorInfo:y})}:void 0;return o.reduceRight((g,y,b)=>{let v,w=!1,S=null,x=null;i&&(v=l&&y.route.id?l[y.route.id]:void 0,S=y.route.errorElement||lA,u&&(d<0&&b===0?(ay("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,x=null):d===b&&(w=!0,x=y.route.hydrateFallbackElement||null)));let E=t.concat(o.slice(0,b+1)),_=()=>{let T;return v?T=S:w?T=x:y.route.Component?T=P.createElement(y.route.Component,null):y.route.element?T=y.route.element:T=g,P.createElement(uA,{match:y,routeContext:{outlet:g,matches:E,isDataRoute:i!=null},children:T})};return i&&(y.route.ErrorBoundary||y.route.errorElement||b===0)?P.createElement(sy,{location:i.location,revalidation:i.revalidation,component:S,error:v,children:_(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:f}):_()},null)}function Dh(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dA(h){let t=P.useContext(oa);return Qt(t,Dh(h)),t}function fA(h){let t=P.useContext(ml);return Qt(t,Dh(h)),t}function pA(h){let t=P.useContext(en);return Qt(t,Dh(h)),t}function Lh(h){let t=pA(h),i=t.matches[t.matches.length-1];return Qt(i.route.id,`${h} can only be used on routes that contain a unique "id"`),i.route.id}function gA(){return Lh("useRouteId")}function mA(){let h=P.useContext(Rh),t=fA("useRouteError"),i=Lh("useRouteError");return h!==void 0?h:t.errors?.[i]}function yA(){let{router:h}=dA("useNavigate"),t=Lh("useNavigate"),i=P.useRef(!1);return ey(()=>{i.current=!0}),P.useCallback(async(a,o={})=>{Ri(i.current,ty),i.current&&(typeof a=="number"?await h.navigate(a):await h.navigate(a,{fromRouteId:t,...o}))},[h,t])}var dm={};function ay(h,t,i){!t&&!dm[h]&&(dm[h]=!0,Ri(!1,i))}P.memo(bA);function bA({routes:h,future:t,state:i,onError:s}){return ny(h,void 0,i,s,t)}function Jn(h){Qt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vA({basename:h="/",children:t=null,location:i,navigationType:s="POP",navigator:a,static:o=!1,unstable_useTransitions:l}){Qt(!Er(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=h.replace(/^\/*/,"/"),d=P.useMemo(()=>({basename:u,navigator:a,static:o,unstable_useTransitions:l,future:{}}),[u,a,o,l]);typeof i=="string"&&(i=ra(i));let{pathname:f="/",search:g="",hash:y="",state:b=null,key:v="default"}=i,w=P.useMemo(()=>{let S=tn(f,u);return S==null?null:{location:{pathname:S,search:g,hash:y,state:b,key:v},navigationType:s}},[u,f,g,y,b,v,s]);return Ri(w!=null,`<Router basename="${u}"> is not able to match the URL "${f}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:P.createElement(pi.Provider,{value:d},P.createElement(wr.Provider,{children:t,value:w}))}function AA({children:h,location:t}){return rA(fh(h),t)}function fh(h,t=[]){let i=[];return P.Children.forEach(h,(s,a)=>{if(!P.isValidElement(s))return;let o=[...t,a];if(s.type===P.Fragment){i.push.apply(i,fh(s.props.children,o));return}Qt(s.type===Jn,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let l={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=fh(s.props.children,o)),i.push(l)}),i}var sl="get",al="application/x-www-form-urlencoded";function yl(h){return typeof HTMLElement<"u"&&h instanceof HTMLElement}function SA(h){return yl(h)&&h.tagName.toLowerCase()==="button"}function wA(h){return yl(h)&&h.tagName.toLowerCase()==="form"}function EA(h){return yl(h)&&h.tagName.toLowerCase()==="input"}function xA(h){return!!(h.metaKey||h.altKey||h.ctrlKey||h.shiftKey)}function CA(h,t){return h.button===0&&(!t||t==="_self")&&!xA(h)}var $o=null;function TA(){if($o===null)try{new FormData(document.createElement("form"),0),$o=!1}catch{$o=!0}return $o}var _A=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function nh(h){return h!=null&&!_A.has(h)?(Ri(!1,`"${h}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${al}"`),null):h}function MA(h,t){let i,s,a,o,l;if(wA(h)){let u=h.getAttribute("action");s=u?tn(u,t):null,i=h.getAttribute("method")||sl,a=nh(h.getAttribute("enctype"))||al,o=new FormData(h)}else if(SA(h)||EA(h)&&(h.type==="submit"||h.type==="image")){let u=h.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=h.getAttribute("formaction")||u.getAttribute("action");if(s=d?tn(d,t):null,i=h.getAttribute("formmethod")||u.getAttribute("method")||sl,a=nh(h.getAttribute("formenctype"))||nh(u.getAttribute("enctype"))||al,o=new FormData(u,h),!TA()){let{name:f,type:g,value:y}=h;if(g==="image"){let b=f?`${f}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else f&&o.append(f,y)}}else{if(yl(h))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=sl,s=null,a=al,l=h}return o&&a==="text/plain"&&(l=o,o=void 0),{action:s,method:i.toLowerCase(),encType:a,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Oh(h,t){if(h===!1||h===null||typeof h>"u")throw new Error(t)}function RA(h,t,i,s){let a=typeof h=="string"?new URL(h,typeof window>"u"?"server://singlefetch/":window.location.origin):h;return i?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${s}`:a.pathname=`${a.pathname}.${s}`:a.pathname==="/"?a.pathname=`_root.${s}`:t&&tn(a.pathname,t)==="/"?a.pathname=`${t.replace(/\/$/,"")}/_root.${s}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${s}`,a}async function DA(h,t){if(h.id in t)return t[h.id];try{let i=await import(h.module);return t[h.id]=i,i}catch(i){return console.error(`Error loading route module \`${h.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function LA(h){return h==null?!1:h.href==null?h.rel==="preload"&&typeof h.imageSrcSet=="string"&&typeof h.imageSizes=="string":typeof h.rel=="string"&&typeof h.href=="string"}async function OA(h,t,i){let s=await Promise.all(h.map(async a=>{let o=t.routes[a.route.id];if(o){let l=await DA(o,i);return l.links?l.links():[]}return[]}));return zA(s.flat(1).filter(LA).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function fm(h,t,i,s,a,o){let l=(d,f)=>i[f]?d.route.id!==i[f].route.id:!0,u=(d,f)=>i[f].pathname!==d.pathname||i[f].route.path?.endsWith("*")&&i[f].params["*"]!==d.params["*"];return o==="assets"?t.filter((d,f)=>l(d,f)||u(d,f)):o==="data"?t.filter((d,f)=>{let g=s.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(h,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function kA(h,t,{includeHydrateFallback:i}={}){return NA(h.map(s=>{let a=t.routes[s.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),i&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function NA(h){return[...new Set(h)]}function BA(h){let t={},i=Object.keys(h).sort();for(let s of i)t[s]=h[s];return t}function zA(h,t){let i=new Set;return new Set(t),h.reduce((s,a)=>{let o=JSON.stringify(BA(a));return i.has(o)||(i.add(o),s.push({key:o,link:a})),s},[])}function ry(){let h=P.useContext(oa);return Oh(h,"You must render this element inside a <DataRouterContext.Provider> element"),h}function PA(){let h=P.useContext(ml);return Oh(h,"You must render this element inside a <DataRouterStateContext.Provider> element"),h}var kh=P.createContext(void 0);kh.displayName="FrameworkContext";function oy(){let h=P.useContext(kh);return Oh(h,"You must render this element inside a <HydratedRouter> element"),h}function FA(h,t){let i=P.useContext(kh),[s,a]=P.useState(!1),[o,l]=P.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=t,b=P.useRef(null);P.useEffect(()=>{if(h==="render"&&l(!0),h==="viewport"){let S=E=>{E.forEach(_=>{l(_.isIntersecting)})},x=new IntersectionObserver(S,{threshold:.5});return b.current&&x.observe(b.current),()=>{x.disconnect()}}},[h]),P.useEffect(()=>{if(s){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[s]);let v=()=>{a(!0)},w=()=>{a(!1),l(!1)};return i?h!=="intent"?[o,b,{}]:[o,b,{onFocus:sr(u,v),onBlur:sr(d,w),onMouseEnter:sr(f,v),onMouseLeave:sr(g,w),onTouchStart:sr(y,v)}]:[!1,b,{}]}function sr(h,t){return i=>{h&&h(i),i.defaultPrevented||t(i)}}function IA({page:h,...t}){let{router:i}=ry(),s=P.useMemo(()=>Vm(i.routes,h,i.basename),[i.routes,h,i.basename]);return s?P.createElement(HA,{page:h,matches:s,...t}):null}function UA(h){let{manifest:t,routeModules:i}=oy(),[s,a]=P.useState([]);return P.useEffect(()=>{let o=!1;return OA(h,t,i).then(l=>{o||a(l)}),()=>{o=!0}},[h,t,i]),s}function HA({page:h,matches:t,...i}){let s=os(),{future:a,manifest:o,routeModules:l}=oy(),{basename:u}=ry(),{loaderData:d,matches:f}=PA(),g=P.useMemo(()=>fm(h,t,f,o,s,"data"),[h,t,f,o,s]),y=P.useMemo(()=>fm(h,t,f,o,s,"assets"),[h,t,f,o,s]),b=P.useMemo(()=>{if(h===s.pathname+s.search+s.hash)return[];let S=new Set,x=!1;if(t.forEach(_=>{let T=o.routes[_.route.id];!T||!T.hasLoader||(!g.some(N=>N.route.id===_.route.id)&&_.route.id in d&&l[_.route.id]?.shouldRevalidate||T.hasClientLoader?x=!0:S.add(_.route.id))}),S.size===0)return[];let E=RA(h,u,a.unstable_trailingSlashAwareDataRequests,"data");return x&&S.size>0&&E.searchParams.set("_routes",t.filter(_=>S.has(_.route.id)).map(_=>_.route.id).join(",")),[E.pathname+E.search]},[u,a.unstable_trailingSlashAwareDataRequests,d,s,o,g,t,h,l]),v=P.useMemo(()=>kA(y,o),[y,o]),w=UA(y);return P.createElement(P.Fragment,null,b.map(S=>P.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...i})),v.map(S=>P.createElement("link",{key:S,rel:"modulepreload",href:S,...i})),w.map(({key:S,link:x})=>P.createElement("link",{key:S,nonce:i.nonce,...x,crossOrigin:x.crossOrigin??i.crossOrigin})))}function jA(...h){return t=>{h.forEach(i=>{typeof i=="function"?i(t):i!=null&&(i.current=t)})}}var GA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{GA&&(window.__reactRouterVersion="7.13.0")}catch{}function VA({basename:h,children:t,unstable_useTransitions:i,window:s}){let a=P.useRef();a.current==null&&(a.current=xv({window:s,v5Compat:!0}));let o=a.current,[l,u]=P.useState({action:o.action,location:o.location}),d=P.useCallback(f=>{i===!1?u(f):P.startTransition(()=>u(f))},[i]);return P.useLayoutEffect(()=>o.listen(d),[o,d]),P.createElement(vA,{basename:h,children:t,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:i})}var ly=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cy=P.forwardRef(function({onClick:t,discover:i="render",prefetch:s="none",relative:a,reloadDocument:o,replace:l,state:u,target:d,to:f,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:b,...v},w){let{basename:S,unstable_useTransitions:x}=P.useContext(pi),E=typeof f=="string"&&ly.test(f),_=Km(f,S);f=_.to;let T=sA(f,{relative:a}),[N,L,B]=FA(s,v),F=$A(f,{replace:l,state:u,target:d,preventScrollReset:g,relative:a,viewTransition:y,unstable_defaultShouldRevalidate:b,unstable_useTransitions:x});function $(tt){t&&t(tt),tt.defaultPrevented||F(tt)}let W=P.createElement("a",{...v,...B,href:_.absoluteURL||T,onClick:_.isExternal||o?t:$,ref:jA(w,L),target:d,"data-discover":!E&&i==="render"?"true":void 0});return N&&!E?P.createElement(P.Fragment,null,W,P.createElement(IA,{page:T})):W});cy.displayName="Link";var XA=P.forwardRef(function({"aria-current":t="page",caseSensitive:i=!1,className:s="",end:a=!1,style:o,to:l,viewTransition:u,children:d,...f},g){let y=xr(l,{relative:f.relative}),b=os(),v=P.useContext(ml),{navigator:w,basename:S}=P.useContext(pi),x=v!=null&&JA(y)&&u===!0,E=w.encodeLocation?w.encodeLocation(y).pathname:y.pathname,_=b.pathname,T=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;i||(_=_.toLowerCase(),T=T?T.toLowerCase():null,E=E.toLowerCase()),T&&S&&(T=tn(T,S)||T);const N=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let L=_===E||!a&&_.startsWith(E)&&_.charAt(N)==="/",B=T!=null&&(T===E||!a&&T.startsWith(E)&&T.charAt(E.length)==="/"),F={isActive:L,isPending:B,isTransitioning:x},$=L?t:void 0,W;typeof s=="function"?W=s(F):W=[s,L?"active":null,B?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let tt=typeof o=="function"?o(F):o;return P.createElement(cy,{...f,"aria-current":$,className:W,ref:g,style:tt,to:l,viewTransition:u},typeof d=="function"?d(F):d)});XA.displayName="NavLink";var YA=P.forwardRef(({discover:h="render",fetcherKey:t,navigate:i,reloadDocument:s,replace:a,state:o,method:l=sl,action:u,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:b,...v},w)=>{let{unstable_useTransitions:S}=P.useContext(pi),x=QA(),E=ZA(u,{relative:f}),_=l.toLowerCase()==="get"?"get":"post",T=typeof u=="string"&&ly.test(u),N=L=>{if(d&&d(L),L.defaultPrevented)return;L.preventDefault();let B=L.nativeEvent.submitter,F=B?.getAttribute("formmethod")||l,$=()=>x(B||L.currentTarget,{fetcherKey:t,method:F,navigate:i,replace:a,state:o,relative:f,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:b});S&&i!==!1?P.startTransition(()=>$()):$()};return P.createElement("form",{ref:w,method:_,action:E,onSubmit:s?d:N,...v,"data-discover":!T&&h==="render"?"true":void 0})});YA.displayName="Form";function qA(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uy(h){let t=P.useContext(oa);return Qt(t,qA(h)),t}function $A(h,{target:t,replace:i,state:s,preventScrollReset:a,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:u,unstable_useTransitions:d}={}){let f=iy(),g=os(),y=xr(h,{relative:o});return P.useCallback(b=>{if(CA(b,t)){b.preventDefault();let v=i!==void 0?i:mr(g)===mr(y),w=()=>f(h,{replace:v,state:s,preventScrollReset:a,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:u});d?P.startTransition(()=>w()):w()}},[g,f,y,i,s,t,h,a,o,l,u,d])}var WA=0,KA=()=>`__${String(++WA)}__`;function QA(){let{router:h}=uy("useSubmit"),{basename:t}=P.useContext(pi),i=gA(),s=h.fetch,a=h.navigate;return P.useCallback(async(o,l={})=>{let{action:u,method:d,encType:f,formData:g,body:y}=MA(o,t);if(l.navigate===!1){let b=l.fetcherKey||KA();await s(b,i,l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:g,body:y,formMethod:l.method||d,formEncType:l.encType||f,flushSync:l.flushSync})}else await a(l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:g,body:y,formMethod:l.method||d,formEncType:l.encType||f,replace:l.replace,state:l.state,fromRouteId:i,flushSync:l.flushSync,viewTransition:l.viewTransition})},[s,a,t,i])}function ZA(h,{relative:t}={}){let{basename:i}=P.useContext(pi),s=P.useContext(en);Qt(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),o={...xr(h||".",{relative:t})},l=os();if(h==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();o.search=g?`?${g}`:""}}return(!h||h===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(o.pathname=o.pathname==="/"?i:Ji([i,o.pathname])),mr(o)}function JA(h,{relative:t}={}){let i=P.useContext(Zm);Qt(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=uy("useViewTransitionState"),a=xr(h,{relative:t});if(!i.isTransitioning)return!1;let o=tn(i.currentLocation.pathname,s)||i.currentLocation.pathname,l=tn(i.nextLocation.pathname,s)||i.nextLocation.pathname;return cl(a.pathname,l)!=null||cl(a.pathname,o)!=null}var t1=Gm();function la(h=768){const[t,i]=P.useState(typeof window<"u"?window.innerWidth<=h:!1);return P.useEffect(()=>{const s=window.matchMedia(`(max-width: ${h}px)`),a=o=>i(o.matches);return i(s.matches),s.addEventListener("change",a),()=>s.removeEventListener("change",a)},[h]),t}const e1=[{label:"About Me",href:"/about"},{label:"Writing",dropdown:[{label:"Academic",href:"/writing/academic"},{label:"Fiction",href:"/writing/fiction"}]},{label:"Design",href:"/design"},{label:"Programming",href:"/programming"}];function i1({label:h,items:t,isMobile:i,onNavigate:s}){const[a,o]=P.useState(!1);return i?R.jsxs("li",{children:[R.jsx("span",{className:"nav-link",onClick:()=>o(!a),style:{cursor:"pointer"},children:h}),a&&R.jsx("ul",{className:"dropdown-menu",style:{opacity:1,visibility:"visible",transform:"none"},children:t.map(l=>R.jsx("li",{children:R.jsx("a",{href:l.href,className:"dropdown-item",onClick:s,children:l.label})},l.href))})]}):R.jsxs("li",{className:"relative",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[R.jsx("span",{className:"nav-link dropdown-toggle",children:h}),R.jsx("ul",{className:`dropdown-menu ${a?"opacity-100 visible translate-y-0":"opacity-0 invisible -translate-y-2.5"}`,children:t.map(l=>R.jsx("li",{children:R.jsx("a",{href:l.href,className:"dropdown-item",children:l.label})},l.href))})]})}function n1(){const[h,t]=P.useState(!1),i=la(),s=P.useRef(null);return P.useEffect(()=>{i||t(!1)},[i]),P.useEffect(()=>{if(!h)return;function a(o){s.current&&!s.current.contains(o.target)&&!o.target.closest(".hamburger-btn")&&t(!1)}return document.addEventListener("click",a),()=>document.removeEventListener("click",a)},[h]),R.jsx("nav",{className:"navbar",children:R.jsxs("div",{className:"navbar-container",children:[R.jsx("a",{href:"/",className:"navbar-title",children:"Luna Maltseva"}),R.jsx("button",{className:"hamburger-btn",onClick:()=>t(!h),"aria-label":"Toggle menu",children:R.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:h?R.jsxs(R.Fragment,{children:[R.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),R.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}):R.jsxs(R.Fragment,{children:[R.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),R.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),R.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})})}),R.jsx("ul",{ref:s,className:`navbar-nav${h?" open":""}`,children:e1.map(a=>a.dropdown?R.jsx(i1,{label:a.label,items:a.dropdown,isMobile:i,onNavigate:()=>t(!1)},a.label):R.jsx("li",{className:"nav-item",children:R.jsx("a",{href:a.href,className:"nav-link",onClick:()=>t(!1),children:a.label})},a.href))})]})})}function s1(){return R.jsx("footer",{className:"footer",children:R.jsxs("div",{className:"footer-container",children:[R.jsx("span",{className:"footer-name",children:"Luna Maltseva"}),R.jsx("a",{href:"mailto:luna@lunamaltseva.dev",className:"footer-email",children:"Email Me"})]})})}function a1(){const h=["PROGRAMMER","DESIGNER","WRITER"],[t,i]=P.useState(0),[s,a]=P.useState(!1);return P.useEffect(()=>{const o=setInterval(()=>{a(!0),setTimeout(()=>{i(l=>(l+1)%h.length),a(!1)},250)},2e3);return()=>clearInterval(o)},[]),R.jsxs("section",{className:"hero",children:[R.jsxs("h1",{className:"hero-title",children:["Hi, I'm ",R.jsx("span",{className:"hero-name",children:"Luna"})]}),R.jsx("p",{className:"hero-subtitle",children:R.jsx("span",{className:`flip-word ${s?"slide-out":"slide-in"}`,children:h[t]})})]})}function r1(){const[h,t]=P.useState(!1),i=la();return R.jsxs("div",{style:{position:"relative",backgroundColor:"#000000",minHeight:"calc(100vh - 150px)",display:"flex",alignItems:"flex-end",padding:i?"1.5rem":"3rem",overflow:"hidden"},children:[R.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",height:"50%",background:"linear-gradient(to top, rgba(0, 0, 0, 0.9) 0%, transparent 100%)",zIndex:1,pointerEvents:"none"}}),R.jsxs("div",{style:{maxWidth:i?"100%":"600px",position:"relative",zIndex:2},children:[R.jsx("h1",{style:{fontFamily:"Thezeraine, serif",fontSize:i?"2.5rem":"4rem",color:"#ffffff",marginBottom:"1.5rem",lineHeight:"1.2"},children:"Thezeraine"}),R.jsxs("div",{style:{display:"flex",gap:i?"1rem":"1.5rem",marginBottom:"1.5rem",alignItems:"center",flexWrap:"wrap"},children:[R.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#d3d3d3",fontSize:i?"0.9rem":"1rem"},children:[R.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#d3d3d3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[R.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),R.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),R.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),R.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),R.jsx("span",{children:"2025-20XX"})]}),R.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#d3d3d3",fontSize:i?"0.9rem":"1rem"},children:[R.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#d3d3d3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[R.jsx("circle",{cx:"12",cy:"12",r:"10"}),R.jsx("polyline",{points:"12 6 12 12 16 14"})]}),R.jsx("span",{children:"~44m"})]})]}),R.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginBottom:"1.5rem"},children:[R.jsx("span",{style:{backgroundColor:"#888888",color:"#ffffff",padding:"0.5rem 1rem",fontSize:"0.9rem",borderRadius:"0.375rem"},children:"Sci-fi"}),R.jsx("span",{style:{backgroundColor:"#888888",color:"#ffffff",padding:"0.5rem 1rem",fontSize:"0.9rem",borderRadius:"0.375rem"},children:"Drama"})]}),R.jsx("p",{onClick:()=>t(!h),style:{color:"#ffffff",fontSize:"1rem",lineHeight:"1.6",marginBottom:"1.5rem",maxWidth:"600px",cursor:"pointer",display:"-webkit-box",WebkitLineClamp:h?"unset":2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:"A bereft young woman agrees to venture into an emerging civil war for the promise of a resurrection device."}),R.jsxs("a",{href:"/Thezeraine.pdf",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",backgroundColor:"#ffffff",color:"#000000",padding:"0.75rem 1.5rem",fontSize:"1rem",textDecoration:"none",border:"none",borderRadius:"0.375rem",transition:"opacity 0.2s ease"},onMouseEnter:a=>a.currentTarget.style.opacity="0.9",onMouseLeave:a=>a.currentTarget.style.opacity="1",children:[R.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#000000",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[R.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),R.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),"Read"]})]})]})}const Re=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),ph=[.001,0,0,.001,0,0],sh=1.35,Qe={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Rn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},yr="pdfjs_internal_editor_",bt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Mt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},o1={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},gh={TRIANGLES:1,LATTICE:2},fe={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},rl={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},he={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Ws={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},bl={ERRORS:0,WARNINGS:1,INFOS:5},br={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},ar={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},l1={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let vl=bl.WARNINGS;function c1(h){Number.isInteger(h)&&(vl=h)}function u1(){return vl}function Al(h){vl>=bl.INFOS&&console.info(`Info: ${h}`)}function pt(h){vl>=bl.WARNINGS&&console.warn(`Warning: ${h}`)}function zt(h){throw new Error(h)}function Bt(h,t){h||zt(t)}function h1(h){switch(h?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function hy(h,t=null,i=null){if(!h)return null;if(i&&typeof h=="string"&&(i.addDefaultProtocol&&h.startsWith("www.")&&h.match(/\./g)?.length>=2&&(h=`http://${h}`),i.tryConvertEncoding))try{h=y1(h)}catch{}const s=t?URL.parse(h,t):URL.parse(h);return h1(s)?s:null}function dy(h,t,i=!1){const s=URL.parse(h);return s?(s.hash=t,s.href):i&&hy(h,"http://example.com")?h.split("#",1)[0]+`${t?`#${t}`:""}`:""}function gt(h,t,i,s=!1){return Object.defineProperty(h,t,{value:i,enumerable:!s,configurable:!0,writable:!1}),i}const ls=(function(){function t(i,s){this.message=i,this.name=s}return t.prototype=new Error,t.constructor=t,t})();class pm extends ls{constructor(t,i){super(t,"PasswordException"),this.code=i}}class ah extends ls{constructor(t,i){super(t,"UnknownErrorException"),this.details=i}}class mh extends ls{constructor(t){super(t,"InvalidPDFException")}}class ul extends ls{constructor(t,i,s){super(t,"ResponseException"),this.status=i,this.missing=s}}class d1 extends ls{constructor(t){super(t,"FormatError")}}class Ln extends ls{constructor(t){super(t,"AbortException")}}function f1(h){(typeof h!="object"||h?.length===void 0)&&zt("Invalid argument for bytesToString");const t=h.length,i=8192;if(t<i)return String.fromCharCode.apply(null,h);const s=[];for(let a=0;a<t;a+=i){const o=Math.min(a+i,t),l=h.subarray(a,o);s.push(String.fromCharCode.apply(null,l))}return s.join("")}function Sl(h){typeof h!="string"&&zt("Invalid argument for stringToBytes");const t=h.length,i=new Uint8Array(t);for(let s=0;s<t;++s)i[s]=h.charCodeAt(s)&255;return i}function p1(h){return String.fromCharCode(h>>24&255,h>>16&255,h>>8&255,h&255)}function g1(){const h=new Uint8Array(4);return h[0]=1,new Uint32Array(h.buffer,0,1)[0]===1}function m1(){try{return new Function(""),!0}catch{return!1}}class pe{static get isLittleEndian(){return gt(this,"isLittleEndian",g1())}static get isEvalSupported(){return gt(this,"isEvalSupported",m1())}static get isOffscreenCanvasSupported(){return gt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return gt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return gt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return gt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:i}=navigator;return gt(this,"platform",{isAndroid:i.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:i.includes("Firefox")})}static get isCSSRoundSupported(){return gt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const rh=Array.from(Array(256).keys(),h=>h.toString(16).padStart(2,"0"));class it{static makeHexColor(t,i,s){return`#${rh[t]}${rh[i]}${rh[s]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,i){let s;t[0]?(t[0]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[0],i[2]*=t[0],t[3]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[3],i[3]*=t[3]):(s=i[0],i[0]=i[1],i[1]=s,s=i[2],i[2]=i[3],i[3]=s,t[1]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[1],i[3]*=t[1],t[2]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[2],i[2]*=t[2]),i[0]+=t[4],i[1]+=t[5],i[2]+=t[4],i[3]+=t[5]}static transform(t,i){return[t[0]*i[0]+t[2]*i[1],t[1]*i[0]+t[3]*i[1],t[0]*i[2]+t[2]*i[3],t[1]*i[2]+t[3]*i[3],t[0]*i[4]+t[2]*i[5]+t[4],t[1]*i[4]+t[3]*i[5]+t[5]]}static multiplyByDOMMatrix(t,i){return[t[0]*i.a+t[2]*i.b,t[1]*i.a+t[3]*i.b,t[0]*i.c+t[2]*i.d,t[1]*i.c+t[3]*i.d,t[0]*i.e+t[2]*i.f+t[4],t[1]*i.e+t[3]*i.f+t[5]]}static applyTransform(t,i,s=0){const a=t[s],o=t[s+1];t[s]=a*i[0]+o*i[2]+i[4],t[s+1]=a*i[1]+o*i[3]+i[5]}static applyTransformToBezier(t,i,s=0){const a=i[0],o=i[1],l=i[2],u=i[3],d=i[4],f=i[5];for(let g=0;g<6;g+=2){const y=t[s+g],b=t[s+g+1];t[s+g]=y*a+b*l+d,t[s+g+1]=y*o+b*u+f}}static applyInverseTransform(t,i){const s=t[0],a=t[1],o=i[0]*i[3]-i[1]*i[2];t[0]=(s*i[3]-a*i[2]+i[2]*i[5]-i[4]*i[3])/o,t[1]=(-s*i[1]+a*i[0]+i[4]*i[1]-i[5]*i[0])/o}static axialAlignedBoundingBox(t,i,s){const a=i[0],o=i[1],l=i[2],u=i[3],d=i[4],f=i[5],g=t[0],y=t[1],b=t[2],v=t[3];let w=a*g+d,S=w,x=a*b+d,E=x,_=u*y+f,T=_,N=u*v+f,L=N;if(o!==0||l!==0){const B=o*g,F=o*b,$=l*y,W=l*v;w+=$,E+=$,x+=W,S+=W,_+=B,L+=B,N+=F,T+=F}s[0]=Math.min(s[0],w,x,S,E),s[1]=Math.min(s[1],_,N,T,L),s[2]=Math.max(s[2],w,x,S,E),s[3]=Math.max(s[3],_,N,T,L)}static inverseTransform(t){const i=t[0]*t[3]-t[1]*t[2];return[t[3]/i,-t[1]/i,-t[2]/i,t[0]/i,(t[2]*t[5]-t[4]*t[3])/i,(t[4]*t[1]-t[5]*t[0])/i]}static singularValueDecompose2dScale(t,i){const s=t[0],a=t[1],o=t[2],l=t[3],u=s**2+a**2,d=s*o+a*l,f=o**2+l**2,g=(u+f)/2,y=Math.sqrt(g**2-(u*f-d**2));i[0]=Math.sqrt(g+y||1),i[1]=Math.sqrt(g-y||1)}static normalizeRect(t){const i=t.slice(0);return t[0]>t[2]&&(i[0]=t[2],i[2]=t[0]),t[1]>t[3]&&(i[1]=t[3],i[3]=t[1]),i}static intersect(t,i){const s=Math.max(Math.min(t[0],t[2]),Math.min(i[0],i[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(i[0],i[2]));if(s>a)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(i[1],i[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(i[1],i[3]));return o>l?null:[s,o,a,l]}static pointBoundingBox(t,i,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],i),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],i)}static rectBoundingBox(t,i,s,a,o){o[0]=Math.min(o[0],t,s),o[1]=Math.min(o[1],i,a),o[2]=Math.max(o[2],t,s),o[3]=Math.max(o[3],i,a)}static#t(t,i,s,a,o,l,u,d,f,g){if(f<=0||f>=1)return;const y=1-f,b=f*f,v=b*f,w=y*(y*(y*t+3*f*i)+3*b*s)+v*a,S=y*(y*(y*o+3*f*l)+3*b*u)+v*d;g[0]=Math.min(g[0],w),g[1]=Math.min(g[1],S),g[2]=Math.max(g[2],w),g[3]=Math.max(g[3],S)}static#e(t,i,s,a,o,l,u,d,f,g,y,b){if(Math.abs(f)<1e-12){Math.abs(g)>=1e-12&&this.#t(t,i,s,a,o,l,u,d,-y/g,b);return}const v=g**2-4*y*f;if(v<0)return;const w=Math.sqrt(v),S=2*f;this.#t(t,i,s,a,o,l,u,d,(-g+w)/S,b),this.#t(t,i,s,a,o,l,u,d,(-g-w)/S,b)}static bezierBoundingBox(t,i,s,a,o,l,u,d,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],i,d),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],i,d),this.#e(t,s,o,u,i,a,l,d,3*(-t+3*(s-o)+u),6*(t-2*s+o),3*(s-t),f),this.#e(t,s,o,u,i,a,l,d,3*(-i+3*(a-l)+d),6*(i-2*a+l),3*(a-i),f)}}function y1(h){return decodeURIComponent(escape(h))}let oh=null,gm=null;function b1(h){return oh||(oh=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,gm=new Map([["","t"]])),h.replaceAll(oh,(t,i,s)=>i?i.normalize("NFKC"):gm.get(s))}function fy(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const h=new Uint8Array(32);return crypto.getRandomValues(h),f1(h)}const Zs="pdfjs_internal_id_";function v1(h,t,i){if(!Array.isArray(i)||i.length<2)return!1;const[s,a,...o]=i;if(!h(s)&&!Number.isInteger(s)||!t(a))return!1;const l=o.length;let u=!0;switch(a.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;u=!1;break;default:return!1}for(const d of o)if(!(typeof d=="number"||u&&d===null))return!1;return!0}function Ce(h,t,i){return Math.min(Math.max(h,t),i)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(h){return h.reduce((t,i)=>t+i,0)});class vr{static textContent(t){const i=[],s={items:i,styles:Object.create(null)};function a(o){if(!o)return;let l=null;const u=o.name;if(u==="#text")l=o.value;else if(vr.shouldBuildText(u))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&i.push({str:l}),!!o.children)for(const d of o.children)a(d)}return a(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class py{static setupStorage(t,i,s,a,o){const l=a.getValue(i,{value:null});switch(s.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(i,{value:u.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(l.value===s.attributes.xfaOn?t.setAttribute("checked",!0):l.value===s.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{a.setValue(i,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(i,{value:u.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const u of s.children)u.attributes.value===l.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(i,{value:f})});break}}static setAttributes({html:t,element:i,storage:s=null,intent:a,linkService:o}){const{attributes:l}=i,u=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${a}`);for(const[d,f]of Object.entries(l))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}u&&o.addLinkAttributes(t,l.href,l.newWindow),s&&l.dataId&&this.setupStorage(t,l.dataId,i,s)}static render(t){const i=t.annotationStorage,s=t.linkService,a=t.xfaHtml,o=t.intent||"display",l=document.createElement(a.name);a.attributes&&this.setAttributes({html:l,element:a,intent:o,linkService:s});const u=o!=="richText",d=t.div;if(d.append(l),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=y}u&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(a.children.length===0){if(a.value){const y=document.createTextNode(a.value);l.append(y),u&&vr.shouldBuildText(a.name)&&f.push(y)}return{textDivs:f}}const g=[[a,-1,l]];for(;g.length>0;){const[y,b,v]=g.at(-1);if(b+1===y.children.length){g.pop();continue}const w=y.children[++g.at(-1)[1]];if(w===null)continue;const{name:S}=w;if(S==="#text"){const E=document.createTextNode(w.value);f.push(E),v.append(E);continue}const x=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,S):document.createElement(S);if(v.append(x),w.attributes&&this.setAttributes({html:x,element:w,storage:i,intent:o,linkService:s}),w.children?.length>0)g.push([w,-1,x]);else if(w.value){const E=document.createTextNode(w.value);u&&vr.shouldBuildText(S)&&f.push(E),x.append(E)}}for(const y of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const i=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=i,t.div.hidden=!1}}const Ki="http://www.w3.org/2000/svg";class aa{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Cr(h,t="text"){if(dr(h,document.baseURI)){const i=await fetch(h);if(!i.ok)throw new Error(i.statusText);switch(t){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise((i,s)=>{const a=new XMLHttpRequest;a.open("GET",h,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":i(a.response);return}i(a.responseText);return}s(new Error(a.statusText))}},a.send(null)})}class Tr{constructor({viewBox:t,userUnit:i,scale:s,rotation:a,offsetX:o=0,offsetY:l=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=i,this.scale=s,this.rotation=a,this.offsetX=o,this.offsetY=l,s*=i;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let g,y,b,v;switch(a%=360,a<0&&(a+=360),a){case 180:g=-1,y=0,b=0,v=1;break;case 90:g=0,y=1,b=1,v=0;break;case 270:g=0,y=-1,b=-1,v=0;break;case 0:g=1,y=0,b=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(b=-b,v=-v);let w,S,x,E;g===0?(w=Math.abs(f-t[1])*s+o,S=Math.abs(d-t[0])*s+l,x=(t[3]-t[1])*s,E=(t[2]-t[0])*s):(w=Math.abs(d-t[0])*s+o,S=Math.abs(f-t[1])*s+l,x=(t[2]-t[0])*s,E=(t[3]-t[1])*s),this.transform=[g*s,y*s,b*s,v*s,w-g*s*d-b*s*f,S-y*s*d-v*s*f],this.width=x,this.height=E}get rawDims(){const t=this.viewBox;return gt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:i=this.rotation,offsetX:s=this.offsetX,offsetY:a=this.offsetY,dontFlip:o=!1}={}){return new Tr({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:i,offsetX:s,offsetY:a,dontFlip:o})}convertToViewportPoint(t,i){const s=[t,i];return it.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const i=[t[0],t[1]];it.applyTransform(i,this.transform);const s=[t[2],t[3]];return it.applyTransform(s,this.transform),[i[0],i[1],s[0],s[1]]}convertToPdfPoint(t,i){const s=[t,i];return it.applyInverseTransform(s,this.transform),s}}class Nh extends ls{constructor(t,i=0){super(t,"RenderingCancelledException"),this.extraDelay=i}}function wl(h){const t=h.length;let i=0;for(;i<t&&h[i].trim()==="";)i++;return h.substring(i,i+5).toLowerCase()==="data:"}function Bh(h){return typeof h=="string"&&/\.pdf$/i.test(h)}function A1(h){return[h]=h.split(/[#?]/,1),h.substring(h.lastIndexOf("/")+1)}function S1(h,t="document.pdf"){if(typeof h!="string")return t;if(wl(h))return pt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(h);if(!s)return t;const a=u=>{try{let d=decodeURIComponent(u);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:u):d}catch{return u}},o=/\.pdf$/i,l=s.pathname.split("/").at(-1);if(o.test(l))return a(l);if(s.searchParams.size>0){const u=Array.from(s.searchParams.values()).reverse();for(const f of u)if(o.test(f))return a(f);const d=Array.from(s.searchParams.keys()).reverse();for(const f of d)if(o.test(f))return a(f)}if(s.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(d)return a(d[0])}return t}class mm{started=Object.create(null);times=[];time(t){t in this.started&&pt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||pt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let i=0;for(const{name:s}of this.times)i=Math.max(s.length,i);for(const{name:s,start:a,end:o}of this.times)t.push(`${s.padEnd(i)} ${o-a}ms
`);return t.join("")}}function dr(h,t){const i=t?URL.parse(h,t):URL.parse(h);return i?.protocol==="http:"||i?.protocol==="https:"}function fi(h){h.preventDefault()}function ee(h){h.preventDefault(),h.stopPropagation()}function w1(h){console.log("Deprecated API usage: "+h)}class yh{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const i=this.#t.exec(t);if(!i)return null;const s=parseInt(i[1],10);let a=parseInt(i[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(i[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(i[4],10);l=l>=0&&l<=23?l:0;let u=parseInt(i[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(i[6],10);d=d>=0&&d<=59?d:0;const f=i[7]||"Z";let g=parseInt(i[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(i[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(l+=g,u+=y):f==="+"&&(l-=g,u-=y),new Date(Date.UTC(s,a,o,l,u,d))}}function E1(h,{scale:t=1,rotation:i=0}){const{width:s,height:a}=h.attributes.style,o=[0,0,parseInt(s),parseInt(a)];return new Tr({viewBox:o,userUnit:1,scale:t,rotation:i})}function _r(h){if(h.startsWith("#")){const t=parseInt(h.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return h.startsWith("rgb(")?h.slice(4,-1).split(",").map(t=>parseInt(t)):h.startsWith("rgba(")?h.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(pt(`Not a valid color format: "${h}"`),[0,0,0])}function x1(h){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const i of h.keys()){t.style.color=i;const s=window.getComputedStyle(t).color;h.set(i,_r(s))}t.remove()}function Kt(h){const{a:t,b:i,c:s,d:a,e:o,f:l}=h.getTransform();return[t,i,s,a,o,l]}function Ci(h){const{a:t,b:i,c:s,d:a,e:o,f:l}=h.getTransform().invertSelf();return[t,i,s,a,o,l]}function as(h,t,i=!1,s=!0){if(t instanceof Tr){const{pageWidth:a,pageHeight:o}=t.rawDims,{style:l}=h,u=pe.isCSSRoundSupported,d=`var(--total-scale-factor) * ${a}px`,f=`var(--total-scale-factor) * ${o}px`,g=u?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,y=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!i||t.rotation%180===0?(l.width=g,l.height=y):(l.width=y,l.height=g)}s&&h.setAttribute("data-main-rotation",t.rotation)}class Di{constructor(){const{pixelRatio:t}=Di;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,i,s,a,o=-1){let l=1/0,u=1/0,d=1/0;s=Di.capPixels(s,o),s>0&&(l=Math.sqrt(s/(t*i))),a!==-1&&(u=a/t,d=a/i);const f=Math.min(l,u,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,i){if(i>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+i/100));return t>0?Math.min(t,s):s}return t}}const bh=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class C1{static get isDarkMode(){return gt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class T1{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:i}=t;i.width=i.height="0",i.display="none",i.color="var(--comment-fg-color)",document.body.append(t);const{color:s}=window.getComputedStyle(t);return t.remove(),gt(this,"commentForegroundColor",_r(s))}}function _1(h,t,i,s){s=Math.min(Math.max(s??1,0),1);const a=255*(1-s);return h=Math.round(h*s+a),t=Math.round(t*s+a),i=Math.round(i*s+a),[h,t,i]}function ym(h,t){const i=h[0]/255,s=h[1]/255,a=h[2]/255,o=Math.max(i,s,a),l=Math.min(i,s,a),u=(o+l)/2;if(o===l)t[0]=t[1]=0;else{const d=o-l;switch(t[1]=u<.5?d/(o+l):d/(2-o-l),o){case i:t[0]=((s-a)/d+(s<a?6:0))*60;break;case s:t[0]=((a-i)/d+2)*60;break;case a:t[0]=((i-s)/d+4)*60;break}}t[2]=u}function vh(h,t){const i=h[0],s=h[1],a=h[2],o=(1-Math.abs(2*a-1))*s,l=o*(1-Math.abs(i/60%2-1)),u=a-o/2;switch(Math.floor(i/60)){case 0:t[0]=o+u,t[1]=l+u,t[2]=u;break;case 1:t[0]=l+u,t[1]=o+u,t[2]=u;break;case 2:t[0]=u,t[1]=o+u,t[2]=l+u;break;case 3:t[0]=u,t[1]=l+u,t[2]=o+u;break;case 4:t[0]=l+u,t[1]=u,t[2]=o+u;break;case 5:case 6:t[0]=o+u,t[1]=u,t[2]=l+u;break}}function bm(h){return h<=.03928?h/12.92:((h+.055)/1.055)**2.4}function vm(h,t,i){vh(h,i),i.map(bm);const s=.2126*i[0]+.7152*i[1]+.0722*i[2];vh(t,i),i.map(bm);const a=.2126*i[0]+.7152*i[1]+.0722*i[2];return s>a?(s+.05)/(a+.05):(a+.05)/(s+.05)}const Am=new Map;function M1(h,t){const i=h[0]+h[1]*256+h[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let s=Am.get(i);if(s)return s;const a=new Float32Array(9),o=a.subarray(0,3),l=a.subarray(3,6);ym(h,l);const u=a.subarray(6,9);ym(t,u);const d=u[2]<.5,f=d?12:4.5;if(l[2]=d?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),vm(l,u,o)<f){let g,y;d?(g=l[2],y=1):(g=0,y=l[2]);const b=.005;for(;y-g>b;){const v=l[2]=(g+y)/2;d===vm(l,u,o)<f?g=v:y=v}l[2]=d?y:g}return vh(l,o),s=it.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),Am.set(i,s),s}function gy({html:h,dir:t,className:i},s){const a=document.createDocumentFragment();if(typeof h=="string"){const o=document.createElement("p");o.dir=t||"auto";const l=h.split(/(?:\r\n?|\n)/);for(let u=0,d=l.length;u<d;++u){const f=l[u];o.append(document.createTextNode(f)),u<d-1&&o.append(document.createElement("br"))}a.append(o)}else py.render({xfaHtml:h,div:a,intent:"richText"});a.firstElementChild.classList.add("richText",i),s.append(a)}function my(h){const t=new Path2D;if(!h)return t;for(let i=0,s=h.length;i<s;)switch(h[i++]){case ar.moveTo:t.moveTo(h[i++],h[i++]);break;case ar.lineTo:t.lineTo(h[i++],h[i++]);break;case ar.curveTo:t.bezierCurveTo(h[i++],h[i++],h[i++],h[i++],h[i++],h[i++]);break;case ar.quadraticCurveTo:t.quadraticCurveTo(h[i++],h[i++],h[i++],h[i++]);break;case ar.closePath:t.closePath();break;default:pt(`Unrecognized drawing path operator: ${h[i-1]}`);break}return t}class kt{static#t=null;static#e=null;static#n=null;static#i=0;static#a=[];get pagesNumber(){return kt.#i}set pagesNumber(t){kt.#i!==t&&(kt.#i=t,t===0&&(kt.#e=null,kt.#t=null))}addListener(t){kt.#a.push(t)}removeListener(t){const i=kt.#a.indexOf(t);i>=0&&kt.#a.splice(i,1)}#r(){for(const t of kt.#a)t()}#s(t){if(kt.#e)return;const i=kt.#i,s=new Uint32Array(3*i),a=kt.#e=s.subarray(0,i),o=kt.#t=s.subarray(i,2*i);if(t)for(let l=0;l<i;l++)a[l]=o[l]=l+1;kt.#n=s.subarray(2*i)}movePages(t,i,s){this.#s(!0);const a=kt.#e,o=kt.#t;kt.#n.set(o);const l=i.length,u=new Uint32Array(l);let d=0;for(let v=0;v<l;v++){const w=i[v]-1;u[v]=a[w],w<s&&(d+=1)}const f=kt.#i;let g=s-d;const y=f-l;g=Ce(g,0,y);for(let v=0,w=0;v<f;v++)t.has(v+1)||(a[w++]=a[v]);a.copyWithin(g+l,g,y),a.set(u,g);let b=!1;for(let v=0,w=f;v<w;v++){const S=a[v];b||=S!==v+1,o[S-1]=v+1}this.#r(),b||(this.pagesNumber=0)}hasBeenAltered(){return kt.#e!==null}getPageMappingForSaving(){return{pageIndices:kt.#t?kt.#t.map(t=>t-1):null}}getPrevPageNumber(t){return kt.#n[kt.#e[t-1]-1]}getPageNumber(t){return kt.#t?.[t-1]??t}getPageId(t){return kt.#e?.[t-1]??t}static get instance(){return gt(this,"instance",new kt)}getMapping(){return kt.#e.subarray(0,this.pagesNumber)}}class gr{#t=null;#e=null;#n;#i=null;#a=null;#r=null;#s=null;#o=null;static#c=null;constructor(t){this.#n=t,gr.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const i=this.#n._uiManager._signal;i instanceof AbortSignal&&!i.aborted&&(t.addEventListener("contextmenu",fi,{signal:i}),t.addEventListener("pointerdown",gr.#l,{signal:i}));const s=this.#i=document.createElement("div");s.className="buttons",t.append(s);const a=this.#n.toolbarPosition;if(a){const{style:o}=t,l=this.#n._uiManager.direction==="ltr"?1-a[0]:a[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#n._focusEventsAllowed=!1,ee(t)}#h(t){this.#n._focusEventsAllowed=!0,ee(t)}#f(t){const i=this.#n._uiManager._signal;return!(i instanceof AbortSignal)||i.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:i}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:i}),t.addEventListener("contextmenu",fi,{signal:i}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown(),this.#r?.shown()}addDeleteButton(){const{editorType:t,_uiManager:i}=this.#n,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",gr.#c[t]),this.#f(s)&&s.addEventListener("click",a=>{i.delete()},{signal:i._signal}),this.#i.append(s)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const i=await t.render();this.#f(i),this.#i.append(i,this.#m),this.#a=t}addComment(t,i=null){if(this.#r)return;const s=t.renderForToolbar();if(!s)return;this.#f(s);const a=this.#s=this.#m;i?(this.#i.insertBefore(s,i),this.#i.insertBefore(a,i)):this.#i.append(s,a),this.#r=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const i=t.renderButton();this.#f(i),this.#i.append(i,this.#m)}async addEditSignatureButton(t){const i=this.#o=await t.renderEditButton(this.#n);this.#f(i),this.#i.append(i,this.#m)}removeButton(t){t==="comment"&&(this.#r?.removeToolbarCommentButton(),this.#r=null,this.#s?.remove(),this.#s=null)}async addButton(t,i){switch(t){case"colorPicker":i&&this.addColorPicker(i);break;case"altText":i&&await this.addAltText(i);break;case"editSignature":i&&await this.addEditSignatureButton(i);break;case"delete":this.addDeleteButton();break;case"comment":i&&this.addComment(i);break}}async addButtonBefore(t,i,s){if(!i&&t==="comment")return;const a=this.#i.querySelector(s);a&&t==="comment"&&this.addComment(i,a)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class R1{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const i=this.#n._signal;i instanceof AbortSignal&&!i.aborted&&t.addEventListener("contextmenu",fi,{signal:i});const s=this.#t=document.createElement("div");return s.className="buttons",t.append(s),this.#n.hasCommentManager()&&this.#r("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#n.commentSelection("floating_button")}),this.#r("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#n.highlightSelection("floating_button")}),t}#a(t,i){let s=0,a=0;for(const o of t){const l=o.y+o.height;if(l<s)continue;const u=o.x+(i?o.width:0);if(l>s){a=u,s=l;continue}i?u>a&&(a=u):u<a&&(a=u)}return[i?1-a:a,s]}show(t,i,s){const[a,o]=this.#a(i,s),{style:l}=this.#e||=this.#i();t.append(this.#e),l.insetInlineEnd=`${100*a}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#r(t,i,s,a){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",i);const l=document.createElement("span");o.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",s);const u=this.#n._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",fi,{signal:u}),o.addEventListener("click",a,{signal:u})),this.#t.append(o)}}function yy(h,t,i){for(const s of i)t.addEventListener(s,h[s].bind(h))}class Nt{static#t=NaN;static#e=null;static#n=NaN;static#i=null;static initializeAndAddPointerId(t){(Nt.#e||=new Set).add(t)}static setPointer(t,i){Nt.#t||=i,Nt.#i??=t}static setTimeStamp(t){Nt.#n=t}static isSamePointerId(t){return Nt.#t===t}static isSamePointerIdOrRemove(t){return Nt.#t===t?!0:(Nt.#e?.delete(t),!1)}static isSamePointerType(t){return Nt.#i===t}static isInitializedAndDifferentPointerType(t){return Nt.#i!==null&&!Nt.isSamePointerType(t)}static isSameTimeStamp(t){return Nt.#n===t}static isUsingMultiplePointers(){return Nt.#e?.size>=1}static clearPointerType(){Nt.#i=null}static clearPointerIds(){Nt.#t=NaN,Nt.#e=null}static clearTimeStamp(){Nt.#n=NaN}}class D1{#t=0;get id(){return`${yr}${this.#t++}`}}class zh{#t=fy();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const o=a.decode().then(()=>(s.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return gt(this,"_isSVGFittingCanvas",o)}async#i(t,i){this.#n||=new Map;let s=this.#n.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let a;if(typeof i=="string"?(s.url=i,a=await Cr(i,"blob")):i instanceof File?a=s.file=i:i instanceof Blob&&(a=i),a.type==="image/svg+xml"){const o=zh._isSVGFittingCanvas,l=new FileReader,u=new Image,d=new Promise((f,g)=>{u.onload=()=>{s.bitmap=u,s.isSvg=!0,f()},l.onload=async()=>{const y=s.svgUrl=l.result;u.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=l.onerror=g});l.readAsDataURL(a),await d}else s.bitmap=await createImageBitmap(a);s.refCounter=1}catch(a){pt(a),s=null}return this.#n.set(t,s),s&&this.#n.set(s.id,s),s}async getFromFile(t){const{lastModified:i,name:s,size:a,type:o}=t;return this.#i(`${i}_${s}_${a}_${o}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,i){const s=await i;return this.#i(t,s)}async getFromId(t){this.#n||=new Map;const i=this.#n.get(t);if(!i)return null;if(i.bitmap)return i.refCounter+=1,i;if(i.file)return this.getFromFile(i.file);if(i.blobPromise){const{blobPromise:s}=i;return delete i.blobPromise,this.getFromBlob(i.id,s)}return this.getFromUrl(i.url)}getFromCanvas(t,i){this.#n||=new Map;let s=this.#n.get(t);if(s?.bitmap)return s.refCounter+=1,s;const a=new OffscreenCanvas(i.width,i.height);return a.getContext("2d").drawImage(i,0,0),s={bitmap:a.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,s),this.#n.set(s.id,s),s}getSvgUrl(t){const i=this.#n.get(t);return i?.isSvg?i.svgUrl:null}deleteId(t){this.#n||=new Map;const i=this.#n.get(t);if(!i||(i.refCounter-=1,i.refCounter!==0))return;const{bitmap:s}=i;if(!i.url&&!i.file){const a=new OffscreenCanvas(s.width,s.height);a.getContext("bitmaprenderer").transferFromImageBitmap(s),i.blobPromise=a.convertToBlob()}s.close?.(),i.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class L1{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:i,post:s,mustExec:a,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:u=!1}){if(a&&t(),this.#e)return;const d={cmd:t,undo:i,post:s,type:o};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(d);return}if(l&&this.#t[this.#i].type===o){u&&(d.undo=this.#t[this.#i].undo),this.#t[this.#i]=d;return}const f=this.#i+1;f===this.#n?this.#t.splice(0,1):(this.#i=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(d)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:i}=this.#t[this.#i];t(),i?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:i}=this.#t[this.#i];t(),i?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let i=this.#i;i>=0;i--)if(this.#t[i].type!==t){this.#t.splice(i+1,this.#i-i),this.#i=i;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class Mr{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:i}=pe.platform;for(const[s,a,o={}]of t)for(const l of s){const u=l.startsWith("mac+");i&&u?(this.callbacks.set(l.slice(4),{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1))):!i&&!u&&(this.callbacks.set(l,{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const i=this.buffer.join("+");return this.buffer.length=0,i}exec(t,i){if(!this.allKeys.has(i.key))return;const s=this.callbacks.get(this.#t(i));if(!s)return;const{callback:a,options:{bubbles:o=!1,args:l=[],checker:u=null}}=s;u&&!u(t,i)||(a.bind(t,...l,i)(),o||ee(i))}}class Ph{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return x1(t),gt(this,"_colors",t)}convert(t){const i=_r(t);if(!window.matchMedia("(forced-colors: active)").matches)return i;for(const[s,a]of this._colors)if(a.every((o,l)=>o===i[l]))return Ph._colorsMapping.get(s);return i}getHexCode(t){const i=this._colors.get(t);return i?it.makeHexColor(...i):t}}class On{#t=new AbortController;#e=null;#n=null;#i=new Map;#a=new Map;#r=null;#s=null;#o=null;#c=new L1;#l=null;#d=null;#h=null;#f=0;#m=new Set;#g=null;#u=null;#p=new Set;_editorUndoBar=null;#y=!1;#v=!1;#b=!1;#C=null;#E=null;#S=null;#_=null;#A=!1;#x=null;#D=new D1;#M=!1;#R=!1;#P=!1;#O=null;#N=null;#F=null;#B=null;#V=null;#T=bt.NONE;#w=new Set;#k=null;#I=null;#H=null;#q=null;#Y=null;#$={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#j=[0,0];#z=null;#X=null;#Z=null;#J=null;#U=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=On.prototype,i=l=>l.#X.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),s=(l,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return gt(this,"_keyboardManager",new Mr([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#X.contains(u)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#X.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:i}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:i}]]))}constructor(t,i,s,a,o,l,u,d,f,g,y,b,v,w,S,x){const E=this._signal=this.#t.signal;this.#X=t,this.#Z=i,this.#J=s,this.#r=a,this.#l=o,this.#I=l,this.#Y=d,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:E}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),u._on("setpreference",this.onSetPreference.bind(this),{signal:E}),u._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:E}),u._on("pagesedited",this.onPagesEdited.bind(this),{signal:E}),window.addEventListener("pointerdown",()=>{this.#R=!0},{capture:!0,signal:E}),window.addEventListener("pointerup",()=>{this.#R=!1},{capture:!0,signal:E}),this.#rt(),this.#dt(),this.#et(),this.#s=d.annotationStorage,this.#C=d.filterFactory,this.#H=f,this.#_=g||null,this.#y=y,this.#v=b,this.#b=v,this.#V=w||null,this.viewParameters={realScale:aa.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=x!==!1,o?.setSidebarUiManager(this)}destroy(){this.#U?.resolve(),this.#U=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#a.values())t.destroy();this.#a.clear(),this.#i.clear(),this.#p.clear(),this.#B?.clear(),this.#e=null,this.#w.clear(),this.#c.destroy(),this.#r?.destroy(),this.#l?.destroy(),this.#I?.destroy(),this.#x?.hide(),this.#x=null,this.#F?.destroy(),this.#F=null,this.#n=null,this.#E&&(clearTimeout(this.#E),this.#E=null),this.#z&&(clearTimeout(this.#z),this.#z=null),this._editorUndoBar?.destroy(),this.#Y=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#V}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return gt(this,"hcmFilter",this.#H?this.#C.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return gt(this,"direction",getComputedStyle(this.#X).direction)}get _highlightColors(){return gt(this,"_highlightColors",this.#_?new Map(this.#_.split(",").map(t=>(t=t.split("=").map(i=>i.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return gt(this,"highlightColors",null);const i=new Map,s=!!this.#H;for(const[a,o]of t){const l=a.endsWith("_HCM");if(s&&l){i.set(a.replace("_HCM",""),o);continue}!s&&!l&&i.set(a,o)}return gt(this,"highlightColors",i)}get highlightColorNames(){return gt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const i=this.highlightColorNames.get(t);return this._highlightColors.get(i)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#F=t}editAltText(t,i=!1){this.#r?.editAltText(this,t,i)}hasCommentManager(){return!!this.#l}editComment(t,i,s,a){this.#l?.showDialog(this,t,i,s,a)}selectComment(t,i){this.#a.get(t)?.getEditorByUID(i)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}deleteComment(t,i){const s=()=>{t.comment=i},a=()=>{this._editorUndoBar?.show(s,"comment"),this.toggleComment(null),t.comment=null};this.addCommands({cmd:a,undo:s,mustExec:!0})}toggleComment(t,i,s=void 0){this.#l?.toggleCommentPopup(t,i,s)}makeCommentColor(t,i){return t&&this.#l?.makeCommentColor(t,i)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#a.has(t-1))return;const{resolve:i,promise:s}=Promise.withResolvers(),a=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",a),i())};this._eventBus.on("editorsrendered",a),await s}getSignature(t){this.#I?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#I}switchToMode(t,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,i){this._eventBus.dispatch("setpreference",{source:this,name:t,value:i})}onSetPreference({name:t,value:i}){t==="enableNewAltTextWhenAddingImage"&&(this.#b=i)}onPagesEdited({pagesMapper:t}){for(const a of this.#i.values())a.updatePageIndex(t.getPrevPageNumber(a.pageIndex+1)-1);const i=this.#a,s=this.#a=new Map;for(const[a,o]of i){const l=t.getPrevPageNumber(a+1)-1;if(l===-1){o.destroy();continue}s.set(l,o),o.updatePageIndex(l)}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#X.focus()}findParent(t,i){for(const s of this.#a.values()){const{x:a,y:o,width:l,height:u}=s.div.getBoundingClientRect();if(t>=a&&t<=a+l&&i>=o&&i<=o+u)return s}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*aa.PDF_TO_CSS_UNITS;for(const i of this.#p)i.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:i}=this;if(i.hasTextLayer(t))return i;for(const s of this.#a.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t="",i=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:a,anchorOffset:o,focusNode:l,focusOffset:u}=s,d=s.toString(),g=this.#Q(s).closest(".textLayer"),y=this.getSelectionBoxes(g);if(!y)return;s.empty();const b=this.#tt(g),v=this.#T===bt.NONE,w=()=>{const S=b?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:a,anchorOffset:o,focusNode:l,focusOffset:u,text:d});v&&this.showAllEditors("highlight",!0,!0),i&&S?.editComment()};if(v){this.switchToMode(bt.HIGHLIGHT,w);return}w()}commentSelection(t=""){this.highlightSelection(t,!0)}#st(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#Q(t).closest(".textLayer"),a=this.getSelectionBoxes(s);a&&(this.#x||=new R1(this),this.#x.show(s,a,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#s)return null;const i=`${yr}${t}`,s=this.#s.getRawValue(i);return s&&this.#s.remove(i),s}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,i=null){const s=this.#J;s&&(s.setAttribute("data-l10n-id",t),i?s.setAttribute("data-l10n-args",JSON.stringify(i)):s.removeAttribute("data-l10n-args"))}#at(){const t=document.getSelection();if(!t||t.isCollapsed){this.#k&&(this.#x?.hide(),this.#k=null,this.#L({hasSelectedText:!1}));return}const{anchorNode:i}=t;if(i===this.#k)return;const a=this.#Q(t).closest(".textLayer");if(!a){this.#k&&(this.#x?.hide(),this.#k=null,this.#L({hasSelectedText:!1}));return}if(this.#x?.hide(),this.#k=i,this.#L({hasSelectedText:!0}),!(this.#T!==bt.HIGHLIGHT&&this.#T!==bt.NONE)&&(this.#T===bt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#A=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#T===bt.HIGHLIGHT?this.#tt(a):null;if(o?.toggleDrawing(),this.#R){const l=new AbortController,u=this.combinedSignal(l),d=f=>{f.type==="pointerup"&&f.button!==0||(l.abort(),o?.toggleDrawing(!0),f.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}else o?.toggleDrawing(!0),this.#W("main_toolbar")}}#W(t=""){this.#T===bt.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#st()}#rt(){document.addEventListener("selectionchange",this.#at.bind(this),{signal:this._signal})}#ot(){if(this.#S)return;this.#S=new AbortController;const t=this.combinedSignal(this.#S);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#lt(){this.#S?.abort(),this.#S=null}blur(){if(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const i of this.#w)if(i.div.contains(t)){this.#N=[i,t],i._focusEventsAllowed=!1;break}}focus(){if(!this.#N)return;const[t,i]=this.#N;this.#N=null,i.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}#et(){if(this.#O)return;this.#O=new AbortController;const t=this.combinedSignal(this.#O);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ct(){this.#O?.abort(),this.#O=null}#ut(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#ht(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.setEditingState(!0)}removeEditListeners(){this.#ct(),this.setEditingState(!1)}dragOver(t){for(const{type:i}of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(i)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const i of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(i.type)){s.paste(i,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const i=[];for(const s of this.#w){const a=s.serialize(!0);a&&i.push(a)}i.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:i}=t;for(const o of i.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let s=i.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){pt(`paste: "${o.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const a=this.currentLayer;try{const o=[];for(const d of s){const f=await a.deserialize(d);if(!f)return;o.push(f)}const l=()=>{for(const d of o)this.#it(d);this.#nt(o)},u=()=>{for(const d of o)d.remove()};this.addCommands({cmd:l,undo:u,mustExec:!0})}catch(o){pt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==bt.NONE&&!this.isEditorHandlingKeyboard&&On._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#W("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#L(t){Object.entries(t).some(([s,a])=>this.#$[s]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#$,t)}),this.#T===bt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[Mt.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ot(),this.#ut(),this.#L({isEditing:this.#T!==bt.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#lt(),this.#ht(),this.#L({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const i of this.#u)this.#G(i.defaultPropertiesToUpdate)}}getId(){return this.#D.id}get currentLayer(){return this.#a.get(this.#f)}getLayer(t){return this.#a.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#a.set(t.pageIndex,t),this.#M?t.enable():t.disable()}removeLayer(t){this.#a.delete(t.pageIndex)}async updateMode(t,i=null,s=!1,a=!1,o=!1,l=!1){if(this.#T!==t&&!(this.#U&&(await this.#U.promise,!this.#U))){if(this.#U=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#T===bt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=t,t===bt.NONE){this.setEditingState(!1),this.#pt();for(const u of this.#i.values())u.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#U.resolve();return}for(const u of this.#i.values())u.addStandaloneCommentButton();t===bt.SIGNATURE&&await this.#I?.loadSignatures(),s&&Nt.clearPointerType(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const u of this.#a.values())u.updateMode(t);if(t===bt.POPUP){this.#n||=await this.#Y.getAnnotationsByType(new Set(this.#u.map(f=>f._editorType)));const u=new Set,d=[];for(const f of this.#i.values()){const{annotationElementId:g,hasComment:y,deleted:b}=f;g&&u.add(g),y&&!b&&d.push(f.getData())}for(const f of this.#n){const{id:g,popupRef:y,contentsObj:b}=f;y&&b?.str&&!u.has(g)&&!this.#m.has(g)&&d.push(f)}this.#l?.showSidebar(d)}if(!i){a&&this.addNewEditorFromKeyboard(),this.#U.resolve();return}for(const u of this.#i.values())u.uid===i?(this.setSelected(u),l?u.editComment():o?u.enterInEditMode():u.focus()):u.unselect();this.#U.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,i){if(this.#u){switch(t){case Mt.CREATE:this.currentLayer.addNewEditor(i);return;case Mt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#q||=new Map).set(t,i),this.showAllEditors("highlight",i);break}if(this.hasSelection)for(const s of this.#w)s.updateParams(t,i);else for(const s of this.#u)s.updateDefaultParams(t,i)}}showAllEditors(t,i,s=!1){for(const o of this.#i.values())o.editorType===t&&o.show(i);(this.#q?.get(Mt.HIGHLIGHT_SHOW_ALL)??!0)!==i&&this.#G([[Mt.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(t=!1){if(this.#P!==t){this.#P=t;for(const i of this.#a.values())t?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#M){this.#M=!0;const t=[];for(const i of this.#a.values())t.push(i.enable());await Promise.all(t);for(const i of this.#i.values())i.enable()}}#pt(){if(this.unselectAll(),this.#M){this.#M=!1;for(const t of this.#a.values())t.disable();for(const t of this.#i.values())t.disable()}}*getEditors(t){for(const i of this.#i.values())i.pageIndex===t&&(yield i)}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#E&&clearTimeout(this.#E),this.#E=setTimeout(()=>{this.focusMainContainer(),this.#E=null},0)),this.#i.delete(t.id),t.annotationElementId&&this.#B?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#it(t){const i=this.#a.get(t.pageIndex);i?i.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#gt(){let t=null;for(t of this.#w);return t}updateUI(t){this.#gt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#w.has(t)){this.#w.delete(t),t.unselect(),this.#L({hasSelectedEditor:this.hasSelection});return}this.#w.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),this.#h?.commitOrRemove();for(const i of this.#w)i!==t&&i.unselect();this.#w.clear(),this.#w.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}isSelected(t){return this.#w.has(t)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(t){t.unselect(),this.#w.delete(t),this.#L({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#L({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(t){this.#c.add(t),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(t){this.#c.cleanType(t)}#K(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const i=t?[t]:[...this.#w],s=()=>{this._editorUndoBar?.show(a,i.length===1?i[0].editorType:i.length);for(const o of i)o.remove()},a=()=>{for(const o of i)this.#it(o)};this.addCommands({cmd:s,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#nt(t){for(const i of this.#w)i.unselect();this.#w.clear();for(const i of t)i.isEmpty()||(this.#w.add(i),i.select());this.#L({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#w)t.commit();this.#nt(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#T!==bt.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#w)t.unselect();this.#w.clear(),this.#L({hasSelectedEditor:!1})}}translateSelectedEditors(t,i,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#j[0]+=t,this.#j[1]+=i;const[a,o]=this.#j,l=[...this.#w],u=1e3;this.#z&&clearTimeout(this.#z),this.#z=setTimeout(()=>{this.#z=null,this.#j[0]=this.#j[1]=0,this.addCommands({cmd:()=>{for(const d of l)this.#i.has(d.id)&&(d.translateInPage(a,o),d.translationDone())},undo:()=>{for(const d of l)this.#i.has(d.id)&&(d.translateInPage(-a,-o),d.translationDone())},mustExec:!1})},u);for(const d of l)d.translateInPage(t,i),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#g=new Map;for(const t of this.#w)this.#g.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#g)return!1;this.disableUserSelect(!1);const t=this.#g;this.#g=null;let i=!1;for(const[{x:a,y:o,pageIndex:l},u]of t)u.newX=a,u.newY=o,u.newPageIndex=l,i||=a!==u.savedX||o!==u.savedY||l!==u.savedPageIndex;if(!i)return!1;const s=(a,o,l,u)=>{if(this.#i.has(a.id)){const d=this.#a.get(u);d?a._setParentAndPosition(d,o,l):(a.pageIndex=u,a.x=o,a.y=l)}};return this.addCommands({cmd:()=>{for(const[a,{newX:o,newY:l,newPageIndex:u}]of t)s(a,o,l,u)},undo:()=>{for(const[a,{savedX:o,savedY:l,savedPageIndex:u}]of t)s(a,o,l,u)},mustExec:!0}),!0}dragSelectedEditors(t,i){if(this.#g)for(const s of this.#g.keys())s.drag(t,i)}rebuild(t){if(t.parent===null){const i=this.getLayer(t.pageIndex);i?(i.changeParent(t),i.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#T}isEditingMode(){return this.#T!==bt.NONE}get imageManager(){return gt(this,"imageManager",new zh)}getSelectionBoxes(t){if(!t)return null;const i=document.getSelection();for(let f=0,g=i.rangeCount;f<g;f++)if(!t.contains(i.getRangeAt(f).commonAncestorContainer))return null;const{x:s,y:a,width:o,height:l}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,g,y,b)=>({x:(g-a)/l,y:1-(f+y-s)/o,width:b/l,height:y/o});break;case"180":u=(f,g,y,b)=>({x:1-(f+y-s)/o,y:1-(g+b-a)/l,width:y/o,height:b/l});break;case"270":u=(f,g,y,b)=>({x:1-(g+b-a)/l,y:(f-s)/o,width:b/l,height:y/o});break;default:u=(f,g,y,b)=>({x:(f-s)/o,y:(g-a)/l,width:y/o,height:b/l});break}const d=[];for(let f=0,g=i.rangeCount;f<g;f++){const y=i.getRangeAt(f);if(!y.collapsed)for(const{x:b,y:v,width:w,height:S}of y.getClientRects())w===0||S===0||d.push(u(b,v,w,S))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:i}){(this.#o||=new Map).set(t,i)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const i=this.#o?.get(t.data.id);if(!i)return;const s=this.#s.getRawValue(i);s&&(this.#T===bt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,i,s){const a=this.#B?.get(t);a&&(a.setCanvas(i,s),this.#B.delete(t))}addMissingCanvas(t,i){(this.#B||=new Map).set(t,i)}}class Mi{#t=null;#e=!1;#n=null;#i=null;#a=null;#r=null;#s=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,Mi.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Mi._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const i=this.#i=document.createElement("span");t.append(i),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",Mi.#f.missing),i.setAttribute("data-l10n-id",Mi.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;t.addEventListener("contextmenu",fi,{signal:s}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const a=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",a,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#s=!0,a(o))},{signal:s}),await this.#g(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await Mi._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#g())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const i=this.#o=document.createElement("div");i.className="noAltTextBadge",this.#c.div.append(i)}this.#o.classList.toggle("hidden",!t)}serialize(t){let i=this.#t;return!t&&this.#l===i&&(i=this.#d),{altText:i,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:i,guessedText:s,textWithDisclaimer:a,cancel:o=!1}){s&&(this.#l=s,this.#d=a),!(this.#t===t&&this.#e===i)&&(o||(this.#t=t,this.#e=i),this.#g())}toggle(t=!1){this.#n&&(!t&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#n.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#a=null,this.#o?.remove(),this.#o=null}async#g(){const t=this.#n;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Mi.#f[this.#m]),this.#i?.setAttribute("data-l10n-id",Mi.#f[`${this.#m}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=this.#a;if(!i){this.#a=i=document.createElement("span"),i.className="tooltip",i.setAttribute("role","tooltip"),i.id=`alt-text-tooltip-${this.#c.id}`;const a=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#a.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#a?.classList.remove("show")},{signal:o})}this.#e?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=this.#t),i.parentNode||t.append(i),this.#c.getElementForAltText()?.setAttribute("aria-describedby",i.id)}}class Wo{#t=null;#e=null;#n=!1;#i=null;#a=null;#r=null;#s=null;#o=null;#c=!1;#l=null;constructor(t){this.#i=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const i=this.#i.commentButtonPosition;if(i){const{style:s}=t;s.insetInlineEnd=`calc(${100*(this.#i._uiManager.direction==="ltr"?1-i[0]:i[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*i[1]}% - var(--comment-button-dim))`;const a=this.#i.commentButtonColor;a&&(s.backgroundColor=a)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#i.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#i._uiManager.updatePopupColor(this.#i)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#i.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:i,height:s}=this.#t.getBoundingClientRect(),{x:a,y:o,width:l,height:u}=this.#i.parent.boundingClientRect;return[(t-a)/l,(i+s-o)/u]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:i}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=i)}#d(t,i){if(!this.#i._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",i?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#i._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const s=this.#i._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return t;t.addEventListener("contextmenu",fi,{signal:s}),i&&(t.addEventListener("focusin",o=>{this.#i._focusEventsAllowed=!1,ee(o)},{capture:!0,signal:s}),t.addEventListener("focusout",o=>{this.#i._focusEventsAllowed=!0,ee(o)},{capture:!0,signal:s})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const a=o=>{o.preventDefault(),t===this.#e?this.edit():this.#i.toggleComment(!0)};return t.addEventListener("click",a,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#n=!0,a(o))},{signal:s}),t.addEventListener("pointerenter",()=>{this.#i.toggleComment(!1,!0)},{signal:s}),t.addEventListener("pointerleave",()=>{this.#i.toggleComment(!1,!1)},{signal:s}),t}edit(t){const i=this.commentPopupPositionInLayer;let s,a;if(i)[s,a]=i;else{[s,a]=this.#i.commentButtonPosition;const{width:g,height:y,x:b,y:v}=this.#i;s=b+s*g,a=v+a*y}const o=this.#i.parent.boundingClientRect,{x:l,y:u,width:d,height:f}=o;this.#i._uiManager.editComment(this.#i,l+s*d,u+a*f,{...t,parentDimensions:o})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#n}),this.#n=!1)}isDeleted(){return this.#c||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#a}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#r,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#s&&(this.#r=null),t===null){this.#s="",this.#c=!0;return}this.#s=t,this.#o=new Date,this.#c=!1}restoreData({text:t,richText:i,date:s}){this.#s=t,this.#r=i,this.#o=s,this.#c=!1}setInitialText(t,i=null){this.#a=t,this.data=t,this.#o=null,this.#r=i}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#s="",this.#r=null,this.#o=null,this.#i=null,this.#n=!1,this.#c=!1}}class El{#t;#e=!1;#n=null;#i;#a;#r;#s;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:i=null,isPinchingStopped:s=null,onPinchStart:a=null,onPinching:o=null,onPinchEnd:l=null,signal:u}){this.#t=t,this.#n=s,this.#i=i,this.#a=a,this.#r=o,this.#s=l,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Di.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#o)return;const a=this.#o=new AbortController,o=AbortSignal.any([this.#c,a.signal]),l=this.#t,u={capture:!0,signal:o,passive:!1},d=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ee(f),d(f))},u),l.addEventListener("pointerup",d,u),l.addEventListener("pointercancel",d,u);return}if(!this.#h){this.#h=new AbortController;const a=AbortSignal.any([this.#c,this.#h.signal]),o=this.#t,l={signal:a,capture:!1,passive:!1};o.addEventListener("touchmove",this.#m.bind(this),l);const u=this.#g.bind(this);o.addEventListener("touchend",u,l),o.addEventListener("touchcancel",u,l),l.capture=!0,o.addEventListener("pointerdown",ee,l),o.addEventListener("pointermove",ee,l),o.addEventListener("pointercancel",ee,l),o.addEventListener("pointerup",ee,l),this.#a?.()}if(ee(t),t.touches.length!==2||this.#n?.()){this.#l=null;return}let[i,s]=t.touches;i.identifier>s.identifier&&([i,s]=[s,i]),this.#l={touch0X:i.screenX,touch0Y:i.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#m(t){if(!this.#l||t.touches.length!==2)return;ee(t);let[i,s]=t.touches;i.identifier>s.identifier&&([i,s]=[s,i]);const{screenX:a,screenY:o}=i,{screenX:l,screenY:u}=s,d=this.#l,{touch0X:f,touch0Y:g,touch1X:y,touch1Y:b}=d,v=y-f,w=b-g,S=l-a,x=u-o,E=Math.hypot(S,x)||1,_=Math.hypot(v,w)||1;if(!this.#e&&Math.abs(_-E)<=El.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=a,d.touch0Y=o,d.touch1X=l,d.touch1Y=u,!this.#e){this.#e=!0;return}const T=[(a+l)/2,(o+u)/2];this.#r?.(T,_,E)}#g(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#s?.()),this.#l&&(ee(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class lt{#t=null;#e=null;#n=null;#i=null;#a=null;#r=!1;#s=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#m="";#g=!1;#u=null;#p=!1;#y=!1;#v=!1;#b=null;#C=0;#E=0;#S=null;#_=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#A=!1;#x=lt._zIndex++;static _borderLineWidth=-1;static _colorManager=new Ph;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=lt.prototype._resizeWithKeyboard,i=On.TRANSLATE_SMALL,s=On.TRANSLATE_BIG;return gt(this,"_resizerKeyboardManager",new Mr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-i,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[i,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-i]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,i]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],lt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:i,rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=i,this.pageRotation=(360+i-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,a],this.pageTranslation=[o,l];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}updatePageIndex(t){this.pageIndex=t}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return gt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const i=new O1({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});i.annotationElementId=t.annotationElementId,i.deleted=!0,i._uiManager.addToAnnotationStorage(i)}static initialize(t,i){if(lt._l10n??=t,lt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),lt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);lt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,i){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,i){zt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#A}set _isDraggable(t){this.#A=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,i]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*i/(t*2),this.y+=this.width*t/(i*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*i/(t*2),this.y-=this.width*t/(i*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#x}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#z(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#g?this.#g=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,i,s,a){const[o,l]=this.parentDimensions;[s,a]=this.screenToPageTranslation(s,a),this.x=(t+s)/o,this.y=(i+a)/l,this.fixAndSetPosition()}_moveAfterPaste(t,i){const[s,a]=this.parentDimensions;this.setAt(t*s,i*a,this.width*s,this.height*a),this._onTranslated()}#D([t,i],s,a){[s,a]=this.screenToPageTranslation(s,a),this.x+=s/t,this.y+=a/i,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,i){this.#D(this.parentDimensions,t,i)}translateInPage(t,i){this.#u||=[this.x,this.y,this.width,this.height],this.#D(this.pageDimensions,t,i),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,i){this.#u||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[a,o]}=this;if(this.x+=t/a,this.y+=i/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:u}=this;const[d,f]=this.getBaseTranslation();l+=d,u+=f;const{style:g}=s;g.left=`${(100*l).toFixed(2)}%`,g.top=`${(100*u).toFixed(2)}%`,this._onTranslating(l,u),s.scrollIntoView({block:"nearest"})}_onTranslating(t,i){}_onTranslated(t,i){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,i]=this.parentDimensions,{_borderLineWidth:s}=lt,a=s/t,o=s/i;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:i},pageDimensions:[s,a]}=this;let{x:o,y:l,width:u,height:d}=this;if(u*=s,d*=a,o*=s,l*=a,this._mustFixPosition)switch(t){case 0:o=Ce(o,0,s-u),l=Ce(l,0,a-d);break;case 90:o=Ce(o,0,s-d),l=Ce(l,u,a);break;case 180:o=Ce(o,u,s),l=Ce(l,d,a);break;case 270:o=Ce(o,d,s),l=Ce(l,0,a-u);break}this.x=o/=s,this.y=l/=a;const[f,g]=this.getBaseTranslation();o+=f,l+=g,i.left=`${(100*o).toFixed(2)}%`,i.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#M(t,i,s){switch(s){case 90:return[i,-t];case 180:return[-t,-i];case 270:return[-i,t];default:return[t,i]}}screenToPageTranslation(t,i){return lt.#M(t,i,this.parentRotation)}pageTranslationToScreen(t,i){return lt.#M(t,i,360-this.parentRotation)}#R(t){switch(t){case 90:{const[i,s]=this.pageDimensions;return[0,-i/s,s/i,0]}case 180:return[-1,0,0,-1];case 270:{const[i,s]=this.pageDimensions;return[0,i/s,-s/i,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[i,s]}=this;return[i*t,s*t]}setDims(){const{div:{style:t},width:i,height:s}=this;t.width=`${(100*i).toFixed(2)}%`,t.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#P(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],i=this._uiManager._signal;for(const s of t){const a=document.createElement("div");this.#c.append(a),a.classList.add("resizer",s),a.setAttribute("data-resizer-name",s),a.addEventListener("pointerdown",this.#O.bind(this,s),{signal:i}),a.addEventListener("contextmenu",fi,{signal:i}),a.tabIndex=-1}this.div.prepend(this.#c)}#O(t,i){i.preventDefault();const{isMac:s}=pe.platform;if(i.button!==0||i.ctrlKey&&s)return;this.#n?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#l=[i.screenX,i.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#B.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",ee,{passive:!1,signal:l}),window.addEventListener("contextmenu",fi,{signal:l}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(i.target).cursor;const f=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=u,this.div.style.cursor=d,this.#F()};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})}#N(t,i,s,a){this.width=s,this.height=a,this.x=t,this.y=i,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#d)return;const{savedX:t,savedY:i,savedWidth:s,savedHeight:a}=this.#d;this.#d=null;const o=this.x,l=this.y,u=this.width,d=this.height;o===t&&l===i&&u===s&&d===a||this.addCommands({cmd:this.#N.bind(this,o,l,u,d),undo:this.#N.bind(this,t,i,s,a),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#B(t,i){const[s,a]=this.parentDimensions,o=this.x,l=this.y,u=this.width,d=this.height,f=lt.MIN_SIZE/s,g=lt.MIN_SIZE/a,y=this.#R(this.rotation),b=(k,j)=>[y[0]*k+y[2]*j,y[1]*k+y[3]*j],v=this.#R(360-this.rotation),w=(k,j)=>[v[0]*k+v[2]*j,v[1]*k+v[3]*j];let S,x,E=!1,_=!1;switch(t){case"topLeft":E=!0,S=(k,j)=>[0,0],x=(k,j)=>[k,j];break;case"topMiddle":S=(k,j)=>[k/2,0],x=(k,j)=>[k/2,j];break;case"topRight":E=!0,S=(k,j)=>[k,0],x=(k,j)=>[0,j];break;case"middleRight":_=!0,S=(k,j)=>[k,j/2],x=(k,j)=>[0,j/2];break;case"bottomRight":E=!0,S=(k,j)=>[k,j],x=(k,j)=>[0,0];break;case"bottomMiddle":S=(k,j)=>[k/2,j],x=(k,j)=>[k/2,0];break;case"bottomLeft":E=!0,S=(k,j)=>[0,j],x=(k,j)=>[k,0];break;case"middleLeft":_=!0,S=(k,j)=>[0,j/2],x=(k,j)=>[k,j/2];break}const T=S(u,d),N=x(u,d);let L=b(...N);const B=lt._round(o+L[0]),F=lt._round(l+L[1]);let $=1,W=1,tt,J;if(i.fromKeyboard)({deltaX:tt,deltaY:J}=i);else{const{screenX:k,screenY:j}=i,[Z,mt]=this.#l;[tt,J]=this.screenToPageTranslation(k-Z,j-mt),this.#l[0]=k,this.#l[1]=j}if([tt,J]=w(tt/s,J/a),E){const k=Math.hypot(u,d);$=W=Math.max(Math.min(Math.hypot(N[0]-T[0]-tt,N[1]-T[1]-J)/k,1/u,1/d),f/u,g/d)}else _?$=Ce(Math.abs(N[0]-T[0]-tt),f,1)/u:W=Ce(Math.abs(N[1]-T[1]-J),g,1)/d;const dt=lt._round(u*$),xt=lt._round(d*W);L=b(...x(dt,xt));const Q=B-L[0],rt=F-L[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=dt,this.height=xt,this.x=Q,this.y=rt,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new gr(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[i,s]of t)await this._editToolbar.addButton(i,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#n?.destroy()}addContainer(t){const i=this._editToolbar?.div;i?i.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(Mi.initialize(lt._l10n),this.#n=new Mi(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}focusCommentButton(){this.#i?.focusButton()}addCommentButton(){return this.canAddComment?this.#i||=new Wo(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#a){this._uiManager.isEditingMode()&&this.#a.classList.remove("hidden");return}this.hasComment&&(this.#a=this.#i.renderForStandalone(),this.div.append(this.#a))}}removeStandaloneCommentButton(){this.#i.removeStandaloneCommentButton(),this.#a=null}hideStandaloneCommentButton(){this.#a?.classList.add("hidden")}get comment(){if(!this.#i)return null;const{data:{richText:t,text:i,date:s,deleted:a}}=this.#i;return{text:i,richText:t,date:s,deleted:a,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#i||=new Wo(this),typeof t=="object"&&t!==null?this.#i.restoreData(t):this.#i.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:i,richText:s}){if(!i||(this.#i||=new Wo(this),this.#i.setInitialText(t,s),!this.annotationElementId))return;const a=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);a&&this.updateFromAnnotationLayer(a)}get hasEditedComment(){return this.#i?.hasBeenEdited()}get hasDeletedComment(){return this.#i?.isDeleted()}get hasComment(){return!!this.#i&&!this.#i.isEmpty()&&!this.#i.isDeleted()}async editComment(t){this.#i||=new Wo(this),this.#i.edit(t)}toggleComment(t,i=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,i)}setSelectedCommentButton(t){this.#i.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,a]=t.rect,[o]=this.pageDimensions,[l]=this.pageTranslation,u=l+o+1,d=a-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,d,f,a]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:i}}){this.#i.data=i?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#r?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#H();const[i,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/i).toFixed(2)}%`,t.style.maxHeight=`${(100*i/s).toFixed(2)}%`);const[a,o]=this.getInitialTranslation();return this.translate(a,o),yy(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#_||=new El({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#V.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#V(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(t,i,s){let o=.7*(s/i)+1-.7;if(o===1)return;const l=this.#R(this.rotation),u=(B,F)=>[l[0]*B+l[2]*F,l[1]*B+l[3]*F],[d,f]=this.parentDimensions,g=this.x,y=this.y,b=this.width,v=this.height,w=lt.MIN_SIZE/d,S=lt.MIN_SIZE/f;o=Math.max(Math.min(o,1/b,1/v),w/b,S/v);const x=lt._round(b*o),E=lt._round(v*o);if(x===b&&E===v)return;this.#u||=[g,y,b,v];const _=u(b/2,v/2),T=lt._round(g+_[0]),N=lt._round(y+_[1]),L=u(x/2,E/2);this.x=T-L[0],this.y=N-L[1],this.width=x,this.height=E,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(t){const{isMac:i}=pe.platform;if(t.button!==0||t.ctrlKey&&i){t.preventDefault();return}if(this.#g=!0,this._isDraggable){this.#I(t);return}this.#k(t)}#k(t){const{isMac:i}=pe.platform;t.ctrlKey&&!i||t.shiftKey||t.metaKey&&i?this.parent.toggleSelected(this):this.parent.setSelected(this)}#I(t){const{isSelected:i}=this;this._uiManager.setUpDragSession();let s=!1;const a=new AbortController,o=this._uiManager.combinedSignal(a),l={capture:!0,passive:!1,signal:o},u=f=>{a.abort(),this.#s=null,this.#g=!1,this._uiManager.endDragSession()||this.#k(f),s&&this._onStopDragging()};i&&(this.#C=t.clientX,this.#E=t.clientY,this.#s=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:g,clientY:y,pointerId:b}=f;if(b!==this.#s){ee(f);return}const[v,w]=this.screenToPageTranslation(g-this.#C,y-this.#E);this.#C=g,this.#E=y,this._uiManager.dragSelectedEditors(v,w)},l),window.addEventListener("touchmove",ee,l),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#_||f.isPrimary)&&u(f),ee(f)},l));const d=f=>{if(!this.#s||this.#s===f.pointerId){u(f);return}ee(f)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,i,s){t.changeParent(this),this.x=i,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,i,s=this.rotation){const a=this.parentScale,[o,l]=this.pageDimensions,[u,d]=this.pageTranslation,f=t/a,g=i/a,y=this.x*o,b=this.y*l,v=this.width*o,w=this.height*l;switch(s){case 0:return[y+f+u,l-b-g-w+d,y+f+v+u,l-b-g+d];case 90:return[y+g+u,l-b+f+d,y+g+w+u,l-b+f+v+d];case 180:return[y-f-v+u,l-b+g+d,y-f+u,l-b+g+w+d];case 270:return[y-g-w+u,l-b-f-v+d,y-g+u,l-b-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,i){const[s,a,o,l]=t,u=o-s,d=l-a;switch(this.rotation){case 0:return[s,i-l,u,d];case 90:return[s,i-a,d,u];case 180:return[o,i-a,u,d];case 270:return[o,i-l,d,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&lt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#i?.onUpdatedColor()}getData(){const{comment:{text:t,color:i,date:s,opacity:a,deleted:o,richText:l},uid:u,pageIndex:d,creationDate:f,modificationDate:g}=this;return{id:u,pageIndex:d,rect:this.getPDFRect(),richText:l,contentsObj:{str:t},creationDate:f,modificationDate:s||g,popupRef:!o,color:i,opacity:a}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:i,bottom:s,right:a}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return i<l&&a>0&&t<o&&s>0}#H(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#H()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,i=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,i,s){const a=new this.prototype.constructor({parent:i,id:i.getNextId(),uiManager:s,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});a.rotation=t.rotation,a.#t=t.accessibilityData,a._isCopy=t.isCopy||!1;const[o,l]=a.pageDimensions,[u,d,f,g]=a.getRectInCurrentCoords(t.rect,l);return a.x=u/o,a.y=d/l,a.width=f/o,a.height=g/l,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#z(),this.removeEditToolbar(),this.#S){for(const t of this.#S.values())clearTimeout(t);this.#S=null}this.parent=null,this.#_?.destroy(),this.#_=null,this.#h?.remove(),this.#h=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#P(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,i]}=this,[s,a,o,l]=this.getPDFRect();return[lt._round(s+(o-s)*t),lt._round(a+(l-a)*(1-i))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#i.commentPopupPositionInLayer}set commentPopupPosition(t){this.#i.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#i.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#i.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#i?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const i=this.#c.children;if(!this.#e){this.#e=Array.from(i);const l=this.#q.bind(this),u=this.#Y.bind(this),d=this._uiManager._signal;for(const f of this.#e){const g=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:d}),f.addEventListener("blur",u,{signal:d}),f.addEventListener("focus",this.#$.bind(this,g),{signal:d}),f.setAttribute("data-l10n-id",lt._l10nResizer[g])}}const s=this.#e[0];let a=0;for(const l of i){if(l===s)break;a++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==a){if(o<a)for(let u=0;u<a-o;u++)this.#c.append(this.#c.firstElementChild);else if(o>a)for(let u=0;u<o-a;u++)this.#c.firstElementChild.before(this.#c.lastElementChild);let l=0;for(const u of i){const f=this.#e[l++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",lt._l10nResizer[f])}}this.#j(0),this.#v=!0,this.#c.firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#q(t){lt._resizerKeyboardManager.exec(this,t)}#Y(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#z()}#$(t){this.#m=this.#v?t:""}#j(t){if(this.#e)for(const i of this.#e)i.tabIndex=t}_resizeWithKeyboard(t,i){this.#v&&this.#B(this.#m,{deltaX:t,deltaY:i,fromKeyboard:!0})}#z(){this.#v=!1,this.#j(-1),this.#F()}_stopResizingWithKeyboard(){this.#z(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,i){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,i=!1){if(i){this.#S||=new Map;const{action:s}=t;let a=this.#S.get(s);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),this.#S.delete(s),this.#S.size===0&&(this.#S=null)},lt._telemetryTimeout),this.#S.set(s,a);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let i=t.container.querySelector(".annotationContent");if(!i)i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),t.container.prepend(i);else if(i.nodeName==="CANVAS"){const s=i;i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),s.before(i)}return i}resetAnnotationElement(t){const{firstElementChild:i}=t.container;i?.nodeName==="DIV"&&i.classList.contains("annotationContent")&&i.remove()}}class O1 extends lt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Sm=3285377520,ui=4294901760,Ti=65535;class by{constructor(t){this.h1=t?t&4294967295:Sm,this.h2=t?t&4294967295:Sm}update(t){let i,s;if(typeof t=="string"){i=new Uint8Array(t.length*2),s=0;for(let S=0,x=t.length;S<x;S++){const E=t.charCodeAt(S);E<=255?i[s++]=E:(i[s++]=E>>>8,i[s++]=E&255)}}else if(ArrayBuffer.isView(t))i=t.slice(),s=i.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=s>>2,o=s-a*4,l=new Uint32Array(i.buffer,0,a);let u=0,d=0,f=this.h1,g=this.h2;const y=3432918353,b=461845907,v=y&Ti,w=b&Ti;for(let S=0;S<a;S++)S&1?(u=l[S],u=u*y&ui|u*v&Ti,u=u<<15|u>>>17,u=u*b&ui|u*w&Ti,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(d=l[S],d=d*y&ui|d*v&Ti,d=d<<15|d>>>17,d=d*b&ui|d*w&Ti,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(u=0,o){case 3:u^=i[a*4+2]<<16;case 2:u^=i[a*4+1]<<8;case 1:u^=i[a*4],u=u*y&ui|u*v&Ti,u=u<<15|u>>>17,u=u*b&ui|u*w&Ti,a&1?f^=u:g^=u}this.h1=f,this.h2=g}hexdigest(){let t=this.h1,i=this.h2;return t^=i>>>1,t=t*3981806797&ui|t*36045&Ti,i=i*4283543511&ui|((i<<16|t>>>16)*2950163797&ui)>>>16,t^=i>>>1,t=t*444984403&ui|t*60499&Ti,i=i*3301882366&ui|((i<<16|t>>>16)*3120437893&ui)>>>16,t^=i>>>1,(t>>>0).toString(16).padStart(8,"0")+(i>>>0).toString(16).padStart(8,"0")}}const Ah=Object.freeze({map:null,hash:"",transfer:void 0});class Fh{#t=!1;#e=null;#n=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,i){const s=this.#i.get(t);return s===void 0?i:Object.assign(i,s)}getRawValue(t){return this.#i.get(t)}remove(t){const i=this.#i.get(t);if(i!==void 0&&(i instanceof lt&&this.#n.delete(i.annotationElementId),this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#i.values())if(s instanceof lt)return;this.onAnnotationEditor(null)}}setValue(t,i){const s=this.#i.get(t);let a=!1;if(s!==void 0)for(const[o,l]of Object.entries(i))s[o]!==l&&(a=!0,s[o]=l);else a=!0,this.#i.set(t,i);a&&this.#a(),i instanceof lt&&((this.#n||=new Map).set(i.annotationElementId,i),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(i.constructor._type))}has(t){return this.#i.has(t)}get size(){return this.#i.size}#a(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new vy(this)}get serializable(){if(this.#i.size===0)return Ah;const t=new Map,i=new by,s=[],a=Object.create(null);let o=!1;for(const[l,u]of this.#i){const d=u instanceof lt?u.serialize(!1,a):u;u.page&&(u.pageIndex=u.page._pageIndex,delete u.page),d&&(t.set(l,d),i.update(`${l}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const l of t.values())l.bitmap&&s.push(l.bitmap);return t.size>0?{map:t,hash:i.hexdigest(),transfer:s}:Ah}get editorStats(){let t=null;const i=new Map;let s=0,a=0;for(const o of this.#i.values()){if(!(o instanceof lt)){o.popup&&(o.popup.deleted?a+=1:s+=1);continue}o.isCommentDeleted?a+=1:o.hasEditedComment&&(s+=1);const l=o.telemetryFinalData;if(!l)continue;const{type:u}=l;i.has(u)||i.set(u,Object.getPrototypeOf(o).constructor),t||=Object.create(null);const d=t[u]||=new Map;for(const[f,g]of Object.entries(l)){if(f==="type")continue;let y=d.get(f);y||(y=new Map,d.set(f,y));const b=y.get(g)??0;y.set(g,b+1)}}if((a>0||s>0)&&(t||=Object.create(null),t.comments={deleted:a,edited:s}),!t)return null;for(const[o,l]of i)t[o]=l.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,i){const s=this.#n?.get(t);return s?(s.updateFromAnnotationLayer(i),!0):!1}getEditor(t){return this.#n?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#n)for(const i of this.#n.values())i.serialize()&&t.push(i.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#i.entries()}}class vy extends Fh{#t;constructor(t){super();const{map:i,hash:s,transfer:a}=t.serializable,o=structuredClone(i,a?{transfer:a}:null);this.#t={map:o,hash:s,transfer:a}}get print(){zt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return gt(this,"modifiedIds",{ids:new Set,hash:""})}}class k1{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:i=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const i=this.styleElement.sheet;i.insertRule(t,i.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:i,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(Bt(!i,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:o,style:l}=t,u=new FontFace(a,o,l);this.addNativeFontFace(u);try{await u.load(),this.#t.add(a),s?.(t)}catch{pt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}zt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(a){throw pt(`Failed to load font '${s.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const i=t.createFontFaceRule();if(i){if(this.insertRule(i),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const a=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return gt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return gt(this,"isSyncFontLoadingSupported",Re||pe.platform.isFirefox)}_queueLoadingCallback(t){function i(){for(Bt(!a.done,"completeRequest() cannot be called twice."),a.done=!0;s.length>0&&s[0].done;){const o=s.shift();setTimeout(o.callback,0)}}const{loadingRequests:s}=this,a={done:!1,complete:i,callback:t};return s.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return gt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,i){function s(N,L){return N.charCodeAt(L)<<24|N.charCodeAt(L+1)<<16|N.charCodeAt(L+2)<<8|N.charCodeAt(L+3)&255}function a(N,L,B,F){const $=N.substring(0,L),W=N.substring(L+B);return $+F+W}let o,l;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let f=0;function g(N,L){if(++f>30){pt("Load test font never loaded."),L();return}if(d.font="30px "+N,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){L();return}setTimeout(g.bind(null,N,L))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=a(b,976,y.length,y);const w=16,S=1482184792;let x=s(b,w);for(o=0,l=y.length-3;o<l;o+=4)x=x-S+s(y,o)|0;o<y.length&&(x=x-S+s(y+"XXX",o)|0),b=a(b,w,4,p1(x));const E=`url(data:font/opentype;base64,${btoa(b)});`,_=`@font-face {font-family:"${y}";src:${E}}`;this.insertRule(_);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const N of[t.loadedName,y]){const L=this._document.createElement("span");L.textContent="Hi",L.style.fontFamily=N,T.append(L)}this._document.body.append(T),g(y,()=>{T.remove(),i.complete()})}}class N1{#t;constructor(t,i=null,s,a){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=i,s&&Object.assign(this,s),a&&(this.charProcOperatorList=a)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),i}getPathGenerator(t,i){if(this.compiledGlyphs[i]!==void 0)return this.compiledGlyphs[i];const s=this.loadedName+"_path_"+i;let a;try{a=t.get(s)}catch(l){pt(`getPathGenerator - ignoring character: "${l}".`)}const o=my(a?.path);return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[i]=o}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}set disableFontFace(t){gt(this,"disableFontFace",!!t)}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}set bbox(t){gt(this,"bbox",t)}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}class ea{#t;#e;#n;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const i=new TextEncoder,s={};let a=0;for(const f of ea.strings){const g=i.encode(t[f]);s[f]=g,a+=4+g.length}const o=new ArrayBuffer(a),l=new Uint8Array(o),u=new DataView(o);let d=0;for(const f of ea.strings){const g=s[f],y=g.length;u.setUint32(d,y),l.set(g,d+4),d+=4+y}return Bt(d===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}#i(t){Bt(t<ea.strings.length,"Invalid string index");let i=0;for(let a=0;a<t;a++)i+=this.#e.getUint32(i)+4;const s=this.#e.getUint32(i);return this.#n.decode(new Uint8Array(this.#t,i+4,s))}get fontFamily(){return this.#i(0)}get fontWeight(){return this.#i(1)}get italicAngle(){return this.#i(2)}}class ia{#t;#e;#n;static strings=["css","loadedName","baseFontName","src"];static write(t){const i=new TextEncoder,s={};let a=0;for(const b of ia.strings){const v=i.encode(t[b]);s[b]=v,a+=4+v.length}a+=4;let o,l,u=1+a;t.style&&(o=i.encode(t.style.style),l=i.encode(t.style.weight),u+=4+o.length+4+l.length);const d=new ArrayBuffer(u),f=new Uint8Array(d),g=new DataView(d);let y=0;g.setUint8(y++,t.guessFallback?1:0),g.setUint32(y,0),y+=4,a=0;for(const b of ia.strings){const v=s[b],w=v.length;a+=4+w,g.setUint32(y,w),f.set(v,y+4),y+=4+w}return g.setUint32(y-a-4,a),t.style&&(g.setUint32(y,o.length),f.set(o,y+4),y+=4+o.length,g.setUint32(y,l.length),f.set(l,y+4),y+=4+l.length),Bt(y<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(y)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#i(t){Bt(t<ia.strings.length,"Invalid string index");let i=5;for(let a=0;a<t;a++)i+=this.#e.getUint32(i)+4;const s=this.#e.getUint32(i);return this.#n.decode(new Uint8Array(this.#t,i+4,s))}get css(){return this.#i(0)}get loadedName(){return this.#i(1)}get baseFontName(){return this.#i(2)}get src(){return this.#i(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const i=this.#e.getUint32(t),s=this.#n.decode(new Uint8Array(this.#t,t+4,i));t+=4+i;const a=this.#e.getUint32(t),o=this.#n.decode(new Uint8Array(this.#t,t+4,a));return{style:s,weight:o}}}class jt{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#n=this.#e+1+8;static#i=this.#n+1+48;static#a=this.#i+1+6;#r;#s;#o;constructor({data:t,extra:i}){this.#r=t,this.#s=new TextDecoder,this.#o=new DataView(this.#r),i&&Object.assign(this,i)}#c(t){Bt(t<jt.bools.length,"Invalid boolean index");const i=Math.floor(t/4),s=t*2%8,a=this.#o.getUint8(i)>>s&3;return a===0?void 0:a===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return Bt(t<jt.numbers.length,"Invalid number index"),this.#o.getFloat64(jt.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=jt.#e;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<4;a++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}get fontMatrix(){let t=jt.#n;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<6;a++)s.push(this.#o.getFloat64(t,!0)),t+=8;return s}get defaultVMetrics(){let t=jt.#i;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<3;a++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}#d(t){Bt(t<jt.strings.length,"Invalid string index");let i=jt.#a+4;for(let o=0;o<t;o++)i+=this.#o.getUint32(i)+4;const s=this.#o.getUint32(i),a=new Uint8Array(s);return a.set(new Uint8Array(this.#r,i+4,s)),this.#s.decode(a)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=jt.#a;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);if(o!==0)return new Uint8Array(this.#r,t+4,o)}clearData(){let t=jt.#a;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);new Uint8Array(this.#r,t+4,o).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=jt.#a;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);if(a===0)return null;const o=new Uint8Array(a);return o.set(new Uint8Array(this.#r,t+4,a)),new ea(o.buffer)}get systemFontInfo(){let t=jt.#a;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);if(s===0)return null;const a=new Uint8Array(s);return a.set(new Uint8Array(this.#r,t+4,s)),new ia(a.buffer)}static write(t){const i=t.systemFontInfo?ia.write(t.systemFontInfo):null,s=t.cssFontInfo?ea.write(t.cssFontInfo):null,a=new TextEncoder,o={};let l=0;for(const S of jt.strings)o[S]=a.encode(t[S]),l+=4+o[S].length;const u=jt.#a+4+l+4+(i?i.byteLength:0)+4+(s?s.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(u),f=new Uint8Array(d),g=new DataView(d);let y=0;const b=jt.bools.length;let v=0,w=0;for(let S=0;S<b;S++){const x=t[jt.bools[S]];v|=(x===void 0?0:x?2:1)<<w,w+=2,(w===8||S===b-1)&&(g.setUint8(y++,v),v=0,w=0)}Bt(y===jt.#t,"FontInfo.write: Boolean properties offset mismatch");for(const S of jt.numbers)g.setFloat64(y,t[S]),y+=8;if(Bt(y===jt.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){g.setUint8(y++,4);for(const S of t.bbox)g.setInt16(y,S,!0),y+=2}else g.setUint8(y++,0),y+=8;if(Bt(y===jt.#n,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){g.setUint8(y++,6);for(const S of t.fontMatrix)g.setFloat64(y,S,!0),y+=8}else g.setUint8(y++,0),y+=48;if(Bt(y===jt.#i,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){g.setUint8(y++,1);for(const S of t.defaultVMetrics)g.setInt16(y,S,!0),y+=2}else g.setUint8(y++,0),y+=6;Bt(y===jt.#a,"FontInfo.write: DefaultVMetrics properties offset mismatch"),g.setUint32(jt.#a,0),y+=4;for(const S of jt.strings){const x=o[S],E=x.length;g.setUint32(y,E),f.set(x,y+4),y+=4+E}if(g.setUint32(jt.#a,y-jt.#a-4),!i)g.setUint32(y,0),y+=4;else{const S=i.byteLength;g.setUint32(y,S),Bt(y+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(i),y+4),y+=4+S}if(!s)g.setUint32(y,0),y+=4;else{const S=s.byteLength;g.setUint32(y,S),Bt(y+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(s),y+4),y+=4+S}return t.data===void 0?(g.setUint32(y,0),y+=4):(g.setUint32(y,t.data.length),f.set(t.data,y+4),y+=4+t.data.length),Bt(y<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(y)}}class ye{static#t=0;static#e=1;static#n=2;static#i=3;static#a=4;static#r=8;static#s=12;static#o=16;constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let i,s=null,a=[],o=[],l=[],u=[],d=null,f=null;switch(t[0]){case"RadialAxial":i=t[1]==="axial"?1:2,s=t[2],l=t[3],i===1?a.push(...t[4],...t[5]):a.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":i=3,d=t[1],a=t[2],o=t[3],u=t[4]||[],s=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const g=Math.floor(a.length/2),y=Math.floor(o.length/3),b=l.length,v=u.length;let w=0;for(const L of u)w+=1,w=Math.ceil(w/4)*4,w+=4+L.coords.length*4,w+=4+L.colors.length*4,L.verticesPerRow!==void 0&&(w+=4);const S=20+g*8+y*3+b*8+(s?16:0)+(f?3:0)+w,x=new ArrayBuffer(S),E=new DataView(x),_=new Uint8Array(x);E.setUint8(ye.#t,i),E.setUint8(ye.#e,s?1:0),E.setUint8(ye.#n,f?1:0),E.setUint8(ye.#i,d),E.setUint32(ye.#a,g,!0),E.setUint32(ye.#r,y,!0),E.setUint32(ye.#s,b,!0),E.setUint32(ye.#o,v,!0);let T=20;new Float32Array(x,T,g*2).set(a),T+=g*8,_.set(o,T),T+=y*3;for(const[L,B]of l)E.setFloat32(T,L,!0),T+=4,E.setUint32(T,parseInt(B.slice(1),16),!0),T+=4;if(s)for(const L of s)E.setFloat32(T,L,!0),T+=4;f&&(_.set(f,T),T+=3);for(let L=0;L<u.length;L++){const B=u[L];E.setUint8(T,B.type),T+=1,T=Math.ceil(T/4)*4,E.setUint32(T,B.coords.length,!0),T+=4,new Int32Array(x,T,B.coords.length).set(B.coords),T+=B.coords.length*4,E.setUint32(T,B.colors.length,!0),T+=4,new Int32Array(x,T,B.colors.length).set(B.colors),T+=B.colors.length*4,B.verticesPerRow!==void 0&&(E.setUint32(T,B.verticesPerRow,!0),T+=4)}return x}getIR(){const t=this.view,i=this.data[ye.#t],s=!!this.data[ye.#e],a=!!this.data[ye.#n],o=t.getUint32(ye.#a,!0),l=t.getUint32(ye.#r,!0),u=t.getUint32(ye.#s,!0),d=t.getUint32(ye.#o,!0);let f=20;const g=new Float32Array(this.buffer,f,o*2);f+=o*8;const y=new Uint8Array(this.buffer,f,l*3);f+=l*3;const b=[];for(let x=0;x<u;++x){const E=t.getFloat32(f,!0);f+=4;const _=t.getUint32(f,!0);f+=4,b.push([E,`#${_.toString(16).padStart(6,"0")}`])}let v=null;if(s){v=[];for(let x=0;x<4;++x)v.push(t.getFloat32(f,!0)),f+=4}let w=null;a&&(w=new Uint8Array(this.buffer,f,3),f+=3);const S=[];for(let x=0;x<d;++x){const E=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const _=t.getUint32(f,!0);f+=4;const T=new Int32Array(this.buffer,f,_);f+=_*4;const N=t.getUint32(f,!0);f+=4;const L=new Int32Array(this.buffer,f,N);f+=N*4;const B={type:E,coords:T,colors:L};E===gh.LATTICE&&(B.verticesPerRow=t.getUint32(f,!0),f+=4),S.push(B)}if(i===1)return["RadialAxial","axial",v,b,Array.from(g.slice(0,2)),Array.from(g.slice(2,4)),null,null];if(i===2)return["RadialAxial","radial",v,b,[g[0],g[1]],[g[3],g[4]],g[2],g[5]];if(i===3){const x=this.data[ye.#i];let E=null;if(g.length>0){let _=g[0],T=g[0],N=g[1],L=g[1];for(let B=0;B<g.length;B+=2){const F=g[B],$=g[B+1];_=_>F?F:_,N=N>$?$:N,T=T<F?F:T,L=L<$?$:L}E=[_,N,T,L]}return["Mesh",x,g,y,S,E,v,w]}throw new Error(`Unsupported pattern kind: ${i}`)}}class B1{static write(t){let i,s;return pe.isFloat16ArraySupported?(s=new ArrayBuffer(t.length*2),i=new Float16Array(s)):(s=new ArrayBuffer(t.length*4),i=new Float32Array(s)),i.set(t),s}#t;constructor(t){this.#t=t}get path(){return pe.isFloat16ArraySupported?new Float16Array(this.#t):new Float32Array(this.#t)}}function z1(h){if(h instanceof URL)return h.href;if(typeof h=="string"){if(Re)return h;const t=URL.parse(h,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function P1(h){if(Re&&typeof Buffer<"u"&&h instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength)return h;if(typeof h=="string")return Sl(h);if(h instanceof ArrayBuffer||ArrayBuffer.isView(h)||typeof h=="object"&&!isNaN(h?.length))return new Uint8Array(h);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Ko(h){if(typeof h!="string")return null;if(h.endsWith("/"))return h;throw new Error(`Invalid factory url: "${h}" must include trailing slash.`)}const Sh=h=>typeof h=="object"&&Number.isInteger(h?.num)&&h.num>=0&&Number.isInteger(h?.gen)&&h.gen>=0,F1=h=>typeof h=="object"&&typeof h?.name=="string",I1=v1.bind(null,Sh,F1);class U1{#t=new Map;#e=Promise.resolve();postMessage(t,i){const s={data:structuredClone(t,i?{transfer:i}:null)};this.#e.then(()=>{for(const[a]of this.#t)a.call(this,s)})}addEventListener(t,i,s=null){let a=null;if(s?.signal instanceof AbortSignal){const{signal:o}=s;if(o.aborted){pt("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,i);a=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#t.set(i,a)}removeEventListener(t,i){this.#t.get(i)?.(),this.#t.delete(i)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const Qo={DATA:1,ERROR:2},ue={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function wm(){}function Ie(h){if(h instanceof Ln||h instanceof mh||h instanceof pm||h instanceof ul||h instanceof ah)return h;switch(h instanceof Error||typeof h=="object"&&h!==null||zt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),h.name){case"AbortException":return new Ln(h.message);case"InvalidPDFException":return new mh(h.message);case"PasswordException":return new pm(h.message,h.code);case"ResponseException":return new ul(h.message,h.status,h.missing);case"UnknownErrorException":return new ah(h.message,h.details)}return new ah(h.message,h.toString())}class fr{#t=new AbortController;constructor(t,i,s){this.sourceName=t,this.targetName=i,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const s=t.callbackId,a=this.callbackCapabilities[s];if(!a)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===Qo.DATA)a.resolve(t.data);else if(t.callback===Qo.ERROR)a.reject(Ie(t.reason));else throw new Error("Unexpected callback case");return}const i=this.actionHandler[t.action];if(!i)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,a=t.sourceName,o=this.comObj;Promise.try(i,t.data).then(function(l){o.postMessage({sourceName:s,targetName:a,callback:Qo.DATA,callbackId:t.callbackId,data:l})},function(l){o.postMessage({sourceName:s,targetName:a,callback:Qo.ERROR,callbackId:t.callbackId,reason:Ie(l)})});return}if(t.streamId){this.#n(t);return}i(t.data)}on(t,i){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=i}send(t,i,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:i},s)}sendWithPromise(t,i,s){const a=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[a]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:i},s)}catch(l){o.reject(l)}return o.promise}sendWithStream(t,i,s,a){const o=this.streamId++,l=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:u,action:t,streamId:o,data:i,desiredSize:f.desiredSize},a),g.promise},pull:f=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,d.postMessage({sourceName:l,targetName:u,stream:ue.PULL,streamId:o,desiredSize:f.desiredSize}),g.promise},cancel:f=>{Bt(f instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:l,targetName:u,stream:ue.CANCEL,streamId:o,reason:Ie(f)}),g.promise}},s)}#n(t){const i=t.streamId,s=this.sourceName,a=t.sourceName,o=this.comObj,l=this,u=this.actionHandler[t.action],d={enqueue(f,g=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=g,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:s,targetName:a,stream:ue.ENQUEUE,streamId:i,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:a,stream:ue.CLOSE,streamId:i}),delete l.streamSinks[i])},error(f){Bt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:a,stream:ue.ERROR,streamId:i,reason:Ie(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[i]=d,Promise.try(u,t.data,d).then(function(){o.postMessage({sourceName:s,targetName:a,stream:ue.START_COMPLETE,streamId:i,success:!0})},function(f){o.postMessage({sourceName:s,targetName:a,stream:ue.START_COMPLETE,streamId:i,reason:Ie(f)})})}#i(t){const i=t.streamId,s=this.sourceName,a=t.sourceName,o=this.comObj,l=this.streamControllers[i],u=this.streamSinks[i];switch(t.stream){case ue.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(Ie(t.reason));break;case ue.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(Ie(t.reason));break;case ue.PULL:if(!u){o.postMessage({sourceName:s,targetName:a,stream:ue.PULL_COMPLETE,streamId:i,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||wm).then(function(){o.postMessage({sourceName:s,targetName:a,stream:ue.PULL_COMPLETE,streamId:i,success:!0})},function(f){o.postMessage({sourceName:s,targetName:a,stream:ue.PULL_COMPLETE,streamId:i,reason:Ie(f)})});break;case ue.ENQUEUE:if(Bt(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case ue.CLOSE:if(Bt(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#a(l,i);break;case ue.ERROR:Bt(l,"error should have stream controller"),l.controller.error(Ie(t.reason)),this.#a(l,i);break;case ue.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(Ie(t.reason)),this.#a(l,i);break;case ue.CANCEL:if(!u)break;const d=Ie(t.reason);Promise.try(u.onCancel||wm,d).then(function(){o.postMessage({sourceName:s,targetName:a,stream:ue.CANCEL_COMPLETE,streamId:i,success:!0})},function(f){o.postMessage({sourceName:s,targetName:a,stream:ue.CANCEL_COMPLETE,streamId:i,reason:Ie(f)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[i];break;default:throw new Error("Unexpected stream case")}}async#a(t,i){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[i]}destroy(){this.#t?.abort(),this.#t=null}}class Ay{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,i){if(t<=0||i<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,i);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,i,s){if(!t.canvas)throw new Error("Canvas is not specified");if(i<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=i,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,i){zt("Abstract method `_createCanvas` called.")}}class H1 extends Ay{constructor({ownerDocument:t=globalThis.document,enableHWA:i=!1}){super({enableHWA:i}),this._document=t}_createCanvas(t,i){const s=this._document.createElement("canvas");return s.width=t,s.height=i,s}}class Sy{constructor({baseUrl:t=null,isCompressed:i=!0}){this.baseUrl=t,this.isCompressed=i}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const i=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(i).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})}async _fetch(t){zt("Abstract method `_fetch` called.")}}class Em extends Sy{async _fetch(t){const i=await Cr(t,this.isCompressed?"arraybuffer":"text");return i instanceof ArrayBuffer?new Uint8Array(i):Sl(i)}}class wy{addFilter(t){return"none"}addHCMFilter(t,i){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,i,s,a,o){return"none"}destroy(t=!1){}}class j1 extends wy{#t;#e;#n;#i;#a;#r;#s=0;constructor({docId:t,ownerDocument:i=globalThis.document}){super(),this.#i=t,this.#a=i}get#o(){return this.#e||=new Map}get#c(){return this.#r||=new Map}get#l(){if(!this.#n){const t=this.#a.createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=this.#a.createElementNS(Ki,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#n=this.#a.createElementNS(Ki,"defs"),t.append(s),s.append(this.#n),this.#a.body.append(t)}return this.#n}#d(t){if(t.length===1){const d=t[0],f=new Array(256);for(let y=0;y<256;y++)f[y]=d[y]/255;const g=f.join(",");return[g,g,g]}const[i,s,a]=t,o=new Array(256),l=new Array(256),u=new Array(256);for(let d=0;d<256;d++)o[d]=i[d]/255,l[d]=s[d]/255,u[d]=a[d]/255;return[o.join(","),l.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const i=this.#a.URL;i!==this.#a.baseURI&&(wl(i)?pt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=dy(i,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let i=this.#o.get(t);if(i)return i;const[s,a,o]=this.#d(t),l=t.length===1?s:`${s}${a}${o}`;if(i=this.#o.get(l),i)return this.#o.set(t,i),i;const u=`g_${this.#i}_transfer_map_${this.#s++}`,d=this.#h(u);this.#o.set(t,d),this.#o.set(l,d);const f=this.#g(u);return this.#p(s,a,o,f),d}addHCMFilter(t,i){const s=`${t}-${i}`,a="base";let o=this.#c.get(a);if(o?.key===s||(o?(o.filter?.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},this.#c.set(a,o)),!t||!i))return o.url;const l=this.#v(t);t=it.makeHexColor(...l);const u=this.#v(i);if(i=it.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&i==="#ffffff"||t===i)return o.url;const d=new Array(256);for(let v=0;v<=255;v++){const w=v/255;d[v]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const f=d.join(","),g=`g_${this.#i}_hcm_filter`,y=o.filter=this.#g(g);this.#p(f,f,f,y),this.#m(y);const b=(v,w)=>{const S=l[v]/255,x=u[v]/255,E=new Array(w+1);for(let _=0;_<=w;_++)E[_]=S+_/w*(x-S);return E.join(",")};return this.#p(b(0,5),b(1,5),b(2,5),y),o.url=this.#h(g),o.url}addAlphaFilter(t){let i=this.#o.get(t);if(i)return i;const[s]=this.#d([t]),a=`alpha_${s}`;if(i=this.#o.get(a),i)return this.#o.set(t,i),i;const o=`g_${this.#i}_alpha_map_${this.#s++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(a,l);const u=this.#g(o);return this.#y(s,u),l}addLuminosityFilter(t){let i=this.#o.get(t||"luminosity");if(i)return i;let s,a;if(t?([s]=this.#d([t]),a=`luminosity_${s}`):a="luminosity",i=this.#o.get(a),i)return this.#o.set(t,i),i;const o=`g_${this.#i}_luminosity_map_${this.#s++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(a,l);const u=this.#g(o);return this.#f(u),t&&this.#y(s,u),l}addHighlightHCMFilter(t,i,s,a,o){const l=`${i}-${s}-${a}-${o}`;let u=this.#c.get(t);if(u?.key===l||(u?(u.filter?.remove(),u.key=l,u.url="none",u.filter=null):(u={key:l,url:"none",filter:null},this.#c.set(t,u)),!i||!s))return u.url;const[d,f]=[i,s].map(this.#v.bind(this));let g=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[b,v]=[a,o].map(this.#v.bind(this));y<g&&([g,y,b,v]=[y,g,v,b]),this.#l.style.color="";const w=(E,_,T)=>{const N=new Array(256),L=(y-g)/T,B=E/255,F=(_-E)/(255*T);let $=0;for(let W=0;W<=T;W++){const tt=Math.round(g+W*L),J=B+W*F;for(let dt=$;dt<=tt;dt++)N[dt]=J;$=tt+1}for(let W=$;W<256;W++)N[W]=N[$-1];return N.join(",")},S=`g_${this.#i}_hcm_${t}_filter`,x=u.filter=this.#g(S);return this.#m(x),this.#p(w(b[0],v[0],5),w(b[1],v[1],5),w(b[2],v[2],5),x),u.url=this.#h(S),u.url}destroy(t=!1){t&&this.#r?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#r?.clear(),this.#r=null,this.#s=0)}#f(t){const i=this.#a.createElementNS(Ki,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)}#m(t){const i=this.#a.createElementNS(Ki,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)}#g(t){const i=this.#a.createElementNS(Ki,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),this.#l.append(i),i}#u(t,i,s){const a=this.#a.createElementNS(Ki,i);a.setAttribute("type","discrete"),a.setAttribute("tableValues",s),t.append(a)}#p(t,i,s,a){const o=this.#a.createElementNS(Ki,"feComponentTransfer");a.append(o),this.#u(o,"feFuncR",t),this.#u(o,"feFuncG",i),this.#u(o,"feFuncB",s)}#y(t,i){const s=this.#a.createElementNS(Ki,"feComponentTransfer");i.append(s),this.#u(s,"feFuncA",t)}#v(t){return this.#l.style.color=t,_r(getComputedStyle(this.#l).getPropertyValue("color"))}}class Ey{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load font data at: ${i}`)})}async _fetch(t){zt("Abstract method `_fetch` called.")}}class xm extends Ey{async _fetch(t){const i=await Cr(t,"arraybuffer");return new Uint8Array(i)}}class xy{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load wasm data at: ${i}`)})}async _fetch(t){zt("Abstract method `_fetch` called.")}}class Cm extends xy{async _fetch(t){const i=await Cr(t,"arraybuffer");return new Uint8Array(i)}}Re&&pt("Please use the `legacy` build in Node.js environments.");async function Ih(h){const i=await process.getBuiltinModule("fs").promises.readFile(h);return new Uint8Array(i)}class G1 extends wy{}class V1 extends Ay{_createCanvas(t,i){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,i)}}class X1 extends Sy{async _fetch(t){return Ih(t)}}class Y1 extends Ey{async _fetch(t){return Ih(t)}}class q1 extends xy{async _fetch(t){return Ih(t)}}const $s="__forcedDependency",{floor:Tm,ceil:_m}=Math;function Zo(h,t,i,s,a,o){h[t*4+0]=Math.min(h[t*4+0],i),h[t*4+1]=Math.min(h[t*4+1],s),h[t*4+2]=Math.max(h[t*4+2],a),h[t*4+3]=Math.max(h[t*4+3],o)}const wh=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class $1{#t;#e;constructor(t,i){this.#t=t,this.#e=i}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===wh}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const Jo=(h,t)=>{if(!h)return;let i=h.get(t);return i||(i={dependencies:new Set,isRenderingOperation:!1},h.set(t,i)),i};class W1{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[$s]:[]};#n=new Map;#i=[];#a=[];#r=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#m;#g;#u;#p;constructor(t,i,s=!1){this.#f=t.width,this.#m=t.height,this.#y(i),s&&(this.#p=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,i){const s=new ArrayBuffer(t*4);this.#g=new Uint8ClampedArray(s),this.#u=new Uint32Array(s),i&&i.length>0?(this.#u.set(i),this.#u.fill(wh,i.length)):this.#u.fill(wh)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[$s]:{__proto__:this.#e[$s]}},this.#s={__proto__:this.#s},this.#i.push(t),this}restore(t){const i=Object.getPrototypeOf(this.#t);if(i===null)return this;this.#t=i,this.#e=Object.getPrototypeOf(this.#e),this.#s=Object.getPrototypeOf(this.#s);const s=this.#i.pop();return s!==void 0&&(Jo(this.#p,t)?.dependencies.add(s),this.#u[t]=this.#u[s]),this}recordOpenMarker(t){return this.#i.push(t),this}getOpenMarker(){return this.#i.length===0?null:this.#i.at(-1)}recordCloseMarker(t){const i=this.#i.pop();return i!==void 0&&(Jo(this.#p,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}beginMarkedContent(t){return this.#a.push(t),this}endMarkedContent(t){const i=this.#a.pop();return i!==void 0&&(Jo(this.#p,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}pushBaseTransform(t){return this.#r.push(it.multiplyByDOMMatrix(this.#r.at(-1),t.getTransform())),this}popBaseTransform(){return this.#r.length>1&&this.#r.pop(),this}recordSimpleData(t,i){return this.#t[t]=i,this}recordIncrementalData(t,i){return this.#e[t].push(i),this}resetIncrementalData(t,i){return this.#e[t].length=0,this}recordNamedData(t,i){return this.#n.set(t,i),this}recordSimpleDataFromNamed(t,i,s){this.#t[t]=this.#n.get(i)??s}recordFutureForcedDependency(t,i){return this.recordIncrementalData($s,i),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const i of t)i in this.#t&&this.recordFutureForcedDependency(i,this.#t[i]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency($s,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,i,s,a,o,l){const u=it.multiplyByDOMMatrix(this.#r.at(-1),i.getTransform()),d=[1/0,1/0,-1/0,-1/0];it.axialAlignedBoundingBox([s,o,a,l],u,d);const f=it.intersect(this.#s,d);return f?(this.#s[0]=f[0],this.#s[1]=f[1],this.#s[2]=f[2],this.#s[3]=f[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(t,i,s,a,o,l){const u=this.#s;if(u[0]===1/0)return this;const d=it.multiplyByDOMMatrix(this.#r.at(-1),i.getTransform());if(u[0]===-1/0)return it.axialAlignedBoundingBox([s,o,a,l],d,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return it.axialAlignedBoundingBox([s,o,a,l],d,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,i,s,a=1,o=0,l=0,u){const d=s.bbox;let f,g;if(d&&(f=d[2]!==d[0]&&d[3]!==d[1]&&this.#h.get(s),f!==!1&&(g=[0,0,0,0],it.axialAlignedBoundingBox(d,s.fontMatrix,g),(a!==1||o!==0||l!==0)&&it.scaleMinMax([a,0,0,-a,o,l],g),f)))return this.recordBBox(t,i,g[0],g[2],g[1],g[3]);if(!u)return this.recordFullPageBBox(t);const y=u();return d&&g&&f===void 0&&(f=g[0]<=o-y.actualBoundingBoxLeft&&g[2]>=o+y.actualBoundingBoxRight&&g[1]<=l-y.actualBoundingBoxAscent&&g[3]>=l+y.actualBoundingBoxDescent,this.#h.set(s,f),f)?this.recordBBox(t,i,g[0],g[2],g[1],g[3]):this.recordBBox(t,i,o-y.actualBoundingBoxLeft,o+y.actualBoundingBoxRight,l-y.actualBoundingBoxAscent,l+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#s[0]),this.#o[1]=Math.max(0,this.#s[1]),this.#o[2]=Math.min(this.#f,this.#s[2]),this.#o[3]=Math.min(this.#m,this.#s[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,i){const s=this.#l,a=this.#t,o=this.#e;for(const l of i)l in this.#t?s.add(a[l]):l in o&&o[l].forEach(s.add,s);return this}recordNamedDependency(t,i){return this.#n.has(i)&&this.#l.add(this.#n.get(i)),this}recordOperation(t,i=!1){if(this.recordDependencies(t,[$s]),this.#p){const s=Jo(this.#p,t),{dependencies:a}=s;this.#l.forEach(a.add,a),this.#i.forEach(a.add,a),this.#a.forEach(a.add,a),a.delete(t),s.isRenderingOperation=!0}if(this.#c===t){const s=Tm(this.#o[0]*256/this.#f),a=Tm(this.#o[1]*256/this.#m),o=_m(this.#o[2]*256/this.#f),l=_m(this.#o[3]*256/this.#m);Zo(this.#g,t,s,a,o,l);for(const u of this.#l)u!==t&&Zo(this.#g,u,s,a,o,l);for(const u of this.#i)u!==t&&Zo(this.#g,u,s,a,o,l);for(const u of this.#a)u!==t&&Zo(this.#g,u,s,a,o,l);i||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,i=!1){const s=Array.from(this.#l);this.recordOperation(t,i),this.recordIncrementalData("sameLineText",t);for(const a of s)this.recordIncrementalData("sameLineText",a);return this}bboxToClipBoxDropOperation(t,i=!1){return this.#c===t&&(this.#c=-1,this.#s[0]=Math.max(this.#s[0],this.#o[0]),this.#s[1]=Math.max(this.#s[1],this.#o[1]),this.#s[2]=Math.min(this.#s[2],this.#o[2]),this.#s[3]=Math.min(this.#s[3],this.#o[3]),i||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const i=this.#d.get(t);return this.#d.delete(t),i}_pushPendingDependencies(t){for(const i of t)this.#l.add(i)}take(){return this.#h.clear(),new $1(this.#u,this.#g)}takeDebugMetadata(){return this.#p}}class hl{#t;#e;#n;#i=0;#a=0;constructor(t,i,s){if(t instanceof hl&&t.#n===!!s)return t;this.#t=t,this.#e=i,this.#n=!!s}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#a++,this.#t.save(this.#e),this}restore(t){return this.#a>0&&(this.#t.restore(this.#e),this.#a--),this}recordOpenMarker(t){return this.#i++,this}getOpenMarker(){return this.#i>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#i--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,i){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,i){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,i){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,i){return this}recordSimpleDataFromNamed(t,i,s){return this.#t.recordSimpleDataFromNamed(t,i,this.#e),this}recordFutureForcedDependency(t,i){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#n||this.#t.resetBBox(this.#e),this}recordClipBox(t,i,s,a,o,l){return this.#n||this.#t.recordClipBox(this.#e,i,s,a,o,l),this}recordBBox(t,i,s,a,o,l){return this.#n||this.#t.recordBBox(this.#e,i,s,a,o,l),this}recordCharacterBBox(t,i,s,a,o,l,u){return this.#n||this.#t.recordCharacterBBox(this.#e,i,s,a,o,l,u),this}recordFullPageBBox(t){return this.#n||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,i){return this.#t.recordDependencies(this.#e,i),this}recordNamedDependency(t,i){return this.#t.recordNamedDependency(this.#e,i),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#n||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const hi={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Te={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Eh(h,t){if(!t)return;const i=t[2]-t[0],s=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],i,s),h.clip(a)}class Uh{isModifyingCurrentTransform(){return!1}getPattern(){zt("Abstract method `getPattern` called.")}}class K1 extends Uh{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,i=null){let s,a=this._p0,o=this._p1;if(i&&(a=a.slice(),o=o.slice(),it.applyTransform(a,i),it.applyTransform(o,i)),this._type==="axial")s=t.createLinearGradient(a[0],a[1],o[0],o[1]);else if(this._type==="radial"){let l=this._r0,u=this._r1;if(i){const d=new Float32Array(2);it.singularValueDecompose2dScale(i,d),l*=d[0],u*=d[0]}s=t.createRadialGradient(a[0],a[1],l,o[0],o[1],u)}for(const l of this._colorStops)s.addColorStop(l[0],l[1]);return s}getPattern(t,i,s,a){let o;if(a===Te.STROKE||a===Te.FILL){if(this.isOriginBased()){let b=it.transform(s,i.baseTransform);this.matrix&&(b=it.transform(b,this.matrix));const v=.001,w=Math.hypot(b[0],b[1]),S=Math.hypot(b[2],b[3]),x=(b[0]*b[2]+b[1]*b[3])/(w*S);if(Math.abs(x)<v)if(this.isRadial()){if(Math.abs(w-S)<v)return this._createGradient(t,b)}else return this._createGradient(t,b)}const l=i.current.getClippedPathBoundingBox(a,Kt(t))||[0,0,0,0],u=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,f=i.cachedCanvases.getCanvas("pattern",u,d),g=f.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-l[0],-l[1]),s=it.transform(s,[1,0,0,1,l[0],l[1]]),g.transform(...i.baseTransform),this.matrix&&g.transform(...this.matrix),Eh(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=t.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(s);o.setTransform(y)}else Eh(t,this._bbox),o=this._createGradient(t);return o}}function lh(h,t,i,s,a,o,l,u){const d=t.coords,f=t.colors,g=h.data,y=h.width*4;let b;d[i+1]>d[s+1]&&(b=i,i=s,s=b,b=o,o=l,l=b),d[s+1]>d[a+1]&&(b=s,s=a,a=b,b=l,l=u,u=b),d[i+1]>d[s+1]&&(b=i,i=s,s=b,b=o,o=l,l=b);const v=(d[i]+t.offsetX)*t.scaleX,w=(d[i+1]+t.offsetY)*t.scaleY,S=(d[s]+t.offsetX)*t.scaleX,x=(d[s+1]+t.offsetY)*t.scaleY,E=(d[a]+t.offsetX)*t.scaleX,_=(d[a+1]+t.offsetY)*t.scaleY;if(w>=_)return;const T=f[o],N=f[o+1],L=f[o+2],B=f[l],F=f[l+1],$=f[l+2],W=f[u],tt=f[u+1],J=f[u+2],dt=Math.round(w),xt=Math.round(_);let Q,rt,k,j,Z,mt,St,D;for(let V=dt;V<=xt;V++){if(V<x){const ut=V<w?0:(w-V)/(w-x);Q=v-(v-S)*ut,rt=T-(T-B)*ut,k=N-(N-F)*ut,j=L-(L-$)*ut}else{let ut;V>_?ut=1:x===_?ut=0:ut=(x-V)/(x-_),Q=S-(S-E)*ut,rt=B-(B-W)*ut,k=F-(F-tt)*ut,j=$-($-J)*ut}let K;V<w?K=0:V>_?K=1:K=(w-V)/(w-_),Z=v-(v-E)*K,mt=T-(T-W)*K,St=N-(N-tt)*K,D=L-(L-J)*K;const et=Math.round(Math.min(Q,Z)),ct=Math.round(Math.max(Q,Z));let ft=y*V+et*4;for(let ut=et;ut<=ct;ut++)K=(Q-ut)/(Q-Z),K<0?K=0:K>1&&(K=1),g[ft++]=rt-(rt-mt)*K|0,g[ft++]=k-(k-St)*K|0,g[ft++]=j-(j-D)*K|0,g[ft++]=255}}function Q1(h,t,i){const s=t.coords,a=t.colors;let o,l;switch(t.type){case gh.LATTICE:const u=t.verticesPerRow,d=Math.floor(s.length/u)-1,f=u-1;for(o=0;o<d;o++){let g=o*u;for(let y=0;y<f;y++,g++)lh(h,i,s[g],s[g+1],s[g+u],a[g],a[g+1],a[g+u]),lh(h,i,s[g+u+1],s[g+1],s[g+u],a[g+u+1],a[g+1],a[g+u])}break;case gh.TRIANGLES:for(o=0,l=s.length;o<l;o+=3)lh(h,i,s[o],s[o+1],s[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class Z1 extends Uh{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,i,s){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,g=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),v=f/y,w=g/b,S={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/v,scaleY:1/w},x=y+4,E=b+4,_=s.getCanvas("mesh",x,E),T=_.context,N=T.createImageData(y,b);if(i){const B=N.data;for(let F=0,$=B.length;F<$;F+=4)B[F]=i[0],B[F+1]=i[1],B[F+2]=i[2],B[F+3]=255}for(const B of this._figures)Q1(N,B,S);return T.putImageData(N,2,2),{canvas:_.canvas,offsetX:u-2*v,offsetY:d-2*w,scaleX:v,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(t,i,s,a){Eh(t,this._bbox);const o=new Float32Array(2);if(a===Te.SHADING)it.singularValueDecompose2dScale(Kt(t),o);else if(this.matrix){it.singularValueDecompose2dScale(this.matrix,o);const[u,d]=o;it.singularValueDecompose2dScale(i.baseTransform,o),o[0]*=u,o[1]*=d}else it.singularValueDecompose2dScale(i.baseTransform,o);const l=this._createMeshCanvas(o,a===Te.SHADING?null:this._background,i.cachedCanvases);return a!==Te.SHADING&&(t.setTransform(...i.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class J1 extends Uh{getPattern(){return"hotpink"}}function tS(h){switch(h[0]){case"RadialAxial":return new K1(h);case"Mesh":return new Z1(h);case"Dummy":return new J1}throw new Error(`Unknown IR type: ${h[0]}`)}const Mm={COLORED:1,UNCOLORED:2};class Hh{static MAX_PATTERN_SIZE=3e3;constructor(t,i,s,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=a}createPatternCanvas(t,i){const{bbox:s,operatorList:a,paintType:o,tilingType:l,color:u,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:g}=this;f=Math.abs(f),g=Math.abs(g),Al("TilingType: "+l);const y=s[0],b=s[1],v=s[2],w=s[3],S=v-y,x=w-b,E=new Float32Array(2);it.singularValueDecompose2dScale(this.matrix,E);const[_,T]=E;it.singularValueDecompose2dScale(this.baseTransform,E);const N=_*E[0],L=T*E[1];let B=S,F=x,$=!1,W=!1;const tt=Math.ceil(f*N),J=Math.ceil(g*L),dt=Math.ceil(S*N),xt=Math.ceil(x*L);tt>=dt?B=f:$=!0,J>=xt?F=g:W=!0;const Q=this.getSizeAndScale(B,this.ctx.canvas.width,N),rt=this.getSizeAndScale(F,this.ctx.canvas.height,L),k=t.cachedCanvases.getCanvas("pattern",Q.size,rt.size),j=k.context,Z=d.createCanvasGraphics(j,i);if(Z.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(Z,o,u),j.translate(-Q.scale*y,-rt.scale*b),Z.transform(0,Q.scale,0,0,rt.scale,0,0),j.save(),Z.dependencyTracker?.save(),this.clipBbox(Z,y,b,v,w),Z.baseTransform=Kt(Z.ctx),Z.executeOperatorList(a),Z.endDrawing(),Z.dependencyTracker?.restore(),j.restore(),$||W){const mt=k.canvas;$&&(B=f),W&&(F=g);const St=this.getSizeAndScale(B,this.ctx.canvas.width,N),D=this.getSizeAndScale(F,this.ctx.canvas.height,L),V=St.size,K=D.size,et=t.cachedCanvases.getCanvas("pattern-workaround",V,K),ct=et.context,ft=$?Math.floor(S/f):0,ut=W?Math.floor(x/g):0;for(let ie=0;ie<=ft;ie++)for(let Gt=0;Gt<=ut;Gt++)ct.drawImage(mt,V*ie,K*Gt,V,K,0,0,V,K);return{canvas:et.canvas,scaleX:St.scale,scaleY:D.scale,offsetX:y,offsetY:b}}return{canvas:k.canvas,scaleX:Q.scale,scaleY:rt.scale,offsetX:y,offsetY:b}}getSizeAndScale(t,i,s){const a=Math.max(Hh.MAX_PATTERN_SIZE,i);let o=Math.ceil(t*s);return o>=a?o=a:s=o/t,{scale:s,size:o}}clipBbox(t,i,s,a,o){const l=a-i,u=o-s;t.ctx.rect(i,s,l,u),it.axialAlignedBoundingBox([i,s,a,o],Kt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,i,s){const a=t.ctx,o=t.current;switch(i){case Mm.COLORED:const{fillStyle:l,strokeStyle:u}=this.ctx;a.fillStyle=o.fillColor=l,a.strokeStyle=o.strokeColor=u;break;case Mm.UNCOLORED:a.fillStyle=a.strokeStyle=s,o.fillColor=o.strokeColor=s;break;default:throw new d1(`Unsupported paint type: ${i}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,i,s,a,o){let l=s;a!==Te.SHADING&&(l=it.transform(l,i.baseTransform),this.matrix&&(l=it.transform(l,this.matrix)));const u=this.createPatternCanvas(i,o);let d=new DOMMatrix(l);d=d.translate(u.offsetX,u.offsetY),d=d.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(d),f}}function eS({src:h,srcPos:t=0,dest:i,width:s,height:a,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const u=pe.isLittleEndian?4278190080:255,[d,f]=l?[o,u]:[u,o],g=s>>3,y=s&7,b=h.length;i=new Uint32Array(i.buffer);let v=0;for(let w=0;w<a;w++){for(const x=t+g;t<x;t++){const E=t<b?h[t]:255;i[v++]=E&128?f:d,i[v++]=E&64?f:d,i[v++]=E&32?f:d,i[v++]=E&16?f:d,i[v++]=E&8?f:d,i[v++]=E&4?f:d,i[v++]=E&2?f:d,i[v++]=E&1?f:d}if(y===0)continue;const S=t<b?h[t++]:255;for(let x=0;x<y;x++)i[v++]=S&1<<7-x?f:d}return{srcPos:t,destPos:v}}const Rm=16,Dm=100,iS=15,Lm=10,Ue=16,ch=new DOMMatrix,Je=new Float32Array(2),Js=new Float32Array([1/0,1/0,-1/0,-1/0]);function nS(h,t){if(h._removeMirroring)throw new Error("Context is already forwarding operations.");h.__originalSave=h.save,h.__originalRestore=h.restore,h.__originalRotate=h.rotate,h.__originalScale=h.scale,h.__originalTranslate=h.translate,h.__originalTransform=h.transform,h.__originalSetTransform=h.setTransform,h.__originalResetTransform=h.resetTransform,h.__originalClip=h.clip,h.__originalMoveTo=h.moveTo,h.__originalLineTo=h.lineTo,h.__originalBezierCurveTo=h.bezierCurveTo,h.__originalRect=h.rect,h.__originalClosePath=h.closePath,h.__originalBeginPath=h.beginPath,h._removeMirroring=()=>{h.save=h.__originalSave,h.restore=h.__originalRestore,h.rotate=h.__originalRotate,h.scale=h.__originalScale,h.translate=h.__originalTranslate,h.transform=h.__originalTransform,h.setTransform=h.__originalSetTransform,h.resetTransform=h.__originalResetTransform,h.clip=h.__originalClip,h.moveTo=h.__originalMoveTo,h.lineTo=h.__originalLineTo,h.bezierCurveTo=h.__originalBezierCurveTo,h.rect=h.__originalRect,h.closePath=h.__originalClosePath,h.beginPath=h.__originalBeginPath,delete h._removeMirroring},h.save=function(){t.save(),this.__originalSave()},h.restore=function(){t.restore(),this.__originalRestore()},h.translate=function(i,s){t.translate(i,s),this.__originalTranslate(i,s)},h.scale=function(i,s){t.scale(i,s),this.__originalScale(i,s)},h.transform=function(i,s,a,o,l,u){t.transform(i,s,a,o,l,u),this.__originalTransform(i,s,a,o,l,u)},h.setTransform=function(i,s,a,o,l,u){t.setTransform(i,s,a,o,l,u),this.__originalSetTransform(i,s,a,o,l,u)},h.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},h.rotate=function(i){t.rotate(i),this.__originalRotate(i)},h.clip=function(i){t.clip(i),this.__originalClip(i)},h.moveTo=function(i,s){t.moveTo(i,s),this.__originalMoveTo(i,s)},h.lineTo=function(i,s){t.lineTo(i,s),this.__originalLineTo(i,s)},h.bezierCurveTo=function(i,s,a,o,l,u){t.bezierCurveTo(i,s,a,o,l,u),this.__originalBezierCurveTo(i,s,a,o,l,u)},h.rect=function(i,s,a,o){t.rect(i,s,a,o),this.__originalRect(i,s,a,o)},h.closePath=function(){t.closePath(),this.__originalClosePath()},h.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class sS{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,i,s){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,i,s)):(a=this.canvasFactory.create(i,s),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const i=this.cache[t];this.canvasFactory.destroy(i),delete this.cache[t]}}}function tl(h,t,i,s,a,o,l,u,d,f){const[g,y,b,v,w,S]=Kt(h);if(y===0&&b===0){const _=l*g+w,T=Math.round(_),N=u*v+S,L=Math.round(N),B=(l+d)*g+w,F=Math.abs(Math.round(B)-T)||1,$=(u+f)*v+S,W=Math.abs(Math.round($)-L)||1;return h.setTransform(Math.sign(g),0,0,Math.sign(v),T,L),h.drawImage(t,i,s,a,o,0,0,F,W),h.setTransform(g,y,b,v,w,S),[F,W]}if(g===0&&v===0){const _=u*b+w,T=Math.round(_),N=l*y+S,L=Math.round(N),B=(u+f)*b+w,F=Math.abs(Math.round(B)-T)||1,$=(l+d)*y+S,W=Math.abs(Math.round($)-L)||1;return h.setTransform(0,Math.sign(y),Math.sign(b),0,T,L),h.drawImage(t,i,s,a,o,0,0,W,F),h.setTransform(g,y,b,v,w,S),[W,F]}h.drawImage(t,i,s,a,o,l,u,d,f);const x=Math.hypot(g,y),E=Math.hypot(b,v);return[x*d,E*f]}class Om{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=ph;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=fe.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,i,s){s?.(this),this.clipBox=new Float32Array([0,0,t,i]),this.minMax=Js.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Te.FILL,i=null){const s=this.minMax.slice();if(t===Te.STROKE){i||zt("Stroke bounding box must include transform."),it.singularValueDecompose2dScale(i,Je);const a=Je[0]*this.lineWidth/2,o=Je[1]*this.lineWidth/2;s[0]-=a,s[1]-=o,s[2]+=a,s[3]+=o}return s}updateClipFromPath(){const t=it.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Js,0)}getClippedPathBoundingBox(t=Te.FILL,i=null){return it.intersect(this.clipBox,this.getPathBoundingBox(t,i))}}function km(h,t){if(t instanceof ImageData){h.putImageData(t,0,0);return}const i=t.height,s=t.width,a=i%Ue,o=(i-a)/Ue,l=a===0?o:o+1,u=h.createImageData(s,Ue);let d=0,f;const g=t.data,y=u.data;let b,v,w,S;if(t.kind===rl.GRAYSCALE_1BPP){const x=g.byteLength,E=new Uint32Array(y.buffer,0,y.byteLength>>2),_=E.length,T=s+7>>3,N=4294967295,L=pe.isLittleEndian?4278190080:255;for(b=0;b<l;b++){for(w=b<o?Ue:a,f=0,v=0;v<w;v++){const B=x-d;let F=0;const $=B>T?s:B*8-7,W=$&-8;let tt=0,J=0;for(;F<W;F+=8)J=g[d++],E[f++]=J&128?N:L,E[f++]=J&64?N:L,E[f++]=J&32?N:L,E[f++]=J&16?N:L,E[f++]=J&8?N:L,E[f++]=J&4?N:L,E[f++]=J&2?N:L,E[f++]=J&1?N:L;for(;F<$;F++)tt===0&&(J=g[d++],tt=128),E[f++]=J&tt?N:L,tt>>=1}for(;f<_;)E[f++]=0;h.putImageData(u,0,b*Ue)}}else if(t.kind===rl.RGBA_32BPP){for(v=0,S=s*Ue*4,b=0;b<o;b++)y.set(g.subarray(d,d+S)),d+=S,h.putImageData(u,0,v),v+=Ue;b<l&&(S=s*a*4,y.set(g.subarray(d,d+S)),h.putImageData(u,0,v))}else if(t.kind===rl.RGB_24BPP)for(w=Ue,S=s*w,b=0;b<l;b++){for(b>=o&&(w=a,S=s*w),f=0,v=S;v--;)y[f++]=g[d++],y[f++]=g[d++],y[f++]=g[d++],y[f++]=255;h.putImageData(u,0,b*Ue)}else throw new Error(`bad image kind: ${t.kind}`)}function Nm(h,t){if(t.bitmap){h.drawImage(t.bitmap,0,0);return}const i=t.height,s=t.width,a=i%Ue,o=(i-a)/Ue,l=a===0?o:o+1,u=h.createImageData(s,Ue);let d=0;const f=t.data,g=u.data;for(let y=0;y<l;y++){const b=y<o?Ue:a;({srcPos:d}=eS({src:f,srcPos:d,dest:g,width:s,height:b,nonBlackColor:0})),h.putImageData(u,0,y*Ue)}}function rr(h,t){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of i)h[s]!==void 0&&(t[s]=h[s]);h.setLineDash!==void 0&&(t.setLineDash(h.getLineDash()),t.lineDashOffset=h.lineDashOffset)}function el(h){h.strokeStyle=h.fillStyle="#000000",h.fillRule="nonzero",h.globalAlpha=1,h.lineWidth=1,h.lineCap="butt",h.lineJoin="miter",h.miterLimit=10,h.globalCompositeOperation="source-over",h.font="10px sans-serif",h.setLineDash!==void 0&&(h.setLineDash([]),h.lineDashOffset=0);const{filter:t}=h;t!=="none"&&t!==""&&(h.filter="none")}function Bm(h,t){if(t)return!0;it.singularValueDecompose2dScale(h,Je);const i=Math.fround(Di.pixelRatio*aa.PDF_TO_CSS_UNITS);return Je[0]<=i&&Je[1]<=i}const aS=["butt","round","square"],rS=["miter","round","bevel"],oS={},zm={};class na{constructor(t,i,s,a,o,{optionalContentConfig:l,markedContentStack:u=null},d,f,g){this.ctx=t,this.current=new Om(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=i,this.objs=s,this.canvasFactory=a,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=l,this.cachedCanvases=new sS(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=g??null}getObject(t,i,s=null){return typeof i=="string"?(this.dependencyTracker?.recordNamedDependency(t,i),i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i)):s}beginDrawing({transform:t,viewport:i,transparency:s=!1,background:a=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=u,s){const d=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Kt(this.compositeCtx))}this.ctx.save(),el(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=Kt(this.ctx)}executeOperatorList(t,i,s,a,o){const l=t.argsArray,u=t.fnArray;let d=i||0;const f=l.length;if(f===d)return d;const g=f-d>Lm&&typeof s=="function",y=g?Date.now()+iS:0;let b=0;const v=this.commonObjs,w=this.objs;let S,x;for(;;){if(a!==void 0&&d===a.nextBreakPoint)return a.breakIt(d,s),d;if(!o||o(d))if(S=u[d],x=l[d]??null,S!==br.dependency)x===null?this[S](d):this[S](d,...x);else for(const E of x){this.dependencyTracker?.recordNamedData(E,d);const _=E.startsWith("g_")?v:w;if(!_.has(E))return _.get(E,s),d}if(d++,d===f)return d;if(g&&++b>Lm){if(Date.now()>y)return s(),d;b=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const i of t.values())typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&(i.width=i.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const i=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=i}}}_scaleImage(t,i){const s=t.width??t.displayWidth,a=t.height??t.displayHeight;let o=Math.max(Math.hypot(i[0],i[1]),1),l=Math.max(Math.hypot(i[2],i[3]),1),u=s,d=a,f="prescale1",g,y;for(;o>2&&u>1||l>2&&d>1;){let b=u,v=d;o>2&&u>1&&(b=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/b),l>2&&d>1&&(v=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/v),g=this.cachedCanvases.getCanvas(f,b,v),y=g.context,y.clearRect(0,0,b,v),y.drawImage(t,0,0,u,d,0,0,b,v),t=g.canvas,u=b,d=v,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t,i){const s=this.ctx,{width:a,height:o}=i,l=this.current.fillColor,u=this.current.patternFill,d=Kt(s);let f,g,y,b;if((i.bitmap||i.data)&&i.count>1){const tt=i.bitmap||i.data.buffer;g=JSON.stringify(u?d:[d.slice(0,4),l]),f=this._cachedBitmapsMap.get(tt),f||(f=new Map,this._cachedBitmapsMap.set(tt,f));const J=f.get(g);if(J&&!u){const dt=Math.round(Math.min(d[0],d[2])+d[4]),xt=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,hi.transformAndFill),{canvas:J,offsetX:dt,offsetY:xt}}y=J}y||(b=this.cachedCanvases.getCanvas("maskCanvas",a,o),Nm(b.context,i));let v=it.transform(d,[1/a,0,0,-1/o,0,0]);v=it.transform(v,[1,0,0,1,0,-o]);const w=Js.slice();it.axialAlignedBoundingBox([0,0,a,o],v,w);const[S,x,E,_]=w,T=Math.round(E-S)||1,N=Math.round(_-x)||1,L=this.cachedCanvases.getCanvas("fillCanvas",T,N),B=L.context,F=S,$=x;B.translate(-F,-$),B.transform(...v),y||(y=this._scaleImage(b.canvas,Ci(B)),y=y.img,f&&u&&f.set(g,y)),B.imageSmoothingEnabled=Bm(Kt(B),i.interpolate),tl(B,y,0,0,y.width,y.height,0,0,a,o),B.globalCompositeOperation="source-in";const W=it.transform(Ci(B),[1,0,0,1,-F,-$]);return B.fillStyle=u?l.getPattern(s,this,W,Te.FILL,t):l,B.fillRect(0,0,a,o),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(g,L.canvas)),this.dependencyTracker?.recordDependencies(t,hi.transformAndFill),{canvas:L.canvas,offsetX:Math.round(F),offsetY:Math.round($)}}setLineWidth(t,i){this.dependencyTracker?.recordSimpleData("lineWidth",t),i!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=i,this.ctx.lineWidth=i}setLineCap(t,i){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=aS[i]}setLineJoin(t,i){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=rS[i]}setMiterLimit(t,i){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=i}setDash(t,i,s){this.dependencyTracker?.recordSimpleData("dash",t);const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(i),a.lineDashOffset=s)}setRenderingIntent(t,i){}setFlatness(t,i){}setGState(t,i){for(const[s,a]of i)switch(s){case"LW":this.setLineWidth(t,a);break;case"LC":this.setLineCap(t,a);break;case"LJ":this.setLineJoin(t,a);break;case"ML":this.setMiterLimit(t,a);break;case"D":this.setDash(t,a[0],a[1]);break;case"RI":this.setRenderingIntent(t,a);break;case"FL":this.setFlatness(t,a);break;case"Font":this.setFont(t,a[0],a[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=a;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=a;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=a;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const i=this.ctx.canvas.width,s=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(a,i,s);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),rr(this.suspendedCtx,l),nS(l,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),rr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const i=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,i,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,i,s,a){const o=a[0],l=a[1],u=a[2]-o,d=a[3]-l;u===0||d===0||(this.genericComposeSMask(i.context,s,u,d,i.subtype,i.backdrop,i.transferMap,o,l,i.offsetX,i.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,i,s,a,o,l,u,d,f,g,y){let b=t.canvas,v=d-g,w=f-y;if(l)if(v<0||w<0||v+s>b.width||w+a>b.height){const x=this.cachedCanvases.getCanvas("maskExtension",s,a),E=x.context;E.drawImage(b,-v,-w),E.globalCompositeOperation="destination-atop",E.fillStyle=l,E.fillRect(0,0,s,a),E.globalCompositeOperation="source-over",b=x.canvas,v=w=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const x=new Path2D;x.rect(v,w,s,a),t.clip(x),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(v,w,s,a),t.restore()}i.save(),i.globalAlpha=1,i.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?i.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(i.filter=this.filterFactory.addLuminosityFilter(u));const S=new Path2D;S.rect(d,f,s,a),i.clip(S),i.globalCompositeOperation="destination-in",i.drawImage(b,v,w,s,a,d,f,s,a),i.restore()}save(t){this.inSMaskMode&&rr(this.ctx,this.suspendedCtx),this.ctx.save();const i=this.current;this.stateStack.push(i),this.current=i.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&rr(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,i,s,a,o,l,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(i,s,a,o,l,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,i,s,a){let[o]=s;if(!a){o||=s[0]=new Path2D,this[i](t,o);return}if(this.dependencyTracker!==null){const l=i===br.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,a[0]-l,a[2]+l,a[1]-l,a[3]+l).recordDependencies(t,["transform"])}o instanceof Path2D||(o=s[0]=my(o)),it.axialAlignedBoundingBox(a,Kt(this.ctx),this.current.minMax),this[i](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,i,s=!0){const a=this.ctx,o=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const l=o.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.strokeStyle=o.getPattern(a,this,Ci(a),Te.STROKE,t),l){const u=new Path2D;u.addPath(i,a.getTransform().invertSelf().multiplySelf(l)),i=u}this.rescaleAndStroke(i,!1),a.restore()}else this.rescaleAndStroke(i,!0);this.dependencyTracker?.recordDependencies(t,hi.stroke),s&&this.consumePath(t,i,this.current.getClippedPathBoundingBox(Te.STROKE,Kt(this.ctx))),a.globalAlpha=this.current.fillAlpha}closeStroke(t,i){this.stroke(t,i)}fill(t,i,s=!0){const a=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let u=!1;if(l){const f=o.isModifyingCurrentTransform()?a.getTransform():null;if(this.dependencyTracker?.save(t),a.save(),a.fillStyle=o.getPattern(a,this,Ci(a),Te.FILL,t),f){const g=new Path2D;g.addPath(i,a.getTransform().invertSelf().multiplySelf(f)),i=g}u=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(a.fill(i,"evenodd"),this.pendingEOFill=!1):a.fill(i)),this.dependencyTracker?.recordDependencies(t,hi.fill),u&&(a.restore(),this.dependencyTracker?.restore(t)),s&&this.consumePath(t,i,d)}eoFill(t,i){this.pendingEOFill=!0,this.fill(t,i)}fillStroke(t,i){this.fill(t,i,!1),this.stroke(t,i,!1),this.consumePath(t,i)}eoFillStroke(t,i){this.pendingEOFill=!0,this.fillStroke(t,i)}closeFillStroke(t,i){this.fillStroke(t,i)}closeEOFillStroke(t,i){this.pendingEOFill=!0,this.fillStroke(t,i)}endPath(t,i){this.consumePath(t,i)}rawFillPath(t,i){this.ctx.fill(i),this.dependencyTracker?.recordDependencies(t,hi.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=oS}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=zm}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const i=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:a}=this;i!==void 0&&a.recordFutureForcedDependency("textClip",a.getOpenMarker()).recordFutureForcedDependency("textClip",t),a.recordCloseMarker(t)}if(i!==void 0){const a=new Path2D,o=s.getTransform().invertSelf();for(const{transform:l,x:u,y:d,fontSize:f,path:g}of i)g&&a.addPath(g,new DOMMatrix(l).preMultiplySelf(o).translate(u,d).scale(f,-f));s.clip(a)}delete this.pendingTextPaths}setCharSpacing(t,i){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=i}setWordSpacing(t,i){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=i}setHScale(t,i){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=i/100}setLeading(t,i){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-i}setFont(t,i,s){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",i,t);const a=this.commonObjs.get(i),o=this.current;if(!a)throw new Error(`Can't find font for ${i}`);if(o.fontMatrix=a.fontMatrix||ph,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&pt("Invalid font matrix for font "+i),s<0?(s=-s,o.fontDirection=-1):o.fontDirection=1,this.current.font=a,this.current.fontSize=s,a.isType3Font)return;const l=a.loadedName||"sans-serif",u=a.systemFontInfo?.css||`"${l}", ${a.fallbackName}`;let d="normal";a.black?d="900":a.bold&&(d="bold");const f=a.italic?"italic":"normal";let g=s;s<Rm?g=Rm:s>Dm&&(g=Dm),this.current.fontSizeScale=s/g,this.ctx.font=`${f} ${d} ${g}px ${u}`}setTextRenderingMode(t,i){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=i}setTextRise(t,i){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=i}moveText(t,i,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=i,this.current.y=this.current.lineY+=s}setLeadingMoveText(t,i,s){this.setLeading(t,-s),this.moveText(t,i,s)}setTextMatrix(t,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:s}=this;s.textMatrix=i,s.textMatrixScale=Math.hypot(i[0],i[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#n(t,i,s){const a=new Path2D;return a.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(i)),a}paintChar(t,i,s,a,o,l){const u=this.ctx,d=this.current,f=d.font,g=d.textRenderingMode,y=d.fontSize/d.fontSizeScale,b=g&fe.FILL_STROKE_MASK,v=!!(g&fe.ADD_TO_PATH_FLAG),w=d.patternFill&&!f.missingFile,S=d.patternStroke&&!f.missingFile;let x;if((f.disableFontFace||v||w||S)&&!f.missingFile&&(x=f.getPathGenerator(this.commonObjs,i)),x&&(f.disableFontFace||w||S)){u.save(),u.translate(s,a),u.scale(y,-y),this.dependencyTracker?.recordCharacterBBox(t,u,f);let E;if(b===fe.FILL||b===fe.FILL_STROKE)if(o){E=u.getTransform(),u.setTransform(...o);const _=this.#n(x,E,o);u.fill(_)}else u.fill(x);if(b===fe.STROKE||b===fe.FILL_STROKE)if(l){E||=u.getTransform(),u.setTransform(...l);const{a:_,b:T,c:N,d:L}=E,B=it.inverseTransform(l),F=it.transform([_,T,N,L,0,0],B);it.singularValueDecompose2dScale(F,Je),u.lineWidth*=Math.max(Je[0],Je[1])/y,u.stroke(this.#n(x,E,l))}else u.lineWidth/=y,u.stroke(x);u.restore()}else(b===fe.FILL||b===fe.FILL_STROKE)&&(u.fillText(i,s,a),this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,a,()=>u.measureText(i))),(b===fe.STROKE||b===fe.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,a,()=>u.measureText(i)).recordDependencies(t,hi.stroke),u.strokeText(i,s,a));v&&((this.pendingTextPaths||=[]).push({transform:Kt(u),x:s,y:a,fontSize:y,path:x}),this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,a))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const i=t.getImageData(0,0,10,10).data;let s=!1;for(let a=3;a<i.length;a+=4)if(i[a]>0&&i[a]<255){s=!0;break}return gt(this,"isFontSubpixelAAEnabled",s)}showText(t,i){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,hi.showText).resetBBox(t),this.current.textRenderingMode&fe.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,a=s.font;if(a.isType3Font){this.showType3Text(t,i),this.dependencyTracker?.recordShowTextOperation(t);return}const o=s.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const l=this.ctx,u=s.fontSizeScale,d=s.charSpacing,f=s.wordSpacing,g=s.fontDirection,y=s.textHScale*g,b=i.length,v=a.vertical,w=v?1:-1,S=a.defaultVMetrics,x=o*s.fontMatrix[0],E=s.textRenderingMode===fe.FILL&&!a.disableFontFace&&!s.patternFill;l.save(),s.textMatrix&&l.transform(...s.textMatrix),l.translate(s.x,s.y+s.textRise),g>0?l.scale(y,-1):l.scale(y,1);let _,T;const N=s.textRenderingMode&fe.FILL_STROKE_MASK,L=N===fe.FILL||N===fe.FILL_STROKE,B=N===fe.STROKE||N===fe.FILL_STROKE;if(L&&s.patternFill){l.save();const J=s.fillColor.getPattern(l,this,Ci(l),Te.FILL,t);_=Kt(l),l.restore(),l.fillStyle=J}if(B&&s.patternStroke){l.save();const J=s.strokeColor.getPattern(l,this,Ci(l),Te.STROKE,t);T=Kt(l),l.restore(),l.strokeStyle=J}let F=s.lineWidth;const $=s.textMatrixScale;if($===0||F===0?B&&(F=this.getSinglePixelWidth()):F/=$,u!==1&&(l.scale(u,u),F/=u),l.lineWidth=F,a.isInvalidPDFjsFont){const J=[];let dt=0;for(const Q of i)J.push(Q.unicode),dt+=Q.width;const xt=J.join("");if(l.fillText(xt,0,0),this.dependencyTracker!==null){const Q=l.measureText(xt);this.dependencyTracker.recordBBox(t,this.ctx,-Q.actualBoundingBoxLeft,Q.actualBoundingBoxRight,-Q.actualBoundingBoxAscent,Q.actualBoundingBoxDescent).recordShowTextOperation(t)}s.x+=dt*x*y,l.restore(),this.compose();return}let W=0,tt;for(tt=0;tt<b;++tt){const J=i[tt];if(typeof J=="number"){W+=w*J*o/1e3;continue}let dt=!1;const xt=(J.isSpace?f:0)+d,Q=J.fontChar,rt=J.accent;let k,j,Z=J.width;if(v){const D=J.vmetric||S,V=-(J.vmetric?D[1]:Z*.5)*x,K=D[2]*x;Z=D?-D[0]:Z,k=V/u,j=(W+K)/u}else k=W/u,j=0;let mt;if(a.remeasure&&Z>0){mt=l.measureText(Q);const D=mt.width*1e3/o*u;if(Z<D&&this.isFontSubpixelAAEnabled){const V=Z/D;dt=!0,l.save(),l.scale(V,1),k/=V}else Z!==D&&(k+=(Z-D)/2e3*o/u)}if(this.contentVisible&&(J.isInFont||a.missingFile)){if(E&&!rt)l.fillText(Q,k,j),this.dependencyTracker?.recordCharacterBBox(t,l,mt?{bbox:null}:a,o/u,k,j,()=>mt??l.measureText(Q));else if(this.paintChar(t,Q,k,j,_,T),rt){const D=k+o*rt.offset.x/u,V=j-o*rt.offset.y/u;this.paintChar(t,rt.fontChar,D,V,_,T)}}const St=v?Z*x-xt*g:Z*x+xt*g;W+=St,dt&&l.restore()}v?s.y-=W:s.x+=W*y,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,i){const s=this.ctx,a=this.current,o=a.font,l=a.fontSize,u=a.fontDirection,d=o.vertical?1:-1,f=a.charSpacing,g=a.wordSpacing,y=a.textHScale*u,b=a.fontMatrix||ph,v=i.length,w=a.textRenderingMode===fe.INVISIBLE;let S,x,E,_;if(w||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),a.textMatrix&&s.transform(...a.textMatrix),s.translate(a.x,a.y+a.textRise),s.scale(y,u);const T=this.dependencyTracker;for(this.dependencyTracker=T?new hl(T,t):null,S=0;S<v;++S){if(x=i[S],typeof x=="number"){_=d*x*l/1e3,this.ctx.translate(_,0),a.x+=_*y;continue}const N=(x.isSpace?g:0)+f,L=o.charProcOperatorList[x.operatorListId];L?this.contentVisible&&(this.save(),s.scale(l,l),s.transform(...b),this.executeOperatorList(L),this.restore()):pt(`Type3 character "${x.operatorListId}" is not available.`);const B=[x.width,0];it.applyTransform(B,b),E=B[0]*l+N,s.translate(E,0),a.x+=E*y}s.restore(),T&&(this.dependencyTracker=T)}setCharWidth(t,i,s){}setCharWidthAndBounds(t,i,s,a,o,l,u){const d=new Path2D;d.rect(a,o,l-a,u-o),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,a,l,o,u).recordClipBox(t,this.ctx,a,l,o,u),this.endPath(t)}getColorN_Pattern(t,i){let s;if(i[0]==="TilingPattern"){const a=this.baseTransform||Kt(this.ctx),o={createCanvasGraphics:(l,u)=>new na(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new hl(this.dependencyTracker,u,!0):null)};s=new Hh(i,this.ctx,o,a)}else s=this._getPattern(t,i[1],i[2]);return s}setStrokeColorN(t,...i){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,i),this.current.patternStroke=!0}setFillColorN(t,...i){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,i),this.current.patternFill=!0}setStrokeRGBColor(t,i){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=i,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,i){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=i,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,i,s=null){let a;return this.cachedPatterns.has(i)?a=this.cachedPatterns.get(i):(a=tS(this.getObject(t,i)),this.cachedPatterns.set(i,a)),s&&(a.matrix=s),a}shadingFill(t,i){if(!this.contentVisible)return;const s=this.ctx;this.save(t);const a=this._getPattern(t,i);s.fillStyle=a.getPattern(s,this,Ci(s),Te.SHADING,t);const o=Ci(s);if(o){const{width:l,height:u}=s.canvas,d=Js.slice();it.axialAlignedBoundingBox([0,0,l,u],o,d);const[f,g,y,b]=d;this.ctx.fillRect(f,g,y-f,b-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,hi.transform).recordDependencies(t,hi.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){zt("Should not call beginInlineImage")}beginImageData(){zt("Should not call beginImageData")}paintFormXObjectBegin(t,i,s){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),i&&this.transform(t,...i),this.baseTransform=Kt(this.ctx),s)){it.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[a,o,l,u]=s,d=new Path2D;d.rect(a,o,l-a,u-o),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,a,l,o,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,i){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;i.isolated||Al("TODO: Support non-isolated groups."),i.knockout&&pt("Knockout groups not supported.");const a=Kt(s);if(i.matrix&&s.transform(...i.matrix),!i.bbox)throw new Error("Bounding box is required.");let o=Js.slice();it.axialAlignedBoundingBox(i.bbox,Kt(s),o);const l=[0,0,s.canvas.width,s.canvas.height];o=it.intersect(o,l)||[0,0,0,0];const u=Math.floor(o[0]),d=Math.floor(o[1]),f=Math.max(Math.ceil(o[2])-u,1),g=Math.max(Math.ceil(o[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,g]);let y="groupAt"+this.groupLevel;i.smask&&(y+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(y,f,g),v=b.context;v.translate(-u,-d),v.transform(...a);let w=new Path2D;const[S,x,E,_]=i.bbox;if(w.rect(S,x,E-S,_-x),i.matrix){const T=new Path2D;T.addPath(w,new DOMMatrix(i.matrix)),w=T}v.clip(w),i.smask&&this.smaskStack.push({canvas:b.canvas,context:v,offsetX:u,offsetY:d,subtype:i.smask.subtype,backdrop:i.smask.backdrop,transferMap:i.smask.transferMap||null,startTransformInverse:null}),(!i.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(u,d),s.save()),rr(s,v),this.ctx=v,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(t,i){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),i.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Kt(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const l=Js.slice();it.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o,l),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,i,s,a,o,l){if(this.#t(),el(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const u=s[2]-s[0],d=s[3]-s[1];if(l&&this.annotationCanvasMap){a=a.slice(),a[4]-=s[0],a[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=u,s[3]=d,it.singularValueDecompose2dScale(Kt(this.ctx),Je);const{viewportScale:f}=this,g=Math.ceil(u*this.outputScaleX*f),y=Math.ceil(d*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(g,y);const{canvas:b,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(i,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(Je[0],0,0,-Je[1],0,d*Je[1]),el(this.ctx)}else{el(this.ctx),this.endPath(t);const f=new Path2D;f.rect(s[0],s[1],u,d),this.ctx.clip(f)}}this.current=new Om(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...a),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,i){if(!this.contentVisible)return;const s=i.count;i=this.getObject(t,i.data,i),i.count=s;const a=this.ctx,o=this._createMaskCanvas(t,i),l=o.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(l,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+l.width,o.offsetY,o.offsetY+l.height).recordOperation(t),a.restore(),this.compose()}paintImageMaskXObjectRepeat(t,i,s,a=0,o=0,l,u){if(!this.contentVisible)return;i=this.getObject(t,i.data,i);const d=this.ctx;d.save();const f=Kt(d);d.transform(s,a,o,l,0,0);const g=this._createMaskCanvas(t,i);d.setTransform(1,0,0,1,g.offsetX-f[4],g.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let y=0,b=u.length;y<b;y+=2){const v=it.transform(f,[s,a,o,l,u[y],u[y+1]]);d.drawImage(g.canvas,v[4],v[5]),this.dependencyTracker?.recordBBox(t,this.ctx,v[4],v[4]+g.canvas.width,v[5],v[5]+g.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,i){if(!this.contentVisible)return;const s=this.ctx,a=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,hi.transformAndFill);for(const l of i){const{data:u,width:d,height:f,transform:g}=l,y=this.cachedCanvases.getCanvas("maskCanvas",d,f),b=y.context;b.save();const v=this.getObject(t,u,l);Nm(b,v),b.globalCompositeOperation="source-in",b.fillStyle=o?a.getPattern(b,this,Ci(s),Te.FILL,t):a,b.fillRect(0,0,d,f),b.restore(),s.save(),s.transform(...g),s.scale(1,-1),tl(s,y.canvas,0,0,d,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,s,0,d,0,f),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,i){if(!this.contentVisible)return;const s=this.getObject(t,i);if(!s){pt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,s)}paintImageXObjectRepeat(t,i,s,a,o){if(!this.contentVisible)return;const l=this.getObject(t,i);if(!l){pt("Dependent image isn't ready yet");return}const u=l.width,d=l.height,f=[];for(let g=0,y=o.length;g<y;g+=2)f.push({transform:[s,0,0,a,o[g],o[g+1]],x:0,y:0,w:u,h:d});this.paintInlineImageXObjectGroup(t,l,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:i,width:s,height:a}=t,o=this.cachedCanvases.getCanvas("inlineImage",s,a),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(i,0,0),l.filter="none",o.canvas}paintInlineImageXObject(t,i){if(!this.contentVisible)return;const s=i.width,a=i.height,o=this.ctx;this.save(t);const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/s,-1/a);let u;if(i.bitmap)u=this.applyTransferMapsToBitmap(i);else if(typeof HTMLElement=="function"&&i instanceof HTMLElement||!i.data)u=i;else{const g=this.cachedCanvases.getCanvas("inlineImage",s,a).context;km(g,i),u=this.applyTransferMapsToCanvas(g)}const d=this._scaleImage(u,Ci(o));o.imageSmoothingEnabled=Bm(Kt(o),i.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,s,-a,0).recordDependencies(t,hi.imageXObject).recordOperation(t),tl(o,d.img,0,0,d.paintWidth,d.paintHeight,0,-a,s,a),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,i,s){if(!this.contentVisible)return;const a=this.ctx;let o;if(i.bitmap)o=i.bitmap;else{const l=i.width,u=i.height,f=this.cachedCanvases.getCanvas("inlineImage",l,u).context;km(f,i),o=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const l of s)a.save(),a.transform(...l.transform),a.scale(1,-1),tl(a,o,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,a,0,1,-1,0),a.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,hi.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,i){}markPointProps(t,i,s){}beginMarkedContent(t,i){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,i,s){this.dependencyTracker?.beginMarkedContent(t),i==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,i,s){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const o=this.ctx;this.pendingClip?(a||(this.pendingClip===zm?o.clip(i,"evenodd"):o.clip(i)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Kt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const i=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,a)/i}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:i,b:s,c:a,d:o}=this.ctx.getTransform();let l,u;if(s===0&&a===0){const d=Math.abs(i),f=Math.abs(o);if(d===f)if(t===0)l=u=1/d;else{const g=d*t;l=u=g<1?1/g:1}else if(t===0)l=1/d,u=1/f;else{const g=d*t,y=f*t;l=g<1?1/g:1,u=y<1?1/y:1}}else{const d=Math.abs(i*o-s*a),f=Math.hypot(i,s),g=Math.hypot(a,o);if(t===0)l=g/d,u=f/d;else{const y=t*d;l=g>y?g/y:1,u=f>y?f/y:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,i){const{ctx:s,current:{lineWidth:a}}=this,[o,l]=this.getScaleForStroking();if(o===l){s.lineWidth=(a||1)*o,s.stroke(t);return}const u=s.getLineDash();i&&s.save(),s.scale(o,l),ch.a=1/o,ch.d=1/l;const d=new Path2D;if(d.addPath(t,ch),u.length>0){const f=Math.max(o,l);s.setLineDash(u.map(g=>g/f)),s.lineDashOffset/=f}s.lineWidth=a||1,s.stroke(d),i&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const h in br)na.prototype[h]!==void 0&&(na.prototype[br[h]]=na.prototype[h]);class ss{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class lS{#t;#e;constructor({parsedData:t,rawData:i}){this.#t=t,this.#e=i}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const Ks=Symbol("INTERNAL");class cS{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:i,intent:s,usage:a,rbGroups:o}){this.#t=!!(t&Qe.DISPLAY),this.#e=!!(t&Qe.PRINT),this.name=i,this.intent=s,this.usage=a,this.rbGroups=o}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:i}=this.usage;return this.#t?i?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,i,s=!1){t!==Ks&&zt("Internal method `_setVisible` called."),this.#n=s,this.#i=i}}class uS{#t=null;#e=new Map;#n=null;#i=null;constructor(t,i=Qe.DISPLAY){if(this.renderingIntent=i,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const s of t.groups)this.#e.set(s.id,new cS(i,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible(Ks,!1);for(const s of t.on)this.#e.get(s)._setVisible(Ks,!0);for(const s of t.off)this.#e.get(s)._setVisible(Ks,!1);this.#n=this.getHash()}}#a(t){const i=t.length;if(i<2)return!0;const s=t[0];for(let a=1;a<i;a++){const o=t[a];let l;if(Array.isArray(o))l=this.#a(o);else if(this.#e.has(o))l=this.#e.get(o).visible;else return pt(`Optional content group not found: ${o}`),!0;switch(s){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Al("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(pt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const i of t.ids){if(!this.#e.has(i))return pt(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const i of t.ids){if(!this.#e.has(i))return pt(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const i of t.ids){if(!this.#e.has(i))return pt(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const i of t.ids){if(!this.#e.has(i))return pt(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!1}return!0}return pt(`Unknown optional content policy ${t.policy}.`),!0}return pt(`Unknown group type ${t.type}.`),!0}setVisibility(t,i=!0,s=!0){const a=this.#e.get(t);if(!a){pt(`Optional content group not found: ${t}`);return}if(s&&i&&a.rbGroups.length)for(const o of a.rbGroups)for(const l of o)l!==t&&this.#e.get(l)?._setVisible(Ks,!1,!0);a._setVisible(Ks,!!i,!0),this.#t=null}setOCGState({state:t,preserveRB:i}){let s;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":s=a;continue}const o=this.#e.get(a);if(o)switch(s){case"ON":this.setVisibility(a,!0,i);break;case"OFF":this.setVisibility(a,!1,i);break;case"Toggle":this.setVisibility(a,!o.visible,i);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new by;for(const[i,s]of this.#e)t.update(`${i}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class xl{#t=null;#e=null;_fullReader=null;_rangeReaders=new Set;_source=null;constructor(t,i,s){this._source=t,this.#t=i,this.#e=s}get _progressiveDataLength(){return this._fullReader?._loaded??0}getFullReader(){return Bt(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new this.#t(this)}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new this.#e(this,t,i);return this._rangeReaders.add(s),s}cancelAllRequests(t){this._fullReader?.cancel(t);for(const i of new Set(this._rangeReaders))i.cancel(t)}}class Cl{onProgress=null;_contentLength=0;_filename=null;_headersCapability=Promise.withResolvers();_isRangeSupported=!1;_isStreamingSupported=!1;_loaded=0;_stream=null;constructor(t){this._stream=t}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){zt("Abstract method `read` called")}cancel(t){zt("Abstract method `cancel` called")}}class Tl{_stream=null;constructor(t,i,s){this._stream=t}async read(){zt("Abstract method `read` called")}cancel(t){zt("Abstract method `cancel` called")}}function Pm(h){return h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength?h.buffer:new Uint8Array(h).buffer}class hS extends xl{_progressiveDone=!1;_queuedChunks=[];constructor(t){super(t,dS,fS);const{pdfDataRangeTransport:i}=t,{initialData:s,progressiveDone:a}=i;if(s?.length>0){const o=Pm(s);this._queuedChunks.push(o)}this._progressiveDone=a,i.addRangeListener((o,l)=>{this.#t(o,l)}),i.addProgressListener((o,l)=>{l!==void 0&&this._fullReader?.onProgress?.({loaded:o,total:l})}),i.addProgressiveReadListener(o=>{this.#t(void 0,o)}),i.addProgressiveDoneListener(()=>{this._fullReader?.progressiveDone(),this._progressiveDone=!0}),i.transportReady()}#t(t,i){const s=Pm(i);if(t===void 0)this._fullReader?this._fullReader._enqueue(s):this._queuedChunks.push(s);else{const a=this._rangeReaders.keys().find(o=>o._begin===t);Bt(a,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),a._enqueue(s)}}getFullReader(){const t=super.getFullReader();return this._queuedChunks=null,t}getRangeReader(t,i){const s=super.getRangeReader(t,i);return s&&(s.onDone=()=>this._rangeReaders.delete(s),this._source.pdfDataRangeTransport.requestDataRange(t,i)),s}cancelAllRequests(t){super.cancelAllRequests(t),this._source.pdfDataRangeTransport.abort()}}class dS extends Cl{_done=!1;_queuedChunks=null;_requests=[];constructor(t){super(t);const{pdfDataRangeTransport:i,disableRange:s,disableStream:a}=t._source,{length:o,contentDispositionFilename:l}=i;this._queuedChunks=t._queuedChunks||[];for(const u of this._queuedChunks)this._loaded+=u.byteLength;this._done=t._progressiveDone,this._contentLength=o,this._isStreamingSupported=!a,this._isRangeSupported=!s,Bh(l)&&(this._filename=l),this._headersCapability.resolve()}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||=!0}}class fS extends Tl{onDone=null;_begin=-1;_done=!1;_queuedChunk=null;_requests=[];constructor(t,i,s){super(t,i,s),this._begin=i}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this.onDone?.()}}async read(){if(this._queuedChunk){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this.onDone?.()}}function pS(h){let t=!0,i=s("filename\\*","i").exec(h);if(i){i=i[1];let g=u(i);return g=unescape(g),g=d(g),g=f(g),o(g)}if(i=l(h),i){const g=f(i);return o(g)}if(i=s("filename","i").exec(h),i){i=i[1];let g=u(i);return g=f(g),o(g)}function s(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function a(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(g,{fatal:!0}),v=Sl(y);y=b.decode(v),t=!1}catch{}}return y}function o(g){return t&&/[\x80-\xff]/.test(g)&&(g=a("utf-8",g),t&&(g=a("iso-8859-1",g))),g}function l(g){const y=[];let b;const v=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=v.exec(g))!==null;){let[,S,x,E]=b;if(S=parseInt(S,10),S in y){if(S===0)break;continue}y[S]=[x,E]}const w=[];for(let S=0;S<y.length&&S in y;++S){let[x,E]=y[S];E=u(E),x&&(E=unescape(E),S===0&&(E=d(E))),w.push(E)}return w.join("")}function u(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let b=0;b<y.length;++b){const v=y[b].indexOf('"');v!==-1&&(y[b]=y[b].slice(0,v),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function d(g){const y=g.indexOf("'");if(y===-1)return g;const b=g.slice(0,y),w=g.slice(y+1).replace(/^[^']*'/,"");return a(b,w)}function f(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,v,w){if(v==="q"||v==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,x){return String.fromCharCode(parseInt(x,16))}),a(b,w);try{w=atob(w)}catch{}return a(b,w)})}return""}function Cy(h,t){const i=new Headers;if(!h||!t||typeof t!="object")return i;for(const s in t){const a=t[s];a!==void 0&&i.append(s,a)}return i}function _l(h){return URL.parse(h)?.origin??null}function Ty({responseHeaders:h,isHttp:t,rangeChunkSize:i,disableRange:s}){const a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(h.get("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*i)||s||!t||h.get("Accept-Ranges")!=="bytes"||(h.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function _y(h){const t=h.get("Content-Disposition");if(t){let i=pS(t);if(i.includes("%"))try{i=decodeURIComponent(i)}catch{}if(Bh(i))return i}return null}function Ml(h,t){return new ul(`Unexpected server response (${h}) while retrieving PDF "${t}".`,h,h===404||h===0&&t.startsWith("file:"))}function My(h,t){if(h!==t)throw new Error(`Expected range response-origin "${h}" to match "${t}".`)}function Ry(h,t,i,s){return fetch(h,{method:"GET",headers:t,signal:s.signal,mode:"cors",credentials:i?"include":"same-origin",redirect:"follow"})}function Dy(h,t){if(h!==200&&h!==206)throw Ml(h,t)}function Ly(h){return h instanceof Uint8Array?h.buffer:h instanceof ArrayBuffer?h:(pt(`getArrayBuffer - unexpected data format: ${h}`),new Uint8Array(h).buffer)}class gS extends xl{_responseOrigin=null;constructor(t){super(t,mS,yS),this.isHttp=/^https?:/i.test(t.url),this.headers=Cy(this.isHttp,t.httpHeaders)}}class mS extends Cl{_abortController=new AbortController;_reader=null;constructor(t){super(t);const{disableRange:i,disableStream:s,length:a,rangeChunkSize:o,url:l,withCredentials:u}=t._source;this._contentLength=a,this._isStreamingSupported=!s,this._isRangeSupported=!i;const d=new Headers(t.headers);Ry(l,d,u,this._abortController).then(f=>{t._responseOrigin=_l(f.url),Dy(f.status,l),this._reader=f.body.getReader();const g=f.headers,{allowRangeRequests:y,suggestedLength:b}=Ty({responseHeaders:g,isHttp:t.isHttp,rangeChunkSize:o,disableRange:i});this._isRangeSupported=y,this._contentLength=b||this._contentLength,this._filename=_y(g),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ln("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){await this._headersCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Ly(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class yS extends Tl{_abortController=new AbortController;_readCapability=Promise.withResolvers();_reader=null;constructor(t,i,s){super(t,i,s);const{url:a,withCredentials:o}=t._source,l=new Headers(t.headers);l.append("Range",`bytes=${i}-${s-1}`),Ry(a,l,o,this._abortController).then(u=>{const d=_l(u.url);My(d,t._responseOrigin),Dy(u.status,a),this._reader=u.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:{value:Ly(t),done:!1}}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const uh=200,Fm=206;function bS(h){return typeof h!="string"?h:Sl(h).buffer}class vS extends xl{#t=new WeakMap;_responseOrigin=null;constructor(t){super(t,AS,SS),this.url=t.url,this.isHttp=/^https?:/i.test(this.url),this.headers=Cy(this.isHttp,t.httpHeaders)}_request(t){const i=new XMLHttpRequest,s={validateStatus:null,onHeadersReceived:t.onHeadersReceived,onDone:t.onDone,onError:t.onError,onProgress:t.onProgress};this.#t.set(i,s),i.open("GET",this.url),i.withCredentials=this._source.withCredentials;for(const[a,o]of this.headers)i.setRequestHeader(a,o);return this.isHttp&&"begin"in t&&"end"in t?(i.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.validateStatus=a=>a===Fm||a===uh):s.validateStatus=a=>a===uh,i.responseType="arraybuffer",Bt(t.onError,"Expected `onError` callback to be provided."),i.onerror=()=>t.onError(i.status),i.onreadystatechange=this.#n.bind(this,i),i.onprogress=this.#e.bind(this,i),i.send(null),i}#e(t,i){this.#t.get(t)?.onProgress?.(i)}#n(t,i){const s=this.#t.get(t);if(!s||(t.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),t.readyState!==4)||!this.#t.has(t))return;if(this.#t.delete(t),t.status===0&&this.isHttp){s.onError(t.status);return}const a=t.status||uh;if(!s.validateStatus(a)){s.onError(t.status);return}const o=bS(t.response);if(a===Fm){const l=t.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(l)?s.onDone(o):(pt('Missing or invalid "Content-Range" header.'),s.onError(0))}else o?s.onDone(o):s.onError(t.status)}_abortRequest(t){this.#t.has(t)&&(this.#t.delete(t),t.abort())}getRangeReader(t,i){const s=super.getRangeReader(t,i);return s&&(s.onClosed=()=>this._rangeReaders.delete(s)),s}}class AS extends Cl{_cachedChunks=[];_done=!1;_requests=[];_storedError=null;constructor(t){super(t);const{length:i}=t._source;this._contentLength=i,this._fullRequestXhr=t._request({onHeadersReceived:this.#t.bind(this),onDone:this.#e.bind(this),onError:this.#n.bind(this),onProgress:this.#i.bind(this)})}#t(){const t=this._stream,{disableRange:i,rangeChunkSize:s}=t._source,a=this._fullRequestXhr;t._responseOrigin=_l(a.responseURL);const o=a.getAllResponseHeaders(),l=new Headers(o?o.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(f=>{const[g,...y]=f.split(": ");return[g,y.join(": ")]}):[]),{allowRangeRequests:u,suggestedLength:d}=Ty({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:s,disableRange:i});u&&(this._isRangeSupported=!0),this._contentLength=d||this._contentLength,this._filename=_y(l),this._isRangeSupported&&t._abortRequest(a),this._headersCapability.resolve()}#e(t){if(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._cachedChunks.push(t),this._done=!0,!(this._cachedChunks.length>0)){for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}}#n(t){this._storedError=Ml(t,this._stream.url),this._headersCapability.reject(this._storedError);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}#i(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}class SS extends Tl{onClosed=null;_done=!1;_queuedChunk=null;_requests=[];_storedError=null;constructor(t,i,s){super(t,i,s),this._requestXhr=t._request({begin:i,end:s,onHeadersReceived:this.#t.bind(this),onDone:this.#e.bind(this),onError:this.#n.bind(this),onProgress:null})}#t(){const t=_l(this._requestXhr?.responseURL);try{My(t,this._stream._responseOrigin)}catch(i){this._storedError=i,this.#n(0)}}#e(t){this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this.onClosed?.()}#n(t){this._storedError??=Ml(t,this._stream.url);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),this.onClosed?.()}}const wS=/^[a-z][a-z0-9\-+.]+:/i;function ES(h){if(wS.test(h))return new URL(h);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(h))}function Oy(h){const{Readable:t}=process.getBuiltinModule("stream");return typeof t.toWeb=="function"?t.toWeb(h):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(h)}function ky(h){return h instanceof Uint8Array?h.buffer:h instanceof ArrayBuffer?h:(pt(`getArrayBuffer - unexpected data format: ${h}`),new Uint8Array(h).buffer)}class xS extends xl{constructor(t){super(t,CS,TS),this.url=ES(t.url),Bt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class CS extends Cl{_reader=null;constructor(t){super(t);const{disableRange:i,disableStream:s,length:a,rangeChunkSize:o}=t._source;this._contentLength=a,this._isStreamingSupported=!s,this._isRangeSupported=!i;const l=t.url,u=process.getBuiltinModule("fs");u.promises.lstat(l).then(d=>{const f=u.createReadStream(l),g=Oy(f);this._reader=g.getReader();const{size:y}=d;y<=2*o&&(this._isRangeSupported=!1),this._contentLength=y,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ln("Streaming is disabled.")),this._headersCapability.resolve()}).catch(d=>{d.code==="ENOENT"&&(d=Ml(0,l.href)),this._headersCapability.reject(d)})}async read(){await this._headersCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:ky(t),done:!1})}cancel(t){this._reader?.cancel(t)}}class TS extends Tl{_readCapability=Promise.withResolvers();_reader=null;constructor(t,i,s){super(t,i,s);const a=t.url,o=process.getBuiltinModule("fs");try{const l=o.createReadStream(a,{start:i,end:s-1}),u=Oy(l);this._reader=u.getReader(),this._readCapability.resolve()}catch(l){this._readCapability.reject(l)}}async read(){await this._readCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:{value:ky(t),done:!1}}cancel(t){this._reader?.cancel(t)}}const or=Symbol("INITIAL_DATA");class Ny{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:or}}get(t,i=null){if(i){const a=this.#e(t);return a.promise.then(()=>i(a.data)),null}const s=this.#t[t];if(!s||s.data===or)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const i=this.#t[t];return!!i&&i.data!==or}delete(t){const i=this.#t[t];return!i||i.data===or?!1:(delete this.#t[t],!0)}resolve(t,i=null){const s=this.#e(t);s.data=i,s.resolve()}clear(){for(const t in this.#t){const{data:i}=this.#t[t];i?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:i}=this.#t[t];i!==or&&(yield[t,i])}}}const _S=1e5,Im=30;class Ze{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#a=null;#r=null;#s=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#m=[];#g=null;#u=[];#p=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#C=new WeakMap;static#E=null;static#S=new Set;constructor({textContentSource:t,container:i,viewport:s}){if(t instanceof ReadableStream)this.#g=t;else if(typeof t=="object")this.#g=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=i,this.#h=s.scale*Di.pixelRatio,this.#d=s.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:o,pageX:l,pageY:u}=s.rawDims;this.#y=[1,0,0,-1,-l,u+o],this.#o=a,this.#s=o,Ze.#R(),i.style.setProperty("--min-font-size",Ze.#E),as(i,s),this.#t.promise.finally(()=>{Ze.#S.delete(this),this.#r=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:i}=pe.platform;return gt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&i?"Calibri, ":""}sans-serif`],["monospace",`${t&&i?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:i,done:s})=>{if(s){this.#t.resolve();return}this.#a??=i.lang,Object.assign(this.#f,i.styles),this.#_(i.items),t()},this.#t.reject)};return this.#c=this.#g.getReader(),Ze.#S.add(this),t(),this.#t.promise}update({viewport:t,onBefore:i=null}){const s=t.scale*Di.pixelRatio,a=t.rotation;if(a!==this.#d&&(i?.(),this.#d=a,as(this.#l,{rotation:a})),s!==this.#h){i?.(),this.#h=s;const o={div:null,properties:null,ctx:Ze.#D(this.#a)};for(const l of this.#u)o.properties=this.#p.get(l),o.div=l,this.#x(o)}}cancel(){const t=new Ln("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#_(t){if(this.#n)return;this.#r.ctx??=Ze.#D(this.#a);const i=this.#u,s=this.#m;for(const a of t){if(i.length>_S){pt("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),a.id&&this.#e.setAttribute("id",`${a.id}`),a.tag==="Artifact"&&(this.#e.ariaHidden=!0),o.append(this.#e)}else a.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(a.str),this.#A(a)}}#A(t){const i=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(i);const a=it.transform(this.#y,t.transform);let o=Math.atan2(a[1],a[0]);const l=this.#f[t.fontName];l.vertical&&(o+=Math.PI/2);let u=this.#i&&l.fontSubstitution||l.fontFamily;u=Ze.fontFamilyMap.get(u)||u;const d=Math.hypot(a[2],a[3]),f=d*Ze.#P(u,l,this.#a);let g,y;o===0?(g=a[4],y=a[5]-f):(g=a[4]+f*Math.sin(o),y=a[5]-f*Math.cos(o));const b=i.style;b.left=`${(100*g/this.#o).toFixed(2)}%`,b.top=`${(100*y/this.#s).toFixed(2)}%`,b.setProperty("--font-height",`${d.toFixed(2)}px`),b.fontFamily=u,s.fontSize=d,i.setAttribute("role","presentation"),i.textContent=t.str,i.dir=t.dir,this.#i&&(i.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),o!==0&&(s.angle=o*(180/Math.PI));let v=!1;if(t.str.length>1)v=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const w=Math.abs(t.transform[0]),S=Math.abs(t.transform[3]);w!==S&&Math.max(w,S)/Math.min(w,S)>1.5&&(v=!0)}if(v&&(s.canvasWidth=l.vertical?t.height:t.width),this.#p.set(i,s),this.#r.div=i,this.#r.properties=s,this.#x(this.#r),s.hasText&&this.#e.append(i),s.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this.#e.append(w)}}#x(t){const{div:i,properties:s,ctx:a}=t,{style:o}=i;if(s.canvasWidth!==0&&s.hasText){const{fontFamily:l}=o,{canvasWidth:u,fontSize:d}=s;Ze.#M(a,d*this.#h,l);const{width:f}=a.measureText(i.textContent);f>0&&o.setProperty("--scale-x",u*this.#h/f)}s.angle!==0&&o.setProperty("--rotate",`${s.angle}deg`)}static cleanup(){if(!(this.#S.size>0)){this.#v.clear();for(const{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#D(t=null){let i=this.#b.get(t||="");if(!i){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),i=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,i),this.#C.set(i,{size:0,family:""})}return i}static#M(t,i,s){const a=this.#C.get(t);i===a.size&&s===a.family||(t.font=`${i}px ${s}`,a.size=i,a.family=s)}static#R(){if(this.#E!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#E=t.getBoundingClientRect().height,t.remove()}static#P(t,i,s){const a=this.#v.get(t);if(a)return a;const o=this.#D(s);o.canvas.width=o.canvas.height=Im,this.#M(o,Im,t);const l=o.measureText(""),u=l.fontBoundingBoxAscent,d=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return u?f=u/(u+d):(pe.platform.isFirefox&&pt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),i.ascent?f=i.ascent:i.descent&&(f=1+i.descent)),this.#v.set(t,f),f}}const MS=100;function Rl(h={}){typeof h=="string"||h instanceof URL?h={url:h}:(h instanceof ArrayBuffer||ArrayBuffer.isView(h))&&(h={data:h});const t=new jh,{docId:i}=t,s=h.url?z1(h.url):null,a=h.data?P1(h.data):null,o=h.httpHeaders||null,l=h.withCredentials===!0,u=h.password??null,d=h.range instanceof By?h.range:null,f=Number.isInteger(h.rangeChunkSize)&&h.rangeChunkSize>0?h.rangeChunkSize:2**16;let g=h.worker instanceof Ar?h.worker:null;const y=h.verbosity,b=typeof h.docBaseUrl=="string"&&!wl(h.docBaseUrl)?h.docBaseUrl:null,v=Ko(h.cMapUrl),w=h.cMapPacked!==!1,S=h.CMapReaderFactory||(Re?X1:Em),x=Ko(h.iccUrl),E=Ko(h.standardFontDataUrl),_=h.StandardFontDataFactory||(Re?Y1:xm),T=Ko(h.wasmUrl),N=h.WasmFactory||(Re?q1:Cm),L=h.stopAtErrors!==!0,B=Number.isInteger(h.maxImageSize)&&h.maxImageSize>-1?h.maxImageSize:-1,F=h.isEvalSupported!==!1,$=typeof h.isOffscreenCanvasSupported=="boolean"?h.isOffscreenCanvasSupported:!Re,W=typeof h.isImageDecoderSupported=="boolean"?h.isImageDecoderSupported:!Re&&(pe.platform.isFirefox||!globalThis.chrome),tt=Number.isInteger(h.canvasMaxAreaInBytes)?h.canvasMaxAreaInBytes:-1,J=typeof h.disableFontFace=="boolean"?h.disableFontFace:Re,dt=h.fontExtraProperties===!0,xt=h.enableXfa===!0,Q=h.ownerDocument||globalThis.document,rt=h.disableRange===!0,k=h.disableStream===!0,j=h.disableAutoFetch===!0,Z=h.pdfBug===!0,mt=h.CanvasFactory||(Re?V1:H1),St=h.FilterFactory||(Re?G1:j1),D=h.enableHWA===!0,V=h.useWasm!==!1,K=d?d.length:h.length??NaN,et=typeof h.useSystemFonts=="boolean"?h.useSystemFonts:!Re&&!J,ct=typeof h.useWorkerFetch=="boolean"?h.useWorkerFetch:!!(S===Em&&_===xm&&N===Cm&&v&&E&&T&&dr(v,document.baseURI)&&dr(E,document.baseURI)&&dr(T,document.baseURI)),ft=null;c1(y);const ut={canvasFactory:new mt({ownerDocument:Q,enableHWA:D}),filterFactory:new St({docId:i,ownerDocument:Q}),cMapReaderFactory:ct?null:new S({baseUrl:v,isCompressed:w}),standardFontDataFactory:ct?null:new _({baseUrl:E}),wasmFactory:ct?null:new N({baseUrl:T})};g||(g=Ar.create({verbosity:y,port:ss.workerPort}),t._worker=g);const ie={docId:i,apiVersion:"5.4.624",data:a,password:u,disableAutoFetch:j,rangeChunkSize:f,length:K,docBaseUrl:b,enableXfa:xt,evaluatorOptions:{maxImageSize:B,disableFontFace:J,ignoreErrors:L,isEvalSupported:F,isOffscreenCanvasSupported:$,isImageDecoderSupported:W,canvasMaxAreaInBytes:tt,fontExtraProperties:dt,useSystemFonts:et,useWasm:V,useWorkerFetch:ct,cMapUrl:v,iccUrl:x,standardFontDataUrl:E,wasmUrl:T}},Gt={ownerDocument:Q,pdfBug:Z,styleElement:ft,enableHWA:D,loadingParams:{disableAutoFetch:j,enableXfa:xt}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const kn=g.messageHandler.sendWithPromise("GetDocRequest",ie,a?[a.buffer]:null);let nn;if(d)nn=new hS({pdfDataRangeTransport:d,disableRange:rt,disableStream:k});else if(!a){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Nn=dr(s)?gS:Re?xS:vS;nn=new Nn({url:s,length:K,httpHeaders:o,withCredentials:l,rangeChunkSize:f,disableRange:rt,disableStream:k})}return kn.then(Nn=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const ca=new fr(i,Nn,g.port),Li=new LS(ca,t,nn,Gt,ut);t._transport=Li,ca.send("Ready",null)})}).catch(t._capability.reject),t}class jh{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${jh.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class By{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#a=[];constructor(t,i,s=!1,a=null){this.length=t,this.initialData=i,this.progressiveDone=s,this.contentDispositionFilename=a}addRangeListener(t){this.#a.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,i){for(const s of this.#a)s(t,i)}onDataProgress(t,i){this.#t.promise.then(()=>{for(const s of this.#i)s(t,i)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const i of this.#n)i(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,i){zt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class RS{constructor(t,i){this._pdfInfo=t,this._transport=i}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return gt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,i){return this._transport.getAnnotationsByType(t,i)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(i)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class DS{#t=!1;#e=kt.instance;constructor(t,i,s,a=!1){this._pageIndex=t,this._pageInfo=i,this._transport=s,this._stats=a?new mm:null,this._pdfBug=a,this.commonObjs=s.commonObjs,this.objs=new Ny,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(t){this._pageIndex=t-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:i=this.rotate,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}={}){return new Tr({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:i,offsetX:s,offsetY:a,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,i)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return gt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:i=t.canvas,viewport:s,intent:a="display",annotationMode:o=Rn.ENABLE,transform:l=null,background:u=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:g=null,printAnnotationStorage:y=null,isEditing:b=!1,recordOperations:v=!1,operationsFilter:w=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(a,o,y,b),{renderingIntent:x,cacheKey:E}=S;this.#t=!1,d||=this._transport.getOptionalContentConfig(x);let _=this._intentStates.get(E);_||(_=Object.create(null),this._intentStates.set(E,_)),_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null);const T=!!(x&Qe.PRINT);_.displayReadyCapability||(_.displayReadyCapability=Promise.withResolvers(),_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const N=!!(this._pdfBug&&globalThis.StepperManager?.enabled),L=!this.recordedBBoxes&&(v||N),B=W=>{if(_.renderTasks.delete(F),L){const tt=F.gfx?.dependencyTracker.take();tt&&(F.stepper&&F.stepper.setOperatorBBoxes(tt,F.gfx.dependencyTracker.takeDebugMetadata()),v&&(this.recordedBBoxes=tt))}T&&(this.#t=!0),this.#n(),W?(F.capability.reject(W),this._abortOperatorList({intentState:_,reason:W instanceof Error?W:new Error(W)})):F.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},F=new ta({callback:B,params:{canvas:i,canvasContext:t,dependencyTracker:L?new W1(i,_.operatorList.length,N):null,viewport:s,transform:l,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:g,enableHWA:this._transport.enableHWA,operationsFilter:w});(_.renderTasks||=new Set).add(F);const $=F.task;return Promise.all([_.displayReadyCapability.promise,d]).then(([W,tt])=>{if(this.destroyed){B();return}if(this._stats?.time("Rendering"),!(tt.renderingIntent&x))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");F.initializeGraphics({transparency:W,optionalContentConfig:tt}),F.operatorListChanged()}).catch(B),$}getOperatorList({intent:t="display",annotationMode:i=Rn.ENABLE,printAnnotationStorage:s=null,isEditing:a=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(t,i,s,a,!0);let u=this._intentStates.get(l.cacheKey);u||(u=Object.create(null),this._intentStates.set(l.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:i=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:this.#e.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:i===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>vr.textContent(s));const i=this.streamTextContent(t);return new Promise(function(s,a){function o(){l.read().then(function({value:d,done:f}){if(f){s(u);return}u.lang??=d.lang,Object.assign(u.styles,d.styles),u.items.push(...d.items),o()},a)}const l=i.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const i of this._intentStates.values())if(this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0}),!i.opListReadCapability)for(const s of i.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const i=this.#n();return t&&i&&(this._stats&&=new mm),i}#n(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,i){const s=this._intentStates.get(i);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,i){for(let s=0,a=t.length;s<a;s++)i.operatorList.fnArray.push(t.fnArray[s]),i.operatorList.argsArray.push(t.argsArray[s]);i.operatorList.lastChunk=t.lastChunk,i.operatorList.separateAnnots=t.separateAnnots;for(const s of i.renderTasks)s.operatorListChanged();t.lastChunk&&this.#n()}_pumpOperatorList({renderingIntent:t,cacheKey:i,annotationStorageSerializable:s,modifiedIds:a}){const{map:o,transfer:l}=s,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:this.#e.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:t,cacheKey:i,annotationStorage:o,modifiedIds:a},l).getReader(),f=this._intentStates.get(i);f.streamReader=d;const g=()=>{d.read().then(({value:y,done:b})=>{if(b){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,f),g())},y=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const b of f.renderTasks)b.operatorListChanged();this.#n()}if(f.displayReadyCapability)f.displayReadyCapability.reject(y);else if(f.opListReadCapability)f.opListReadCapability.reject(y);else throw y}})};g()}_abortOperatorList({intentState:t,reason:i,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(i instanceof Nh){let a=MS;i.extraDelay>0&&i.extraDelay<1e3&&(a+=i.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:i,force:!0})},a);return}}if(t.streamReader.cancel(new Ln(i.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}var Dn,bi,Zi,es,gl,is,ns,De,ol,zy,Py,pr,sa,ll;const Wt=class Wt{constructor({name:t=null,port:i=null,verbosity:s=u1()}={}){Ei(this,De);Ei(this,Dn,Promise.withResolvers());Ei(this,bi,null);Ei(this,Zi,null);Ei(this,es,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,i){if($t(Wt,ns).has(i))throw new Error("Cannot use more than one PDFWorker per port.");$t(Wt,ns).set(i,this),xi(this,De,zy).call(this,i)}else xi(this,De,Py).call(this)}get promise(){return $t(this,Dn).promise}get port(){return $t(this,Zi)}get messageHandler(){return $t(this,bi)}destroy(){this.destroyed=!0,$t(this,es)?.terminate(),Fe(this,es,null),$t(Wt,ns).delete($t(this,Zi)),Fe(this,Zi,null),$t(this,bi)?.destroy(),Fe(this,bi,null)}static create(t){const i=$t(this,ns).get(t?.port);if(i){if(i._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return i}return new Wt(t)}static get workerSrc(){if(ss.workerSrc)return ss.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return gt(this,"_setupFakeWorkerGlobal",(async()=>$t(this,sa,ll)?$t(this,sa,ll):(await import(this.workerSrc)).WorkerMessageHandler)())}};Dn=new WeakMap,bi=new WeakMap,Zi=new WeakMap,es=new WeakMap,gl=new WeakMap,is=new WeakMap,ns=new WeakMap,De=new WeakSet,ol=function(){$t(this,Dn).resolve(),$t(this,bi).send("configure",{verbosity:this.verbosity})},zy=function(t){Fe(this,Zi,t),Fe(this,bi,new fr("main","worker",t)),$t(this,bi).on("ready",()=>{}),xi(this,De,ol).call(this)},Py=function(){if($t(Wt,is)||$t(Wt,sa,ll)){xi(this,De,pr).call(this);return}let{workerSrc:t}=Wt;try{Wt._isSameOrigin(window.location,t)||(t=Wt._createCDNWrapper(new URL(t,window.location).href));const i=new Worker(t,{type:"module"}),s=new fr("main","worker",i),a=()=>{o.abort(),s.destroy(),i.terminate(),this.destroyed?$t(this,Dn).reject(new Error("Worker was destroyed")):xi(this,De,pr).call(this)},o=new AbortController;i.addEventListener("error",()=>{$t(this,es)||a()},{signal:o.signal}),s.on("test",u=>{if(o.abort(),this.destroyed||!u){a();return}Fe(this,bi,s),Fe(this,Zi,i),Fe(this,es,i),xi(this,De,ol).call(this)}),s.on("ready",u=>{if(o.abort(),this.destroyed){a();return}try{l()}catch{xi(this,De,pr).call(this)}});const l=()=>{const u=new Uint8Array;s.send("test",u,[u.buffer])};l();return}catch{Al("The worker has been disabled.")}xi(this,De,pr).call(this)},pr=function(){$t(Wt,is)||(pt("Setting up fake worker."),Fe(Wt,is,!0)),Wt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){$t(this,Dn).reject(new Error("Worker was destroyed"));return}const i=new U1;Fe(this,Zi,i);const s=`fake${Qg(Wt,gl)._++}`,a=new fr(s+"_worker",s,i);t.setup(a,i),Fe(this,bi,new fr(s,s+"_worker",i)),xi(this,De,ol).call(this)}).catch(t=>{$t(this,Dn).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},sa=new WeakSet,ll=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Ei(Wt,sa),Ei(Wt,gl,0),Ei(Wt,is,!1),Ei(Wt,ns,new WeakMap),Re&&(Fe(Wt,is,!0),ss.workerSrc||="./pdf.worker.mjs"),Wt._isSameOrigin=(t,i)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const a=new URL(i,s);return s.origin===a.origin},Wt._createCDNWrapper=t=>{const i=`await import("${t}");`;return URL.createObjectURL(new Blob([i],{type:"text/javascript"}))},Wt.fromPort=t=>{if(w1("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Wt.create(t)};let Ar=Wt;class LS{downloadInfoCapability=Promise.withResolvers();#t=null;#e=new Map;#n=null;#i=new Map;#a=new Map;#r=new Map;#s=null;#o=kt.instance;constructor(t,i,s,a,o){this.messageHandler=t,this.loadingTask=i,this.#n=s,this.commonObjs=new Ny,this.fontLoader=new k1({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.enableHWA=a.enableHWA,this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),this.#o.addListener(this.#c.bind(this))}#c(){const t=new Map,i=new Map;for(let s=0,a=this.#o.pagesNumber;s<a;s++){const o=this.#o.getPrevPageNumber(s+1)-1,l=this.#i.get(o);l&&t.set(s,l);const u=this.#a.get(o);u&&i.set(s,u)}this.#i=t,this.#a=i}#l(t,i=null){const s=this.#e.get(t);if(s)return s;const a=this.messageHandler.sendWithPromise(t,i);return this.#e.set(t,a),a}#d({loaded:t,total:i}){this.loadingTask.onProgress?.({loaded:t,total:i,percent:Ce(Math.round(t/i*100),0,100)})}get annotationStorage(){return gt(this,"annotationStorage",new Fh)}getRenderingIntent(t,i=Rn.ENABLE,s=null,a=!1,o=!1){let l=Qe.DISPLAY,u=Ah;switch(t){case"any":l=Qe.ANY;break;case"display":break;case"print":l=Qe.PRINT;break;default:pt(`getRenderingIntent - invalid intent: ${t}`)}const d=l&Qe.PRINT&&s instanceof vy?s:this.annotationStorage;switch(i){case Rn.DISABLE:l+=Qe.ANNOTATIONS_DISABLE;break;case Rn.ENABLE:break;case Rn.ENABLE_FORMS:l+=Qe.ANNOTATIONS_FORMS;break;case Rn.ENABLE_STORAGE:l+=Qe.ANNOTATIONS_STORAGE,u=d.serializable;break;default:pt(`getRenderingIntent - invalid annotationMode: ${i}`)}a&&(l+=Qe.IS_EDITING),o&&(l+=Qe.OPLIST);const{ids:f,hash:g}=d.modifiedIds,y=[l,u.hash,g];return{renderingIntent:l,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#i.values())t.push(s._destroy());this.#i.clear(),this.#a.clear(),this.#r.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const i=this.messageHandler.sendWithPromise("Terminate",null);return t.push(i),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),Ze.cleanup(),this.#n?.cancelAllRequests(new Ln("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:i}=this;t.on("GetReader",(s,a)=>{Bt(this.#n,"GetReader - no `BasePDFStream` instance available."),this.#t=this.#n.getFullReader(),this.#t.onProgress=o=>this.#d(o),a.onPull=()=>{this.#t.read().then(function({value:o,done:l}){if(l){a.close();return}Bt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this.#t.cancel(o),a.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async s=>{await this.#t.headersReady;const{isStreamingSupported:a,isRangeSupported:o,contentLength:l}=this.#t;return a&&o&&(this.#t.onProgress=null),{isStreamingSupported:a,isRangeSupported:o,contentLength:l}}),t.on("GetRangeReader",(s,a)=>{Bt(this.#n,"GetRangeReader - no `BasePDFStream` instance available.");const o=this.#n.getRangeReader(s.begin,s.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:l,done:u}){if(u){a.close();return}Bt(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{a.error(l)})},a.onCancel=l=>{o.cancel(l),a.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:s})=>{this.#o.pagesNumber=s.numPages,this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,i._capability.resolve(new RS(s,this))}),t.on("DocException",s=>{i._capability.reject(Ie(s))}),t.on("PasswordRequest",s=>{this.#s=Promise.withResolvers();try{if(!i.onPassword)throw Ie(s);const a=o=>{o instanceof Error?this.#s.reject(o):this.#s.resolve({password:o})};i.onPassword(a,s.code)}catch(a){this.#s.reject(a)}return this.#s.promise}),t.on("DataLoaded",s=>{this.#d({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#i.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,a,o])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(a){case"Font":if("error"in o){const y=o.error;pt(`Error during font loading: ${y}`),this.commonObjs.resolve(s,y);break}const l=new jt(o),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(y,b)=>globalThis.FontInspector.fontAdded(y,b):null,d=new N1(l,u,o.extra,o.charProcOperatorList);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:f}=o;Bt(f,"The imageRef must be defined.");for(const y of this.#i.values())for(const[,b]of y.objs)if(b?.ref===f)return b.dataLen?(this.commonObjs.resolve(s,structuredClone(b)),b.dataLen):null;break;case"FontPath":this.commonObjs.resolve(s,new B1(o));break;case"Image":this.commonObjs.resolve(s,o);break;case"Pattern":const g=new ye(o);this.commonObjs.resolve(s,g.getIR());break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([s,a,o,l])=>{if(this.destroyed)return;const u=this.#i.get(a);if(!u.objs.has(s)){if(u._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(s,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",s=>{this.destroyed||this.#d(s)}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[s.type];if(!a)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&pt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this.#t?.filename??null},i).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this.#o.pagesNumber)return Promise.reject(new Error("Invalid page request."));const i=t-1,s=this.#o.getPageId(t)-1,a=this.#a.get(i);if(a)return a;const o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:s}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&this.#r.set(l.refStr,s);const u=new DS(i,l,this,this._params.pdfBug);return this.#i.set(i,u),u});return this.#a.set(i,o),o}async getPageIndex(t){if(!Sh(t))throw new Error("Invalid pageIndex request.");const i=await this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen});return this.#o.getPageNumber(i+1)-1}getAnnotations(t,i){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:this.#o.getPageId(t+1)-1,intent:i})}getFieldObjects(){return this.#l("GetFieldObjects")}hasJSActions(){return this.#l("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,i){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:i})}getDocJSActions(){return this.#l("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:this.#o.getPageId(t+1)-1})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:this.#o.getPageId(t+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#l("GetOptionalContentConfig").then(i=>new uS(i,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",i=this.#e.get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,null).then(a=>({info:a[0],metadata:a[1]?new lS(a[1]):null,contentDispositionFilename:this.#t?.filename??null,contentLength:this.#t?.contentLength??null,hasStructTree:a[2]}));return this.#e.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const i of this.#i.values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),Ze.cleanup()}}cachedPageNumber(t){if(!Sh(t))return null;const i=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`,s=this.#r.get(i);return s>=0?this.#o.getPageNumber(s+1):null}}class OS{_internalRenderTask=null;onContinue=null;onError=null;constructor(t){this._internalRenderTask=t}get promise(){return this._internalRenderTask.capability.promise}cancel(t=0){this._internalRenderTask.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this._internalRenderTask.operatorList;if(!t)return!1;const{annotationCanvasMap:i}=this._internalRenderTask;return t.form||t.canvas&&i?.size>0}}class ta{#t=null;static#e=new WeakSet;constructor({callback:t,params:i,objs:s,commonObjs:a,annotationCanvasMap:o,operatorList:l,pageIndex:u,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:b=null,enableHWA:v=!1,operationsFilter:w=null}){this.callback=t,this.params=i,this.objs=s,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new OS(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvas,this._canvasContext=i.canvas?null:i.canvasContext,this._enableHWA=v,this._dependencyTracker=i.dependencyTracker,this._operationsFilter=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:i}){if(this.cancelled)return;if(this._canvas){if(ta.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ta.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:a,background:o,dependencyTracker:l}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new na(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:a,viewport:s,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,i=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ta.#e.delete(this._canvas),t||=new Nh(`Rendering cancelled, page ${this._pageIndex+1}`,i),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ta.#e.delete(this._canvas),this.callback())))}}const kS="5.4.624",NS="384c6208b";class di{#t=null;#e=null;#n;#i=null;#a=!1;#r=!1;#s=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return gt(this,"_keyboardManager",new Mr([[["Escape","mac+Escape"],di.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],di.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],di.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],di.prototype._moveToPrevious],[["Home","mac+Home"],di.prototype._moveToBeginning],[["End","mac+End"],di.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:i=null}){t?(this.#r=!1,this.#s=t):this.#r=!0,this.#l=t?._uiManager||i,this.#o=this.#l._eventBus,this.#n=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",di.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#s&&(t.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const i=this.#l._signal;t.addEventListener("click",this.#g.bind(this),{signal:i}),t.addEventListener("keydown",this.#m.bind(this),{signal:i});const s=this.#e=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#n,t.append(s),t}renderMainDropdown(){const t=this.#i=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),i=this.#l._signal;t.addEventListener("contextmenu",fi,{signal:i}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(t.id=`${this.#s.id}_colorpicker_dropdown`);for(const[s,a]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",a),o.title=s,o.setAttribute("data-l10n-id",di.#d[s]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=a,o.ariaSelected=a===this.#n,o.addEventListener("click",this.#f.bind(this,a),{signal:i}),t.append(o)}return t.addEventListener("keydown",this.#m.bind(this),{signal:i}),t}#f(t,i){i.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Mt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#g(t);return}const i=t.target.getAttribute("data-color");i&&this.#f(i,t)}_moveToNext(t){if(!this.#p){this.#g(t);return}if(t.target===this.#t){this.#i.firstElementChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstElementChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#g(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#g(t);return}this.#i.firstElementChild?.focus()}_moveToEnd(t){if(!this.#p){this.#g(t);return}this.#i.lastElementChild?.focus()}#m(t){di._keyboardManager.exec(this,t)}#g(t){if(this.#p){this.hideDropdown();return}if(this.#a=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const i=this.#i=this.#h();this.#t.append(i)}#u(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#p){this.#s?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const i=this.#l.highlightColors.values();for(const s of this.#i.children)s.ariaSelected=i.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class Sr{#t=null;#e=null;#n=null;static#i=null;constructor(t){this.#e=t,this.#n=t._uiManager,Sr.#i||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:i,color:s}=this.#e,a=this.#t=document.createElement("input");return a.type="color",a.value=s||"#000000",a.className="basicColorPicker",a.tabIndex=0,a.setAttribute("data-l10n-id",Sr.#i[t]),a.addEventListener("input",()=>{this.#n.updateParams(i,a.value)},{signal:this.#n._signal}),a}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function Um(h){return Math.floor(Math.max(0,Math.min(1,h))*255).toString(16).padStart(2,"0")}function lr(h){return Math.max(0,Math.min(255,255*h))}class Hm{static CMYK_G([t,i,s,a]){return["G",1-Math.min(1,.3*t+.59*s+.11*i+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=lr(t),[t,t,t]}static G_HTML([t]){const i=Um(t);return`#${i}${i}${i}`}static RGB_G([t,i,s]){return["G",.3*t+.59*i+.11*s]}static RGB_rgb(t){return t.map(lr)}static RGB_HTML(t){return`#${t.map(Um).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,i,s,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,s+a),1-Math.min(1,i+a)]}static CMYK_rgb([t,i,s,a]){return[lr(1-Math.min(1,t+a)),lr(1-Math.min(1,s+a)),lr(1-Math.min(1,i+a))]}static CMYK_HTML(t){const i=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(i)}static RGB_CMYK([t,i,s]){const a=1-t,o=1-i,l=1-s,u=Math.min(a,o,l);return["CMYK",a,o,l,u]}}class BS{create(t,i,s=!1){if(t<=0||i<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),s||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${i}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${i}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){zt("Abstract method `_createSVG` called.")}}class dl extends BS{_createSVG(t){return document.createElementNS(Ki,t)}}const zS=9,rs=new WeakSet,PS=new Date().getTimezoneOffset()*60*1e3;class hh{static create(t){switch(t.data.annotationType){case he.LINK:return new Gh(t);case he.TEXT:return new IS(t);case he.WIDGET:switch(t.data.fieldType){case"Tx":return new US(t);case"Btn":return t.data.radioButton?new Fy(t):t.data.checkBox?new jS(t):new GS(t);case"Ch":return new VS(t);case"Sig":return new HS(t)}return new cs(t);case he.POPUP:return new xh(t);case he.FREETEXT:return new Iy(t);case he.LINE:return new YS(t);case he.SQUARE:return new qS(t);case he.CIRCLE:return new $S(t);case he.POLYLINE:return new Uy(t);case he.CARET:return new KS(t);case he.INK:return new Vh(t);case he.POLYGON:return new WS(t);case he.HIGHLIGHT:return new Hy(t);case he.UNDERLINE:return new QS(t);case he.SQUIGGLY:return new ZS(t);case he.STRIKEOUT:return new JS(t);case he.STAMP:return new jy(t);case he.FILEATTACHMENT:return new tw(t);default:return new Zt(t)}}}class Zt{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:i=!1,ignoreBorder:s=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=i,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,i&&(this.contentElement=this.container=this._createContainer(s)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:i}){return!!(t?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Zt._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,i=this.annotationStorage?.getEditor(t.id);return i?i.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:i,inkLists:s,rect:a}=this.data;let o=-1/0,l=-1/0;if(i?.length>=8){for(let u=0;u<i.length;u+=8)i[u+1]>l?(l=i[u+1],o=i[u+2]):i[u+1]===l&&(o=Math.max(o,i[u+2]));return[o,l]}if(s?.length>=1){for(const u of s)for(let d=0,f=u.length;d<f;d+=2)u[d+1]>l?(l=u[d+1],o=u[d]):u[d+1]===l&&(o=Math.max(o,u[d]));if(o!==1/0)return[o,l]}return a?[a[2],a[3]]:null}_normalizePoint(t){const{page:{view:i},viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}}=this.parent;return t[1]=i[3]-t[1]+i[1],t[0]=100*(t[0]-o)/s,t[1]=100*(t[1]-l)/a,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${yr}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:i}=this,s={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(i.id,{popup:s})||this.annotationStorage.setValue(`${yr}${i.id}`,{id:i.id,annotationType:i.annotationType,page:this.parent.page,popup:s,popupRef:i.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#n?.popup||this.popup)?.remove(),this.#n=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:i,popup:s}=t;i&&this.#i(i);let a=this.#n?.popup||this.popup;!a&&s?.text&&(this._createPopup(s),a=this.#n.popup),a&&(a.updateEdited(t),s?.deleted&&(a.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:i},data:{rect:s,rotation:a},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:u,pageY:d}}}}=this;s?.splice(0,4,...t),i.left=`${100*(t[0]-u)/o}%`,i.top=`${100*(l-t[3]+d)/l}%`,a===0?(i.width=`${100*(t[2]-t[0])/o}%`,i.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(a)}_createContainer(t){const{data:i,parent:{page:s,viewport:a}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",i.id),!(this instanceof cs)&&!(this instanceof Gh)&&(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,i.alternativeText&&(o.title=i.alternativeText),i.noRotate&&o.classList.add("norotate"),!i.rect||this instanceof xh){const{rotation:S}=i;return!i.hasOwnCanvas&&S!==0&&this.setRotation(S,o),o}const{width:u,height:d}=this;if(!t&&i.borderStyle.width>0){l.borderWidth=`${i.borderStyle.width}px`;const S=i.borderStyle.horizontalCornerRadius,x=i.borderStyle.verticalCornerRadius;if(S>0||x>0){const _=`calc(${S}px * var(--total-scale-factor)) / calc(${x}px * var(--total-scale-factor))`;l.borderRadius=_}else if(this instanceof Fy){const _=`calc(${u}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;l.borderRadius=_}switch(i.borderStyle.style){case Ws.SOLID:l.borderStyle="solid";break;case Ws.DASHED:l.borderStyle="dashed";break;case Ws.BEVELED:pt("Unimplemented border style: beveled");break;case Ws.INSET:pt("Unimplemented border style: inset");break;case Ws.UNDERLINE:l.borderBottomStyle="solid";break}const E=i.borderColor||null;E?(this.#e=!0,l.borderColor=it.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):l.borderWidth=0}const f=it.normalizeRect([i.rect[0],s.view[3]-i.rect[1]+s.view[1],i.rect[2],s.view[3]-i.rect[3]+s.view[1]]),{pageWidth:g,pageHeight:y,pageX:b,pageY:v}=a.rawDims;l.left=`${100*(f[0]-b)/g}%`,l.top=`${100*(f[1]-v)/y}%`;const{rotation:w}=i;return i.hasOwnCanvas||w===0?(l.width=`${100*u/g}%`,l.height=`${100*d/y}%`):this.setRotation(w,o),o}setRotation(t,i=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:a}=this.parent.viewport.rawDims;let{width:o,height:l}=this;t%180!==0&&([o,l]=[l,o]),i.style.width=`${100*o/s}%`,i.style.height=`${100*l/a}%`,i.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(i,s,a)=>{const o=a.detail[i],l=o[0],u=o.slice(1);a.target.style[s]=Hm[`${l}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[s]:Hm[`${l}_rgb`](u)})};return gt(this,"_commonActions",{display:i=>{const{display:s}=i.detail,a=s%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:s===1||s===2})},print:i=>{this.annotationStorage.setValue(this.data.id,{noPrint:!i.detail.print})},hidden:i=>{const{hidden:s}=i.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:i=>{setTimeout(()=>i.target.focus({preventScroll:!1}),0)},userName:i=>{i.target.title=i.detail.userName},readonly:i=>{i.target.disabled=i.detail.readonly},required:i=>{this._setRequired(i.target,i.detail.required)},bgColor:i=>{t("bgColor","backgroundColor",i)},fillColor:i=>{t("fillColor","backgroundColor",i)},fgColor:i=>{t("fgColor","color",i)},textColor:i=>{t("textColor","color",i)},borderColor:i=>{t("borderColor","borderColor",i)},strokeColor:i=>{t("strokeColor","borderColor",i)},rotation:i=>{const s=i.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,i){const s=this._commonActions;for(const a of Object.keys(i.detail))(t[a]||s[a])?.(i)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const i=this.annotationStorage.getRawValue(this.data.id);if(!i)return;const s=this._commonActions;for(const[a,o]of Object.entries(i)){const l=s[a];if(l){const u={detail:{[a]:o},target:t};l(u),delete i[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[i,s,a,o]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,x,E,_]=t.subarray(2,6);if(a===S&&o===x&&i===E&&s===_)return}const{style:l}=this.container;let u;if(this.#e){const{borderColor:S,borderWidth:x}=l;l.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const d=a-i,f=o-s,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const b=g.createElement("defs");y.append(b);const v=g.createElement("clipPath"),w=`clippath_${this.data.id}`;v.setAttribute("id",w),v.setAttribute("clipPathUnits","objectBoundingBox"),b.append(v);for(let S=2,x=t.length;S<x;S+=8){const E=t[S],_=t[S+1],T=t[S+2],N=t[S+3],L=g.createElement("rect"),B=(T-i)/d,F=(o-_)/f,$=(E-T)/d,W=(_-N)/f;L.setAttribute("x",B),L.setAttribute("y",F),L.setAttribute("width",$),L.setAttribute("height",W),v.append(L),u?.push(`<rect vector-effect="non-scaling-stroke" x="${B}" y="${F}" width="${$}" height="${W}"/>`)}this.#e&&(u.push("</g></svg>')"),l.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${w})`}_createPopup(t=null){const{data:i}=this;let s,a;t?(s={str:t.text},a=t.date):(s=i.contentsObj,a=i.modificationDate),this.#n=new xh({data:{color:i.color,titleObj:i.titleObj,modificationDate:a,contentsObj:s,richText:i.richText,parentRect:i.rect,borderStyle:0,id:`popup_${i.id}`,rotation:i.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#n}render(){zt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,i=null){const s=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:o,id:l,exportValues:u}of a){if(o===-1||l===i)continue;const d=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!rs.has(f)){pt(`_getElementsByName - element not allowed: ${l}`);continue}s.push({id:l,exportValue:d,domElement:f})}return s}for(const a of document.getElementsByName(t)){const{exportValue:o}=a,l=a.getAttribute("data-element-id");l!==i&&rs.has(a)&&s.push({id:l,exportValue:o,domElement:a})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const i of t)i.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:i}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:i,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class FS extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class Gh extends Zt{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!i?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let a=!1;return t.url?(i.addLinkAttributes(s,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),a=!0):t.attachment?(this.#e(s,t.attachment,t.overlaidText,t.attachmentDest),a=!0):t.setOCGState?(this.#n(s,t.setOCGState,t.overlaidText),a=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),a=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(s,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&(this.contentElement=s,this.container.append(s)),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,i,s=""){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&this.#t(),s&&(t.title=s)}_bindNamedAction(t,i,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),s&&(t.title=s),this.#t()}#e(t,i,s="",a=null){t.href=this.linkService.getAnchorUrl(""),i.description?t.title=i.description:s&&(t.title=s),t.onclick=()=>(this.downloadManager?.openOrDownloadData(i.content,i.filename,a),!1),this.#t()}#n(t,i,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),s&&(t.title=s),this.#t()}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(i.actions)){const o=s.get(a);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:a}}),!1))}i.overlaidText&&(t.title=i.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,i){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){pt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:a,refs:o,include:l}=i,u=[];if(a.length!==0||o.length!==0){const g=new Set(o);for(const y of a){const b=this._fieldObjects[y]||[];for(const{id:v}of b)g.add(v)}for(const y of Object.values(this._fieldObjects))for(const b of y)g.has(b.id)===l&&u.push(b)}else for(const g of Object.values(this._fieldObjects))u.push(...g);const d=this.annotationStorage,f=[];for(const g of u){const{id:y}=g;switch(f.push(y),g.type){case"text":{const v=g.defaultValue||"";d.setValue(y,{value:v});break}case"checkbox":case"radiobutton":{const v=g.defaultValue===g.exportValues;d.setValue(y,{value:v});break}case"combobox":case"listbox":{const v=g.defaultValue||"";d.setValue(y,{value:v});break}default:continue}const b=document.querySelector(`[data-element-id="${y}"]`);if(b){if(!rs.has(b)){pt(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class IS extends Zt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class cs extends Zt{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return pe.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,i,s,a,o){s.includes("mouse")?t.addEventListener(s,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(s,l=>{if(s==="blur"){if(!i.focused||!l.relatedTarget)return;i.focused=!1}else if(s==="focus"){if(i.focused)return;i.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l)}})})}_setEventListeners(t,i,s,a){for(const[o,l]of s)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(i||={focused:!1}),this._setEventListener(t,i,o,l,a),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,i,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,i,"focus","Focus",null))}_setBackgroundColor(t){const i=this.data.backgroundColor||null;t.style.backgroundColor=i===null?"transparent":it.makeHexColor(i[0],i[1],i[2])}_setTextStyle(t){const i=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||zS,o=t.style;let l;const u=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),g=Math.round(f/(sh*a))||1,y=f/g;l=Math.min(a,d(y/sh))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);l=Math.min(a,d(f/sh))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=it.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(o.textAlign=i[this.data.textAlignment])}_setRequired(t,i){i?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",i)}}class US extends cs{constructor(t){const i=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:i})}setPropertyOnSiblings(t,i,s,a){const o=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[i]=s),o.setValue(l.id,{[a]:s})}render(){const t=this.annotationStorage,i=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const a=t.getValue(i,{value:this.data.fieldValue});let o=a.value||"";const l=t.getValue(i,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=a.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),rs.add(s),this.contentElement=s,s.setAttribute("data-element-id",i),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:f,datetimeType:g,timeStep:y}=this.data,b=!!g&&this.enableScripting;f&&(s.title=f),this._setRequired(s,this.data.required),l&&(s.maxLength=l),s.addEventListener("input",w=>{t.setValue(i,{value:w.target.value}),this.setPropertyOnSiblings(s,"value",w.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",w=>{const S=this.data.defaultFieldValue??"";s.value=d.userValue=S,d.formattedValue=null});let v=w=>{const{formattedValue:S}=d;S!=null&&(w.target.value=S),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",S=>{if(d.focused)return;const{target:x}=S;if(b&&(x.type=g,y&&(x.step=y)),d.userValue){const E=d.userValue;if(b)if(g==="time"){const _=new Date(E),T=[_.getHours(),_.getMinutes(),_.getSeconds()];x.value=T.map(N=>N.toString().padStart(2,"0")).join(":")}else x.value=new Date(E-PS).toISOString().split(g==="date"?"T":".",1)[0];else x.value=E}d.lastCommittedValue=x.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const x={value(E){d.userValue=E.detail.value??"",b||t.setValue(i,{value:d.userValue.toString()}),E.target.value=d.userValue},formattedValue(E){const{formattedValue:_}=E.detail;d.formattedValue=_,_!=null&&E.target!==document.activeElement&&(E.target.value=_);const T={formattedValue:_};b&&(T.value=_),t.setValue(i,T)},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{const{charLimit:_}=E.detail,{target:T}=E;if(_===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",_);let N=d.userValue;!N||N.length<=_||(N=N.slice(0,_),T.value=d.userValue=N,t.setValue(i,{value:N}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:N,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(x,S)}),s.addEventListener("keydown",S=>{d.commitKey=1;let x=-1;if(S.key==="Escape"?x=0:S.key==="Enter"&&!this.data.multiLine?x=2:S.key==="Tab"&&(d.commitKey=3),x===-1)return;const{value:E}=S.target;d.lastCommittedValue!==E&&(d.lastCommittedValue=E,d.userValue=E,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:E,willCommit:!0,commitKey:x,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const w=v;v=null,s.addEventListener("blur",S=>{if(!d.focused||!S.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:x}=S;let{value:E}=x;if(b){if(E&&g==="time"){const _=E.split(":").map(T=>parseInt(T,10));E=new Date(2e3,0,1,_[0],_[1],_[2]||0).valueOf(),x.step=""}else E.includes("T")||(E=`${E}T00:00`),E=new Date(E).valueOf();x.type="text"}d.userValue=E,d.lastCommittedValue!==E&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:E,willCommit:!0,commitKey:d.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),w(S)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",S=>{d.lastCommittedValue=null;const{data:x,target:E}=S,{value:_,selectionStart:T,selectionEnd:N}=E;let L=T,B=N;switch(S.inputType){case"deleteWordBackward":{const F=_.substring(0,T).match(/\w*[^\w]*$/);F&&(L-=F[0].length);break}case"deleteWordForward":{const F=_.substring(T).match(/^[^\w]*\w*/);F&&(B+=F[0].length);break}case"deleteContentBackward":T===N&&(L-=1);break;case"deleteContentForward":T===N&&(B+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:_,change:x||"",willCommit:!1,selStart:L,selEnd:B}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(v&&s.addEventListener("blur",v),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/l;s.classList.add("comb"),s.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class HS extends cs{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class jS extends cs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,i=this.data,s=i.id;let a=t.getValue(s,{value:i.exportValue===i.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(s,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return rs.add(o),o.setAttribute("data-element-id",s),o.disabled=i.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=i.fieldName,a&&o.setAttribute("checked",!0),o.setAttribute("exportValue",i.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const f of this._getElementsByName(u,s)){const g=d&&f.exportValue===i.exportValue;f.domElement&&(f.domElement.checked=g),t.setValue(f.id,{value:g})}t.setValue(s,{value:d})}),o.addEventListener("resetform",l=>{const u=i.defaultFieldValue||"Off";l.target.checked=u===i.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(s,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Fy extends cs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,i=this.data,s=i.id;let a=t.getValue(s,{value:i.fieldValue===i.buttonValue}).value;if(typeof a=="string"&&(a=a!==i.buttonValue,t.setValue(s,{value:a})),a)for(const l of this._getElementsByName(i.fieldName,s))t.setValue(l.id,{value:!1});const o=document.createElement("input");if(rs.add(o),o.setAttribute("data-element-id",s),o.disabled=i.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=i.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const f of this._getElementsByName(u,s))t.setValue(f.id,{value:!1});t.setValue(s,{value:d})}),o.addEventListener("resetform",l=>{const u=i.defaultFieldValue;l.target.checked=u!=null&&u===i.buttonValue}),this.enableScripting&&this.hasJSActions){const l=i.buttonValue;o.addEventListener("updatefromsandbox",u=>{const d={value:f=>{const g=l===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const b=g&&y.id===s;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class GS extends Gh{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const i=t.lastChild;return this.enableScripting&&this.hasJSActions&&i&&(this._setDefaultPropertiesFromJS(i),i.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class VS extends cs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,i=this.data.id,s=t.getValue(i,{value:this.data.fieldValue}),a=document.createElement("select");rs.add(a),a.setAttribute("data-element-id",i),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const b of a.options)b.selected=b.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,s.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),o=!1),a.append(y)}let l=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),a.prepend(g),l=()=>{g.remove(),a.removeEventListener("input",l),l=null},a.addEventListener("input",l)}const u=g=>{const y=g?"value":"textContent",{options:b,multiple:v}=a;return v?Array.prototype.filter.call(b,w=>w.selected).map(w=>w[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let d=u(!1);const f=g=>{const y=g.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",g=>{const y={value(b){l?.();const v=b.detail.value,w=new Set(Array.isArray(v)?v:[v]);for(const S of a.options)S.selected=w.has(S.value);t.setValue(i,{value:u(!0)}),d=u(!1)},multipleSelection(b){a.multiple=!0},remove(b){const v=a.options,w=b.detail.remove;v[w].selected=!1,a.remove(w),v.length>0&&Array.prototype.findIndex.call(v,x=>x.selected)===-1&&(v[0].selected=!0),t.setValue(i,{value:u(!0),items:f(b)}),d=u(!1)},clear(b){for(;a.length!==0;)a.remove(0);t.setValue(i,{value:null,items:[]}),d=u(!1)},insert(b){const{index:v,displayValue:w,exportValue:S}=b.detail.insert,x=a.children[v],E=document.createElement("option");E.textContent=w,E.value=S,x?x.before(E):a.append(E),t.setValue(i,{value:u(!0),items:f(b)}),d=u(!1)},items(b){const{items:v}=b.detail;for(;a.length!==0;)a.remove(0);for(const w of v){const{displayValue:S,exportValue:x}=w,E=document.createElement("option");E.textContent=S,E.value=x,a.append(E)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(i,{value:u(!0),items:f(b)}),d=u(!1)},indices(b){const v=new Set(b.detail.indices);for(const w of b.target.options)w.selected=v.has(w.index);t.setValue(i,{value:u(!0)}),d=u(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,g)}),a.addEventListener("input",g=>{const y=u(!0),b=u(!1);t.setValue(i,{value:y}),g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:d,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):a.addEventListener("input",function(g){t.setValue(i,{value:u(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class xh extends Zt{constructor(t){const{data:i,elements:s,parent:a}=t,o=!!a._commentManager;if(super(t,{isRenderable:!o&&Zt._hasPopupData(i)}),this.elements=s,o&&Zt._hasPopupData(i)){const l=this.popup=this.#t();for(const u of s)u.popup=l}else this.popup=null}#t(){return new XS({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const i=this.popup=this.#t(),s=[];for(const a of this.elements)a.popup=i,a.container.ariaHasPopup="dialog",s.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(a=>`${Zs}${a}`).join(",")),this.container}}class XS{#t=null;#e=this.#V.bind(this);#n=this.#I.bind(this);#i=this.#k.bind(this);#a=this.#w.bind(this);#r=null;#s=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#m=null;#g=null;#u=null;#p=null;#y=null;#v=null;#b=null;#C=null;#E=null;#S=null;#_=!1;#A=null;#x=null;constructor({container:t,color:i,elements:s,titleObj:a,modificationDate:o,contentsObj:l,richText:u,parent:d,rect:f,parentRect:g,open:y,commentManager:b=null}){this.#s=t,this.#E=a,this.#o=l,this.#C=u,this.#d=d,this.#r=i,this.#b=f,this.#h=g,this.#l=s,this.#t=b,this.#A=s[0],this.#c=yh.toDateObject(o),this.trigger=s.flatMap(v=>v.getElementsToTriggerPopup()),b||(this.#D(),this.#s.hidden=!0,y&&this.#w())}#D(){if(this.#g)return;this.#g=new AbortController;const{signal:t}=this.#g;for(const i of this.trigger)i.addEventListener("click",this.#a,{signal:t}),i.addEventListener("pointerenter",this.#i,{signal:t}),i.addEventListener("pointerleave",this.#n,{signal:t}),i.classList.add("popupTriggerArea");for(const i of this.#l)i.container?.addEventListener("keydown",this.#e,{signal:t})}#M(){const t=this.#l.find(i=>i.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#p){this.#p.parentNode||this.#A.container.after(this.#p);return}if(this.#y||this.#M(),!this.#y)return;const{signal:t}=this.#g=new AbortController,i=this.#A.hasOwnCommentButton,s=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!i)},a=()=>{this.#t.toggleCommentPopup(this,!1,!0,!i)},o=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(i){this.#p=this.#A.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",s,{signal:t}),l.addEventListener("pointerenter",a,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),l.classList.add("popupTriggerArea")}else{const l=this.#p=document.createElement("button");l.className="annotationCommentButton";const u=this.#A.container;l.style.zIndex=u.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#P(),this.#R(),l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",s,{signal:t}),l.addEventListener("pointerenter",a,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),u.after(l)}}#R(){if(this.#A.extraPopupElement&&!this.#A.editor)return;this.#p||this.renderCommentButton();const[t,i]=this.#y,{style:s}=this.#p;s.left=`calc(${t}%)`,s.top=`calc(${i}% - var(--comment-button-dim))`}#P(){this.#A.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:i}=this.#A.commentData;return t?this.#d._commentManager.makeCommentColor(t,i):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:t,color:i,opacity:s,creationDate:a,modificationDate:o}=this.#A.commentData;return{contentsObj:{str:this.comment},richText:t,color:i,opacity:s,creationDate:a,modificationDate:o}}get elementBeforePopup(){return this.#p}get comment(){return this.#x||=this.#A.commentText,this.#x}set comment(t){t!==this.comment&&(this.#A.commentText=this.#x=t)}focus(){this.#A.container?.focus()}get parentBoundingClientRect(){return this.#A.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:i}){this.#p&&(this.#p.classList.toggle("selected",t),this.#p.ariaExpanded=i)}setSelectedCommentButton(t){this.#p.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:i,height:s}=this.#p.getBoundingClientRect(),{x:a,y:o,width:l,height:u}=this.#A.layer.getBoundingClientRect();return[(t-a)/l,(i+s-o)/u]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[i,s]=this.#v||this.commentButtonPosition.map(f=>f/100),a=this.parentBoundingClientRect,{x:o,y:l,width:u,height:d}=a;this.#t.showDialog(null,this,o+i*u,l+s*d,{...t,parentDimensions:a})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#r){const s=t.style.outlineColor=it.makeHexColor(...this.#r);t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const i=document.createElement("span");if(i.className="header",this.#E?.str){const s=document.createElement("span");s.className="title",i.append(s),{dir:s.dir,str:s.textContent}=this.#E}if(t.append(i),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),i.append(s)}gy({html:this.#O||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#s.append(t)}get#O(){const t=this.#C,i=this.#o;return t?.str&&(!i?.str||i.str===t.str)&&this.#C.html||null}get#N(){return this.#O?.attributes?.style?.fontSize||0}get#F(){return this.#O?.attributes?.style?.color||null}#B(t){const i=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:i}]}},a={style:{color:this.#F,fontSize:this.#N?`calc(${this.#N}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))i.push({name:"span",value:o,attributes:a});return s}#V(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#w()}updateEdited({rect:t,popup:i,deleted:s}){if(this.#t){s?(this.remove(),this.#x=null):i&&(i.deleted?this.remove():(this.#P(),this.#x=i.text)),t&&(this.#y=null,this.#M(),this.#R());return}if(s||i?.deleted){this.remove();return}this.#D(),this.#S||={contentsObj:this.#o,richText:this.#C},t&&(this.#u=null),i&&i.text&&(this.#C=this.#B(i.text),this.#c=yh.toDateObject(i.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#S&&({contentsObj:this.#o,richText:this.#C}=this.#S,this.#S=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#g?.abort(),this.#g=null,this.#m?.remove(),this.#m=null,this.#_=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#T(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:i,pageHeight:s,pageX:a,pageY:o}}}=this.#d;let l=!!this.#h,u=l?this.#h:this.#b;for(const w of this.#l)if(!u||it.intersect(w.data.rect,u)!==null){u=w.data.rect,l=!0;break}const d=it.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),g=l?u[2]-u[0]+5:0,y=d[0]+g,b=d[1];this.#u=[100*(y-a)/i,100*(b-o)/s];const{style:v}=this.#s;v.left=`${this.#u[0]}%`,v.top=`${this.#u[1]}%`}#w(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#k(),this.#s.addEventListener("click",this.#a),this.#s.addEventListener("keydown",this.#e)):(this.#I(),this.#s.removeEventListener("click",this.#a),this.#s.removeEventListener("keydown",this.#e))}#k(){this.#m||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#T(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#I(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#_=this.isVisible,this.#_&&(this.#s.hidden=!0)}maybeShow(){this.#t||(this.#D(),this.#_&&(this.#m||this.#k(),this.#_=!1,this.#s.hidden=!1))}get isVisible(){return this.#t?!1:this.#s.hidden===!1}}class Iy extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=bt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const i of this.textContent){const s=document.createElement("span");s.textContent=i,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class YS extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:i,height:s}=this,a=this.svgFactory.create(i,s,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class qS extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:i,height:s}=this,a=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",i-o),l.setAttribute("height",s-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class $S extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:i,height:s}=this,a=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",i/2),l.setAttribute("cy",s/2),l.setAttribute("rx",i/2-o/2),l.setAttribute("ry",s/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Uy extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:s,popupRef:a},width:o,height:l}=this;if(!i)return this.container;const u=this.svgFactory.create(o,l,!0);let d=[];for(let g=0,y=i.length;g<y;g+=2){const b=i[g]-t[0],v=t[3]-i[g+1];d.push(`${b},${v}`)}d=d.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",d),f.setAttribute("stroke-width",s.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class WS extends Uy{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class KS extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class Vh extends Zt{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?bt.HIGHLIGHT:bt.INK}#n(t,i){switch(t){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:i,inkLists:s,borderStyle:a,popupRef:o}}=this,{transform:l,width:u,height:d}=this.#n(i,t),f=this.svgFactory.create(u,d,!0),g=this.#t=this.svgFactory.createElement("svg:g");f.append(g),g.setAttribute("stroke-width",a.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",l);for(let y=0,b=s.length;y<b;y++){const v=this.svgFactory.createElement(this.svgElementName);this.#e.push(v),v.setAttribute("points",s[y].join(",")),g.append(v)}return!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:i,points:s,rect:a}=t,o=this.#t;if(i>=0&&o.setAttribute("stroke-width",i||1),s)for(let l=0,u=this.#e.length;l<u;l++)this.#e[l].setAttribute("points",s[l].join(","));if(a){const{transform:l,width:u,height:d}=this.#n(this.data.rotation,a);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${d}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Hy extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=bt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class QS extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class ZS extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class JS extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class jy extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=bt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class tw extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:i}=this.data;this.filename=i.filename,this.content=i.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:a}=pe.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(a?o.metaKey:o.ctrlKey)&&this.#e()}),!i.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Xh{#t=null;#e=null;#n=null;#i=new Map;#a=null;#r=null;#s=[];#o=!1;constructor({div:t,accessibilityManager:i,annotationCanvasMap:s,annotationEditorUIManager:a,page:o,viewport:l,structTreeLayer:u,commentManager:d,linkService:f,annotationStorage:g}){this.div=t,this.#t=i,this.#e=s,this.#a=u||null,this.#r=f||null,this.#n=g||new Fh,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=a,this._commentManager=d||null}hasEditableAnnotations(){return this.#i.size>0}async render(t){const{annotations:i}=t,s=this.div;as(s,this.viewport);const a=new Map,o=[],l={data:null,layer:s,linkService:this.#r,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new dl,annotationStorage:this.#n,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of i){if(u.noHTML)continue;const d=u.annotationType===he.POPUP;if(d){const y=a.get(u.id);if(!y)continue;if(!this._commentManager){o.push(u);continue}l.elements=y}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;l.data=u;const f=hh.create(l);if(!f.isRenderable)continue;if(!d&&(this.#s.push(f),u.popupRef)){const y=a.get(u.popupRef);y?y.push(f):a.set(u.popupRef,[f])}const g=f.render();u.hidden&&(g.style.visibility="hidden"),f._isEditable&&(this.#i.set(f.data.id,f),this._annotationEditorUIManager?.renderAnnotationElement(f))}await this.#c();for(const u of o){const d=l.elements=a.get(u.id);l.data=u;const f=hh.create(l);if(!f.isRenderable)continue;const g=f.render();f.contentElement.id=`${Zs}${u.id}`,u.hidden&&(g.style.visibility="hidden"),d.at(-1).container.after(g)}this.#l()}async#c(){if(this.#s.length===0)return;this.div.replaceChildren();const t=[];if(!this.#o){this.#o=!0;for(const{contentElement:s,data:{id:a}}of this.#s){const o=s.id=`${Zs}${a}`;t.push(this.#a?.getAriaAttributes(o).then(l=>{if(l)for(const[u,d]of l)s.setAttribute(u,d)}))}}this.#s.sort(({data:{rect:[s,a,o,l]}},{data:{rect:[u,d,f,g]}})=>{if(s===o&&a===l)return 1;if(u===f&&d===g)return-1;const y=l,b=a,v=(a+l)/2,w=g,S=d,x=(d+g)/2;if(v>=w&&x<=b)return-1;if(x>=y&&v<=S)return 1;const E=(s+o)/2,_=(u+f)/2;return E-_});const i=document.createDocumentFragment();for(const s of this.#s)i.append(s.container),this._commentManager?(s.extraPopupElement?.popup||s.popup)?.renderCommentButton():s.extraPopupElement&&i.append(s.extraPopupElement.render());if(this.div.append(i),await Promise.all(t),this.#t)for(const s of this.#s)this.#t.addPointerInTextLayer(s.contentElement,!1)}async addLinkAnnotations(t){const i={data:null,layer:this.div,linkService:this.#r,svgFactory:new dl,parent:this};for(const s of t){s.borderStyle||=Xh._defaultBorderStyle,i.data=s;const a=hh.create(i);a.isRenderable&&(a.render(),a.contentElement.id=`${Zs}${s.id}`,this.#s.push(a))}await this.#c()}update({viewport:t}){const i=this.div;this.viewport=t,as(i,{rotation:t.rotation}),this.#l(),i.hidden=!1}#l(){if(!this.#e)return;const t=this.div;for(const[i,s]of this.#e){const a=t.querySelector(`[data-annotation-id="${i}"]`);if(!a)continue;s.className="annotationContent";const{firstChild:o}=a;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):a.append(s);const l=this.#i.get(i);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(i,a.id,s),l._hasNoCanvas=!1):l.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}addFakeAnnotation(t){const{div:i}=this,{id:s,rotation:a}=t,o=new FS({data:{id:s,rect:t.getPDFRect(),rotation:a},editor:t,layer:i,parent:this,enableComment:!!this._commentManager,linkService:this.#r,annotationStorage:this.#n});return o.render(),o.contentElement.id=`${Zs}${s}`,o.createOrUpdatePopup(),this.#s.push(o),o}removeAnnotation(t){const i=this.#s.findIndex(a=>a.data.id===t);if(i<0)return;const[s]=this.#s.splice(i,1);this.#t?.removePointerInTextLayer(s.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const i of t)i.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return gt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Ws.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const il=/\r\n?|\n/g;class be extends lt{#t="";#e=`${this.id}-editor`;#n=null;#i;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=be.prototype,i=o=>o.isEmpty(),s=On.TRANSLATE_SMALL,a=On.TRANSLATE_BIG;return gt(this,"_keyboardManager",new Mr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:i}]]))}static _type="freetext";static _editorType=bt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||be._defaultColor||lt._defaultLineColor,this.#i=t.fontSize||be._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(t,i){lt.initialize(t,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case Mt.FREETEXT_SIZE:be._defaultFontSize=i;break;case Mt.FREETEXT_COLOR:be._defaultColor=i;break}}updateParams(t,i){switch(t){case Mt.FREETEXT_SIZE:this.#a(i);break;case Mt.FREETEXT_COLOR:this.#r(i);break}}static get defaultPropertiesToUpdate(){return[[Mt.FREETEXT_SIZE,be._defaultFontSize],[Mt.FREETEXT_COLOR,be._defaultColor||lt._defaultLineColor]]}get propertiesToUpdate(){return[[Mt.FREETEXT_SIZE,this.#i],[Mt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Sr(this),[["colorPicker",this._colorPicker]]}get colorType(){return Mt.FREETEXT_COLOR}#a(t){const i=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#i)*this.parentScale),this.#i=a,this.#o()},s=this.#i;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#r(t){const i=a=>{this.color=a,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-be._internalPadding*t,-(be._internalPadding+this.#i)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const t=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const t=[];this.editorDiv.normalize();let i=null;for(const s of this.editorDiv.childNodes)i?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(be.#c(s)),i=s);return t.join(`
`)}#o(){const[t,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:a,div:o}=this,l=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",a.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/i):(this.width=s.height/t,this.height=s.width/i),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,i=this.#t=this.#s().trimEnd();if(t===i)return;const s=a=>{if(this.#t=a,!a){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){be._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,i;(this._isCopy||this.annotationElementId)&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[u,d]=this.getInitialTranslation();[u,d]=this.pageTranslationToScreen(u,d);const[f,g]=this.pageDimensions,[y,b]=this.pageTranslation;let v,w;switch(this.rotation){case 0:v=t+(l[0]-y)/f,w=i+this.height-(l[1]-b)/g;break;case 90:v=t+(l[0]-y)/f,w=i-(l[1]-b)/g,[u,d]=[d,-u];break;case 180:v=t-this.width+(l[0]-y)/f,w=i-(l[1]-b)/g,[u,d]=[-u,-d];break;case 270:v=t+(l[0]-y-this.height*g)/f,w=i+(l[1]-b-this.width*f)/g,[u,d]=[-d,u];break}this.setAt(v*a,w*o,u,d)}else this._moveAfterPaste(t,i);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(il,"")}editorDivPaste(t){const i=t.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const a=be.#h(i.getData("text")||"").replaceAll(il,`
`);if(!a)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!a.includes(`
`)){l.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:d}=l,f=[],g=[];if(u.nodeType===Node.TEXT_NODE){const v=u.parentElement;if(g.push(u.nodeValue.slice(d).replaceAll(il,"")),v!==this.editorDiv){let w=f;for(const S of this.editorDiv.childNodes){if(S===v){w=g;continue}w.push(be.#c(S))}}f.push(u.nodeValue.slice(0,d).replaceAll(il,""))}else if(u===this.editorDiv){let v=f,w=0;for(const S of this.editorDiv.childNodes)w++===d&&(v=g),v.push(be.#c(S))}this.#t=`${f.join(`
`)}${a}${g.join(`
`)}`,this.#l();const y=new Range;let b=Math.sumPrecise(f.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const w=v.nodeValue.length;if(b<=w){y.setStart(v,b),y.setEnd(v,b);break}b-=w}o.removeAllRanges(),o.addRange(y)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=be._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,i,s){let a=null;if(t instanceof Iy){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:d,rotation:f,id:g,popupRef:y,richText:b,contentsObj:v,creationDate:w,modificationDate:S},textContent:x,textPosition:E,parent:{page:{pageNumber:_}}}=t;if(!x||x.length===0)return null;a=t={annotationType:bt.FREETEXT,color:Array.from(u),fontSize:l,value:x.join(`
`),position:E,pageIndex:_-1,rect:d.slice(0),rotation:f,annotationElementId:g,id:g,deleted:!1,popupRef:y,comment:v?.str||null,richText:b,creationDate:w,modificationDate:S}}const o=await super.deserialize(t,i,s);return o.#i=t.fontSize,o.color=it.makeHexColor(...t.color),o.#t=be.#h(t.value),o._initialData=a,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=lt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:i,fontSize:this.#i,value:this.#d()});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(t){const{value:i,fontSize:s,color:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==i||t.fontSize!==s||t.color.some((l,u)=>l!==a[u])||t.pageIndex!==o}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(!i)return null;const{style:s}=i;s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.color,i.replaceChildren();for(const a of this.#t.split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),i.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class nt{static PRECISION=1e-4;toSVGPath(){zt("Abstract method `toSVGPath` must be implemented.")}get box(){zt("Abstract getter `box` must be implemented.")}serialize(t,i){zt("Abstract method `serialize` must be implemented.")}static _rescale(t,i,s,a,o,l){l||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)l[u]=i+t[u]*a,l[u+1]=s+t[u+1]*o;return l}static _rescaleAndSwap(t,i,s,a,o,l){l||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)l[u]=i+t[u+1]*a,l[u+1]=s+t[u]*o;return l}static _translate(t,i,s,a){a||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)a[o]=i+t[o],a[o+1]=s+t[o+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,i,s,a,o){switch(o){case 90:return[1-i/s,t/a];case 180:return[1-t/s,1-i/a];case 270:return[i/s,1-t/a];default:return[t/s,i/a]}}static _normalizePagePoint(t,i,s){switch(s){case 90:return[1-i,t];case 180:return[1-t,1-i];case 270:return[i,1-t];default:return[t,i]}}static createBezierPoints(t,i,s,a,o,l){return[(t+5*s)/6,(i+5*a)/6,(5*s+o)/6,(5*a+l)/6,(s+o)/2,(a+l)/2]}}class ts{#t;#e=[];#n;#i;#a=[];#r=new Float32Array(18);#s;#o;#c;#l;#d;#h;#f=[];static#m=8;static#g=2;static#u=ts.#m+ts.#g;constructor({x:t,y:i},s,a,o,l,u=0){this.#t=s,this.#h=o*a,this.#i=l,this.#r.set([NaN,NaN,NaN,NaN,t,i],6),this.#n=u,this.#l=ts.#m*a,this.#c=ts.#u*a,this.#d=a,this.#f.push(t,i)}isEmpty(){return isNaN(this.#r[8])}#p(){const t=this.#r.subarray(4,6),i=this.#r.subarray(16,18),[s,a,o,l]=this.#t;return[(this.#s+(t[0]-i[0])/2-s)/o,(this.#o+(t[1]-i[1])/2-a)/l,(this.#s+(i[0]-t[0])/2-s)/o,(this.#o+(i[1]-t[1])/2-a)/l]}add({x:t,y:i}){this.#s=t,this.#o=i;const[s,a,o,l]=this.#t;let[u,d,f,g]=this.#r.subarray(8,12);const y=t-f,b=i-g,v=Math.hypot(y,b);if(v<this.#c)return!1;const w=v-this.#l,S=w/v,x=S*y,E=S*b;let _=u,T=d;u=f,d=g,f+=x,g+=E,this.#f?.push(t,i);const N=-E/w,L=x/w,B=N*this.#h,F=L*this.#h;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([f+B,g+F],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([f-B,g-F],16),isNaN(this.#r[6])?(this.#a.length===0&&(this.#r.set([u+B,d+F],2),this.#a.push(NaN,NaN,NaN,NaN,(u+B-s)/o,(d+F-a)/l),this.#r.set([u-B,d-F],14),this.#e.push(NaN,NaN,NaN,NaN,(u-B-s)/o,(d-F-a)/l)),this.#r.set([_,T,u,d,f,g],6),!this.isEmpty()):(this.#r.set([_,T,u,d,f,g],6),Math.abs(Math.atan2(T-d,_-u)-Math.atan2(E,x))<Math.PI/2?([u,d,f,g]=this.#r.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((u+f)/2-s)/o,((d+g)/2-a)/l),[u,d,_,T]=this.#r.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((_+u)/2-s)/o,((T+d)/2-a)/l),!0):([_,T,u,d,f,g]=this.#r.subarray(0,6),this.#a.push(((_+5*u)/6-s)/o,((T+5*d)/6-a)/l,((5*u+f)/6-s)/o,((5*d+g)/6-a)/l,((u+f)/2-s)/o,((d+g)/2-a)/l),[f,g,u,d,_,T]=this.#r.subarray(12,18),this.#e.push(((_+5*u)/6-s)/o,((T+5*d)/6-a)/l,((5*u+f)/6-s)/o,((5*d+g)/6-a)/l,((u+f)/2-s)/o,((d+g)/2-a)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#a,i=this.#e;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#y();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?s.push(`L${t[a+4]} ${t[a+5]}`):s.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);this.#b(s);for(let a=i.length-6;a>=6;a-=6)isNaN(i[a])?s.push(`L${i[a+4]} ${i[a+5]}`):s.push(`C${i[a]} ${i[a+1]} ${i[a+2]} ${i[a+3]} ${i[a+4]} ${i[a+5]}`);return this.#v(s),s.join(" ")}#y(){const[t,i,s,a]=this.#t,[o,l,u,d]=this.#p();return`M${(this.#r[2]-t)/s} ${(this.#r[3]-i)/a} L${(this.#r[4]-t)/s} ${(this.#r[5]-i)/a} L${o} ${l} L${u} ${d} L${(this.#r[16]-t)/s} ${(this.#r[17]-i)/a} L${(this.#r[14]-t)/s} ${(this.#r[15]-i)/a} Z`}#v(t){const i=this.#e;t.push(`L${i[4]} ${i[5]} Z`)}#b(t){const[i,s,a,o]=this.#t,l=this.#r.subarray(4,6),u=this.#r.subarray(16,18),[d,f,g,y]=this.#p();t.push(`L${(l[0]-i)/a} ${(l[1]-s)/o} L${d} ${f} L${g} ${y} L${(u[0]-i)/a} ${(u[1]-s)/o}`)}newFreeDrawOutline(t,i,s,a,o,l){return new Gy(t,i,s,a,o,l)}getOutlines(){const t=this.#a,i=this.#e,s=this.#r,[a,o,l,u]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let y=0,b=d.length-2;y<b;y+=2)d[y]=(this.#f[y]-a)/l,d[y+1]=(this.#f[y+1]-o)/u;if(d[d.length-2]=(this.#s-a)/l,d[d.length-1]=(this.#o-o)/u,isNaN(s[6])&&!this.isEmpty())return this.#C(d);const f=new Float32Array(this.#a.length+24+this.#e.length);let g=t.length;for(let y=0;y<g;y+=2){if(isNaN(t[y])){f[y]=f[y+1]=NaN;continue}f[y]=t[y],f[y+1]=t[y+1]}g=this.#S(f,g);for(let y=i.length-6;y>=6;y-=6)for(let b=0;b<6;b+=2){if(isNaN(i[y+b])){f[g]=f[g+1]=NaN,g+=2;continue}f[g]=i[y+b],f[g+1]=i[y+b+1],g+=2}return this.#E(f,g),this.newFreeDrawOutline(f,d,this.#t,this.#d,this.#n,this.#i)}#C(t){const i=this.#r,[s,a,o,l]=this.#t,[u,d,f,g]=this.#p(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(i[2]-s)/o,(i[3]-a)/l,NaN,NaN,NaN,NaN,(i[4]-s)/o,(i[5]-a)/l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,(i[16]-s)/o,(i[17]-a)/l,NaN,NaN,NaN,NaN,(i[14]-s)/o,(i[15]-a)/l],0),this.newFreeDrawOutline(y,t,this.#t,this.#d,this.#n,this.#i)}#E(t,i){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],i),i+=6}#S(t,i){const s=this.#r.subarray(4,6),a=this.#r.subarray(16,18),[o,l,u,d]=this.#t,[f,g,y,b]=this.#p();return t.set([NaN,NaN,NaN,NaN,(s[0]-o)/u,(s[1]-l)/d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(a[0]-o)/u,(a[1]-l)/d],i),i+=24}}class Gy extends nt{#t;#e=new Float32Array(4);#n;#i;#a;#r;#s;constructor(t,i,s,a,o,l){super(),this.#s=t,this.#a=i,this.#t=s,this.#r=a,this.#n=o,this.#i=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(l);const[u,d,f,g]=this.#e;for(let y=0,b=t.length;y<b;y+=2)t[y]=(t[y]-u)/f,t[y+1]=(t[y+1]-d)/g;for(let y=0,b=i.length;y<b;y+=2)i[y]=(i[y]-u)/f,i[y+1]=(i[y+1]-d)/g}toSVGPath(){const t=[`M${this.#s[4]} ${this.#s[5]}`];for(let i=6,s=this.#s.length;i<s;i+=6){if(isNaN(this.#s[i])){t.push(`L${this.#s[i+4]} ${this.#s[i+5]}`);continue}t.push(`C${this.#s[i]} ${this.#s[i+1]} ${this.#s[i+2]} ${this.#s[i+3]} ${this.#s[i+4]} ${this.#s[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,s,a],o){const l=s-t,u=a-i;let d,f;switch(o){case 0:d=nt._rescale(this.#s,t,a,l,-u),f=nt._rescale(this.#a,t,a,l,-u);break;case 90:d=nt._rescaleAndSwap(this.#s,t,i,l,u),f=nt._rescaleAndSwap(this.#a,t,i,l,u);break;case 180:d=nt._rescale(this.#s,s,i,-l,u),f=nt._rescale(this.#a,s,i,-l,u);break;case 270:d=nt._rescaleAndSwap(this.#s,s,a,-l,-u),f=nt._rescaleAndSwap(this.#a,s,a,-l,-u);break}return{outline:Array.from(d),points:[Array.from(f)]}}#o(t){const i=this.#s;let s=i[4],a=i[5];const o=[s,a,s,a];let l=s,u=a,d=s,f=a;const g=t?Math.max:Math.min,y=new Float32Array(4);for(let v=6,w=i.length;v<w;v+=6){const S=i[v+4],x=i[v+5];isNaN(i[v])?(it.pointBoundingBox(S,x,o),u>x?(l=S,u=x):u===x&&(l=g(l,S)),f<x?(d=S,f=x):f===x&&(d=g(d,S))):(y[0]=y[1]=1/0,y[2]=y[3]=-1/0,it.bezierBoundingBox(s,a,...i.slice(v,v+6),y),it.rectBoundingBox(y[0],y[1],y[2],y[3],o),u>y[1]?(l=y[0],u=y[1]):u===y[1]&&(l=g(l,y[0])),f<y[3]?(d=y[2],f=y[3]):f===y[3]&&(d=g(d,y[2]))),s=S,a=x}const b=this.#e;b[0]=o[0]-this.#n,b[1]=o[1]-this.#n,b[2]=o[2]-o[0]+2*this.#n,b[3]=o[3]-o[1]+2*this.#n,this.firstPoint=[l,u],this.lastPoint=[d,f]}get box(){return this.#e}newOutliner(t,i,s,a,o,l=0){return new ts(t,i,s,a,o,l)}getNewOutline(t,i){const[s,a,o,l]=this.#e,[u,d,f,g]=this.#t,y=o*f,b=l*g,v=s*f+u,w=a*g+d,S=this.newOutliner({x:this.#a[0]*y+v,y:this.#a[1]*b+w},this.#t,this.#r,t,this.#i,i??this.#n);for(let x=2;x<this.#a.length;x+=2)S.add({x:this.#a[x]*y+v,y:this.#a[x+1]*b+w});return S.getOutlines()}}class Ch{#t;#e;#n;#i=[];#a=[];constructor(t,i=0,s=0,a=!0){const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:S,y:x,width:E,height:_}of t){const T=Math.floor((S-i)/l)*l,N=Math.ceil((S+E+i)/l)*l,L=Math.floor((x-i)/l)*l,B=Math.ceil((x+_+i)/l)*l,F=[T,L,B,!0],$=[N,L,B,!1];this.#i.push(F,$),it.rectBoundingBox(T,L,N,B,o)}const u=o[2]-o[0]+2*s,d=o[3]-o[1]+2*s,f=o[0]-s,g=o[1]-s;let y=a?-1/0:1/0,b=1/0;const v=this.#i.at(a?-1:-2),w=[v[0],v[2]];for(const S of this.#i){const[x,E,_,T]=S;!T&&a?E<b?(b=E,y=x):E===b&&(y=Math.max(y,x)):T&&!a&&(E<b?(b=E,y=x):E===b&&(y=Math.min(y,x))),S[0]=(x-f)/u,S[1]=(E-g)/d,S[2]=(_-g)/d}this.#t=new Float32Array([f,g,u,d]),this.#e=[y,b],this.#n=w}getOutlines(){this.#i.sort((i,s)=>i[0]-s[0]||i[1]-s[1]||i[2]-s[2]);const t=[];for(const i of this.#i)i[3]?(t.push(...this.#l(i)),this.#o(i)):(this.#c(i),t.push(...this.#l(i)));return this.#r(t)}#r(t){const i=[],s=new Set;for(const l of t){const[u,d,f]=l;i.push([u,d,l],[u,f,l])}i.sort((l,u)=>l[1]-u[1]||l[0]-u[0]);for(let l=0,u=i.length;l<u;l+=2){const d=i[l][2],f=i[l+1][2];d.push(f),f.push(d),s.add(d),s.add(f)}const a=[];let o;for(;s.size>0;){const l=s.values().next().value;let[u,d,f,g,y]=l;s.delete(l);let b=u,v=d;for(o=[u,f],a.push(o);;){let w;if(s.has(g))w=g;else if(s.has(y))w=y;else break;s.delete(w),[u,d,f,g,y]=w,b!==u&&(o.push(b,v,u,v===d?d:f),b=u),v=v===d?f:d}o.push(b,v)}return new ew(a,this.#t,this.#e,this.#n)}#s(t){const i=this.#a;let s=0,a=i.length-1;for(;s<=a;){const o=s+a>>1,l=i[o][0];if(l===t)return o;l<t?s=o+1:a=o-1}return a+1}#o([,t,i]){const s=this.#s(t);this.#a.splice(s,0,[t,i])}#c([,t,i]){const s=this.#s(t);for(let a=s;a<this.#a.length;a++){const[o,l]=this.#a[a];if(o!==t)break;if(o===t&&l===i){this.#a.splice(a,1);return}}for(let a=s-1;a>=0;a--){const[o,l]=this.#a[a];if(o!==t)break;if(o===t&&l===i){this.#a.splice(a,1);return}}}#l(t){const[i,s,a]=t,o=[[i,s,a]],l=this.#s(a);for(let u=0;u<l;u++){const[d,f]=this.#a[u];for(let g=0,y=o.length;g<y;g++){const[,b,v]=o[g];if(!(f<=b||v<=d)){if(b>=d){if(v>f)o[g][1]=f;else{if(y===1)return[];o.splice(g,1),g--,y--}continue}o[g][2]=d,v>f&&o.push([i,f,v])}}}return o}}class ew extends nt{#t;#e;constructor(t,i,s,a){super(),this.#e=t,this.#t=i,this.firstPoint=s,this.lastPoint=a}toSVGPath(){const t=[];for(const i of this.#e){let[s,a]=i;t.push(`M${s} ${a}`);for(let o=2;o<i.length;o+=2){const l=i[o],u=i[o+1];l===s?(t.push(`V${u}`),a=u):u===a&&(t.push(`H${l}`),s=l)}t.push("Z")}return t.join(" ")}serialize([t,i,s,a],o){const l=[],u=s-t,d=a-i;for(const f of this.#e){const g=new Array(f.length);for(let y=0;y<f.length;y+=2)g[y]=t+f[y]*u,g[y+1]=a-f[y+1]*d;l.push(g)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Th extends ts{newFreeDrawOutline(t,i,s,a,o,l){return new iw(t,i,s,a,o,l)}}class iw extends Gy{newOutliner(t,i,s,a,o,l=0){return new Th(t,i,s,a,o,l)}}class ae extends lt{#t=null;#e=0;#n;#i=null;#a=null;#r=null;#s=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#m=null;#g=null;#u="";#p;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=bt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=ae.prototype;return gt(this,"_keyboardManager",new Mr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||ae._defaultColor,this.#p=t.thickness||ae._defaultThickness,this.opacity=t.opacity||ae._defaultOpacity,this.#n=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#b(t),this.#A()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#s=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#A(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new Ch(this.#n,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const i=new Ch(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#r=i.getOutlines();const{firstPoint:s}=this.#l;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:a}=this.#r;this.#m=[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:i,clipPathId:s}){this.#l=t;const a=1.5;if(this.#r=t.getNewOutline(this.#p/2+a,.0025),i>=0)this.#d=i,this.#i=s,this.parent.drawLayer.finalizeDraw(i,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},!0);else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:ae.#x(this.#l.box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:ae.#x(this.#r.box,y),path:{d:this.#r.toSVGPath()}})}const[o,l,u,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=u,this.height=d;break;case 90:{const[y,b]=this.parentDimensions;this.x=l,this.y=1-o,this.width=u*b/y,this.height=d*y/b;break}case 180:this.x=1-o,this.y=1-l,this.width=u,this.height=d;break;case 270:{const[y,b]=this.parentDimensions;this.x=1-l,this.y=o,this.width=u*b/y,this.height=d*y/b;break}}const{firstPoint:f}=t;this.#f=[(f[0]-o)/u,(f[1]-l)/d];const{lastPoint:g}=this.#r;this.#m=[(g[0]-o)/u,(g[1]-l)/d]}static initialize(t,i){lt.initialize(t,i),ae._defaultColor||=i.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,i){switch(t){case Mt.HIGHLIGHT_COLOR:ae._defaultColor=i;break;case Mt.HIGHLIGHT_THICKNESS:ae._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(t,i){switch(t){case Mt.HIGHLIGHT_COLOR:this.#C(i);break;case Mt.HIGHLIGHT_THICKNESS:this.#E(i);break}}static get defaultPropertiesToUpdate(){return[[Mt.HIGHLIGHT_COLOR,ae._defaultColor],[Mt.HIGHLIGHT_THICKNESS,ae._defaultThickness]]}get propertiesToUpdate(){return[[Mt.HIGHLIGHT_COLOR,this.color||ae._defaultColor],[Mt.HIGHLIGHT_THICKNESS,this.#p||ae._defaultThickness],[Mt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#a?.updateColor(this.color),super.onUpdatedColor()}#C(t){const i=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},s=this.color,a=this.opacity;this.addCommands({cmd:i.bind(this,t,ae._defaultOpacity),undo:i.bind(this,s,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#E(t){const i=this.#p,s=a=>{this.#p=a,this.#S(a)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new di({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#R())}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,this.#R())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#_(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#A(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?this.#_():t&&(this.#A(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),i&&this.select()}#S(t){this.#h&&(this.#b({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())}#_(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#A(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#g=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#i))}static#x([t,i,s,a],o){switch(o){case 90:return[1-i-a,t,a,s];case 180:return[1-t-s,1-i-a,s,a];case 270:return[i,1-t-s,a,s]}return[t,i,s,a]}rotate(t){const{drawLayer:i}=this.parent;let s;this.#h?(t=(t-this.rotation+360)%360,s=ae.#x(this.#l.box,t)):s=ae.#x([this.x,this.y,this.width,this.height],t),i.updateProperties(this.#d,{bbox:s,root:{"data-main-rotation":t}}),i.updateProperties(this.#g,{bbox:ae.#x(this.#r.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#D.bind(this),{signal:this._uiManager._signal});const i=this.#c=document.createElement("div");return t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=this.#i,this.setDims(),yy(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#D(t){ae._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#M(!0);break;case 1:case 3:this.#M(!1);break}}#M(t){if(!this.#t)return;const i=window.getSelection();t?i.setPosition(this.#t,this.#e):i.setPosition(this.#s,this.#o)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#h||this.#M(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!t}}))}#R(){return this.#h?this.rotation:0}#P(){if(this.#h)return null;const[t,i]=this.pageDimensions,[s,a]=this.pageTranslation,o=this.#n,l=new Float32Array(o.length*8);let u=0;for(const{x:d,y:f,width:g,height:y}of o){const b=d*t+s,v=(1-f)*i+a;l[u]=l[u+4]=b,l[u+1]=l[u+3]=v,l[u+2]=l[u+6]=b+g*t,l[u+5]=l[u+7]=v-y*i,u+=8}return l}#O(t){return this.#l.serialize(t,this.#R())}static startHighlighting(t,i,{target:s,x:a,y:o}){const{x:l,y:u,width:d,height:f}=s.getBoundingClientRect(),g=new AbortController,y=t.combinedSignal(g),b=v=>{g.abort(),this.#F(t,v)};window.addEventListener("blur",b,{signal:y}),window.addEventListener("pointerup",b,{signal:y}),window.addEventListener("pointerdown",ee,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",fi,{signal:y}),s.addEventListener("pointermove",this.#N.bind(this,t),{signal:y}),this._freeHighlight=new Th({x:a,y:o},[l,u,d,f],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#N(t,i){this._freeHighlight.add(i)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,i,s){let a=null;if(t instanceof Hy){const{data:{quadPoints:w,rect:S,rotation:x,id:E,color:_,opacity:T,popupRef:N,richText:L,contentsObj:B,creationDate:F,modificationDate:$},parent:{page:{pageNumber:W}}}=t;a=t={annotationType:bt.HIGHLIGHT,color:Array.from(_),opacity:T,quadPoints:w,boxes:null,pageIndex:W-1,rect:S.slice(0),rotation:x,annotationElementId:E,id:E,deleted:!1,popupRef:N,richText:L,comment:B?.str||null,creationDate:F,modificationDate:$}}else if(t instanceof Vh){const{data:{inkLists:w,rect:S,rotation:x,id:E,color:_,borderStyle:{rawWidth:T},popupRef:N,richText:L,contentsObj:B,creationDate:F,modificationDate:$},parent:{page:{pageNumber:W}}}=t;a=t={annotationType:bt.HIGHLIGHT,color:Array.from(_),thickness:T,inkLists:w,boxes:null,pageIndex:W-1,rect:S.slice(0),rotation:x,annotationElementId:E,id:E,deleted:!1,popupRef:N,richText:L,comment:B?.str||null,creationDate:F,modificationDate:$}}const{color:o,quadPoints:l,inkLists:u,opacity:d}=t,f=await super.deserialize(t,i,s);f.color=it.makeHexColor(...o),f.opacity=d||1,u&&(f.#p=t.thickness),f._initialData=a,t.comment&&f.setCommentData(t);const[g,y]=f.pageDimensions,[b,v]=f.pageTranslation;if(l){const w=f.#n=[];for(let S=0;S<l.length;S+=8)w.push({x:(l[S]-b)/g,y:1-(l[S+1]-v)/y,width:(l[S+2]-l[S])/g,height:(l[S+1]-l[S+5])/y});f.#v(),f.#A(),f.rotate(f.rotation)}else if(u){f.#h=!0;const w=u[0],S={x:w[0]-b,y:y-(w[1]-v)},x=new Th(S,[0,0,g,y],1,f.#p/2,!0,.001);for(let T=0,N=w.length;T<N;T+=2)S.x=w[T]-b,S.y=y-(w[T+1]-v),x.add(S);const{id:E,clipPathId:_}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:x.toSVGPath()}},!0,!0);f.#b({highlightOutlines:x.getOutlines(),highlightId:E,clipPathId:_}),f.#A(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=lt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:i,opacity:this.opacity,thickness:this.#p,quadPoints:this.#P(),outlines:this.#O(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#B(s)?null:(s.id=this.annotationElementId,s)}#B(t){const{color:i}=this._initialData;return this.hasEditedComment||t.color.some((s,a)=>s!==i[a])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class Vy{#t=Object.create(null);updateProperty(t,i){this[t]=i,this.updateSVGProperty(t,i)}updateProperties(t){if(t)for(const[i,s]of Object.entries(t))i.startsWith("_")||this.updateProperty(i,s)}updateSVGProperty(t,i){this.#t[t]=i}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){zt("Not implemented")}}class Ot extends lt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#a=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#r(t),this.#c())}#r({drawOutlines:t,drawId:i,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=this.#s(t,this.parent),this.#h(t.box)}#s(t,i){const{id:s}=i.drawLayer.draw(Ot._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,i){const s=new Set(Object.keys(t));for(const[a,o]of Object.entries(i))s.has(a)?Object.assign(t[a],o):t[a]=o;return t}static getDefaultDrawingOptions(t){zt("Not implemented")}static get typesMap(){zt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,i){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,i),this._currentParent&&(Ot.#n.updateProperty(s,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,i){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,i)}static get defaultPropertiesToUpdate(){const t=[],i=this._defaultDrawingOptions;for(const[s,a]of this.typesMap)t.push([s,i[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:i}=this;for(const[s,a]of this.constructor.typesMap)t.push([s,i[a]]);return t}_updateProperty(t,i,s){const a=this._drawingOptions,o=a[i],l=u=>{a.updateProperty(i,u);const d=this.#t.updateProperty(i,u);d&&this.#h(d),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,s),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Ot._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#d()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Ot._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#d()),{bbox:this.#f()}))}_onTranslating(t,i){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Ot._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#d(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#o()):t&&(this._uiManager.addShouldRescale(this),this.#c(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),i&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#s(this.#t,t)}}#l([t,i,s,a]){const{parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[i,1-t,s*(l/o),a*(o/l)];case 180:return[1-t,1-i,s,a];case 270:return[1-i,t,s*(l/o),a*(o/l)];default:return[t,i,s,a]}}#d(){const{x:t,y:i,width:s,height:a,parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[1-i,t,s*(o/l),a*(l/o)];case 180:return[1-t,1-i,s,a];case 270:return[i,1-t,s*(o/l),a*(l/o)];default:return[t,i,s,a]}}#h(t){[this.x,this.y,this.width,this.height]=this.#l(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:t,y:i,width:s,height:a,rotation:o,parentRotation:l,parentDimensions:[u,d]}=this;switch((o*4+l)/90){case 1:return[1-i-a,t,a,s];case 2:return[1-t-s,1-i-a,s,a];case 3:return[i,1-t-s,a,s];case 4:return[t,i-s*(u/d),a*(d/u),s*(u/d)];case 5:return[1-i,t,s*(u/d),a*(d/u)];case 6:return[1-t-a*(d/u),1-i,a*(d/u),s*(u/d)];case 7:return[i-s*(u/d),1-t-a*(d/u),s*(u/d),a*(d/u)];case 8:return[t-s,i-a,s,a];case 9:return[1-i,t-s,a,s];case 10:return[1-t,1-i,s,a];case 11:return[i-a,1-t,a,s];case 12:return[t-a*(d/u),i,a*(d/u),s*(u/d)];case 13:return[1-i-s*(u/d),t-a*(d/u),s*(u/d),a*(d/u)];case 14:return[1-t,1-i-s*(u/d),a*(d/u),s*(u/d)];case 15:return[i,1-t,s*(u/d),a*(d/u)];default:return[t,i,s,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Ot._mergeSVGProperties({bbox:this.#f()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,i;this._isCopy&&(t=this.x,i=this.y);const s=super.render();s.classList.add("draw");const a=document.createElement("div");return s.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,i),s}static createDrawerInstance(t,i,s,a,o){zt("Not implemented")}static startDrawing(t,i,s,a){const{target:o,offsetX:l,offsetY:u,pointerId:d,pointerType:f}=a;if(Nt.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:g}}=t,{width:y,height:b}=o.getBoundingClientRect(),v=Ot.#i=new AbortController,w=t.combinedSignal(v);if(Nt.setPointer(f,d),window.addEventListener("pointerup",S=>{Nt.isSamePointerIdOrRemove(S.pointerId)&&this._endDraw(S)},{signal:w}),window.addEventListener("pointercancel",S=>{Nt.isSamePointerIdOrRemove(S.pointerId)&&this._currentParent.endDrawingSession()},{signal:w}),window.addEventListener("pointerdown",S=>{Nt.isSamePointerType(S.pointerType)&&(Nt.initializeAndAddPointerId(S.pointerId),Ot.#n.isCancellable()&&(Ot.#n.removeLastElement(),Ot.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",fi,{signal:w}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),o.addEventListener("touchmove",S=>{Nt.isSameTimeStamp(S.timeStamp)&&ee(S)},{signal:w}),t.toggleDrawing(),i._editorUndoBar?.hide(),Ot.#n){t.drawLayer.updateProperties(this._currentDrawId,Ot.#n.startNew(l,u,y,b,g));return}i.updateUIForDefaultProperties(this),Ot.#n=this.createDrawerInstance(l,u,y,b,g),Ot.#a=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(Ot.#a.toSVGProperties(),Ot.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(Nt.isSameTimeStamp(t.timeStamp),!Ot.#n)return;const{offsetX:i,offsetY:s,pointerId:a}=t;if(Nt.isSamePointerId(a)){if(Nt.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Ot.#n.add(i,s)),Nt.setTimeStamp(t.timeStamp),ee(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,Ot.#n=null,Ot.#a=null,Nt.clearTimeStamp()),Ot.#i&&(Ot.#i.abort(),Ot.#i=null,Nt.clearPointerIds())}static _endDraw(t){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),t?.target===i.div&&i.drawLayer.updateProperties(this._currentDrawId,Ot.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=Ot.#n,a=this._currentDrawId,o=s.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(a,s.setLastElement(o))},undo:()=>{i.drawLayer.updateProperties(a,s.removeLastElement())},mustExec:!1,type:Mt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(Mt.DRAW_STEP),!Ot.#n.isEmpty()){const{pageDimensions:[s,a],scale:o}=i,l=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Ot.#n.getOutlines(s*o,a*o,o,this._INNER_MARGIN),drawingOptions:Ot.#a,mustBeCommitted:!t});return this._cleanup(!0),l}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,i,s,a,o,l){zt("Not implemented")}static async deserialize(t,i,s){const{rawDims:{pageWidth:a,pageHeight:o,pageX:l,pageY:u}}=i.viewport,d=this.deserializeDraw(l,u,a,o,this._INNER_MARGIN,t),f=await super.deserialize(t,i,s);return f.createDrawingOptions(t),f.#r({drawOutlines:d}),f.#c(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[i,s]=this.pageTranslation,[a,o]=this.pageDimensions;return this.#t.serialize([i,s,a,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class nw{#t=new Float64Array(6);#e;#n;#i;#a;#r;#s="";#o=0;#c=new Rr;#l;#d;constructor(t,i,s,a,o,l){this.#l=s,this.#d=a,this.#i=o,this.#a=l,[t,i]=this.#h(t,i);const u=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#r=[t,i],this.#n=[{line:u,points:this.#r}],this.#t.set(u,0)}updateProperty(t,i){t==="stroke-width"&&(this.#a=i)}#h(t,i){return nt._normalizePoint(t,i,this.#l,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#r.length<=10}add(t,i){[t,i]=this.#h(t,i);const[s,a,o,l]=this.#t.subarray(2,6),u=t-o,d=i-l;return Math.hypot(this.#l*u,this.#d*d)<=2?null:(this.#r.push(t,i),isNaN(s)?(this.#t.set([o,l,t,i],2),this.#e.push(NaN,NaN,NaN,NaN,t,i),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,a,o,l,t,i],0),this.#e.push(...nt.createBezierPoints(s,a,o,l,t,i)),{path:{d:this.toSVGPath()}}))}end(t,i){const s=this.add(t,i);return s||(this.#r.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,i,s,a,o){this.#l=s,this.#d=a,this.#i=o,[t,i]=this.#h(t,i);const l=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#r=[t,i];const u=this.#n.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#n.push({line:l,points:this.#r}),this.#t.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#r=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#c.removeLastElement();this.#n.pop(),this.#s="";for(let t=0,i=this.#n.length;t<i;t++){const{line:s,points:a}=this.#n[t];this.#e=s,this.#r=a,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const t=nt.svgRound(this.#e[4]),i=nt.svgRound(this.#e[5]);if(this.#r.length===2)return this.#s=`${this.#s} M ${t} ${i} Z`,this.#s;if(this.#r.length<=6){const a=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,a)} M ${t} ${i}`,this.#o=6}if(this.#r.length===4){const a=nt.svgRound(this.#e[10]),o=nt.svgRound(this.#e[11]);return this.#s=`${this.#s} L ${a} ${o}`,this.#o=12,this.#s}const s=[];this.#o===0&&(s.push(`M ${t} ${i}`),this.#o=6);for(let a=this.#o,o=this.#e.length;a<o;a+=6){const[l,u,d,f,g,y]=this.#e.slice(a,a+6).map(nt.svgRound);s.push(`C${l} ${u} ${d} ${f} ${g} ${y}`)}return this.#s+=s.join(" "),this.#o=this.#e.length,this.#s}getOutlines(t,i,s,a){const o=this.#n.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#n,t,i,s,this.#i,this.#a,a),this.#t=null,this.#e=null,this.#n=null,this.#s=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Rr extends nt{#t;#e=0;#n;#i;#a;#r;#s;#o;#c;build(t,i,s,a,o,l,u){this.#a=i,this.#r=s,this.#s=a,this.#o=o,this.#c=l,this.#n=u??0,this.#i=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:i}of this.#i){if(t.push(`M${nt.svgRound(i[4])} ${nt.svgRound(i[5])}`),i.length===6){t.push("Z");continue}if(i.length===12&&isNaN(i[6])){t.push(`L${nt.svgRound(i[10])} ${nt.svgRound(i[11])}`);continue}for(let s=6,a=i.length;s<a;s+=6){const[o,l,u,d,f,g]=i.subarray(s,s+6).map(nt.svgRound);t.push(`C${o} ${l} ${u} ${d} ${f} ${g}`)}}return t.join("")}serialize([t,i,s,a],o){const l=[],u=[],[d,f,g,y]=this.#d();let b,v,w,S,x,E,_,T,N;switch(this.#o){case 0:N=nt._rescale,b=t,v=i+a,w=s,S=-a,x=t+d*s,E=i+(1-f-y)*a,_=t+(d+g)*s,T=i+(1-f)*a;break;case 90:N=nt._rescaleAndSwap,b=t,v=i,w=s,S=a,x=t+f*s,E=i+d*a,_=t+(f+y)*s,T=i+(d+g)*a;break;case 180:N=nt._rescale,b=t+s,v=i,w=-s,S=a,x=t+(1-d-g)*s,E=i+f*a,_=t+(1-d)*s,T=i+(f+y)*a;break;case 270:N=nt._rescaleAndSwap,b=t+s,v=i+a,w=-s,S=-a,x=t+(1-f-y)*s,E=i+(1-d-g)*a,_=t+(1-f)*s,T=i+(1-d)*a;break}for(const{line:L,points:B}of this.#i)l.push(N(L,b,v,w,S,o?new Array(L.length):null)),u.push(N(B,b,v,w,S,o?new Array(B.length):null));return{lines:l,points:u,rect:[x,E,_,T]}}static deserialize(t,i,s,a,o,{paths:{lines:l,points:u},rotation:d,thickness:f}){const g=[];let y,b,v,w,S;switch(d){case 0:S=nt._rescale,y=-t/s,b=i/a+1,v=1/s,w=-1/a;break;case 90:S=nt._rescaleAndSwap,y=-i/a,b=-t/s,v=1/a,w=1/s;break;case 180:S=nt._rescale,y=t/s+1,b=-i/a,v=-1/s,w=1/a;break;case 270:S=nt._rescaleAndSwap,y=i/a+1,b=t/s+1,v=-1/a,w=-1/s;break}if(!l){l=[];for(const E of u){const _=E.length;if(_===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(_===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const T=new Float32Array(3*(_-2));l.push(T);let[N,L,B,F]=E.subarray(0,4);T.set([NaN,NaN,NaN,NaN,N,L],0);for(let $=4;$<_;$+=2){const W=E[$],tt=E[$+1];T.set(nt.createBezierPoints(N,L,B,F,W,tt),($-2)*3),[N,L,B,F]=[B,F,W,tt]}}}for(let E=0,_=l.length;E<_;E++)g.push({line:S(l[E].map(T=>T??NaN),y,b,v,w),points:S(u[E].map(T=>T??NaN),y,b,v,w)});const x=new this.prototype.constructor;return x.build(g,s,a,1,d,f,o),x}#l(t=this.#c){const i=this.#n+t/2*this.#s;return this.#o%180===0?[i/this.#a,i/this.#r]:[i/this.#r,i/this.#a]}#d(){const[t,i,s,a]=this.#t,[o,l]=this.#l(0);return[t+o,i+l,s-2*o,a-2*l]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#i){if(a.length<=12){for(let u=4,d=a.length;u<d;u+=6)it.pointBoundingBox(a[u],a[u+1],t);continue}let o=a[4],l=a[5];for(let u=6,d=a.length;u<d;u+=6){const[f,g,y,b,v,w]=a.subarray(u,u+6);it.bezierBoundingBox(o,l,f,g,y,b,v,w,t),o=v,l=w}}const[i,s]=this.#l();t[0]=Ce(t[0]-i,0,1),t[1]=Ce(t[1]-s,0,1),t[2]=Ce(t[2]+i,0,1),t[3]=Ce(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,i){return t==="stroke-width"?this.#f(i):null}#f(t){const[i,s]=this.#l();this.#c=t;const[a,o]=this.#l(),[l,u]=[a-i,o-s],d=this.#t;return d[0]-=l,d[1]-=u,d[2]+=2*l,d[3]+=2*u,d}updateParentDimensions([t,i],s){const[a,o]=this.#l();this.#a=t,this.#r=i,this.#s=s;const[l,u]=this.#l(),d=l-a,f=u-o,g=this.#t;return g[0]-=d,g[1]-=f,g[2]+=2*d,g[3]+=2*f,g}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(nt.svgRound).join(" ")}get defaultProperties(){const[t,i]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(i)}`}}}get rotationTransform(){const[,,t,i]=this.#t;let s=0,a=0,o=0,l=0,u=0,d=0;switch(this.#e){case 90:a=i/t,o=-t/i,u=t;break;case 180:s=-1,l=-1,u=t,d=i;break;case 270:a=-i/t,o=t/i,d=i;break;default:return""}return`matrix(${s} ${a} ${o} ${l} ${nt.svgRound(u)} ${nt.svgRound(d)})`}getPathResizingSVGProperties([t,i,s,a]){const[o,l]=this.#l(),[u,d,f,g]=this.#t;if(Math.abs(f-o)<=nt.PRECISION||Math.abs(g-l)<=nt.PRECISION){const S=t+s/2-(u+f/2),x=i+a/2-(d+g/2);return{path:{"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(i)}`,transform:`${this.rotationTransform} translate(${S} ${x})`}}}const y=(s-2*o)/(f-2*o),b=(a-2*l)/(g-2*l),v=f/s,w=g/a;return{path:{"transform-origin":`${nt.svgRound(u)} ${nt.svgRound(d)}`,transform:`${this.rotationTransform} scale(${v} ${w}) translate(${nt.svgRound(o)} ${nt.svgRound(l)}) scale(${y} ${b}) translate(${nt.svgRound(-o)} ${nt.svgRound(-l)})`}}}getPathResizedSVGProperties([t,i,s,a]){const[o,l]=this.#l(),u=this.#t,[d,f,g,y]=u;if(u[0]=t,u[1]=i,u[2]=s,u[3]=a,Math.abs(g-o)<=nt.PRECISION||Math.abs(y-l)<=nt.PRECISION){const x=t+s/2-(d+g/2),E=i+a/2-(f+y/2);for(const{line:_,points:T}of this.#i)nt._translate(_,x,E,_),nt._translate(T,x,E,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(s-2*o)/(g-2*o),v=(a-2*l)/(y-2*l),w=-b*(d+o)+t+o,S=-v*(f+l)+i+l;if(b!==1||v!==1||w!==0||S!==0)for(const{line:x,points:E}of this.#i)nt._rescale(x,w,S,b,v,x),nt._rescale(E,w,S,b,v,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,i],s){const[a,o]=s,l=this.#t,u=t-l[0],d=i-l[1];if(this.#a===a&&this.#r===o)for(const{line:f,points:g}of this.#i)nt._translate(f,u,d,f),nt._translate(g,u,d,g);else{const f=this.#a/a,g=this.#r/o;this.#a=a,this.#r=o;for(const{line:y,points:b}of this.#i)nt._rescale(y,u,d,f,g,y),nt._rescale(b,u,d,f,g,b);l[2]*=f,l[3]*=g}return l[0]=t,l[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(i)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${nt.svgRound(t[0])} ${nt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Dl extends Vy{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:lt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,i){t==="stroke-width"&&(i??=this["stroke-width"],i*=this._viewParameters.realScale),super.updateSVGProperty(t,i)}clone(){const t=new Dl(this._viewParameters);return t.updateAll(this),t}}class Yh extends Ot{static _type="ink";static _editorType=bt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,i){lt.initialize(t,i),this._defaultDrawingOptions=new Dl(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return gt(this,"typesMap",new Map([[Mt.INK_THICKNESS,"stroke-width"],[Mt.INK_COLOR,"stroke"],[Mt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,i,s,a,o){return new nw(t,i,s,a,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,i,s,a,o,l){return Rr.deserialize(t,i,s,a,o,l)}static async deserialize(t,i,s){let a=null;if(t instanceof Vh){const{data:{inkLists:l,rect:u,rotation:d,id:f,color:g,opacity:y,borderStyle:{rawWidth:b},popupRef:v,richText:w,contentsObj:S,creationDate:x,modificationDate:E},parent:{page:{pageNumber:_}}}=t;a=t={annotationType:bt.INK,color:Array.from(g),thickness:b,opacity:y,paths:{points:l},boxes:null,pageIndex:_-1,rect:u.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:v,richText:w,comment:S?.str||null,creationDate:x,modificationDate:E}}const o=await super.deserialize(t,i,s);return o._initialData=a,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||=new Sr(this),[["colorPicker",this._colorPicker]]}get colorType(){return Mt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:i,parent:s}=this;i.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:i,opacity:s}){this._drawingOptions=Yh.getDefaultDrawingOptions({stroke:it.makeHexColor(...t),"stroke-width":i,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":l}}=this,u=Object.assign(super.serialize(t),{color:lt._colorManager.convert(a),opacity:o,thickness:l,paths:{lines:i,points:s}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:i,thickness:s,opacity:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,u)=>l!==i[u])||t.thickness!==s||t.opacity!==a||t.pageIndex!==o}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:i,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:i,popup:this.comment}),null}}class _h extends Rr{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const nl=8,cr=3;class Qs{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,i,s,a){return s-=t,a-=i,s===0?a>0?0:4:s===1?a+6:2-a}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,i,s,a,o,l,u){const d=this.#e(s,a,o,l);for(let f=0;f<8;f++){const g=(-f+d-u+16)%8,y=this.#n[2*g],b=this.#n[2*g+1];if(t[(s+y)*i+(a+b)]!==0)return g}return-1}static#a(t,i,s,a,o,l,u){const d=this.#e(s,a,o,l);for(let f=0;f<8;f++){const g=(f+d+u+16)%8,y=this.#n[2*g],b=this.#n[2*g+1];if(t[(s+y)*i+(a+b)]!==0)return g}return-1}static#r(t,i,s,a){const o=t.length,l=new Int32Array(o);for(let g=0;g<o;g++)l[g]=t[g]<=a?1:0;for(let g=1;g<s-1;g++)l[g*i]=l[g*i+i-1]=0;for(let g=0;g<i;g++)l[g]=l[i*s-1-g]=0;let u=1,d;const f=[];for(let g=1;g<s-1;g++){d=1;for(let y=1;y<i-1;y++){const b=g*i+y,v=l[b];if(v===0)continue;let w=g,S=y;if(v===1&&l[b-1]===0)u+=1,S-=1;else if(v>=1&&l[b+1]===0)u+=1,S+=1,v>1&&(d=v);else{v!==1&&(d=Math.abs(v));continue}const x=[y,g],E=S===y+1,_={isHole:E,points:x,id:u,parent:0};f.push(_);let T;for(const J of f)if(J.id===d){T=J;break}T?T.isHole?_.parent=E?T.parent:d:_.parent=E?d:T.parent:_.parent=E?d:0;const N=this.#i(l,i,g,y,w,S,0);if(N===-1){l[b]=-u,l[b]!==1&&(d=Math.abs(l[b]));continue}let L=this.#n[2*N],B=this.#n[2*N+1];const F=g+L,$=y+B;w=F,S=$;let W=g,tt=y;for(;;){const J=this.#a(l,i,W,tt,w,S,1);L=this.#n[2*J],B=this.#n[2*J+1];const dt=W+L,xt=tt+B;x.push(xt,dt);const Q=W*i+tt;if(l[Q+1]===0?l[Q]=-u:l[Q]===1&&(l[Q]=u),dt===g&&xt===y&&W===F&&tt===$){l[b]!==1&&(d=Math.abs(l[b]));break}else w=W,S=tt,W=dt,tt=xt}}}return f}static#s(t,i,s,a){if(s-i<=4){for(let F=i;F<s-2;F+=2)a.push(t[F],t[F+1]);return}const o=t[i],l=t[i+1],u=t[s-4]-o,d=t[s-3]-l,f=Math.hypot(u,d),g=u/f,y=d/f,b=g*l-y*o,v=d/u,w=1/f,S=Math.atan(v),x=Math.cos(S),E=Math.sin(S),_=w*(Math.abs(x)+Math.abs(E)),T=w*(1-_+_**2),N=Math.max(Math.atan(Math.abs(E+x)*T),Math.atan(Math.abs(E-x)*T));let L=0,B=i;for(let F=i+2;F<s-2;F+=2){const $=Math.abs(b-g*t[F+1]+y*t[F]);$>L&&(B=F,L=$)}L>(f*N)**2?(this.#s(t,i,B+2,a),this.#s(t,B,s,a)):a.push(o,l)}static#o(t){const i=[],s=t.length;return this.#s(t,0,s,i),i.push(t[s-2],t[s-1]),i.length<=4?null:i}static#c(t,i,s,a,o,l){const u=new Float32Array(l**2),d=-2*a**2,f=l>>1;for(let S=0;S<l;S++){const x=(S-f)**2;for(let E=0;E<l;E++)u[S*l+E]=Math.exp((x+(E-f)**2)/d)}const g=new Float32Array(256),y=-2*o**2;for(let S=0;S<256;S++)g[S]=Math.exp(S**2/y);const b=t.length,v=new Uint8Array(b),w=new Uint32Array(256);for(let S=0;S<s;S++)for(let x=0;x<i;x++){const E=S*i+x,_=t[E];let T=0,N=0;for(let B=0;B<l;B++){const F=S+B-f;if(!(F<0||F>=s))for(let $=0;$<l;$++){const W=x+$-f;if(W<0||W>=i)continue;const tt=t[F*i+W],J=u[B*l+$]*g[Math.abs(tt-_)];T+=tt*J,N+=J}}const L=v[E]=Math.round(T/N);w[L]++}return[v,w]}static#l(t){const i=new Uint32Array(256);for(const s of t)i[s]++;return i}static#d(t){const i=t.length,s=new Uint8ClampedArray(i>>2);let a=-1/0,o=1/0;for(let u=0,d=s.length;u<d;u++){const f=s[u]=t[u<<2];a=Math.max(a,f),o=Math.min(o,f)}const l=255/(a-o);for(let u=0,d=s.length;u<d;u++)s[u]=(s[u]-o)*l;return s}static#h(t){let i,s=-1/0,a=-1/0;const o=t.findIndex(d=>d!==0);let l=o,u=o;for(i=o;i<256;i++){const d=t[i];d>s&&(i-l>a&&(a=i-l,u=i-1),s=d,l=i)}for(i=u-1;i>=0&&!(t[i]>t[i+1]);i--);return i}static#f(t){const i=t,{width:s,height:a}=t,{maxDim:o}=this.#t;let l=s,u=a;if(s>o||a>o){let b=s,v=a,w=Math.log2(Math.max(s,a)/o);const S=Math.floor(w);w=w===S?S-1:S;for(let E=0;E<w;E++){l=Math.ceil(b/2),u=Math.ceil(v/2);const _=new OffscreenCanvas(l,u);_.getContext("2d").drawImage(t,0,0,b,v,0,0,l,u),b=l,v=u,t!==i&&t.close(),t=_.transferToImageBitmap()}const x=Math.min(o/l,o/u);l=Math.round(l*x),u=Math.round(u*x)}const f=new OffscreenCanvas(l,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,l,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,l,u);const g=f.getImageData(0,0,l,u).data;return[this.#d(g),l,u]}static extractContoursFromText(t,{fontFamily:i,fontStyle:s,fontWeight:a},o,l,u,d){let f=new OffscreenCanvas(1,1),g=f.getContext("2d",{alpha:!1});const y=200,b=g.font=`${s} ${a} ${y}px ${i}`,{actualBoundingBoxLeft:v,actualBoundingBoxRight:w,actualBoundingBoxAscent:S,actualBoundingBoxDescent:x,fontBoundingBoxAscent:E,fontBoundingBoxDescent:_,width:T}=g.measureText(t),N=1.5,L=Math.ceil(Math.max(Math.abs(v)+Math.abs(w)||0,T)*N),B=Math.ceil(Math.max(Math.abs(S)+Math.abs(x)||y,Math.abs(E)+Math.abs(_)||y)*N);f=new OffscreenCanvas(L,B),g=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=b,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,L,B),g.fillStyle="black",g.fillText(t,L*(N-1)/2,B*(3-N)/2);const F=this.#d(g.getImageData(0,0,L,B).data),$=this.#l(F),W=this.#h($),tt=this.#r(F,L,B,W);return this.processDrawnLines({lines:{curves:tt,width:L,height:B},pageWidth:o,pageHeight:l,rotation:u,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,i,s,a,o){const[l,u,d]=this.#f(t),[f,g]=this.#c(l,u,d,Math.hypot(u,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),y=this.#h(g),b=this.#r(f,u,d,y);return this.processDrawnLines({lines:{curves:b,width:u,height:d},pageWidth:i,pageHeight:s,rotation:a,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:a,innerMargin:o,mustSmooth:l,areContours:u}){a%180!==0&&([i,s]=[s,i]);const{curves:d,width:f,height:g}=t,y=t.thickness??0,b=[],v=Math.min(i/f,s/g),w=v/i,S=v/s,x=[];for(const{points:_}of d){const T=l?this.#o(_):_;if(!T)continue;x.push(T);const N=T.length,L=new Float32Array(N),B=new Float32Array(3*(N===2?2:N-2));if(b.push({line:B,points:L}),N===2){L[0]=T[0]*w,L[1]=T[1]*S,B.set([NaN,NaN,NaN,NaN,L[0],L[1]],0);continue}let[F,$,W,tt]=T;F*=w,$*=S,W*=w,tt*=S,L.set([F,$,W,tt],0),B.set([NaN,NaN,NaN,NaN,F,$],0);for(let J=4;J<N;J+=2){const dt=L[J]=T[J]*w,xt=L[J+1]=T[J+1]*S;B.set(nt.createBezierPoints(F,$,W,tt,dt,xt),(J-2)*3),[F,$,W,tt]=[W,tt,dt,xt]}}if(b.length===0)return null;const E=u?new _h:new Rr;return E.build(b,i,s,1,a,u?0:y,o),{outline:E,newCurves:x,areContours:u,thickness:y,width:f,height:g}}static async compressSignature({outlines:t,areContours:i,thickness:s,width:a,height:o}){let l=1/0,u=-1/0,d=0;for(const T of t){d+=T.length;for(let N=2,L=T.length;N<L;N++){const B=T[N]-T[N-2];l=Math.min(l,B),u=Math.max(u,B)}}let f;l>=-128&&u<=127?f=Int8Array:l>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const g=t.length,y=nl+cr*g,b=new Uint32Array(y);let v=0;b[v++]=y*Uint32Array.BYTES_PER_ELEMENT+(d-2*g)*f.BYTES_PER_ELEMENT,b[v++]=0,b[v++]=a,b[v++]=o,b[v++]=i?0:1,b[v++]=Math.max(0,Math.floor(s??0)),b[v++]=g,b[v++]=f.BYTES_PER_ELEMENT;for(const T of t)b[v++]=T.length-2,b[v++]=T[0],b[v++]=T[1];const w=new CompressionStream("deflate-raw"),S=w.writable.getWriter();await S.ready,S.write(b);const x=f.prototype.constructor;for(const T of t){const N=new x(T.length-2);for(let L=2,B=T.length;L<B;L++)N[L-2]=T[L]-T[L-2];S.write(N)}S.close();const E=await new Response(w.readable).arrayBuffer();return new Uint8Array(E).toBase64()}static async decompressSignature(t){try{const i=Uint8Array.fromBase64(t),{readable:s,writable:a}=new DecompressionStream("deflate-raw"),o=a.getWriter();await o.ready,o.write(i).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,u=0;for await(const T of s)l||=new Uint8Array(new Uint32Array(T.buffer,0,4)[0]),l.set(T,u),u+=T.length;const d=new Uint32Array(l.buffer,0,l.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const g=d[2],y=d[3],b=d[4]===0,v=d[5],w=d[6],S=d[7],x=[],E=(nl+cr*w)*Uint32Array.BYTES_PER_ELEMENT;let _;switch(S){case Int8Array.BYTES_PER_ELEMENT:_=new Int8Array(l.buffer,E);break;case Int16Array.BYTES_PER_ELEMENT:_=new Int16Array(l.buffer,E);break;case Int32Array.BYTES_PER_ELEMENT:_=new Int32Array(l.buffer,E);break}u=0;for(let T=0;T<w;T++){const N=d[cr*T+nl],L=new Float32Array(N+2);x.push(L);for(let B=0;B<cr-1;B++)L[B]=d[cr*T+nl+B+1];for(let B=0;B<N;B++)L[B+2]=L[B]+_[u++]}return{areContours:b,thickness:v,outlines:x,width:g,height:y}}catch(i){return pt(`decompressSignature: ${i}`),null}}}class qh extends Vy{constructor(){super(),super.updateProperties({fill:lt._defaultLineColor,"stroke-width":0})}clone(){const t=new qh;return t.updateAll(this),t}}class $h extends Dl{constructor(t){super(t),super.updateProperties({stroke:lt._defaultLineColor,"stroke-width":1})}clone(){const t=new $h(this._viewParameters);return t.updateAll(this),t}}class _i extends Ot{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=bt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,i){lt.initialize(t,i),this._defaultDrawingOptions=new qh,this._defaultDrawnSignatureOptions=new $h(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!1}static get typesMap(){return gt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const i=t.get("hasDescription");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,i;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,i=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:a,mustSmooth:o,areContours:l,description:u,uuid:d,heightInPage:f}=this.#n,{rawDims:{pageWidth:g,pageHeight:y},rotation:b}=this.parent.viewport,v=Qs.processDrawnLines({lines:a,pageWidth:g,pageHeight:y,rotation:b,innerMargin:_i._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(v,f,u,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,i)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(i=>{i?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:i,thickness:s,width:a,height:o}=this.#n,l=Math.max(a,o),u=Qs.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:s,width:a,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:i});return{areContours:i,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,i,s,a){const{x:o,y:l}=this,{outline:u}=this.#n=t;this.#t=u instanceof _h,this.description=s;let d;this.#t?d=_i.getDefaultDrawingOptions():(d=_i._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:d});const[,f]=this.pageDimensions;let g=i/f;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:a}=this.parent.viewport;return Qs.process(t,i,s,a,_i._INNER_MARGIN)}getFromText(t,i){const{rawDims:{pageWidth:s,pageHeight:a},rotation:o}=this.parent.viewport;return Qs.extractContoursFromText(t,i,s,a,o,_i._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:a}=this.parent.viewport;return Qs.processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:a,innerMargin:_i._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:i}){t?this._drawingOptions=_i.getDefaultDrawingOptions():(this._drawingOptions=_i._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:i,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:a});return this.addComment(o),t?(o.paths={lines:i,points:s},o.uuid=this.#i,o.isCopy=!0):o.lines=i,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,i,s,a,o,l){return l.areContours?_h.deserialize(t,i,s,a,o,l):Rr.deserialize(t,i,s,a,o,l)}static async deserialize(t,i,s){const a=await super.deserialize(t,i,s);return a.#t=t.areContours,a.description=t.accessibilityData?.alt||"",a.#i=t.uuid,a}}class sw extends lt{#t=null;#e=null;#n=null;#i=null;#a=null;#r="";#s=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=bt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#a=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,i){lt.initialize(t,i)}static isHandlingMimeForPasting(t){return bh.includes(t)}static paste(t,i){i.pasteEditor({mode:bt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}#h(t,i=!1){if(!t){this.remove();return}this.#t=t.bitmap,i||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#r=t.file.name),this.#g()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:a,width:o,height:l,channels:a.length/(o*l)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const d=u.output;return await this.setGuessedAltText(d),i&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#h(s,!0)).finally(()=>this.#f());return}if(this.#i){const s=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(s).then(a=>this.#h(a)).finally(()=>this.#f());return}if(this.#a){const s=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(s).then(a=>this.#h(a)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=bh.join(",");const i=this._uiManager._signal;this.#n=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(a)}s()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#s?.remove(),this.#s=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#s===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#a||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;return this._isCopy&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#g():this.#m()),this._isCopy&&this._moveAfterPaste(t,i),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,i){const{id:s,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,i);i.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,a&&(this.#t=a),this.#o=!1,this.#g())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},t)}#g(){const{div:t}=this;let{width:i,height:s}=this.#t;const[a,o]=this.pageDimensions,l=.75;if(this.width)i=this.width*a,s=this.height*o;else if(i>l*a||s>l*o){const d=Math.min(l*a/i,l*o/s);i*=d,s*=d}this._uiManager.enableWaiting(!1);const u=this.#s=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=i/a,this.height=s/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&this.div.setAttribute("aria-description",this.#r),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,i,s=!1){t||(t=224);const{width:a,height:o}=this.#t,l=new Di;let u=this.#t,d=a,f=o,g=null;if(i){if(a>i||o>i){const B=Math.min(i/a,i/o);d=Math.floor(a*B),f=Math.floor(o*B)}g=document.createElement("canvas");const b=g.width=Math.ceil(d*l.sx),v=g.height=Math.ceil(f*l.sy);this.#l||(u=this.#u(b,v));const w=g.getContext("2d");w.filter=this._uiManager.hcmFilter;let S="white",x="#cfcfd8";this._uiManager.hcmFilter!=="none"?x="black":C1.isDarkMode&&(S="#8f8f9d",x="#42414d");const E=15,_=E*l.sx,T=E*l.sy,N=new OffscreenCanvas(_*2,T*2),L=N.getContext("2d");L.fillStyle=S,L.fillRect(0,0,_*2,T*2),L.fillStyle=x,L.fillRect(0,0,_,T),L.fillRect(_,T,_,T),w.fillStyle=w.createPattern(N,"repeat"),w.fillRect(0,0,b,v),w.drawImage(u,0,0,u.width,u.height,0,0,b,v)}let y=null;if(s){let b,v;if(l.symmetric&&u.width<t&&u.height<t)b=u.width,v=u.height;else if(u=this.#t,a>t||o>t){const x=Math.min(t/a,t/o);b=Math.floor(a*x),v=Math.floor(o*x),this.#l||(u=this.#u(b,v))}const S=new OffscreenCanvas(b,v).getContext("2d",{willReadFrequently:!0});S.drawImage(u,0,0,u.width,u.height,0,0,b,v),y={width:b,height:v,data:S.getImageData(0,0,b,v).data}}return{canvas:g,width:d,height:f,imageData:y}}#u(t,i){const{width:s,height:a}=this.#t;let o=s,l=a,u=this.#t;for(;o>2*t||l>2*i;){const d=o,f=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*i&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const g=new OffscreenCanvas(o,l);g.getContext("2d").drawImage(u,0,0,d,f,0,0,o,l),u=g.transferToImageBitmap()}return u}#p(){const[t,i]=this.parentDimensions,{width:s,height:a}=this,o=new Di,l=Math.ceil(s*t*o.sx),u=Math.ceil(a*i*o.sy),d=this.#s;if(!d||d.width===l&&d.height===u)return;d.width=l,d.height=u;const f=this.#l?this.#t:this.#u(l,u),g=d.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(f,0,0,f.width,f.height,0,0,l,u)}#y(t){if(t){if(this.#l){const a=this._uiManager.imageManager.getSvgUrl(this.#e);if(a)return a}const i=document.createElement("canvas");return{width:i.width,height:i.height}=this.#t,i.getContext("2d").drawImage(this.#t,0,0),i.toDataURL()}if(this.#l){const[i,s]=this.pageDimensions,a=Math.round(this.width*i*aa.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*aa.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(a,o);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,a,o),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,i,s){let a=null,o=!1;if(t instanceof jy){const{data:{rect:S,rotation:x,id:E,structParent:_,popupRef:T,richText:N,contentsObj:L,creationDate:B,modificationDate:F},container:$,parent:{page:{pageNumber:W}},canvas:tt}=t;let J,dt;tt?(delete t.canvas,{id:J,bitmap:dt}=s.imageManager.getFromCanvas($.id,tt),tt.remove()):(o=!0,t._hasNoCanvas=!0);const xt=(await i._structTree.getAriaAttributes(`${Zs}${E}`))?.get("aria-label")||"";a=t={annotationType:bt.STAMP,bitmapId:J,bitmap:dt,pageIndex:W-1,rect:S.slice(0),rotation:x,annotationElementId:E,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:xt},isSvg:!1,structParent:_,popupRef:T,richText:N,comment:L?.str||null,creationDate:B,modificationDate:F}}const l=await super.deserialize(t,i,s),{rect:u,bitmap:d,bitmapUrl:f,bitmapId:g,isSvg:y,accessibilityData:b}=t;o?(s.addMissingCanvas(t.id,l),l.#o=!0):g&&s.imageManager.isValidId(g)?(l.#e=g,d&&(l.#t=d)):l.#i=f,l.#l=y;const[v,w]=l.pageDimensions;return l.width=(u[2]-u[0])/v,l.height=(u[3]-u[1])/w,b&&(l.altTextData=b),l._initialData=a,t.comment&&l.setCommentData(t),l.#d=!!a,l}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(s),t)return s.bitmapUrl=this.#y(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:a,altText:o}=this.serializeAltText(!1);if(!a&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#v(s);return u.isSame?null:(u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(i===null)return s;i.stamps||=new Map;const l=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(this.#e))i.stamps.set(this.#e,{area:l,serialized:s}),s.bitmap=this.#y(!1);else if(this.#l){const u=i.stamps.get(this.#e);l>u.area&&(u.area=l,u.serialized.bitmap.close(),u.serialized.bitmap=this.#y(!1))}return s}#v(t){const{pageIndex:i,accessibilityData:{altText:s}}=this._initialData,a=t.pageIndex===i,o=(t.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&o,isSameAltText:o}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Qi{#t;#e=!1;#n=null;#i=null;#a=null;#r=new Map;#s=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#m=null;#g=-1;#u;static _initialized=!1;static#p=new Map([be,Yh,sw,ae,_i].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:i,div:s,structTreeLayer:a,accessibilityManager:o,annotationLayer:l,drawLayer:u,textLayer:d,viewport:f,l10n:g}){const y=[...Qi.#p.values()];if(!Qi._initialized){Qi._initialized=!0;for(const b of y)b.initialize(g,t)}t.registerEditorTypes(y),this.#u=t,this.pageIndex=i,this.div=s,this.#t=o,this.#n=l,this.viewport=f,this.#h=d,this.drawLayer=u,this._structTree=a,this.#u.addLayer(this)}updatePageIndex(t){this.pageIndex=t}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===bt.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#S(),t){case bt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case bt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case bt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:i}=this.div;if(i.toggle("nonEditing",!1),t===bt.POPUP)i.toggle("commentEditing",!0);else{i.toggle("commentEditing",!1);for(const s of Qi.#p.values())i.toggle(`${s._type}Editing`,t===s._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.togglePointerEvents(t)}get#y(){return this.#r.size!==0?this.#r.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const s of this.#y)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#u.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const i=this.#n;if(i)for(const s of i.getEditableAnnotations()){if(s.hide(),this.#u.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const a=await this.deserialize(s);a&&(this.addOrRebuild(a),a.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#m){this.#m=new AbortController;const a=this.#u.combinedSignal(this.#m);this.#h.div.addEventListener("pointerdown",o=>{const{clientX:u,clientY:d,timeStamp:f}=o,g=this.#g;if(f-g>500){this.#g=f;return}this.#g=-1;const{classList:y}=this.div;y.toggle("getElements",!0);const b=document.elementsFromPoint(u,d);if(y.toggle("getElements",!1),!this.div.contains(b[0]))return;let v;const w=new RegExp(`^${yr}[0-9]+$`);for(const x of b)if(w.test(x.id)){v=x.id;break}if(!v)return;const S=this.#r.get(v);S?.annotationElementId===null&&(o.stopPropagation(),o.preventDefault(),S.dblclick(o))},{signal:a,capture:!0})}const t=this.#n,i=[];if(t){const a=new Map,o=new Map;for(const u of this.#y){if(u.disableEditing(),!u.annotationElementId){i.push(u);continue}if(u.serialize()!==null){a.set(u.annotationElementId,u);continue}else o.set(u.annotationElementId,u);this.getEditableAnnotation(u.annotationElementId)?.show(),u.remove()}const l=t.getEditableAnnotations();for(const u of l){const{id:d}=u.data;if(this.#u.isDeletedAnnotationElement(d)){u.updateEdited({deleted:!0});continue}let f=o.get(d);if(f){f.resetAnnotationElement(u),f.show(!1),u.show();continue}f=a.get(d),f&&(this.#u.addChangedExistingAnnotation(f),f.renderAnnotationElement(u)&&f.show(!1)),u.show()}}this.#S(),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const a of Qi.#p.values())s.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(i),this.#o=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:i}=t;if(i===this.#h.div||(i.getAttribute("role")==="img"||i.classList.contains("endOfContent"))&&this.#h.div.contains(i)){const{isMac:s}=pe.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),ae.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#u.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const i=this.pointerup.bind(this);this.div.addEventListener("pointerup",i,{signal:t}),this.div.addEventListener("pointercancel",i,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#r.set(t.id,t);const{annotationElementId:i}=t;i&&this.#u.isDeletedAnnotationElement(i)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#r.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t),lt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const i=t.render();this.div.append(i),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:i}=document;t.div.contains(i)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),i.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const i=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:i,undo:s,mustExec:!1})}getEditorByUID(t){for(const i of this.#r.values())if(i.uid===t)return i;return null}getNextId(){return this.#u.getId()}get#b(){return Qi.#p.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#C(t){const i=this.#b;return i?new i.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,i){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:s,offsetY:a}=this.#E(),o=this.getNextId(),l=this.#C({parent:this,id:o,x:s,y:a,uiManager:this.#u,isCentered:!0,...i});l&&this.add(l)}async deserialize(t){return await Qi.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,i,s={}){const a=this.getNextId(),o=this.#C({parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:i,...s});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#E(){const{x:t,y:i,width:s,height:a}=this.boundingClientRect,o=Math.max(0,t),l=Math.max(0,i),u=Math.min(window.innerWidth,t+s),d=Math.min(window.innerHeight,i+a),f=(o+u)/2-t,g=(l+d)/2-i,[y,b]=this.viewport.rotation%180===0?[f,g]:[g,f];return{offsetX:y,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#E(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:i}=pe.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div||!this.#s||(this.#s=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#u.getMode();if(s===bt.STAMP||s===bt.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===bt.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:i}=pe.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div)return;if(this.#s=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const s=this.#u.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const i=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#d=null,this.commitOrRemove())},{signal:i}),this.#b.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:i}=document;this.div.contains(i)&&(this.#d=i);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,i,s){const a=this.#u.findParent(i,s);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const t of this.#r.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#r.clear(),this.#u.removeLayer(this)}#S(){for(const t of this.#r.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,as(this.div,t);for(const i of this.#u.getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#S();const i=this.viewport.rotation,s=t.rotation;if(this.viewport=t,as(this.div,{rotation:s}),i!==s)for(const a of this.#r.values())a.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:i}=this.viewport.rawDims;return[t,i]}get scale(){return this.#u.viewParameters.realScale}}class xe{#t=null;#e=new Map;#n=new Map;static#i=0;setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const i of this.#e.values())i.remove(),t.append(i);this.#t=t}}static get _svgFactory(){return gt(this,"_svgFactory",new dl)}static#a(t,[i,s,a,o]){const{style:l}=t;l.top=`${100*s}%`,l.left=`${100*i}%`,l.width=`${100*a}%`,l.height=`${100*o}%`}#r(){const t=xe._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#s(t,i){const s=xe._svgFactory.createElement("clipPath");t.append(s);const a=`clip_${i}`;s.setAttribute("id",a),s.setAttribute("clipPathUnits","objectBoundingBox");const o=xe._svgFactory.createElement("use");return s.append(o),o.setAttribute("href",`#${i}`),o.classList.add("clip"),a}#o(t,i){for(const[s,a]of Object.entries(i))a===null?t.removeAttribute(s):t.setAttribute(s,a)}draw(t,i=!1,s=!1){const a=xe.#i++,o=this.#r(),l=xe._svgFactory.createElement("defs");o.append(l);const u=xe._svgFactory.createElement("path");l.append(u);const d=`path_${a}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),i&&this.#n.set(a,u);const f=s?this.#s(l,d):null,g=xe._svgFactory.createElement("use");return o.append(g),g.setAttribute("href",`#${d}`),this.updateProperties(o,t),this.#e.set(a,o),{id:a,clipPathId:`url(#${f})`}}drawOutline(t,i){const s=xe.#i++,a=this.#r(),o=xe._svgFactory.createElement("defs");a.append(o);const l=xe._svgFactory.createElement("path");o.append(l);const u=`path_${s}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(i){const y=xe._svgFactory.createElement("mask");o.append(y),d=`mask_${s}`,y.setAttribute("id",d),y.setAttribute("maskUnits","objectBoundingBox");const b=xe._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const v=xe._svgFactory.createElement("use");y.append(v),v.setAttribute("href",`#${u}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const f=xe._svgFactory.createElement("use");a.append(f),f.setAttribute("href",`#${u}`),d&&f.setAttribute("mask",`url(#${d})`);const g=f.cloneNode();return a.append(g),f.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(a,t),this.#e.set(s,a),s}finalizeDraw(t,i){this.#n.delete(t),this.updateProperties(t,i)}updateProperties(t,i){if(!i)return;const{root:s,bbox:a,rootClass:o,path:l}=i,u=typeof t=="number"?this.#e.get(t):t;if(u){if(s&&this.#o(u,s),a&&xe.#a(u,a),o){const{classList:d}=u;for(const[f,g]of Object.entries(o))d.toggle(f,g)}if(l){const f=u.firstElementChild.firstElementChild;this.#o(f,l)}}}updateParent(t,i){if(i===this)return;const s=this.#e.get(t);s&&(i.#t.append(s),this.#e.delete(t),i.#e.set(t,s))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Ch};globalThis.pdfjsLib={AbortException:Ln,AnnotationEditorLayer:Qi,AnnotationEditorParamsType:Mt,AnnotationEditorType:bt,AnnotationEditorUIManager:On,AnnotationLayer:Xh,AnnotationMode:Rn,AnnotationType:he,applyOpacity:_1,build:NS,ColorPicker:di,createValidAbsoluteUrl:hy,CSSConstants:T1,DOMSVGFactory:dl,DrawLayer:xe,FeatureTest:pe,fetchData:Cr,findContrastColor:M1,getDocument:Rl,getFilenameFromUrl:A1,getPdfFilenameFromUrl:S1,getRGB:_r,getUuid:fy,getXfaPageViewport:E1,GlobalWorkerOptions:ss,ImageKind:rl,InvalidPDFException:mh,isDataScheme:wl,isPdfFile:Bh,isValidExplicitDest:I1,MathClamp:Ce,noContextMenu:fi,normalizeUnicode:b1,OPS:br,OutputScale:Di,PagesMapper:kt,PasswordResponses:l1,PDFDataRangeTransport:By,PDFDateString:yh,PDFWorker:Ar,PermissionFlag:o1,PixelsPerInch:aa,RenderingCancelledException:Nh,renderRichText:gy,ResponseException:ul,setLayerDimensions:as,shadow:gt,SignatureExtractor:Qs,stopEvent:ee,SupportedImageMimeTypes:bh,TextLayer:Ze,TouchManager:El,updateUrlHash:dy,Util:it,VerbosityLevel:bl,version:kS,XfaLayer:py};ss.workerSrc=new URL("/assets/pdf.worker-BA9kU3Pw.mjs",import.meta.url).toString();function aw({url:h}){const t=P.useRef(null);return P.useEffect(()=>{let i=!1;async function s(){try{const o=await(await Rl(encodeURI(h)).promise).getPage(1),l=t.current;if(!l||i)return;const u=140,d=o.getViewport({scale:1}),f=u/d.width,g=o.getViewport({scale:f});l.width=g.width,l.height=g.height,await o.render({canvasContext:l.getContext("2d"),viewport:g,canvas:l}).promise}catch{}}return s(),()=>{i=!0}},[h]),R.jsx("canvas",{ref:t,style:{width:"70px",height:"90px",borderRadius:"0.25rem",border:"1px solid #333",backgroundColor:"#1e1e1e",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"}})}const ur=[{title:"Publications",description:"Published works in academic journals and repositories.",items:[{title:"PEDAGOGICAL FOUNDATIONS OF ENSURING CYBERSECURITY OF SCHOOLCHILDREN IN THE CONTEXT OF DIGITAL TRANSFORMATION OF EDUCATION",language:"Russian",publication:"ALATOO ACADEMIC STUDIES",date:"January 2026",description:"The article examines the theoretical and pedagogical foundations for developing a culture of cybersecurity among schoolchildren in the context of the digital transformation of education. It substantiates the need to incorporate issues of digital and information security into the content of general education. The key pedagogical approaches, methods, and conditions that ensure the formation of safe and responsible student behavior in the digital environment are analyzed. A model for ensuring students' cybersecurity is presented, outlining the stages of cybersecurity developmentfrom defining the goal to achieving the final outcome. Special attention is given to the role of pedagogical support, the improvement of teachers' digital literacy, and the creation of an educational environment aimed at fostering students' competence in the field of cybersecurity. Practical recommendations for improving the student cybersecurity system are provided. The material offers a conceptual analysis and synthesis of current pedagogical approaches.",pdfUrl:"/PEDAGOGICAL FOUNDATIONS OF ENSURING CYBERSECURITY.pdf"},{title:"Grant Program Result Prediction: a Real-Time Management System to Estimate Results for a Given Budget",language:"English",publication:"AUCA Digital Repository",date:"December 2026",description:"The integration of ARTeMiS by AUCA's Center for Civic Engagement (CCE) as a management system for their Student Initiative Development Program (SIDP) grant program landmarks a steep increase in the SIDP Committee Members' ability to make data-driven judgement calls. However, the system can be further improved by providing forecasts of the potential impact each project will have, wherefrom arises the need for a grant result program prediction. This paper will use regression, data mining, and dynamic programming to estimate the optimal allocation of budget to yield maximal impact.",pdfUrl:"/Grant Program Result Prediction.pdf"}]},{title:"Research Papers",description:"In-depth research on various topics.",items:[{title:"Harmony or Hegemony: A Study of the Overwhelming Approval of the Social Credit System by Chinese Citizens",language:"English",publication:"Course: China's Foreign Policy",date:"December 2024",description:"Despite the diabolical portrayal the Chinese Social Credit System (SCS) received in Western democratic media, recent surveys have shown that less than one percent of Chinese citizens disapprove of the SCS. To find the grassroots of this astounding statistic, this paper delves into Chinese culture, exploring its notion of privacy and civil ideals, as well as analyzing Chinese history, the Chinese crisis of trust, and the radical steps the Chinese Communist Party has taken to bring the situation under control. This paper will argue that Chinese citizens overwhelmingly approve of the SCS because of the Chinese Communist Party's media control, social deterrence, and authority.",pdfUrl:"/Harmony or Hegemony.pdf"}]},{title:"Essays",description:"Long-form analytical and expository writing.",items:[{title:"The Antique and the Modern Promethies",language:"English",publication:"Course: First Year Seminar I",date:"December 2023",description:`Both Prometheus and Frankenstein were oblivious of their mortal status, and deserve punishment from their superiors precisely for their repeated, arrogant, and inconsiderate attempts of grandeur. The essay delves into the predicaments one is "funneled into" by fate, and whether the individuals themselves can be held accountable for their actions. With thorough and rigorous examination of the conditions Prometheus and Victor Frankenstein "discover" themselves in, this essay definitively asserts that encountering repercussions from others as a result of one's recklessness is not only justified, but deserved.`,pdfUrl:"/The Antique and the Modern Prometheis.pdf"},{title:"Individuals, Injustices, Coping Patterns",language:"English",publication:"Course: First Year Seminar II",date:"May 2024",description:"In an attempt to create a mental safespace from the injustice they suffered with coping mechanisms, individuals perpetrated their own doom precisely because they did not rationalize their emotions.",pdfUrl:"/Individuals, Injustices, Coping Patterns.pdf"}]},{title:"Articles",description:"Opinion pieces, mock-journalistic articles, and misc.",items:[{title:"Beyond The Books: Project-Based Learning at AUCA",language:"English",publication:"The Newstar",date:"March 2025",description:"Is Project-Based Learning the superior form of learning? Why do some courses use it and others do not?",pdfUrl:"/Beyond the Books I.pdf"},{title:"The New Advising System Is a Disaster",language:"English",publication:'The Newstar - Rejected [Due to Being "Too Critical"]',date:"October 2024",description:"In 2024, the administration of the American University of Central Asia removed student-to-student advising. What are the consequences of this decision?",pdfUrl:"/The New Advising System Is a Disaster.pdf"},{title:"Delta One",language:"English",publication:"N/A",date:"July 2023",description:"A structured approach to English I put together in 2023.",pdfUrl:"/D1.pdf"}]}];function rw({item:h,id:t,highlighted:i,expanded:s,onToggle:a,isMobile:o}){const l=P.useRef(null),[u,d]=P.useState(24);return P.useEffect(()=>{if(l.current)if(s)d(l.current.scrollHeight);else{const f=l.current.scrollHeight;d(f),setTimeout(()=>{d(24)},10)}},[s]),R.jsxs("div",{id:t,style:{display:"flex",flexDirection:o?"column":"row",backgroundColor:i?"#1a1a1a":"#141414",borderRadius:"0.75rem",border:i?"2px solid #888":"1px solid #222",overflow:"hidden",transition:"all 0.3s ease",boxShadow:i?"0 0 20px rgba(136, 136, 136, 0.3)":"none"},children:[R.jsxs("div",{style:{flex:1,minWidth:0,padding:o?"1rem":"1.5rem",display:"flex",flexDirection:"column",gap:"0.4rem",cursor:"pointer"},onClick:a,children:[R.jsx("h3",{style:{fontFamily:"CustomRegularBold, sans-serif",fontSize:o?"1rem":"1.15rem",color:"#ffffff",margin:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:s?"normal":"nowrap",transition:"all 0.3s ease"},children:h.title}),R.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",color:"#888",fontSize:"0.85rem",flexWrap:"wrap"},children:[R.jsx("span",{children:h.language}),R.jsx("span",{style:{color:"#444"},children:""}),R.jsx("span",{children:h.publication}),R.jsx("span",{style:{color:"#444"},children:""}),R.jsx("span",{children:h.date})]}),R.jsx("div",{ref:l,style:{maxHeight:`${u}px`,overflow:"hidden",transition:"max-height 0.3s ease"},children:R.jsx("p",{style:{color:"#aaa",fontSize:"0.9rem",margin:"0.4rem 0 0 0",lineHeight:1.5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:s?"normal":"nowrap"},children:h.description})})]}),!o&&R.jsx("div",{style:{width:"100px",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem 0.5rem",flexShrink:0},children:R.jsx(aw,{url:h.pdfUrl})}),R.jsxs("a",{href:encodeURI(h.pdfUrl),target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:o?"0.75rem 1rem":"0 1.5rem",borderLeft:o?"none":"1px solid #222",borderTop:o?"1px solid #222":"none",color:"#ffffff",fontSize:"0.95rem",textDecoration:"none",flexShrink:0,transition:"background-color 0.2s ease",whiteSpace:"nowrap"},onMouseEnter:f=>f.currentTarget.style.backgroundColor="#1e1e1e",onMouseLeave:f=>f.currentTarget.style.backgroundColor="transparent",children:[R.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[R.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),R.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),"Read"]})]})}function ow(){const h=la(),[t,i]=P.useState(ur[0].title),[s,a]=P.useState(null),[o,l]=P.useState(null),u=P.useRef(!1),[d,f]=P.useState(new Set);P.useEffect(()=>{const y=ur.map(v=>v.title.toLowerCase().replace(/\s+/g,"-")),b=new IntersectionObserver(v=>{for(const w of v)if(w.isIntersecting){const S=ur.find(x=>x.title.toLowerCase().replace(/\s+/g,"-")===w.target.id);S&&i(S.title)}},{rootMargin:"-20% 0px -60% 0px"});return y.forEach(v=>{const w=document.getElementById(v);w&&b.observe(w)}),()=>b.disconnect()},[]),P.useEffect(()=>{function y(){u.current||(a(null),l(null))}return window.addEventListener("scroll",y),()=>window.removeEventListener("scroll",y)},[]);function g(y,b=!1){u.current=!0,a(y),l(b?null:y),document.getElementById(y)?.scrollIntoView({behavior:"smooth"}),setTimeout(()=>{u.current=!1},1e3)}return R.jsxs("div",{style:{backgroundColor:"#000000",minHeight:"100vh",padding:h?"1.5rem":"3rem 3rem 3rem 5rem",display:"flex",gap:h?"0":"3rem",flexDirection:h?"column":"row"},children:[!h&&R.jsx("nav",{style:{position:"fixed",top:"6rem",left:"2rem",display:"flex",flexDirection:"column",gap:"0.75rem",borderRight:"1px solid #222",paddingRight:"1.5rem",zIndex:10,maxHeight:"calc(100vh - 8rem)",overflowY:"auto"},children:ur.map(y=>{const b=y.title.toLowerCase().replace(/\s+/g,"-"),v=s?s===b&&!o:t===y.title&&!o;return R.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[R.jsx("a",{href:`#${b}`,onClick:w=>{w.preventDefault(),g(b,!0)},style:{color:v?"#ffffff":"#666",fontSize:"0.9rem",fontFamily:"CustomRegularBold, sans-serif",textDecoration:"none",padding:"0.3rem 0.75rem",borderRadius:"0.25rem",backgroundColor:v?"#1a1a1a":"transparent",transition:"all 0.2s ease"},onMouseEnter:w=>{v||(w.currentTarget.style.color="#aaa")},onMouseLeave:w=>{v||(w.currentTarget.style.color="#666")},children:y.title}),R.jsx("div",{style:{display:"flex",flexDirection:"column",marginTop:"0.15rem"},children:y.items.map(w=>{const S=`${b}-${w.title.toLowerCase().replace(/\s+/g,"-")}`,x=o===S;return R.jsx("a",{href:`#${S}`,onClick:E=>{E.preventDefault(),g(S)},style:{color:x?"#ffffff":"#555",fontSize:"0.8rem",textDecoration:"none",padding:"0.2rem 0.75rem 0.2rem 1.5rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"160px",backgroundColor:x?"#1a1a1a":"transparent",borderRadius:"0.25rem",transition:"all 0.2s ease"},onMouseEnter:E=>{x||(E.currentTarget.style.color="#aaa")},onMouseLeave:E=>{x||(E.currentTarget.style.color="#555")},children:w.title},w.title)})})]},y.title)})}),R.jsxs("div",{style:{flex:1,minWidth:0,marginLeft:h?"0":"180px"},children:[R.jsx("h1",{style:{fontFamily:"CustomTitle, sans-serif",fontSize:h?"2rem":"2.5rem",color:"#ffffff",margin:"0 0 0.5rem 0"},children:"Academic Writing"}),R.jsx("p",{style:{color:"#888",fontSize:h?"0.95rem":"1.05rem",margin:"0 0 3rem 0"},children:"A collection of publications, research papers, essays, and opinions."}),R.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"3rem"},children:ur.map(y=>R.jsxs("div",{id:y.title.toLowerCase().replace(/\s+/g,"-"),style:{borderLeft:s===y.title.toLowerCase().replace(/\s+/g,"-")?"3px solid #888":"3px solid transparent",paddingLeft:"0.75rem",transition:"all 0.3s ease",backgroundColor:s===y.title.toLowerCase().replace(/\s+/g,"-")?"rgba(136, 136, 136, 0.05)":"transparent",borderRadius:"0.5rem"},children:[R.jsx("h2",{style:{fontFamily:"CustomRegularBold, sans-serif",fontSize:"1.3rem",color:"#ffffff",margin:"0 0 0.25rem 0"},children:y.title}),R.jsx("p",{style:{color:"#666",fontSize:"0.9rem",margin:"0 0 1rem 0"},children:y.description}),R.jsx("div",{style:{display:"grid",gridTemplateColumns:h?"1fr":"1fr 1fr",gap:"0.75rem"},children:y.items.map((b,v)=>{const w=y.title.toLowerCase().replace(/\s+/g,"-"),S=`${w}-${b.title.toLowerCase().replace(/\s+/g,"-")}`,x=h?v:Math.floor(v/2),E=`${w}-row-${x}`,_=d.has(E),T=()=>{f(N=>{const L=new Set(N);return L.has(E)?L.delete(E):L.add(E),L})};return R.jsx(rw,{item:b,id:S,highlighted:s===S,expanded:_,onToggle:T,isMobile:h},b.title)})})]},y.title))})]})]})}function lw(){const h=la(),t=["C","C++","raylib","Qt","Python","Scikit-Learn","Linux","Cisco IOS"],i=["Blender","aseprite","Photoshop","Illustrator","InDesign","VEGAS Pro"],s=["Research"],a=({skill:o})=>R.jsx("span",{style:{display:"inline-block",backgroundColor:"rgba(255,255,255,0.07)",color:"#c8c4bc",padding:"0.5rem 1rem",borderRadius:"9999px",fontSize:"0.75rem",fontFamily:"CustomRegular, sans-serif",marginRight:"0.5rem",marginBottom:"0.5rem",border:"1px solid rgba(255,255,255,0.08)"},children:o});return R.jsx("div",{style:{backgroundColor:"#000000",minHeight:"calc(100vh - 120px)",padding:h?"1.5rem":"3rem",display:"flex",justifyContent:"center"},children:R.jsxs("div",{style:{maxWidth:h?"100%":"70%"},children:[R.jsx("h1",{style:{fontFamily:"CustomTitle, sans-serif",fontSize:h?"2rem":"2.5rem",fontWeight:"bold",color:"#ffffff",marginBottom:"2rem",textAlign:"center"},children:"About Me"}),R.jsx("section",{style:{marginTop:"2rem",marginBottom:"2rem"},children:R.jsx("p",{style:{fontFamily:"CustomRegular, sans-serif",fontSize:"1rem",color:"#d4d0c8",lineHeight:"1.6"},children:"My name is Luna Maltseva. I grew up between the United Kingdom and the Kyrgyz Republic, and as a result speak both English and Russian fluently. At the moment, I am doing an undergrad in Software Engineering at the American University of Central Asia, specializing in Data Science. I am active in the field of Civic Engagement, I mentor others as a Peer Advisor and a Teaching Assistant, and I do research, journalism, and business coordination as a side-kick."})}),R.jsxs("section",{style:{marginBottom:"2rem"},children:[R.jsxs("p",{style:{fontFamily:"CustomRegular, sans-serif",fontSize:"1rem",color:"#d4d0c8",lineHeight:"1.6",marginBottom:"1rem"},children:[R.jsx("span",{style:{fontFamily:"CustomRegularBold, sans-serif",fontWeight:"bold",color:"#ffffff"},children:"Programming."})," I have taken an interest in programming at the age of 8. Professionally, I have developed and deployed a data analysis platform for Civic Engagement grants using Python and Google Scripts. As a Teaching Assistant, I have put together course websites and designed educational projects using raylib and Qt. For personal enjoyment, I have put together a then-cutting-edge GPT 2.0 chatbot and created and distributed games."]}),R.jsx("div",{style:{display:"flex",flexWrap:"wrap"},children:t.map(o=>R.jsx(a,{skill:o},o))})]}),R.jsxs("section",{style:{marginBottom:"2rem"},children:[R.jsxs("p",{style:{fontFamily:"CustomRegular, sans-serif",fontSize:"1rem",color:"#d4d0c8",lineHeight:"1.6",marginBottom:"1rem"},children:[R.jsx("span",{style:{fontFamily:"CustomRegularBold, sans-serif",fontWeight:"bold",color:"#ffffff"},children:"Design."}),' By 17, my graphic design skills have passed my threshold of being deemed "professional." I have been commissioned to design university resources, such as promotion materials, presentations, and branding. More often, I do graphic design for my own purposes and/or enjoyment, such as designing template course registration schedules or QR codes for study calendars.']}),R.jsx("div",{style:{display:"flex",flexWrap:"wrap"},children:i.map(o=>R.jsx(a,{skill:o},o))})]}),R.jsxs("section",{style:{marginBottom:"2rem"},children:[R.jsxs("p",{style:{fontFamily:"CustomRegular, sans-serif",fontSize:"1rem",color:"#d4d0c8",lineHeight:"1.6"},children:[R.jsx("span",{style:{fontFamily:"CustomRegularBold, sans-serif",fontWeight:"bold",color:"#ffffff"},children:"Writing."})," In my academic life, I have written essays, research papers, technical documentation, and op-eds. For self-development, I have written pop-journalism articles and am in the process of writing a novel."]}),R.jsx("div",{style:{display:"flex",flexWrap:"wrap"},children:s.map(o=>R.jsx(a,{skill:o},o))})]})]})})}ss.workerSrc=new URL("/assets/pdf.worker-BA9kU3Pw.mjs",import.meta.url).toString();const fl=200,pl=150,hr=[{title:"Commissioned",description:"Promotional materials, presentations, and branding created for AUCA departments.",date:"Fall 2024  Present",items:[{title:"WARC Handbook",date:"May 2024",description:"A handbook I put together for funzies for the Writing and Academic Resource Center, though I never finished it.",type:"pdf",url:"/design/WARC Handbook.pdf",aspect:960/540},{title:"WARC Animated Logotype",date:"October 2023",description:"An animated version of the WARC logotype. Created shortly after the logotype itself.",type:"mp4",url:"/design/Animation Light.mp4",aspect:1920/1080},{title:"Career Fair Form Header",date:"March 2025",description:"Banner header for the AUCA Career Center career fair registration form.",type:"image",url:"/design/Career Fair Header.png",aspect:1600/400},{title:"Proposed Logotype for Academic Advising",date:"May 2025",description:"Logo proposal for Academic Advising. Turned down due to not being AUCA-ey.",type:"image",url:"/design/Academic Advising Logo.png",aspect:2582/1024},{title:"AUCA Campus Coloring Page",date:"May 2024",description:"Created as an insult to the then-staff of the Academic Advising office. To my surprise, it was readily accepted.",type:"pdf",url:"/design/AUCA Campus Coloring Page.pdf",aspect:595.32/841.92},{title:"Registration Schedule",date:"September 2023",description:"Originally designed for myself, soon polished and distributed university-wide. Became officially endorsed two months after.",type:"pdf",url:"/design/Schedule.pdf",aspect:595.32/841.92},{title:"University Timetable",date:"2024",description:"Landscape-format daily timetable showing the times services at AUCA are open.",type:"pdf",url:"/design/Timetable.pdf",aspect:841.89/595.276},{title:"Calendar",date:"July 2024",description:"Originally designed for myself, soon polished and distributed university-wide. Now, it is promoted to everyone at the start of the academic year.",type:"image",url:"/design/Calendar.png",aspect:2054/2054},{title:"COM-122 Game Jam",date:"November 2025",description:`Promotional title card for the Introduction to Programming course's "Breakout" pilot Game Jam.`,type:"image",url:"/design/COM122 Gamejam.png",aspect:652/367},{title:"Level Editor Splash Screen",date:"March 2025",description:"Pixel art splash screen for a platformer level editor. Designed for the Object-Oriented Programming course.",type:"image",url:"/design/Level Editor Splash Screen.png",aspect:600/400}]},{title:"Authored",description:"Design work created for personal use or enjoyment.",date:"2023  Present",items:[{title:"Experte Concept",date:"November 2025",description:"Thezeraine. A refurbished version of the dual-blade tower, conceptualized first in 2018. The mascot of Theoderau. Seen here, towering over a kilometer high: the upper section actively supported by tetranol-powered Aegis shields. On the upper floors of the right tower, a stack of cooling fins.",type:"image",url:"/design/Experte.png",aspect:301/1073},{title:"Caoz Concept",date:"2023",description:"Thezeraine. An attempt to depict a Caoz Rifle. Looks nice, though not incredibly practical. The red glowing squares are magnets; as the rifle charges up, they float and axially rotate around the body of the rifle.",type:"image",url:"/design/Caoz Concept.png",aspect:1920/1080},{title:"ARTeMiS Presentation",date:"November 2025",description:"Slide deck for the ARTeMiS project presentation.",type:"pdf",url:"/design/ARTeMiS.pdf",aspect:960/540},{title:"Green Club Logotype",date:"April 2024",description:"Logo for the AUCA Green Club. Became official five months later. Originally designed due to me being fed up with the ugly logo.",type:"image",url:"/design/Green Club Logotype.png",aspect:1025/1025},{title:"Climate Week",date:"March 2025",description:"Promotional poster for Climate Education Week at AUCA Sustainable.",type:"image",url:"/design/Climate Week.png",aspect:1080/1080},{title:"Darmarka Poster",date:"February 2025",description:"Event poster for the AUCA Darmarka and handmade fair organized with the Center for Civic Engagement. Depicts the AUCA Forum, where the event is regularly held. It is worth mentioning that the conception of the event was partially my idea.",type:"image",url:"/design/Darmarka Poster.png",aspect:1920/1080},{title:"Personal Font",date:"2022",description:"A custom pixel art font I put together for my own purposes back in 2022, having become tired of manually drawing it every time.",type:"image",url:"/design/Personal Font.png",aspect:113/149},{title:"Candidacy Poster",date:"October 2025",description:"The poster I used to run for the Student Senate in 2025. I did not get elected. I did spend thirty minutes stretching my arm and changing outfits to get the photo, which still did not turn out great, despite my efforts.",type:"image",url:"/design/Candidacy Poster.png",aspect:2126/3508},{title:"Business Card",date:"December 2025",description:"A minimalistic business card.",type:"image",url:"/design/Business Card.png",aspect:1050/600}]}];function Xy(h,t){const s=(t?pl:fl)-40,a=h.aspect||1,o=s*a;return Math.max(80,Math.min(t?240:360,Math.round(o)))}function cw({url:h,width:t,isMobile:i}){const s=P.useRef(null),a=(i?pl:fl)-40;return P.useEffect(()=>{let o=!1;async function l(){try{const d=await(await Rl(encodeURI(h)).promise).getPage(1),f=s.current;if(!f||o)return;const g=t*2,y=d.getViewport({scale:1}),b=g/y.width,v=d.getViewport({scale:b});f.width=v.width,f.height=v.height,await d.render({canvasContext:f.getContext("2d"),viewport:v,canvas:f}).promise}catch{}}return l(),()=>{o=!0}},[h,t]),R.jsx("canvas",{ref:s,style:{width:`${t}px`,height:`${a}px`,objectFit:"cover",backgroundColor:"#1e1e1e",display:"block"}})}function uw({url:h}){const t=P.useRef(null);return P.useEffect(()=>{let i=!1;async function s(){try{const o=await(await Rl(encodeURI(h)).promise).getPage(1),l=t.current;if(!l||i)return;const u=800,d=o.getViewport({scale:1}),f=u/d.width,g=o.getViewport({scale:f});l.width=g.width,l.height=g.height,await o.render({canvasContext:l.getContext("2d"),viewport:g,canvas:l}).promise}catch{}}return s(),()=>{i=!0}},[h]),R.jsxs("div",{children:[R.jsx("canvas",{ref:t,style:{width:"100%",borderRadius:"0.5rem"}}),R.jsx("a",{href:encodeURI(h),target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",marginTop:"0.5rem",color:"#888",fontSize:"0.85rem",textDecoration:"underline"},children:"Open full PDF"})]})}function hw({item:h,onClick:t,highlighted:i,isMobile:s}){const a=Xy(h,s),o=(s?pl:fl)-40,l=s?pl:fl;return R.jsxs("div",{onClick:t,style:{width:`${a}px`,height:`${l}px`,flexShrink:0,borderRadius:"0.5rem",overflow:"hidden",border:i?"2px solid #888":"1px solid #222",backgroundColor:i?"#1a1a1a":"#141414",cursor:"pointer",transition:"all 0.3s ease",boxShadow:i?"0 0 16px rgba(136, 136, 136, 0.3)":"none"},onMouseEnter:u=>{i||(u.currentTarget.style.borderColor="#555")},onMouseLeave:u=>{i||(u.currentTarget.style.borderColor="#222")},children:[h.type==="image"?R.jsx("img",{src:h.thumbnailUrl||h.url,alt:h.title,draggable:!1,style:{width:`${a}px`,height:`${o}px`,objectFit:"cover",display:"block"}}):h.type==="mp4"?R.jsx("video",{src:h.url,muted:!0,loop:!0,autoPlay:!0,playsInline:!0,draggable:!1,style:{width:`${a}px`,height:`${o}px`,objectFit:"cover",display:"block"}}):R.jsx(cw,{url:h.thumbnailUrl||h.url,width:a,isMobile:s}),R.jsx("div",{style:{padding:"0.35rem 0.6rem",color:i?"#fff":"#aaa",fontSize:s?"0.7rem":"0.8rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:h.title})]})}function dw({items:h,onItemClick:t,highlightedItem:i,onHighlightDone:s,isMobile:a}){const o=P.useRef(null),l=P.useRef(null),u=P.useRef(0),d=P.useRef(!1),f=P.useRef(!1),g=P.useRef(!1),y=P.useRef({x:0,pos:0}),b=P.useRef(0),v=P.useRef(0),w=P.useRef({x:0,time:0}),S=.5,x=.95,E=.1,[_,T]=P.useState(3),N=P.useRef(0);P.useEffect(()=>{if(!l.current)return;const Q=16;let rt=0;for(const Z of h)rt+=Xy(Z,a)+Q;N.current=rt;const k=l.current.offsetWidth,j=Math.max(3,Math.ceil(k*3/Math.max(rt,1)));T(j)},[h,a]),P.useEffect(()=>{if(!o.current)return;const Q=h.length;if(Q===0)return;const rt=o.current.children;let k=0;for(let j=0;j<Q&&j<rt.length;j++)k+=rt[j].offsetWidth+16;N.current=k},[h,_,a]);function L(){const Q=N.current;if(!(Q<=0)){for(;u.current>0;)u.current-=Q;for(;u.current<-Q;)u.current+=Q}}P.useEffect(()=>{if(!i||!o.current||!l.current)return;f.current=!0,d.current=!0;const Q=h.findIndex(D=>D.title===i.title);if(Q<0)return;const rt=o.current.children;if(Q>=rt.length)return;const k=rt[Q],j=k.offsetLeft+k.offsetWidth/2,Z=l.current.offsetWidth,mt=-(j-Z/2);u.current=mt,L(),o.current.style.transform=`translateX(${u.current}px)`;const St=setTimeout(()=>{f.current=!1,s?.()},2e3);return()=>clearTimeout(St)},[i,h,s]),P.useEffect(()=>{let Q;function rt(){o.current&&!f.current&&(g.current||(Math.abs(v.current)>E?(u.current+=v.current,v.current*=x,Math.abs(v.current)<=E&&(v.current=0),L(),o.current.style.transform=`translateX(${u.current}px)`):d.current||(u.current-=S,L(),o.current.style.transform=`translateX(${u.current}px)`))),Q=requestAnimationFrame(rt)}return Q=requestAnimationFrame(rt),()=>cancelAnimationFrame(Q)},[]),P.useEffect(()=>{function Q(){document.hidden&&(d.current=!0)}return document.addEventListener("visibilitychange",Q),()=>document.removeEventListener("visibilitychange",Q)},[]);function B(Q){g.current=!0,v.current=0,b.current=0,y.current={x:Q.clientX,pos:u.current},w.current={x:Q.clientX,time:performance.now()}}function F(Q){if(!g.current||!o.current)return;const rt=Q.clientX-y.current.x;b.current=Math.abs(rt),u.current=y.current.pos+rt,L(),o.current.style.transform=`translateX(${u.current}px)`;const k=performance.now(),j=k-w.current.time;j>0&&(v.current=(Q.clientX-w.current.x)/Math.max(j,1)*16),w.current={x:Q.clientX,time:k}}function $(){g.current=!1}function W(Q){g.current=!0,v.current=0,b.current=0;const rt=Q.touches[0].clientX;y.current={x:rt,pos:u.current},w.current={x:rt,time:performance.now()}}function tt(Q){if(!g.current||!o.current)return;const rt=Q.touches[0].clientX,k=rt-y.current.x;b.current=Math.abs(k),u.current=y.current.pos+k,L(),o.current.style.transform=`translateX(${u.current}px)`;const j=performance.now(),Z=j-w.current.time;Z>0&&(v.current=(rt-w.current.x)/Math.max(Z,1)*16),w.current={x:rt,time:j}}function J(){g.current=!1}function dt(Q){v.current=Q>0?8:-8}function xt(Q){b.current>5||t(Q)}return R.jsxs("div",{style:{position:"relative"},children:[!a&&R.jsx("button",{onClick:()=>dt(200),style:{position:"absolute",left:"-12px",top:"50%",transform:"translateY(-50%)",zIndex:2,background:"rgba(0,0,0,0.8)",border:"1px solid #333",color:"#fff",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.9rem"},onMouseEnter:Q=>{Q.currentTarget.style.borderColor="#666"},onMouseLeave:Q=>{Q.currentTarget.style.borderColor="#333"},children:R.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:R.jsx("polyline",{points:"15 18 9 12 15 6"})})}),R.jsx("div",{ref:l,onMouseEnter:()=>{f.current||(d.current=!0)},onMouseLeave:()=>{f.current||(d.current=!1),g.current=!1},onMouseDown:B,onMouseMove:F,onMouseUp:$,onTouchStart:W,onTouchMove:tt,onTouchEnd:J,style:{overflow:"hidden",cursor:"grab",padding:"0.5rem 0",userSelect:"none"},children:R.jsx("div",{ref:o,style:{display:"flex",gap:"1rem",willChange:"transform"},children:Array.from({length:_},()=>h).flat().map((Q,rt)=>R.jsx(hw,{item:Q,onClick:()=>xt(Q),highlighted:i?.title===Q.title,isMobile:a},`${Q.title}-${rt}`))})}),!a&&R.jsx("button",{onClick:()=>dt(-200),style:{position:"absolute",right:"-12px",top:"50%",transform:"translateY(-50%)",zIndex:2,background:"rgba(0,0,0,0.8)",border:"1px solid #333",color:"#fff",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.9rem"},onMouseEnter:Q=>{Q.currentTarget.style.borderColor="#666"},onMouseLeave:Q=>{Q.currentTarget.style.borderColor="#333"},children:R.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:R.jsx("polyline",{points:"9 18 15 12 9 6"})})})]})}function fw({item:h,onClose:t,isMobile:i}){return P.useEffect(()=>{const s=a=>{a.key==="Escape"&&t()};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[t]),P.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}),[]),t1.createPortal(R.jsx("div",{onClick:t,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",zIndex:1100,display:"flex",alignItems:"center",justifyContent:"center",padding:i?"1rem":"2rem"},children:R.jsxs("div",{onClick:s=>s.stopPropagation(),style:{backgroundColor:"#141414",borderRadius:i?"0.75rem":"1rem",border:"1px solid #222",maxWidth:i?"100%":"900px",maxHeight:"90vh",width:"100%",overflow:"auto",position:"relative"},children:[R.jsx("button",{onClick:t,style:{position:"absolute",top:"0.75rem",right:"0.75rem",background:"none",border:"none",color:"#888",fontSize:"1.5rem",cursor:"pointer",zIndex:1,lineHeight:1},onMouseEnter:s=>{s.currentTarget.style.color="#fff"},onMouseLeave:s=>{s.currentTarget.style.color="#888"},children:""}),R.jsxs("div",{style:{padding:i?"1rem":"2rem"},children:[h.type==="image"?R.jsx("img",{src:h.url,alt:h.title,style:{width:"100%",borderRadius:"0.5rem",maxHeight:"60vh",objectFit:"contain"}}):h.type==="mp4"?R.jsx("video",{src:h.url,controls:!0,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,style:{width:"100%",borderRadius:"0.5rem",maxHeight:"60vh",objectFit:"contain"}}):R.jsx(uw,{url:h.url}),R.jsx("h2",{style:{fontFamily:"CustomRegularBold, sans-serif",fontSize:i?"1.1rem":"1.3rem",color:"#ffffff",margin:"1.5rem 0 0.5rem 0"},children:h.title}),R.jsx("span",{style:{color:"#666",fontSize:"0.85rem"},children:h.date}),R.jsx("p",{style:{color:"#aaa",fontSize:"0.9rem",lineHeight:1.5,marginTop:"0.75rem"},children:h.description})]})]})}),document.body)}function pw({sections:h,activeSection:t,activeItemTitle:i,onNavigate:s,onItemNavigate:a}){return R.jsx("nav",{style:{position:"fixed",top:"6rem",left:"2rem",display:"flex",flexDirection:"column",gap:"0.75rem",borderRight:"1px solid #222",paddingRight:"1.5rem",zIndex:10,maxHeight:"calc(100vh - 8rem)",overflowY:"auto"},children:h.map(o=>{const l=o.title.toLowerCase().replace(/\s+/g,"-"),u=t===o.title&&!i;return R.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[R.jsx("a",{href:`#${l}`,onClick:d=>{d.preventDefault(),s(l)},style:{color:u?"#ffffff":"#666",fontSize:"0.9rem",fontFamily:"CustomRegularBold, sans-serif",textDecoration:"none",padding:"0.3rem 0.75rem",borderRadius:"0.25rem",backgroundColor:u?"#1a1a1a":"transparent",transition:"all 0.2s ease"},onMouseEnter:d=>{u||(d.currentTarget.style.color="#aaa")},onMouseLeave:d=>{u||(d.currentTarget.style.color="#666")},children:o.title}),R.jsx("div",{style:{display:"flex",flexDirection:"column",marginTop:"0.15rem"},children:o.items.map(d=>{const f=i===d.title;return R.jsx("a",{href:`#${l}`,onClick:g=>{g.preventDefault(),a(l,d)},style:{color:f?"#ffffff":"#555",fontSize:"0.8rem",textDecoration:"none",padding:"0.2rem 0.75rem 0.2rem 1.5rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"160px",backgroundColor:f?"#1a1a1a":"transparent",borderRadius:"0.25rem",transition:"all 0.2s ease"},onMouseEnter:g=>{f||(g.currentTarget.style.color="#aaa")},onMouseLeave:g=>{f||(g.currentTarget.style.color="#555")},children:d.title},d.title)})})]},o.title)})})}function gw({section:h,id:t,onItemClick:i,highlightedItem:s,onHighlightDone:a,isMobile:o}){return R.jsxs("div",{id:t,style:{marginBottom:o?"2rem":"3rem"},children:[R.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline",marginBottom:"0.25rem",flexWrap:"wrap",gap:"0.5rem"},children:[R.jsx("h2",{style:{fontFamily:"CustomRegularBold, sans-serif",fontSize:o?"1.1rem":"1.3rem",color:"#ffffff",margin:0},children:h.title}),R.jsx("span",{style:{color:"#666",fontSize:"0.85rem",fontFamily:"CustomRegular, sans-serif",flexShrink:0},children:h.date})]}),R.jsx("p",{style:{color:"#666",fontSize:"0.9rem",margin:"0 0 1rem 0"},children:h.description}),R.jsx(dw,{items:h.items,onItemClick:i,highlightedItem:s,onHighlightDone:a,isMobile:o})]})}function mw(){const h=la(),[t,i]=P.useState(hr[0].title),[s,a]=P.useState(null),[o,l]=P.useState({}),[u,d]=P.useState(null);P.useEffect(()=>{const b=hr.map(w=>w.title.toLowerCase().replace(/\s+/g,"-")),v=new IntersectionObserver(w=>{for(const S of w)if(S.isIntersecting){const x=hr.find(E=>E.title.toLowerCase().replace(/\s+/g,"-")===S.target.id);x&&i(x.title)}},{rootMargin:"-20% 0px -60% 0px"});return b.forEach(w=>{const S=document.getElementById(w);S&&v.observe(S)}),()=>v.disconnect()},[]);function f(b){d(null),document.getElementById(b)?.scrollIntoView({behavior:"smooth"})}const g=P.useCallback((b,v)=>{document.getElementById(b)?.scrollIntoView({behavior:"smooth"}),l(w=>({...w,[b]:v})),d(v.title)},[]),y=P.useCallback(b=>{l(v=>({...v,[b]:null})),d(null)},[]);return R.jsxs("div",{style:{backgroundColor:"#000000",minHeight:"100vh",padding:h?"1.5rem":"3rem 3rem 3rem 5rem",display:"flex",gap:h?"0":"3rem",flexDirection:h?"column":"row"},children:[!h&&R.jsx(pw,{sections:hr,activeSection:t,activeItemTitle:u,onNavigate:f,onItemNavigate:g}),R.jsxs("div",{style:{flex:1,minWidth:0,marginLeft:h?"0":"180px"},children:[R.jsx("h1",{style:{fontFamily:"CustomTitle, sans-serif",fontSize:h?"2rem":"2.5rem",color:"#ffffff",margin:"0 0 0.5rem 0"},children:"Design"}),R.jsx("p",{style:{color:"#888",fontSize:h?"0.95rem":"1.05rem",margin:"0 0 3rem 0"},children:"A sample of commissioned and personal design work."}),hr.map(b=>{const v=b.title.toLowerCase().replace(/\s+/g,"-");return R.jsx(gw,{section:b,id:v,onItemClick:w=>a(w),highlightedItem:o[v],onHighlightDone:()=>y(v),isMobile:h},b.title)})]}),s&&R.jsx(fw,{item:s,onClose:()=>a(null),isMobile:h})]})}const jm=[{id:"artemis-data-science",title:"ARTeMiS",titleType:"image",titleImageUrl:"https://i.postimg.cc/nzK4HBfr/artemis.png",description:"A data science group project for the MAT-395 course at AUCA. Contains source code, data analysis pipelines, and visualizations including correlation analysis, distribution studies, diversity metrics, and polynomial regression models.",date:"2025",language:"Python",backgroundImage:"https://i.postimg.cc/mr1h4HFG/model-render.png",githubUrl:"https://github.com/lunamaltseva/ARTeMiS-Data-Science"},{id:"borderline",title:"Borderline",titleType:"image",titleImageUrl:"https://i.postimg.cc/YCqbdpLF/borderline.png",description:"A puzzle-esque dungeon crawler set on a chess board. Players complete five levels by collecting keys, avoiding enemies, and reaching exits before a move counter expires. Features three-life system, smooth animations, and a narrative with an opening sequence and climactic dialogue.",date:"2025",language:"C++",backgroundImage:"https://raw.githubusercontent.com/lunamaltseva/borderline/master/screenshots/game.png",githubUrl:"https://github.com/lunamaltseva/borderline"},{id:"catastrophic",title:"Catastrophic",titleType:"image",titleImageUrl:"https://raw.githubusercontent.com/lunamaltseva/catastrophic/main/data/screenshots/title.png",description:"An object-oriented Sokoban implementation featuring a post-apocalyptic narrative. Follow an undertaker's cat completing burial tasks across levels, with the story's ending determined by player performance. Features undo functionality, dynamic visual feedback, and three narrative endings.",date:"2025",language:"C++",backgroundImage:"https://raw.githubusercontent.com/lunamaltseva/catastrophic/main/data/screenshots/gameplay.png",githubUrl:"https://github.com/lunamaltseva/catastrophic"},{id:"rockstar-advanced",title:"Rockstar",titleType:"text",titleFont:"CustomTitle, sans-serif",description:"A graphics application built with C++ featuring custom rendering, track design, and asset management. Utilizes raylib for graphics rendering and vcpkg for dependency management.",date:"2025",language:"C++",backgroundImage:"https://raw.githubusercontent.com/lunamaltseva/rockstar-advanced/master/data/textures/footage.png",githubUrl:"https://github.com/lunamaltseva/rockstar-advanced"},{id:"platformer-level-editor",title:"Platformer Level Editor",titleType:"text",titleFont:"CustomTitle, sans-serif",titleSize:"2.5rem",description:"An interactive level editor for a platformer game built with Qt6 framework. Features grid-based editing with sprite tile placement, drag-placing, undo functionality, multi-level handling, and export to RLE-encoded level files.",date:"2025",language:"C++",backgroundImage:"https://i.imgur.com/UAmqni6.png",githubUrl:"https://github.com/lunamaltseva/platformer-level-editor-final"}];function yw({projects:h,activeIndex:t,onSelect:i,isMobile:s}){const a=P.useRef(null),o=P.useRef([]);return P.useEffect(()=>{const l=o.current[t];if(l&&a.current){const u=a.current,d=l.offsetLeft-u.offsetWidth/2+l.offsetWidth/2;u.scrollTo({left:d,behavior:"smooth"})}},[t]),R.jsx("div",{style:{position:"fixed",top:"5rem",left:"50%",transform:"translateX(-50%)",zIndex:100,width:s?"calc(100% - 1.5rem)":"calc(100% - 4rem)",maxWidth:"1200px"},children:R.jsxs("div",{ref:a,style:{display:"flex",alignItems:"center",gap:"0.25rem",backgroundColor:"rgba(20, 20, 20, 0.85)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",borderRadius:"0.75rem",border:"1px solid #333",padding:"0.35rem",overflowX:"auto",scrollbarWidth:"none"},children:[R.jsx("button",{onClick:()=>i((t-1+h.length)%h.length),style:{flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",background:"none",border:"none",color:"#888",cursor:"pointer",transition:"color 0.2s ease"},onMouseEnter:l=>{l.currentTarget.style.color="#fff"},onMouseLeave:l=>{l.currentTarget.style.color="#888"},children:R.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:R.jsx("polyline",{points:"15 18 9 12 15 6"})})}),R.jsx("div",{style:{flex:1,display:"flex",justifyContent:s?"flex-start":"center",gap:"0.25rem",overflowX:s?"auto":"visible",scrollbarWidth:"none"},children:h.map((l,u)=>R.jsx("button",{ref:d=>{o.current[u]=d},onClick:()=>i(u),style:{flexShrink:0,padding:s?"0.5rem 0.75rem":"0.5rem 1rem",borderRadius:"0.5rem",border:"none",backgroundColor:u===t?"#333":"transparent",color:u===t?"#fff":"#888",fontFamily:"CustomRegular, sans-serif",fontSize:s?"0.75rem":"0.85rem",cursor:"pointer",transition:"all 0.2s ease",whiteSpace:"nowrap"},onMouseEnter:d=>{u!==t&&(d.currentTarget.style.color="#ccc",d.currentTarget.style.backgroundColor="#1a1a1a")},onMouseLeave:d=>{u!==t&&(d.currentTarget.style.color="#888",d.currentTarget.style.backgroundColor="transparent")},children:l.title},l.id))}),R.jsx("button",{onClick:()=>i((t+1)%h.length),style:{flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",background:"none",border:"none",color:"#888",cursor:"pointer",transition:"color 0.2s ease"},onMouseEnter:l=>{l.currentTarget.style.color="#fff"},onMouseLeave:l=>{l.currentTarget.style.color="#888"},children:R.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:R.jsx("polyline",{points:"9 18 15 12 9 6"})})})]})})}function bw({project:h,isMobile:t}){const[i,s]=P.useState(!1),[a,o]=P.useState(!1);return P.useEffect(()=>{s(!1),o(!1)},[h.id]),R.jsxs("div",{style:{position:"relative",backgroundColor:"#000000",minHeight:"calc(100vh - 150px)",display:"flex",alignItems:"flex-end",padding:t?"1.5rem":"3rem",overflow:"hidden"},children:[h.backgroundImage&&R.jsx("img",{src:h.backgroundImage,alt:"",onLoad:()=>o(!0),style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:t?"95%":"75%",height:t?"60%":"75%",objectFit:"contain",zIndex:0,opacity:a?1:0,transition:"opacity 0.5s ease"}}),R.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",height:"60%",background:"linear-gradient(to top, rgba(0, 0, 0, 0.95) 0%, rgba(0, 0, 0, 0.6) 50%, transparent 100%)",zIndex:1,pointerEvents:"none"}}),R.jsxs("div",{style:{maxWidth:t?"100%":"600px",position:"relative",zIndex:2},children:[h.titleType==="image"&&h.titleImageUrl?R.jsx("img",{src:h.titleImageUrl,alt:h.title,style:{maxHeight:t?"80px":"120px",maxWidth:t?"250px":"400px",marginBottom:"1.5rem",objectFit:"contain",filter:"drop-shadow(0 2px 8px rgba(0,0,0,0.5))"}}):R.jsx("h1",{style:{fontFamily:h.titleFont||"CustomTitle, sans-serif",fontSize:t?"2rem":h.titleSize||"3.5rem",color:"#ffffff",marginBottom:"1.5rem",lineHeight:"1.2"},children:h.title}),R.jsxs("div",{style:{display:"flex",gap:t?"1rem":"1.5rem",marginBottom:"1.5rem",alignItems:"center",flexWrap:"wrap"},children:[R.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#d3d3d3",fontSize:t?"0.9rem":"1rem"},children:[R.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#d3d3d3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[R.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),R.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),R.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),R.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),R.jsx("span",{children:h.date})]}),R.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#d3d3d3",fontSize:t?"0.9rem":"1rem"},children:[R.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#d3d3d3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[R.jsx("polyline",{points:"16 18 22 12 16 6"}),R.jsx("polyline",{points:"8 6 2 12 8 18"})]}),R.jsx("span",{children:h.language})]})]}),R.jsx("p",{onClick:()=>s(!i),style:{color:"#ffffff",fontSize:"1rem",lineHeight:"1.6",marginBottom:"1.5rem",maxWidth:"600px",cursor:"pointer",display:"-webkit-box",WebkitLineClamp:i?"unset":2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:h.description}),R.jsxs("a",{href:h.githubUrl,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",backgroundColor:"#ffffff",color:"#000000",padding:"0.75rem 1.5rem",fontSize:"1rem",textDecoration:"none",border:"none",borderRadius:"0.375rem",transition:"opacity 0.2s ease"},onMouseEnter:l=>{l.currentTarget.style.opacity="0.9"},onMouseLeave:l=>{l.currentTarget.style.opacity="1"},children:[R.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"#000000",children:R.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),"GitHub"]})]})]})}function vw(){const[h,t]=P.useState(0),i=la();return R.jsxs("div",{style:{position:"relative"},children:[R.jsx(yw,{projects:jm,activeIndex:h,onSelect:t,isMobile:i}),R.jsx(bw,{project:jm[h],isMobile:i})]})}function Aw(){return R.jsxs("div",{className:"app-wrapper",children:[R.jsx(n1,{}),R.jsxs(AA,{children:[R.jsx(Jn,{path:"/",element:R.jsxs("main",{className:"main-content",children:[R.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:0,background:"#000000"}}),R.jsx(a1,{})]})}),R.jsx(Jn,{path:"/about",element:R.jsx(lw,{})}),R.jsx(Jn,{path:"/writing/fiction",element:R.jsx(r1,{})}),R.jsx(Jn,{path:"/writing/academic",element:R.jsx(ow,{})}),R.jsx(Jn,{path:"/design",element:R.jsx(mw,{})}),R.jsx(Jn,{path:"/programming",element:R.jsx(vw,{})})]}),R.jsx(s1,{})]})}function Sw(){const h=iy();return P.useEffect(()=>{const t=sessionStorage.getItem("redirectPath");t&&(sessionStorage.removeItem("redirectPath"),h(t,{replace:!0}))},[h]),null}Ev.createRoot(document.getElementById("root")).render(R.jsx(P.StrictMode,{children:R.jsxs(VA,{children:[R.jsx(Sw,{}),R.jsx(Aw,{})]})}));
